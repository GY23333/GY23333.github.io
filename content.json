{"meta":{"title":"GuoYiçš„åšå®¢","subtitle":"","description":"","author":"GuoYi","url":"https://gy23333.github.io","root":"/"},"pages":[{"title":"æ­Œå•","date":"2020-02-25T11:50:11.000Z","updated":"2024-11-11T03:57:58.104Z","comments":true,"path":"music/index.html","permalink":"https://gy23333.github.io/music/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2019-12-17T03:14:13.000Z","updated":"2024-11-11T03:57:58.133Z","comments":false,"path":"categories/index.html","permalink":"https://gy23333.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-12-17T03:35:54.000Z","updated":"2024-11-11T03:57:58.133Z","comments":false,"path":"tags/index.html","permalink":"https://gy23333.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"tcpdump","slug":"tcpdump","date":"2025-12-15T16:21:33.000Z","updated":"2025-12-15T16:21:33.790Z","comments":true,"path":"2025/12/16/tcpdump/","link":"","permalink":"https://gy23333.github.io/2025/12/16/tcpdump/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"httpsæµé‡æŠ“å–ä¸è§£å¯†","slug":"httpsæµé‡æŠ“å–ä¸è§£å¯†","date":"2025-12-15T16:01:51.000Z","updated":"2025-12-15T16:53:22.561Z","comments":true,"path":"2025/12/16/httpsæµé‡æŠ“å–ä¸è§£å¯†/","link":"","permalink":"https://gy23333.github.io/2025/12/16/https%E6%B5%81%E9%87%8F%E6%8A%93%E5%8F%96%E4%B8%8E%E8%A7%A3%E5%AF%86/","excerpt":"httpsæµé‡æŠ“å–ä¸è§£å¯†","text":"httpsæµé‡æŠ“å–ä¸è§£å¯† ä½¿ç”¨æœåŠ¡å™¨ç§é’¥è§£å¯†æ­¤æ–¹æ³•å±€é™æ€§è¾ƒå¤§ï¼Œä½¿ç”¨äºèƒ½è‡ªå®šä¹‰æœåŠ¡å™¨ä¸”åŠ å¯†ç®€å•çš„æµ‹è¯•åœºæ™¯ã€‚ èƒ½å¤Ÿä½¿ç”¨æœåŠ¡å™¨ç§é’¥è§£å¯†çš„å¿…è¦æ¡ä»¶ï¼š TLSç‰ˆæœ¬å°äºç­‰äº1.2 å¿…é¡»ä½¿ç”¨RSAå¯†é’¥äº¤æ¢ ä¸èƒ½ä½¿ç”¨å‰å‘ä¿å¯† ç®€æ˜“çš„httpsæœåŠ¡å™¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354import http.serverimport sslimport sys# é…ç½®CERT_FILE = 'server.crt'KEY_FILE = 'server.key'PORT = 8443BIND_IP = '0.0.0.0' # ç›‘å¬æ‰€æœ‰IPif len(sys.argv) &gt; 1: PORT = int(sys.argv[1])# ç”Ÿæˆè¯ä¹¦ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰import subprocessimport osif not os.path.exists(CERT_FILE) or not os.path.exists(KEY_FILE): print(\"ç”Ÿæˆè‡ªç­¾åè¯ä¹¦...\") ip_address = input(\"è¯·è¾“å…¥æœåŠ¡å™¨IPåœ°å€ï¼ˆé»˜è®¤ 127.0.0.1ï¼‰: \") or \"127.0.0.1\" # ç”Ÿæˆè¯ä¹¦å‘½ä»¤ subprocess.run([ 'openssl', 'req', '-x509', '-newkey', 'rsa:2048', '-keyout', KEY_FILE, '-out', CERT_FILE, '-days', '365', '-nodes', '-subj', f'/CN=&#123;ip_address&#125;', '-addext', f'subjectAltName=IP:&#123;ip_address&#125;' ], check=False)# å¯åŠ¨HTTPSæœåŠ¡å™¨handler = http.server.SimpleHTTPRequestHandlerhttpd = http.server.HTTPServer((BIND_IP, PORT), handler)# åŒ…è£…ä¸ºHTTPScontext = ssl.SSLContext(ssl.PROTOCOL_TLS_SERVER)context.load_cert_chain(certfile=CERT_FILE, keyfile=KEY_FILE)# ç¦ç”¨å‰å‘åŠ å¯†context.set_ciphers('DEFAULT@SECLEVEL=1:!DHE:!ECDHE')httpd.socket = context.wrap_socket(httpd.socket, server_side=True)print(f\"HTTPSæœåŠ¡å™¨å·²å¯åŠ¨\")print(f\"è®¿é—®åœ°å€: https://127.0.0.1:&#123;PORT&#125;\")print(f\"æˆ–: https://&lt;ä½ çš„IP&gt;:&#123;PORT&#125;\")print(f\"ä½¿ç”¨è¯ä¹¦: &#123;CERT_FILE&#125;\")print(\"æ³¨æ„: è¿™æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œæµè§ˆå™¨ä¼šæ˜¾ç¤ºè­¦å‘Š\")print(\"æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨\")try: httpd.serve_forever()except KeyboardInterrupt: print(\"\\næœåŠ¡å™¨å·²åœæ­¢\") å®¢æˆ·ç«¯1curl -kv https:&#x2F;&#x2F;192.168.139.176:8443 --tls-max 1.2 é™åˆ¶ tls ç‰ˆæœ¬ä¸º 1.2 æŠ“åŒ…æŠ“å–ä¸€æ¬¡è®¿é—®çš„åŒ…åºåˆ—ï¼Œå†™å…¥ pcap ä¸­ 1sudo tcpdump host &lt;å®¢æˆ·ç«¯IP&gt; and port 8443 -w https.pcap è§£æå°† pcap æ–‡ä»¶å¯¼å…¥ wiresharkï¼Œæ­¤æ—¶ https å±‚ä¸ºåŠ å¯†çš„ Application Data å³é”®æ·»åŠ  TLS çš„ RSA keys list å¡«å…¥æœåŠ¡å™¨ IPã€ç«¯å£ã€httpã€æœåŠ¡å™¨ç§é’¥ å¦‚æ­¤ä¾¿å°†ä¹‹å‰çš„ Application Data è§£å¼€å‡ºé‡Œé¢çš„ http åè®®å±‚","categories":[],"tags":[]},{"title":"MacæœåŠ¡å™¨ç¯å¢ƒé…ç½®","slug":"MacæœåŠ¡å™¨ç¯å¢ƒé…ç½®","date":"2025-09-13T12:32:41.000Z","updated":"2025-12-15T15:17:18.558Z","comments":true,"path":"2025/09/13/MacæœåŠ¡å™¨ç¯å¢ƒé…ç½®/","link":"","permalink":"https://gy23333.github.io/2025/09/13/Mac%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","excerpt":"æœåŠ¡å™¨æ­å»ºè®°å½•","text":"æœåŠ¡å™¨æ­å»ºè®°å½• åŸºç¡€ç¯å¢ƒCommand Line ToolsMac çš„å‘½ä»¤è¡Œå¼€å‘è€…åŸºç¡€å·¥å…·åˆé›†ï¼ŒåŒ…æ‹¬ clangã€makeã€gitã€lldbç­‰ç­‰ 1xcode-select --install è¯¥å‘½ä»¤ä¼šè§¦å‘å›¾å½¢åŒ–å®‰è£…ç¨‹åºå¼¹çª—ï¼ˆéœ€ç‚¹å‡»ç¡®è®¤ï¼‰ Homebrewå®˜ç½‘ï¼šhttps://brew.sh/zh-cn/ ä¾èµ– gitï¼Œè¯·å…ˆå®‰è£… Command Line Tools å»ºè®®ä½¿ç”¨å›½å†…é•œåƒå®‰è£… 1&#x2F;bin&#x2F;zsh -c &quot;$(curl -fsSL https:&#x2F;&#x2F;gitee.com&#x2F;cunkai&#x2F;HomebrewCN&#x2F;raw&#x2F;master&#x2F;Homebrew.sh)&quot; å®‰è£…ç»“æŸåï¼Œæ›´æ–°ç¯å¢ƒå˜é‡ 1source &#x2F;Users&#x2F;XXXX&#x2F;.zprofile å·¥å…·htopå¢å¼ºç‰ˆ topï¼Œç”¨äºæŸ¥çœ‹å†…å­˜ 1brew install htop ä½¿ç”¨ htop å‘½ä»¤æŸ¥çœ‹åŠ¨æ€å†…å­˜ä½¿ç”¨æƒ…å†µ ncduç£ç›˜å ç”¨æŸ¥çœ‹å·¥å…· 1brew install ncdu ncdu æŸ¥çœ‹å½“å‰ç›®å½• ncdu &lt;PATH&gt; æŸ¥çœ‹æŒ‡å®šç›®å½• orbstack1brew install orbstack é•œåƒé…ç½® é…ç½® é‡å¯ orbstack DockerNavidrome~/navidrome/docker-compose.yml 123456789101112131415services: navidrome: image: deluan/navidrome:latest platform: linux/amd64 user: 1000:1000 # should be owner of volumes ports: - \"4533:4533\" restart: unless-stopped environment: # Optional: put your config options customization here. Examples: ND_BASEURL: /navidrome ND_LOGLEVEL: debug volumes: - \"./data:/data\" - \"./music:/music:ro\" docker-compose up -d immichApp ä½ç½®ï¼š~/Apps/immich å®‰è£… æ–°å»º App æ–‡ä»¶å¤¹ï¼Œå¦‚ ~/Apps/immich 1mkdir ~&#x2F;Apps&#x2F;immich ä¸‹è½½ docker-compose.yml and example.envï¼ˆé‡å‘½åä¸º .envï¼‰æ”¾åˆ° App æ–‡ä»¶å¤¹ 1wget -O docker-compose.yml https:&#x2F;&#x2F;github.com&#x2F;immich-app&#x2F;immich&#x2F;releases&#x2F;latest&#x2F;download&#x2F;docker-compose.yml 1wget -O .env https:&#x2F;&#x2F;github.com&#x2F;immich-app&#x2F;immich&#x2F;releases&#x2F;latest&#x2F;download&#x2F;example.env ç¯å¢ƒé…ç½®ï¼Œç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®å¦‚ç…§ç‰‡ä¸Šä¼ ä½ç½® 1UPLOAD_LOCATION&#x3D;&#x2F;Volumes&#x2F;Drive-WD&#x2F;immich&#x2F;library å¯åŠ¨å®¹å™¨ 1docker compose up -d å®‰è£…å®Œæˆï¼Œåˆ™å¯ä»é»˜è®¤ 2283 ç«¯å£è®¿é—® ç½‘ç»œNginx åä»£Nginx å®‰è£… å®‰è£… nginx 1brew install nginx å¯åŠ¨ nginx 1brew services start nginx æµ‹è¯•è®¿é—® 1curl -I http:&#x2F;&#x2F;localhost:8080 Nginx é…ç½®/opt/homebrew/etc/nginx 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138#user nobody;worker_processes 1;#error_log logs&#x2F;error.log;#error_log logs&#x2F;error.log notice;#error_log logs&#x2F;error.log info;#pid logs&#x2F;nginx.pid;events &#123; worker_connections 1024;&#125;http &#123; include mime.types; default_type application&#x2F;octet-stream; #log_format main &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39; # &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39; # &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;; #access_log logs&#x2F;access.log main; sendfile on; #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #gzip on; server &#123; listen 8080; server_name localhost; #charset koi8-r; #access_log logs&#x2F;host.access.log main; location &#x2F; &#123; root html; index index.html index.htm; &#125; location ^~ &#x2F;navidrome&#x2F; &#123; proxy_pass http:&#x2F;&#x2F;127.0.0.1:4533&#x2F;navidrome&#x2F;; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Forwarded-Protocol $scheme; proxy_set_header X-Forwarded-Host $http_host; proxy_buffering off; &#125; location ^~ &#x2F;immich&#x2F; &#123; proxy_pass http:&#x2F;&#x2F;127.0.0.1:2283&#x2F;; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Forwarded-Protocol $scheme; proxy_set_header X-Forwarded-Host $http_host; proxy_buffering off; &#125; #error_page 404 &#x2F;404.html; # redirect server error pages to the static page &#x2F;50x.html # error_page 500 502 503 504 &#x2F;50x.html; location &#x3D; &#x2F;50x.html &#123; root html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ &#123; # proxy_pass http:&#x2F;&#x2F;127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME &#x2F;scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache&#39;s document root # concurs with nginx&#39;s one # #location ~ &#x2F;\\.ht &#123; # deny all; #&#125; &#125; # another virtual host using mix of IP-, name-, and port-based configuration # #server &#123; # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location &#x2F; &#123; # root html; # index index.html index.htm; # &#125; #&#125; # HTTPS server # #server &#123; # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location &#x2F; &#123; # root html; # index index.html index.htm; # &#125; #&#125; include servers&#x2F;*;&#125; Caddy åä»£å®‰è£… Caddy1brew install caddy å®‰è£…ç›®å½•ä¸ºä¸‹æ–‡çš„ /opt/homebrew/Cellar/caddy/2.10.0 123456789101112131415161718192021222324252627guoyi@mac-mini ~ % brew install caddy==&gt; Auto-updating Homebrew...Adjust how often this is run with `$HOMEBREW_AUTO_UPDATE_SECS` or disable with`$HOMEBREW_NO_AUTO_UPDATE=1`. Hide these hints with `$HOMEBREW_NO_ENV_HINTS=1` (see `man brew`).==&gt; Fetching downloads for: caddy==&gt; Fetching caddy==&gt; Downloading https://mirrors.aliyun.com/homebrew/homebrew-bottles/caddy-2.10.0.arm64_se################################################################################### 100.0%==&gt; Pouring caddy-2.10.0.arm64_sequoia.bottle.1.tar.gz==&gt; CaveatsWhen running the provided service, caddy's data dir will be set as `/opt/homebrew/var/lib` instead of the default location found at https://caddyserver.com/docs/conventions#data-directoryTo start caddy now and restart at login: brew services start caddyOr, if you don't want/need a background service you can just run: XDG_DATA_HOME=\"/opt/homebrew/var/lib\" HOME=\"/opt/homebrew/var/lib\" /opt/homebrew/opt/caddy/bin/caddy run --config /opt/homebrew/etc/Caddyfile==&gt; SummaryğŸº /opt/homebrew/Cellar/caddy/2.10.0: 39 files, 39.5MB==&gt; Running `brew cleanup caddy`...Disable this behaviour by setting `HOMEBREW_NO_INSTALL_CLEANUP=1`.Hide these hints with `HOMEBREW_NO_ENV_HINTS=1` (see `man brew`).==&gt; No outdated dependents to upgrade!==&gt; Caveatszsh completions have been installed to: /opt/homebrew/share/zsh/site-functions åœ¨å®‰è£…ç›®å½•ä¸‹ï¼Œå³å¯æ‰¾åˆ°ç›¸åº”çš„æœåŠ¡é…ç½® homebrew.mxcl.caddy.plist 1234567891011121314151617181920212223242526272829303132333435363738&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;&lt;plist version=\"1.0\"&gt;&lt;dict&gt; &lt;key&gt;EnvironmentVariables&lt;/key&gt; &lt;dict&gt; &lt;key&gt;HOME&lt;/key&gt; &lt;string&gt;/opt/homebrew/var/lib&lt;/string&gt; &lt;key&gt;XDG_DATA_HOME&lt;/key&gt; &lt;string&gt;/opt/homebrew/var/lib&lt;/string&gt; &lt;/dict&gt; &lt;key&gt;KeepAlive&lt;/key&gt; &lt;true/&gt; &lt;key&gt;Label&lt;/key&gt; &lt;string&gt;homebrew.mxcl.caddy&lt;/string&gt; &lt;key&gt;LimitLoadToSessionType&lt;/key&gt; &lt;array&gt; &lt;string&gt;Aqua&lt;/string&gt; &lt;string&gt;Background&lt;/string&gt; &lt;string&gt;LoginWindow&lt;/string&gt; &lt;string&gt;StandardIO&lt;/string&gt; &lt;string&gt;System&lt;/string&gt; &lt;/array&gt; &lt;key&gt;ProgramArguments&lt;/key&gt; &lt;array&gt; &lt;string&gt;/opt/homebrew/opt/caddy/bin/caddy&lt;/string&gt; &lt;string&gt;run&lt;/string&gt; &lt;string&gt;--config&lt;/string&gt; &lt;string&gt;/opt/homebrew/etc/Caddyfile&lt;/string&gt; &lt;/array&gt; &lt;key&gt;RunAtLoad&lt;/key&gt; &lt;true/&gt; &lt;key&gt;StandardErrorPath&lt;/key&gt; &lt;string&gt;/opt/homebrew/var/log/caddy.log&lt;/string&gt; &lt;key&gt;StandardOutPath&lt;/key&gt; &lt;string&gt;/opt/homebrew/var/log/caddy.log&lt;/string&gt;&lt;/dict&gt;&lt;/plist&gt; æ‰¾åˆ°å…¶ä¸­çš„é»˜è®¤é…ç½®è·¯å¾„ï¼š/opt/homebrew/etc/Caddyfileï¼Œå½“å‰è¿˜æ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œä¹Ÿæ²¡æœ‰å¯åŠ¨æœåŠ¡ï¼Œéœ€è¦ç¼–å†™å®Œé…ç½®æ–‡ä»¶åï¼Œå†å¯åŠ¨æœåŠ¡ Caddyfile é…ç½®æ–‡ä»¶/opt/homebrew/Cellar/caddy/2.10.0 brew services start caddy cpolar å†…ç½‘ç©¿é€macos cpolar ä½¿ç”¨è¯´æ˜ cpolar å®‰è£… å®‰è£… cpolar 1brew tap probezy&#x2F;core &amp;&amp; brew install cpolar Token è®¤è¯ 1cpolar authtoken xxxxxxx å®‰è£… cpolar æœåŠ¡ 1sudo cpolar service install å¯åŠ¨ cpolar æœåŠ¡ 1sudo cpolar service start æœ¬åœ°ç™»å…¥ http://127.0.0.1:9200/ sshè®¾ç½® 22 ç«¯å£ tcp éš§é“å 1ssh &lt;UserName&gt;@3.tcp.cpolar.top -p &lt;Port&gt;","categories":[],"tags":[]},{"title":"navidrome","slug":"navidrome","date":"2025-09-08T05:37:41.000Z","updated":"2025-09-15T18:00:43.817Z","comments":true,"path":"2025/09/08/navidrome/","link":"","permalink":"https://gy23333.github.io/2025/09/08/navidrome/","excerpt":"","text":"~/navidrome/docker-compose.yml 1234567891011121314services: navidrome: image: deluan/navidrome:latest platform: linux/amd64 user: 1000:1000 # should be owner of volumes ports: - \"4533:4533\" restart: unless-stopped environment: # Optional: put your config options customization here. Examples: ND_LOGLEVEL: debug volumes: - \"./data:/data\" - \"./music:/music:ro\" docker-compose up -d https://www.navidrome.org","categories":[],"tags":[]},{"title":"Google Maglev","slug":"Google-Maglev","date":"2025-08-28T17:18:22.000Z","updated":"2025-09-05T05:55:53.956Z","comments":true,"path":"2025/08/29/Google-Maglev/","link":"","permalink":"https://gy23333.github.io/2025/08/29/Google-Maglev/","excerpt":"Google ã€ŠMaglev: A Fast and Reliable Software Network Load Balancerã€‹é˜…è¯»ç¬”è®°ã€‚","text":"Google ã€ŠMaglev: A Fast and Reliable Software Network Load Balancerã€‹é˜…è¯»ç¬”è®°ã€‚ æ‘˜è¦Maglev æ˜¯ Google ä¸€ä¸ªé«˜æ€§èƒ½è½¯ä»¶ç½‘ç»œ LBã€‚ç½‘ç»œè·¯ç”±é€šè¿‡ ECMP å°†æµé‡å¹³å‡åˆ†é…ç»™ Maglev èŠ‚ç‚¹ï¼Œæ¯ä¸ª Maglev èŠ‚ç‚¹å°†åŒ…åŒ¹é…åˆ°å¯¹åº”çš„æœåŠ¡ï¼Œå¹¶å¹³å‡è½¬å‘æœåŠ¡çš„åç«¯ã€‚ Maglev çš„æ ¸å¿ƒç‰¹æ€§æ˜¯ä¸€è‡´æ€§ hash å’Œè¿æ¥è·Ÿè¸ªè¡¨ã€‚ ä»‹ç»ä¼ ç»Ÿçš„ç”±ç¡¬ä»¶å®ç°çš„ LB å­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼š å¯æ‰©å±•æ€§å—åˆ°å•ä¸ªå•å…ƒçš„æœ€å¤§å®¹é‡é™åˆ¶ï¼Œæ— æ³•è·Ÿä¸Šä¸šåŠ¡æµé‡çš„å¢é•¿ æ— æ³•é«˜å¯ç”¨ï¼Œè™½ç„¶éƒ¨ç½²æ—¶ä¼šåšä¸»å¤‡ï¼Œä½†ä»…èƒ½æä¾› 1+1å†—ä½™ å‚è€ƒ Maglev: A Fast and Reliable Software Network Load Balancer","categories":[],"tags":[]},{"title":"Go å•å…ƒæµ‹è¯•","slug":"Go-å•å…ƒæµ‹è¯•","date":"2025-08-20T15:32:06.000Z","updated":"2025-08-20T18:46:10.282Z","comments":true,"path":"2025/08/20/Go-å•å…ƒæµ‹è¯•/","link":"","permalink":"https://gy23333.github.io/2025/08/20/Go-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/","excerpt":"Go å•å…ƒæµ‹è¯•","text":"Go å•å…ƒæµ‹è¯• init å‡½æ•°testify æ–­è¨€åº“å®‰è£… 12go get github.com&#x2F;stretchr&#x2F;testify&#x2F;assertgo get github.com&#x2F;stretchr&#x2F;testify&#x2F;require assert VS requireTable Driven Unit Testå¤šç”¨ä¾‹åœºæ™¯æ¨èä½¿ç”¨ Table Driven Unit Testã€‚ 123456789101112131415161718192021222324252627func TestFunctionUnderTest(t *testing.T) &#123; testCases := []struct &#123; name string input string expect string wantErr bool errContains string &#125;&#123; &#123;name1, input1, expect1, wantErr1, errContains1&#125;, &#123;name2, input2, expect2, wantErr2, errContains2&#125;, &#123;name3, input3, expect3, wantErr3, errContains3&#125;, &#125; for _, tt := range testCases &#123; tt := tt //å¦‚æœéœ€è¦å­ç”¨ä¾‹é—´å¹¶å‘ï¼Œåˆ™åŠ ä¸Šè¿™ä¸¤è¡Œï¼ˆå±€éƒ¨å˜é‡å‰¯æœ¬ä¿è¯å®‰å…¨å¹¶å‘ï¼‰ t.Run(tt.name, func(t *testing.T) &#123; t.Parallel() //å¦‚æœéœ€è¦å­ç”¨ä¾‹é—´å¹¶å‘ï¼Œåˆ™åŠ ä¸Šè¿™ä¸¤è¡Œ actual, err := FunctionUnderTest(tt.input) if tt.wantErr &#123; require.ErrorContains(t, err, tt.errContains) assert.Nil(t, actual) &#125; else &#123; compareFunction(t, tt.expect, actual) &#125; &#125;) &#125;&#125;","categories":[],"tags":[]},{"title":"Goè¿æ¥æ± ","slug":"Goè¿æ¥æ± ","date":"2025-07-10T17:31:10.000Z","updated":"2025-07-10T17:35:00.326Z","comments":true,"path":"2025/07/11/Goè¿æ¥æ± /","link":"","permalink":"https://gy23333.github.io/2025/07/11/Go%E8%BF%9E%E6%8E%A5%E6%B1%A0/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"DPDK Exception path æ–¹æ¡ˆï¼šVirtio-user","slug":"DPDK-Exception-path-æ–¹æ¡ˆï¼šVirtio-user","date":"2025-04-24T16:27:50.000Z","updated":"2025-09-05T05:24:38.077Z","comments":true,"path":"2025/04/25/DPDK-Exception-path-æ–¹æ¡ˆï¼šVirtio-user/","link":"","permalink":"https://gy23333.github.io/2025/04/25/DPDK-Exception-path-%E6%96%B9%E6%A1%88%EF%BC%9AVirtio-user/","excerpt":"DPDK ä½œä¸ºæ—è·¯å†…æ ¸æ–¹æ¡ˆï¼Œå…¶æ¥å—å’Œè½¬å‘çš„åŒ…å¯ä»¥ä¸ç»è¿‡å†…æ ¸è¿›è¡Œé«˜é€Ÿè½¬å‘ï¼Œä½†å…¶ä¸­å¯èƒ½å­˜åœ¨éƒ¨åˆ†â€œå¼‚å¸¸â€çš„åŒ…ï¼ˆæ¯”å¦‚å‘ç»™è¯¥èŠ‚ç‚¹æœ¬èº«çš„åŒ…ï¼‰ä¸éœ€è¦è½¬å‘ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡å†…æ ¸å¤„ç†ï¼Œè¿™å°±æ˜¯ Exception pathï¼Œvirtio-user åˆ™å®ç° Exception path çš„æ–¹æ¡ˆä¹‹ä¸€ã€‚","text":"DPDK ä½œä¸ºæ—è·¯å†…æ ¸æ–¹æ¡ˆï¼Œå…¶æ¥å—å’Œè½¬å‘çš„åŒ…å¯ä»¥ä¸ç»è¿‡å†…æ ¸è¿›è¡Œé«˜é€Ÿè½¬å‘ï¼Œä½†å…¶ä¸­å¯èƒ½å­˜åœ¨éƒ¨åˆ†â€œå¼‚å¸¸â€çš„åŒ…ï¼ˆæ¯”å¦‚å‘ç»™è¯¥èŠ‚ç‚¹æœ¬èº«çš„åŒ…ï¼‰ä¸éœ€è¦è½¬å‘ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡å†…æ ¸å¤„ç†ï¼Œè¿™å°±æ˜¯ Exception pathï¼Œvirtio-user åˆ™å®ç° Exception path çš„æ–¹æ¡ˆä¹‹ä¸€ã€‚ Virtio-userVirtio-user ä¸€ç³»åˆ—æ¦‚å¿µåŸæœ¬æ˜¯ç”¨æ¥å¤„ç†è™šæ‹Ÿæœºä¸ä¸»æœºä¹‹é—´çš„ I/Oã€‚ virtioï¼šå³ virtual I/Oï¼Œç”¨äºè™šæ‹Ÿæœºå’Œä¸»æœºé—´é«˜é€Ÿ I/O æ“ä½œçš„å¼€æ”¾æ ‡å‡†ã€‚ vhostï¼šä¸»æœºä¸­åŠ é€Ÿ virtio çš„åç«¯é©±åŠ¨å®ç°æ–¹æ¡ˆã€‚æœ€åˆ virtio åœ¨ä¸»æœºä¸­çš„åç«¯å¤„ç†ç”± QEMU è¿›ç¨‹å®ç°ï¼Œåå‡çº§ä¸º vhost åŠ é€Ÿæ–¹æ¡ˆï¼Œvhost åˆåˆ†ä¸ºå†…æ ¸æ€çš„ vhost-net å’Œåœ¨ç”¨æˆ·æ€çš„ vhost-userã€‚ virtio-netï¼šåœ¨è™šæ‹Ÿæœºå†…éƒ¨çš„å‰ç«¯é©±åŠ¨ï¼Œéµå¾ª virtio æ ‡å‡†æ”¶å‘ç½‘ç»œåŒ…ï¼Œéœ€è¦ä¸»æœºæœ‰å¯¹åº”çš„åç«¯æ¥é…åˆã€‚ vhost-netï¼šåœ¨ä¸»æœºçš„å†…æ ¸ç©ºé—´çš„åç«¯é©±åŠ¨ï¼Œå¯ä»¥å¤„ç†æ¥è‡ªè™šæ‹Ÿæœº virtio-net çš„åŒ…ï¼Œå¹¶å°†åŒ…äº¤ç»™å†…æ ¸ç½‘ç»œåè®®æ ˆã€‚ vhost-userï¼šåœ¨ä¸»æœºçš„ç”¨æˆ·ç©ºé—´çš„åç«¯è§„èŒƒï¼Œè§„å®šäº†å¦‚ä½•ç»•è¿‡å†…æ ¸ï¼Œé€šè¿‡ç”¨æˆ·æ€åº”ç”¨ï¼ˆå¦‚ OVS-DPDKï¼‰æ¥å®ç°ä¸€ä¸ªåç«¯é©±åŠ¨ï¼Œç”¨æ¥å¤„ç†æ¥è‡ªè™šæ‹Ÿæœº virtio-net çš„åŒ… virtio-userï¼šDPDK å¯¹ virtio-net çš„å…·ä½“å®ç°çš„åç«¯é©±åŠ¨ï¼Œåœ¨ä¸»æœºçš„ç”¨æˆ·ç©ºé—´ï¼Œå¦‚é€šè¿‡ DPDK åˆ›å»ºç«¯å£ä¸è™šæ‹Ÿæœºé€šä¿¡ä½¿ç”¨çš„å°±æ˜¯è¿™ç§é©±åŠ¨ã€‚ ç”±æ­¤ä¾¿æœ‰äº†è™šæ‹Ÿæœºä¸ä¸»æœºä¹‹é—´çš„ I/O çš„ä¸‰ç§åç«¯è·¯å¾„ï¼š ä¼ ç»Ÿçš„ QEMU è¿›ç¨‹ï¼šé€Ÿåº¦å¾ˆæ…¢ å†…æ ¸æ€çš„ vhost-net åç«¯é©±åŠ¨ï¼šé€Ÿåº¦å¿«äº QEMU ç”¨æˆ·æ€åŸºäº vhost-user åè®®çš„ virtio-user åç«¯é©±åŠ¨ï¼šé€Ÿåº¦æœ€å¿« DPDK Exception Path â€” Virtio_userVirtio_userï¼Œä½œä¸ºè™šæ‹Ÿè®¾å¤‡ï¼ŒåŸæœ¬æ˜¯ä¸ vhost-user åç«¯ï¼ˆå¦ä¸€ä¸ªè¿›ç¨‹ï¼‰ä¸€èµ·ä½œä¸º IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰ å’Œç”¨æˆ·ç©ºé—´å®¹å™¨ç½‘ç»œçš„é«˜æ€§èƒ½è§£å†³æ–¹æ¡ˆã€‚ä½†åœ¨ Exception Path ä¸­ï¼Œå…¶èˆå¼ƒäº† vhost-user åç«¯ï¼Œè€Œæ˜¯ä¸ vhost-net è¿›è¡Œé€šä¿¡ï¼Œä»è€Œå°†åŒ…è½¬å…¥å†…æ ¸ã€‚ ä¸‹å›¾å±•ç¤ºäº† Virtio_user ä½œä¸º DPDK Exception Path çš„æ¶æ„ã€‚ å›¾ä¸­å…±æœ‰ä¸¤æ¡åŒ…è·¯å¾„ï¼š Fast Path (NIC &lt;-&gt; other PMDs &lt;-&gt; ETHFEV API &lt;-&gt;)ï¼šåŒ…çš„å¿«é€Ÿè½¬å‘è·¯å¾„ï¼Œ çº¯ç”¨æˆ·æ€è½¬å‘ï¼ŒåŒ…ä»ç½‘å¡é€šè¿‡å„ç§ DPDK çš„ PMD é©±åŠ¨æ”¶å‘ï¼ŒDPDK åº”ç”¨é€šè¿‡è°ƒç”¨å¦‚ rte_eth_rx_burst()å’Œ rte_eth_tx_burst() ç­‰ ETHDEV API æ¥ä¸ PMD é©±åŠ¨äº¤äº’ï¼Œå®ç°åŒ…å¤„ç†åï¼Œä¸ç»å†…æ ¸ï¼Œå¿«é€Ÿè½¬å‡º Exception Path (NIC -&gt; other PMDs -&gt; ETHFEV API -&gt; ... -&gt; ETHFEV API -&gt; virtio PMD -&gt; tap -&gt; kernel network stack)ï¼šåŒ…çš„å¼‚å¸¸è·¯å¾„ DPDK -&gt; å†…æ ¸ï¼ˆå‘é€è·¯å¾„ï¼‰ DPDK åº”ç”¨è°ƒç”¨ rte_eth_tx_burst(virtio_user0, ...) æ§åˆ¶ PMD é©±åŠ¨ virtio PMD é©±åŠ¨å°†åŒ…é€šè¿‡ vhost åè®®ï¼Œå°†æ•°æ®åŒ…ç»è¿‡ /dev/vhost-net æ–‡ä»¶äº¤ç»™å†…æ ¸çš„ vhost-net é©±åŠ¨ vhost-net é©±åŠ¨å°†åŒ…å†™å…¥ tap è®¾å¤‡ å†…æ ¸ç½‘ç»œåè®®æ ˆä¸­ tap è®¾å¤‡ä¸­è¯»åˆ°åŒ…ï¼Œå¼€å§‹å¤„ç† å†…æ ¸ -&gt; DPDKï¼ˆæ¥æ”¶è·¯å¾„ï¼‰ å†…æ ¸ç½‘ç»œåè®®æ ˆå†³å®šå‘ä¸€ä¸ªåŒ…ï¼Œå°†åŒ…å†™å…¥ tap è®¾å¤‡ vhost-net é©±åŠ¨ä» tap è®¾å¤‡æŠ“å–åŒ… vhost-net é©±åŠ¨é€šè¿‡ vhost åè®®å’Œå…±äº«å†…å­˜ï¼Œå°†åŒ…æ”¾åˆ° virtio_user0 çš„æ¥å—é˜Ÿåˆ— DPDK åº”ç”¨è°ƒç”¨ rte_eth_rx_burst(virtio_user0, ...) ä» virtio_user0 çš„æ¥å—é˜Ÿåˆ—æ”¶åŒ… DPDK é€šè¿‡ä¸‹é¢ä»£ç ç¤ºä¾‹æ¥åˆ›å»º virtio_user ç«¯å£ 1rte_eal_hotplug_add(\"vdev\", \"virtio_user0\", \"path=/dev/vhost-net\"); rte_eal_hotplug_add å‡½æ•°ç”¨äºåŠ¨æ€æ·»åŠ ä¸€ä¸ªè®¾å¤‡ vdev æŒ‡è¿™ä¸ªè®¾å¤‡çš„ç±»å‹æ˜¯è™šæ‹Ÿè®¾å¤‡ï¼ˆVirtual Deviceï¼‰ï¼Œè€Œä¸æ˜¯ç‰©ç† PCI è®¾å¤‡ virtio_user0 æŒ‡å®šè®¾å¤‡åç§°ï¼Œå¯¹åº”å›¾ä¸­çš„ virtio PMDï¼Œä¹‹å DPDK å°±å¯é€šè¿‡rte_eth_tx_burst(virtio_user0, ...) å’Œ rte_eth_rx_burst(virtio_user0, ...) æ¥æ“ä½œè¿™ä¸ªç«¯å£ path=/dev/vhost-net æŒ‡å®šçš„è®¾å¤‡çš„åç«¯è·¯å¾„ï¼Œå³ä½¿ç”¨ vhost-net å†…æ ¸é©±åŠ¨ä¸å†…æ ¸äº¤äº’ï¼Œå¯¹åº”äº†å›¾ä¸­çš„å¯¹ vhost.koï¼ˆvhost-net çš„å†…æ ¸æ¨¡å—ï¼‰çš„ç”¨æˆ·æ€ vhost adapter é€‚é…è¡Œä¸º æ­¤å¤„æ·»åŠ çš„ virtio_user0 è™šæ‹Ÿè®¾å¤‡å¹¶é Linux å†…æ ¸çš„è™šæ‹Ÿç½‘å¡ tapï¼Œè¯¥ virtio_user0 æ˜¯ç”¨æˆ·æ€çš„ DPDK çš„ virtio PMD çš„ä¸€ä¸ªè™šæ‹Ÿç«¯å£ï¼Œtap æ˜¯ä¸ä¹‹åœ¨å†…æ ¸å¯¹åº”çš„é‚£ç§è™šæ‹Ÿç½‘å¡ï¼Œå¯ä»¥åŒæ ·å‘½åä¸º virtio_user0ï¼Œä½†ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚ Virtio-user Exception Path ç¤ºä¾‹ DPDK ä»ç‰©ç†ç½‘å¡çš„ RX å–ä¸‹åŒ… DPDK åˆ¤æ–­æ”¶åŒ…æ˜¯å¦èµ° Exception Path å¦‚æœæ˜¯èµ° Exception Path çš„åŒ…ï¼ŒDPDK å°†å…¶æ”¾åˆ° EP ring ä¸­ï¼Œä¹‹åç»Ÿä¸€å‘åˆ° virtio_user0 çš„ TXï¼ˆæ¨èä½¿ç”¨ä¸€ä¸ª ring æ¥ä½œä¸ºä¸­é—´ç¼“å†²ï¼‰ virtio_user0 é€šè¿‡ vhost-net å°†åŒ…å‘åˆ°å†…æ ¸åè®®æ ˆï¼Œæœ€åäº¤ç»™ç›¸åº”ç”¨æˆ·æ€è¿›ç¨‹ ç”¨æˆ·æ€è¿›ç¨‹æ”¶åŒ…åï¼Œå°†å“åº”çš„å›åŒ…äº¤ç»™å†…æ ¸åè®®æ ˆ vhost-net å°†å›åŒ…æ”¾åˆ° virtio_user0 çš„ RX DPDK ä» virtio_user0 çš„ RX æ”¶åŒ…ï¼Œå¹¶é€šè¿‡ç‰©ç†ç½‘å¡çš„ TX å‘å‡º æ³¨ï¼šRXã€TX éƒ½æ˜¯ç›¸å¯¹ DPDK è€Œè¨€çš„ å‚è€ƒ Virtio_user as Exception Path","categories":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/categories/DPDK/"}],"tags":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/tags/DPDK/"}]},{"title":"NUMA éä¸€è‡´æ€§å†…å­˜è®¿é—®","slug":"NUMA-éä¸€è‡´æ€§å†…å­˜è®¿é—®","date":"2025-04-17T15:46:48.000Z","updated":"2025-04-24T16:28:38.450Z","comments":true,"path":"2025/04/17/NUMA-éä¸€è‡´æ€§å†…å­˜è®¿é—®/","link":"","permalink":"https://gy23333.github.io/2025/04/17/NUMA-%E9%9D%9E%E4%B8%80%E8%87%B4%E6%80%A7%E5%86%85%E5%AD%98%E8%AE%BF%E9%97%AE/","excerpt":"NUMAï¼ˆNon-Uniform Memory Accessï¼Œéä¸€è‡´æ€§å†…å­˜è®¿é—®ï¼‰æ˜¯ä¸€ç§å¤š CPU è®¡ç®—æœºæ¶æ„ã€‚éä¸€è‡´æ€§ï¼Œè¡¨ç¤º CPU è®¿é—®ä¸åŒå†…å­˜çš„æ˜¯æ—¶é—´ä¸Šçš„ä¸ä¸€è‡´ï¼Œè®¿é—®æœ¬åœ°å†…å­˜å¿«äºéæœ¬åœ°å†…å­˜ã€‚","text":"NUMAï¼ˆNon-Uniform Memory Accessï¼Œéä¸€è‡´æ€§å†…å­˜è®¿é—®ï¼‰æ˜¯ä¸€ç§å¤š CPU è®¡ç®—æœºæ¶æ„ã€‚éä¸€è‡´æ€§ï¼Œè¡¨ç¤º CPU è®¿é—®ä¸åŒå†…å­˜çš„æ˜¯æ—¶é—´ä¸Šçš„ä¸ä¸€è‡´ï¼Œè®¿é—®æœ¬åœ°å†…å­˜å¿«äºéæœ¬åœ°å†…å­˜ã€‚ èƒŒæ™¯æ—©æœŸå¤š CPU è®¿é—®å†…å­˜é‡‡ç”¨ SMP ï¼ˆSymmetric Multi-Processorï¼‰æ¶æ„ï¼Œå³ï¼šæ‰€æœ‰ CPU é€šè¿‡åŒä¸€æ¡æ€»çº¿å…±äº«è®¿é—®ç›¸åŒçš„å†…å­˜ï¼Œæ‰€æœ‰ CPU è®¿é—®å†…å­˜çš„é€Ÿåº¦éƒ½æ˜¯ç›¸åŒçš„ã€‚ ä½†éšç€ CPU æ•°é‡çš„å¢åŠ ï¼Œä½¿ç”¨ç›¸åŒæ€»çº¿å’Œèµ„æºå¿…ç„¶å¯¼è‡´è®¿é—®å†²çªï¼Œä»è€Œé€ æˆ CPU åˆ©ç”¨ç‡é™ä½ã€‚ NUMANUMAï¼ˆNon-Uniform Memory Accessï¼Œéä¸€è‡´æ€§å†…å­˜è®¿é—®ï¼‰å°† CPU åˆ’åˆ†åˆ°å¤šä¸ª NUMA Nodeï¼Œæ¯ä¸ª Node éƒ½æœ‰ç‹¬ç«‹çš„ Bus å’Œ Memoryã€‚Node ä¹‹é—´é€šè¿‡ QPI æ€»çº¿ï¼ˆé«˜é€Ÿäº’è”æ€»çº¿ï¼‰äº’é€šã€‚ CPU è®¿é—®ä¸åŒçš„ Memory é€Ÿåº¦ä¸åŒï¼Œè®¿é—®æœ¬åœ° Memory çš„é€Ÿåº¦å¿«äºéæœ¬åœ° Memoryã€‚ SocketSocket æ˜¯ CPU çš„ç‰©ç†æ’æ§½ï¼Œä¸€ä¸ª Socket å¯ä»¥æ’å…¥å¤šä¸ª CPUï¼Œé€šå¸¸ä¸€ä¸ª Socket å°±æ˜¯ä¸€ä¸ª NUMA Nodeã€‚ æŸ¥çœ‹å‘½ä»¤ æŸ¥çœ‹ CPU ç›¸å…³ä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536373839404142root@ubuntu2404:/# lscpuArchitecture: aarch64 CPU op-mode(s): 64-bit Byte Order: Little EndianCPU(s): 3 On-line CPU(s) list: 0-2Vendor ID: Apple BIOS Vendor ID: Apple Model name: - BIOS Model name: Apple silicon CPU @ 0.0GHz BIOS CPU family: 280 Model: 0 Thread(s) per core: 1 Core(s) per socket: 3 # æ¯ä¸ª socket é‡Œæœ‰ 3 ä¸ª CPU Socket(s): 1 # ä¸€å…± 1 ä¸ª socket Stepping: 0x0 BogoMIPS: 48.00 Flags: fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp asimdhp cpuid asimdrdm jscvt fcma lrcpc dcpop s ha3 asimddp sha512 asimdfhm dit uscat ilrcpc flagm sb paca pacg dcpodp sve2 flagm2 frint svei8mm svebf1 6 smei16i64 smef64f64 smei8i32 smef16f32 smeb16f32 smef32f32 sme2 smei16i32 smebi32i32Caches (sum of all): L1d: 384 KiB (3 instances) L1i: 576 KiB (3 instances) L2: 48 MiB (3 instances)NUMA: NUMA node(s): 1 # ä¸€å…± 1 ä¸ª NUMA node NUMA node0 CPU(s): 0-2 # 0ï½2 å· CPU åœ¨ NUMA node0 ä¸­Vulnerabilities: Gather data sampling: Not affected Itlb multihit: Not affected L1tf: Not affected Mds: Not affected Meltdown: Not affected Mmio stale data: Not affected Reg file data sampling: Not affected Retbleed: Not affected Spec rstack overflow: Not affected Spec store bypass: Vulnerable Spectre v1: Mitigation; __user pointer sanitization Spectre v2: Not affected Srbds: Not affected Tsx async abort: Not affected æŸ¥çœ‹ NUMA ä¿¡æ¯ 12345678root@ubuntu2404:/# numactl --hardwareavailable: 1 nodes (0)node 0 cpus: 0 1 2node 0 size: 3902 MBnode 0 free: 72 MBnode distances:node 0 0: 10 æŸ¥çœ‹ CPU ä»¥åŠå…¶å¯¹åº”çš„ NODEã€SOCKETã€CORE 12345678root@ubuntu2404:/# lscpu -p=CPU,NODE,SOCKET,CORE# The following is the parsable format, which can be fed to other# programs. Each different item in every column has an unique ID# starting usually from zero.# CPU,Node,Socket,Core0,0,0,0 # é€»è¾‘CPU0 -&gt; NUMA node0 -&gt; Socket0 -&gt; ç‰©ç†æ ¸å¿ƒ01,0,0,12,0,0,2","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://gy23333.github.io/tags/Linux/"}]},{"title":"DPDK å†…å­˜ç®¡ç†","slug":"DPDK-å†…å­˜ç®¡ç†","date":"2025-04-17T15:32:38.000Z","updated":"2025-07-10T17:58:44.551Z","comments":true,"path":"2025/04/17/DPDK-å†…å­˜ç®¡ç†/","link":"","permalink":"https://gy23333.github.io/2025/04/17/DPDK-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","excerpt":"","text":"rte_mempool","categories":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/categories/DPDK/"}],"tags":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/tags/DPDK/"}]},{"title":"DPDK example: å‘½ä»¤è¡Œå‚æ•°è§£æ","slug":"DPDK-example-å‘½ä»¤è¡Œå‚æ•°è§£æ","date":"2025-04-13T18:05:33.000Z","updated":"2025-04-23T13:35:03.842Z","comments":true,"path":"2025/04/14/DPDK-example-å‘½ä»¤è¡Œå‚æ•°è§£æ/","link":"","permalink":"https://gy23333.github.io/2025/04/14/DPDK-example-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90/","excerpt":"DPDK example: å‘½ä»¤è¡Œå‚æ•°è§£æ","text":"DPDK example: å‘½ä»¤è¡Œå‚æ•°è§£æ å‚æ•°è¯»å–åˆå§‹åŒ– EALï¼Œå¹¶è·å–å‰©ä½™å‚æ•°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117#include &lt;stdlib.h&gt;#include &lt;getopt.h&gt;#include &lt;stdio.h&gt;#include &lt;errno.h&gt;#include &lt;rte_eal.h&gt;#include &lt;rte_common.h&gt;typedef struct cfgs &#123; uint32_t num; char *string; bool mode;&#125; cfgs_t;enum &#123; CMD_OPT_NUM = 1, CMD_OPT_STRING, CMD_OPT_MODE,&#125;;static struct option long_options[] = &#123; &#123;\"help\", no_argument, NULL, 'h'&#125;, &#123;\"num\", required_argument, NULL, CMD_OPT_NUM&#125;, &#123;\"string\", required_argument, NULL, CMD_OPT_STRING&#125;, &#123;\"mode\", no_argument, NULL, CMD_OPT_MODE&#125;, &#123;0,0,0,0&#125;&#125;;static void print_usage(const char *prgname)&#123; printf(\"%s [OPTIONS]\\n\", prgname); printf(\"--help Help\\n\"); printf(\"--num &lt;uint32&gt; Num\\n\"); printf(\"--string &lt;string&gt; String\\n\"); printf(\"--mode Mode\\n\");&#125;bool str_to_uint32(const char *str, uint32_t *num) &#123; char *endptr; errno = 0; unsigned long val = strtoul(str, &amp;endptr, 10); if (errno != 0 || *endptr != '\\0' || val &gt; UINT32_MAX) &#123; return false; &#125; *num = (uint32_t)val; return true;&#125;static uint32_t parse_num(const char *arg) &#123; uint32_t value; if (str_to_uint32(arg, &amp;value)) &#123; return value; &#125; rte_exit(EXIT_FAILURE, \"Failed to parse num\\n\");&#125;static cfgs_t parse_args(int argc, char **argv) &#123; cfgs_t cfgs; char *prgname = argv[0]; // è®¾ç½®é»˜è®¤å€¼ cfgs.num = 0; cfgs.string = NULL; cfgs.mode = false; int option_id; while ((option_id = getopt_long_only(argc, argv, \"h\", long_options, NULL)) != -1) &#123; switch (option_id) &#123; case 'h': print_usage(prgname); rte_exit(EXIT_SUCCESS, \"Exit APP\\n\"); case CMD_OPT_NUM: cfgs.num = parse_num(optarg); break; case CMD_OPT_STRING: cfgs.string = optarg; break; case CMD_OPT_MODE: cfgs.mode = true; break; default: print_usage(prgname); rte_exit(EXIT_FAILURE, \"Invalid command line parameter\\n\"); &#125; &#125; return cfgs;&#125;int main(int argc, char **argv)&#123; // åˆå§‹åŒ–EAL int ret; ret = rte_eal_init(argc, argv); if (ret &lt; 0) &#123; rte_exit(EXIT_FAILURE, \"Failed to init eal\"); &#125; // å»é™¤æ‰è¢«EALä½¿ç”¨äº†çš„å‚æ•° argc -= ret; argv += ret; // è§£æå…¶ä»–å‚æ•° cfgs_t cfgs = parse_args(argc, argv); printf(\"num: %d\\n\", cfgs.num); printf(\"string: %s\\n\", cfgs.string); printf(\"mode: %d\\n\", cfgs.mode); printf(\"Finished initiation\\n\");&#125; è¿è¡Œ 12345678910root@ubuntu2404:/home/guoyi/dpdk-stable-24.11.1/build# ./examples/dpdk-playground -- --num 1 --string \"abd\" --modeEAL: Detected CPU lcores: 3EAL: Detected NUMA nodes: 1EAL: Detected static linkage of DPDKEAL: Multi-process socket /var/run/dpdk/rte/mp_socketEAL: Selected IOVA mode 'PA'num: 1string: abdmode: 1Finished initiation","categories":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/categories/DPDK/"}],"tags":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/tags/DPDK/"}]},{"title":"Meson æ„å»ºç³»ç»Ÿ","slug":"Meson-æ„å»ºç³»ç»Ÿ","date":"2025-04-13T17:51:08.000Z","updated":"2025-04-15T17:16:48.656Z","comments":true,"path":"2025/04/14/Meson-æ„å»ºç³»ç»Ÿ/","link":"","permalink":"https://gy23333.github.io/2025/04/14/Meson-%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"å‚è€ƒ Meson å®˜æ–¹æ–‡æ¡£","categories":[{"name":"C/C++","slug":"C-C","permalink":"https://gy23333.github.io/categories/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://gy23333.github.io/tags/C-C/"},{"name":"Meson","slug":"Meson","permalink":"https://gy23333.github.io/tags/Meson/"}]},{"title":"C getopt å‘½ä»¤è¡Œå‚æ•°è§£æ","slug":"C-getopt-å‘½ä»¤è¡Œå‚æ•°è§£æ","date":"2025-04-13T06:37:34.000Z","updated":"2025-04-13T13:17:30.891Z","comments":true,"path":"2025/04/13/C-getopt-å‘½ä»¤è¡Œå‚æ•°è§£æ/","link":"","permalink":"https://gy23333.github.io/2025/04/13/C-getopt-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90/","excerpt":"ä½¿ç”¨ getopt_long_only() è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚","text":"ä½¿ç”¨ getopt_long_only() è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚ é€‰é¡¹è®¾ç½®shortopts çŸ­é€‰é¡¹å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šå¯æ¥å—çš„çŸ­é€‰é¡¹ã€‚ å•ä¸ªå­—ç¬¦ï¼šä¸å¸¦å‚æ•°çš„é€‰é¡¹ å•ä¸ªå­—ç¬¦ + :ï¼šå¸¦å‚æ•°çš„é€‰é¡¹ å•ä¸ªå­—ç¬¦ + ::ï¼šå¯å¸¦ä¹Ÿå¯ä¸å¸¦å‚æ•°çš„é€‰é¡¹ å¦‚ abï¼š æ”¯æŒä¸¤ä¸ªå•é€‰é¡¹ -aã€-bï¼Œä¸”ä¸å¸¦å‚æ•° a:bï¼šæ”¯æŒä¸€ä¸ªå¸¦å‚æ•°çš„é€‰é¡¹ -a value å’Œä¸€ä¸ªä¸å¸¦å‚æ•°çš„é€‰é¡¹ -b a::bï¼šæ”¯æŒä¸€ä¸ªå¯å¸¦å¯ä¸å¸¦å‚æ•°çš„é€‰é¡¹ -aã€ -a value å’Œä¸€ä¸ªä¸å¸¦å‚æ•°çš„é€‰é¡¹ -b longopts é•¿é€‰é¡¹option çš„æ•°ç»„ï¼ŒæŒ‡å®šå¯æ¥å—çš„é•¿é€‰é¡¹ã€‚éœ€ä»¥ {0,0,0,0} ç»“å°¾ä½œä¸ºç»“æŸçš„æ ‡å¿—ã€‚ 123456789struct option&#123; const char *name; /* has_arg can't be an enum because some compilers complain about type mismatches in all the code that assumes it is an int. */ int has_arg; int *flag; int val;&#125;; nameï¼šé•¿é€‰é¡¹å has_argï¼šæ˜¯å¦éœ€è¦å‚æ•° 123#define no_argument 0 //ä¸éœ€è¦å‚æ•°#define required_argument 1 //å¿…é€‰å‚æ•°#define optional_argument 2 //å¯é€‰å‚æ•° flagï¼šè®¾ç½®ç»“æœå­˜å‚¨æ–¹å¼ é NULL æ—¶ï¼Œè§£æåˆ°è¿™ä¸ªé•¿é€‰é¡¹æ—¶ä¼šæŠŠ val å€¼æ”¾å…¥å…¶æŒ‡å‘çš„å†…å­˜ å¦‚æœä¸éœ€è¦ï¼Œåˆ™è®¾ç½®ä¸º NULL valï¼šè§£æè¿”å›å€¼ï¼ˆflag ä¸º NULL ï¼‰ï¼Œæˆ–è€…è¦è®¾ç½®çš„å€¼ï¼ˆflag ä¸ä¸º NULL ï¼‰ flag ä¸º NULL æ—¶ï¼Œä¸º getopt_long_only() è§£æé€‰é¡¹çš„è¿”å›å€¼ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„é€‰é¡¹ï¼Œä¸€èˆ¬ç»™ä¸åŒçš„é€‰é¡¹è®¾ç½®ä¸åŒçš„ val ä½œä¸º IDã€‚ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå¯¹åº”çŸ­é€‰é¡¹çš„å­—ç¬¦ï¼Œç”¨æ¥åŒ¹é…é•¿é€‰é¡¹å’ŒçŸ­é€‰é¡¹ flag ä¸ä¸º NULL æ—¶ï¼ŒæŠŠ val å€¼æ”¾å…¥å…¶æŒ‡å‘çš„å†…å­˜ getopt_long_only()è§£æä¸€ä¸ª optionï¼Œè¿”å›è¯¥ option çš„ idï¼Œå¹¶å°†è¿™ä¸ª option çš„å€¼å­˜å…¥ optarg ä¸­ã€‚ 123#include &lt;getopt.h&gt;int getopt_long_only(int ___argc, char *const *___argv, const char *__shortopts, const struct option *__longopts, int *__longind) è¾“å…¥å‚æ•°ï¼š argcã€argvï¼šä¸»å‡½æ•°å‚æ•° shortoptsï¼šçŸ­é€‰é¡¹å­—ç¬¦ä¸² longoptsï¼šé•¿é€‰é¡¹ç»“æ„ä½“æ•°ç»„ longindï¼šè¿”å›é•¿é€‰é¡¹åœ¨ longopts ä¸­çš„ç´¢å¼•å€¼ã€‚ä¸€èˆ¬åªç”¨äºè°ƒè¯•ï¼Œæ­£å¸¸æƒ…å†µè¾“å…¥ NULL å³å¯ã€‚ è¿”å›å€¼ï¼š è¿”å›è§£æçš„è¿™ä¸ª option çš„ id å¦‚æœè¿™ä¸ª option æ˜¯çŸ­é€‰é¡¹ï¼Œè¿”å›è¯¥çŸ­é€‰é¡¹çš„å­—ç¬¦ å¦‚æœè¿™ä¸ª option æ˜¯é•¿é€‰é¡¹ å¦‚æœ flag ä¸º NULLï¼Œåˆ™è¿”å› val å€¼ å¦‚æœ flag ä¸ä¸º NULLï¼Œåˆ™è¿”å› 0ï¼Œå¹¶å°† val å€¼æ”¾å…¥ flag æŒ‡é’ˆä¸­ è§£æå®Œæ¯•ï¼Œè¿”å› -1 ç¤ºä¾‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162#include &lt;stdio.h&gt;#include &lt;getopt.h&gt;enum&#123; CMD_OPTION_A = 1, CMD_OPTION_B,&#125;;static const struct option long_opts[] = &#123; &#123;\"help\", no_argument, NULL, 'h'&#125;, &#123;\"option_a\", required_argument, NULL, CMD_OPTION_A&#125;, // éœ€è®¾ç½®å‚æ•°çš„ option &#123;\"option_b\", no_argument, NULL, CMD_OPTION_B&#125;, // ä¸è®¾ç½®å‚æ•°çš„ option &#123;0, 0, 0, 0&#125;&#125;;static void print_usage(const char *prgname)&#123; printf(\"%s [OPTIONS]\\n\", prgname); printf(\"--help Help\\n\"); printf(\"--option_a VALUE Option A\\n\"); printf(\"--option_b Option B\\n\");&#125;static int parse_args(int argc, char **argv)&#123; int option_id; char *prgname = argv[0]; while ((option_id = getopt_long_only(argc, argv, \"h\", long_opts, NULL)) != -1) &#123; switch (option_id) &#123; case 'h': print_usage(prgname); return 0; case CMD_OPTION_A: printf(\"option A: %s\\n\", optarg); break; case CMD_OPTION_B: printf(\"set option_b on\\n\"); break; default: print_usage(prgname); return -1; &#125; &#125; return 0;&#125;int main(int argc, char **argv)&#123; int ret; ret = parse_args(argc, argv); if (ret &lt; 0) &#123; printf(\"failed to parse command line parameters\\n\"); &#125; return 0;&#125;","categories":[{"name":"C/C++","slug":"C-C","permalink":"https://gy23333.github.io/categories/C-C/"}],"tags":[]},{"title":"Linuxç½‘å¡ç»‘å®š","slug":"Linuxç½‘å¡ç»‘å®š","date":"2025-03-25T16:36:08.000Z","updated":"2025-04-15T16:39:49.328Z","comments":true,"path":"2025/03/26/Linuxç½‘å¡ç»‘å®š/","link":"","permalink":"https://gy23333.github.io/2025/03/26/Linux%E7%BD%91%E5%8D%A1%E7%BB%91%E5%AE%9A/","excerpt":"Linux NIC Bonding æŠ€æœ¯å¯ä»¥å°†å¤šå¼ ç‰©ç†ç½‘å¡æˆ–è€…è™šæ‹Ÿç½‘å¡ç»‘å®šä¸ºä¸€å¼ è™šæ‹Ÿçš„é€»è¾‘ç½‘å¡ï¼Œä»è€Œå®ç°ç½‘å¡çš„å†—ä½™ã€å¸¦å®½çš„æ‰©å®¹ä»¥åŠè´Ÿè½½å‡è¡¡ã€‚","text":"Linux NIC Bonding æŠ€æœ¯å¯ä»¥å°†å¤šå¼ ç‰©ç†ç½‘å¡æˆ–è€…è™šæ‹Ÿç½‘å¡ç»‘å®šä¸ºä¸€å¼ è™šæ‹Ÿçš„é€»è¾‘ç½‘å¡ï¼Œä»è€Œå®ç°ç½‘å¡çš„å†—ä½™ã€å¸¦å®½çš„æ‰©å®¹ä»¥åŠè´Ÿè½½å‡è¡¡ã€‚ ç½‘å¡ç»‘å®šçš„ä½œç”¨ç½‘å¡ç»‘å®šçš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š æä¾›å†—ä½™ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼šç½‘å¡ç»‘å®šæœ€ä¸»è¦çš„ä½œç”¨ï¼Œå¦‚ä¸‹å›¾ï¼Œç‰©ç†æœºçš„å¤šå¼ ç‰©ç†ç½‘å¡å¯ä»¥ä¸Šè¿å¤šä¸ªäº¤æ¢æœºï¼Œå°†ç½‘å¡ç»‘å®šä¸ºä¸€å¼ è™šæ‹Ÿç½‘å¡ï¼Œä½¿ç”¨è¯¥ bond è™šæ‹Ÿç½‘å¡ï¼Œå½“å…¶ä¸­ä¸€ä¸ªäº¤æ¢æœºæ•…éšœæ—¶ï¼Œæµé‡å¯ä»¥è‡ªåŠ¨åˆ‡æ¢åˆ°å¦ä¸€ä¸ªäº¤æ¢æœºä¸ç‰©ç†ç½‘å¡ï¼Œæä¾›äº†ç½‘å¡çš„å®¹ç¾èƒ½åŠ›ã€‚ æé«˜ååé‡ï¼šç”±äºæ˜¯å¤šå¼ ç½‘å¡è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œbond å‡ºæ¥çš„ç½‘å¡çš„ååé‡ä¹Ÿå¾—åˆ°äº†æå‡ã€‚ ç½‘å¡ç»‘å®šæ¨¡å¼Mode 0 â€” balance-rrï¼ˆè½®è¯¢æ¨¡å¼ï¼‰æ•°æ®åŒ…ä¾æ¬¡é¡ºåºè½®è¯¢æ¯å¼ ç½‘å¡ä¼ è¾“ï¼Œå³ç¬¬1ä¸ªåŒ…èµ° eth0ï¼Œä¸‹ä¸€ä¸ªåŒ…å°±èµ° eth1â€¦.ä¸€ç›´è½®è¯¢ä¸‹å»ã€‚ Mode 1 â€” active-backupï¼ˆä¸»å¤‡æ¨¡å¼ï¼‰åªæœ‰ä¸€å¼ ç½‘å¡ä½œä¸ºä¸»ï¼Œæ‰¿æ¥æµé‡ï¼Œå½“ä¸»ç½‘å¡å®•æœºåï¼Œå¯ç”¨å¤‡ç½‘å¡ã€‚ Mode 2 â€” balance-xorï¼ˆå¼‚æˆ–æ¨¡å¼ï¼‰åŸºäºæº MAC å’Œç›®çš„ MAC çš„ Hash é€‰æ‹©ç½‘å¡ Mode 3 â€” broadcastï¼ˆå¹¿æ’­æ¨¡å¼ï¼‰æ‰€æœ‰æ•°æ®åŒ…åœ¨æ‰€æœ‰ç½‘å¡ä¸Šä¼ è¾“ã€‚ Mode 4 â€” link aggregationï¼ˆåŠ¨æ€é“¾æ¥èšåˆï¼‰Mode 5 â€” balance-tlbï¼ˆä¼ è¾“è´Ÿè½½å‡è¡¡ï¼‰Mode 6 â€” balance-albï¼ˆé€‚åº”æ€§è´Ÿè½½å‡è¡¡ï¼‰ä½¿ç”¨ nmcli ç»‘å®šç½‘å¡ç»‘å®šç½‘å¡ åˆ›å»ºç»‘å®šç½‘å¡ 1nmcli connection add type bond ifname &lt;ç»‘å®šç½‘å¡å&gt; mode &lt;æ¨¡å¼&gt; ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€å¼ åä¸º bond0 çš„ä¸»å¤‡æ¨¡å¼ç»‘å®šç½‘å¡ 12root@ubuntu2404:/# nmcli connection add type bond ifname bond0 mode active-backupConnection 'bond-bond0' (fed29263-5656-449b-95c8-cf2e23432736) successfully added. æŸ¥çœ‹ç½‘ç»œè®¾å¤‡ï¼Œå³å¯çœ‹åˆ°æ–°å»ºçš„ bond0 ç½‘å¡ 1234567root@ubuntu2404:/# nmcli device statusDEVICE TYPE STATE CONNECTIONens160 ethernet connected netplan-ens160ens256 ethernet connected Wired connection 1bond0 bond connecting (getting IP configuration) bond-bond0lo loopback connected (externally) lodocker0 bridge connected (externally) docker0 æ·»åŠ ä»å±ç½‘å¡ 1nmcli connection add type bond-slave ifname &lt;ä»å±ç½‘å¡å&gt; master &lt;ç»‘å®šç½‘å¡å&gt; ä¾‹å¦‚ï¼Œå°† ens160 å’Œ ens256 ç½‘å¡ç»‘å®šåˆ° bond0 ç½‘å¡ä¸Š 1234root@ubuntu2404:/# nmcli connection add type bond-slave ifname ens160 master bond0Connection 'bond-slave-ens160' (021cce67-1440-4d50-a8a9-5c7faf8a361b) successfully added.root@ubuntu2404:/# nmcli connection add type bond-slave ifname ens256 master bond0Connection 'bond-slave-ens256' (f17d7bf7-4313-4f90-8f9c-5c35c0ebe319) successfully added. 123456789root@ubuntu2404:/# nmcli connection showNAME UUID TYPE DEVICEnetplan-ens160 febc54dc-e29c-3939-a911-8a11855bd1c8 ethernet ens160Wired connection 1 ec18620e-37bf-3343-acf5-b57b8928465d ethernet ens256bond-bond0 fed29263-5656-449b-95c8-cf2e23432736 bond bond0lo 73b7043c-59f1-42aa-a711-2eb721fc18b4 loopback lodocker0 5fb2c927-9b29-4d43-99ab-09af694a8927 bridge docker0bond-slave-ens160 021cce67-1440-4d50-a8a9-5c7faf8a361b ethernet --bond-slave-ens256 f17d7bf7-4313-4f90-8f9c-5c35c0ebe319 ethernet -- é…ç½®ç»‘å®šç½‘å¡ 1nmcli connection modify bond-bond0 ipv4.addresses 172.16.19.200&#x2F;24 ipv4.gateway 172.16.19.2 ipv4.method manual æ¿€æ´»ç»‘å®š 1nmcli connection up bond-bond0 æ¿€æ´»ä»å±ç½‘å¡ï¼ˆå¯ä¸æ¿€æ´»ï¼Œæ¿€æ´»åä¼šå¯¼è‡´åŸæœ¬çš„ç½‘å¡æ— æ³•ç›´æ¥è®¿é—®ï¼‰ 12nmcli connection up bond-slave-ens160nmcli connection up bond-slave-ens256 éªŒè¯ç½‘å¡å†—ä½™æŒ‰ç…§ä¸Šé¢æ­¥éª¤ç»‘å®šå®Œç½‘å¡åï¼Œå¯ä»¥çœ‹åˆ°å¤šäº†ä¸€å¼ ç½‘å¡ bond0 1234567891011121314151617181920212223root@ubuntu2404:/# ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host noprefixroute valid_lft forever preferred_lft forever2: ens160: &lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master bond0 state UP group default qlen 1000 link/ether 00:0c:29:ec:41:a3 brd ff:ff:ff:ff:ff:ff altname enp2s03: ens256: &lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master bond0 state UP group default qlen 1000 link/ether 00:0c:29:ec:41:a3 brd ff:ff:ff:ff:ff:ff permaddr 00:0c:29:ec:41:ad altname enp26s04: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default link/ether 02:42:8b:f0:0f:5a brd ff:ff:ff:ff:ff:ff inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0 valid_lft forever preferred_lft forever9: bond0: &lt;BROADCAST,MULTICAST,MASTER,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000 link/ether 00:0c:29:ec:41:a3 brd ff:ff:ff:ff:ff:ff inet 172.16.19.200/24 brd 172.16.19.255 scope global noprefixroute bond0 valid_lft forever preferred_lft forever inet6 fe80::6d51:ebf5:7acc:83ff/64 scope link noprefixroute valid_lft forever preferred_lft forever 123456789root@ubuntu2404:/# nmcli connection showNAME UUID TYPE DEVICEbond-bond0 1d93dc92-b5b8-4710-9f67-2424899947e3 bond bond0bond-slave-ens160 f75880e7-977e-4537-84cd-a5bc802ad32c ethernet ens160bond-slave-ens256 cf9838da-7c22-4066-ba2d-2b89d3e08f63 ethernet ens256lo 73b7043c-59f1-42aa-a711-2eb721fc18b4 loopback lodocker0 5fb2c927-9b29-4d43-99ab-09af694a8927 bridge docker0netplan-ens160 febc54dc-e29c-3939-a911-8a11855bd1c8 ethernet --Wired connection 1 ec18620e-37bf-3343-acf5-b57b8928465d ethernet -- 1234567root@ubuntu2404:/# nmcli device statusDEVICE TYPE STATE CONNECTIONbond0 bond connected bond-bond0ens160 ethernet connected bond-slave-ens160ens256 ethernet connected bond-slave-ens256lo loopback connected (externally) lodocker0 bridge connected (externally) docker0 é€šè¿‡ bond0 ç½‘å¡ IP è¿æ¥ï¼Œå•ç‹¬å…³æ‰ ens160 æˆ–è€… ens256 ç½‘å¡ï¼ˆifconfig ens160 downï¼‰ï¼Œè¿æ¥éƒ½ä¸ä¼šæ”¶åˆ°å½±å“ã€‚ æ¢å¤ 1234567nmcli connection down bond-bond0nmcli connection down bond-slave-ens160nmcli connection down bond-slave-ens256nmcli connection del bond-bond0nmcli connection del bond-slave-ens160nmcli connection del bond-slave-ens256","categories":[],"tags":[]},{"title":"Linuxç­–ç•¥è·¯ç”±","slug":"Linuxç­–ç•¥è·¯ç”±","date":"2025-03-20T15:11:01.000Z","updated":"2025-03-23T16:38:45.429Z","comments":true,"path":"2025/03/20/Linuxç­–ç•¥è·¯ç”±/","link":"","permalink":"https://gy23333.github.io/2025/03/20/Linux%E7%AD%96%E7%95%A5%E8%B7%AF%E7%94%B1/","excerpt":"Linux ç­–ç•¥è·¯ç”±æ˜¯ä¸€ç§é«˜çº§è·¯ç”±æœºåˆ¶ã€‚ç›¸æ¯”äºä¼ ç»Ÿè·¯ç”±ï¼Œç­–ç•¥è·¯ç”±å…è®¸ç”¨æˆ·é…ç½®å¤šå¼ è·¯ç”±è¡¨ï¼Œæ ¹æ®æºåœ°å€ã€ç›®çš„åœ°å€ç­‰é€‰æ‹©ä¸åŒè·¯ç”±è¡¨ï¼Œæä¾›äº†æ›´çµæ´»çš„è·¯ç”±æ§åˆ¶èƒ½åŠ›ã€‚","text":"Linux ç­–ç•¥è·¯ç”±æ˜¯ä¸€ç§é«˜çº§è·¯ç”±æœºåˆ¶ã€‚ç›¸æ¯”äºä¼ ç»Ÿè·¯ç”±ï¼Œç­–ç•¥è·¯ç”±å…è®¸ç”¨æˆ·é…ç½®å¤šå¼ è·¯ç”±è¡¨ï¼Œæ ¹æ®æºåœ°å€ã€ç›®çš„åœ°å€ç­‰é€‰æ‹©ä¸åŒè·¯ç”±è¡¨ï¼Œæä¾›äº†æ›´çµæ´»çš„è·¯ç”±æ§åˆ¶èƒ½åŠ›ã€‚ è·¯ç”±è¡¨ï¼ˆRouting Tableï¼‰è·¯ç”±è¡¨æ˜¯å­˜å‚¨è·¯ç”±è§„åˆ™çš„é›†åˆï¼ŒLinux æ”¯æŒé…ç½®å¤šå¼ è·¯ç”±è¡¨ã€‚ rt_tables æ–‡ä»¶/etc/iproute2/rt_tables æ˜¯ Linux ä¸­ç”¨äºå®šä¹‰è·¯ç”±è¡¨åç§°å’Œç¼–å·æ˜ å°„çš„æ–‡ä»¶ã€‚ å…¶ä¸­çš„æ¯ä¸€è¡Œå®šä¹‰äº†ä¸€ä¸ªè·¯ç”±è¡¨ï¼ŒåŒ…æ‹¬å…¶ç¼–å·ï¼ˆ1ï½255ï¼‰å’Œåç§°ï¼Œç¼–å·å’Œåç§°éƒ½ä¸èƒ½é‡å¤ã€‚ Linux å‘è¡Œç‰ˆä¸­ï¼Œ/etc/iproute2/rt_tables çš„é»˜è®¤å†…å®¹å¦‚ä¸‹ï¼š 123456789101112root@ubuntu2404:/# cat /etc/iproute2/rt_tables## reserved values#255 local254 main253 default0 unspec## local##1 inr.ruhep Linux é»˜è®¤è·¯ç”±è¡¨Linux åˆå§‹çš„é»˜è®¤çŠ¶æ€ä¸‹ï¼ŒåŒ…å«ä¸‹é¢å››ä¸ªè·¯ç”±è¡¨ï¼š localè¡¨ ç¼–å·ï¼š255 å­˜å‚¨æœ¬åœ°æ¥å£åœ°å€å’Œå¹¿æ’­åœ°å€ å†…æ ¸è‡ªåŠ¨ç»´æŠ¤ï¼Œç”¨æˆ·é€šå¸¸ä¸éœ€è¦ä¿®æ”¹ 12345678910root@ubuntu2404:/# ip route show table locallocal 127.0.0.0/8 dev lo proto kernel scope host src 127.0.0.1local 127.0.0.1 dev lo proto kernel scope host src 127.0.0.1broadcast 127.255.255.255 dev lo proto kernel scope link src 127.0.0.1local 172.16.19.129 dev ens160 proto kernel scope host src 172.16.19.129local 172.16.19.133 dev ens256 proto kernel scope host src 172.16.19.133broadcast 172.16.19.255 dev ens160 proto kernel scope link src 172.16.19.129broadcast 172.16.19.255 dev ens256 proto kernel scope link src 172.16.19.133local 172.17.0.1 dev docker0 proto kernel scope host src 172.17.0.1broadcast 172.17.255.255 dev docker0 proto kernel scope link src 172.17.0.1 linkdown mainè¡¨ ç¼–å·ï¼š254 ä¸»è·¯ç”±è¡¨ï¼Œä¼ ç»Ÿè·¯ç”±ä½¿ç”¨çš„è¡¨ é€šè¿‡ ip route å‘½ä»¤é…ç½®æˆ–å±•ç¤ºçš„éƒ½æ˜¯æ­¤è¡¨ 123456root@ubuntu2404:/# ip route show table maindefault via 172.16.19.2 dev ens160 proto dhcp src 172.16.19.129 metric 100default via 172.16.19.2 dev ens256 proto dhcp src 172.16.19.133 metric 101172.16.19.0/24 dev ens160 proto kernel scope link src 172.16.19.129 metric 100172.16.19.0/24 dev ens256 proto kernel scope link src 172.16.19.133 metric 101172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown defaultè¡¨ ç¼–å·ï¼š253 é»˜è®¤è·¯ç”±è¡¨ï¼Œé€šå¸¸ç”¨äºå­˜å‚¨é»˜è®¤è·¯ç”± åˆå§‹æ—¶ä¸ºç©º unspecè¡¨ ç¼–å·ï¼š0 æœªæŒ‡å®šè·¯ç”±è¡¨ï¼Œç”¨äºè¡¨ç¤ºæœªæŒ‡å®šæˆ–æ— æ•ˆçš„è·¯ç”±è¡¨ è‡ªå®šä¹‰è·¯ç”±è¡¨ä¿®æ”¹ /etc/iproute2/rt_tables æ–‡ä»¶ï¼Œå¯æ·»åŠ è‡ªå®šä¹‰è·¯ç”±è¡¨ã€‚ 1&lt;ç¼–å·&gt; &lt;è·¯ç”±è¡¨å&gt; å»ºè®®ï¼šç¼–å·è™½ç„¶å¯ä»¥ä» 1 å¼€å§‹å–ï¼Œä½†æ˜¯ä¸ºäº†é¿å…ä¸æœªæ¥ç³»ç»Ÿå¯èƒ½ä¿ç•™çš„ç¼–å·å†²çªï¼Œé€šå¸¸é€‰æ‹©ä» 100 å¼€å§‹åˆ†é…ç¼–å· 12100 custom1101 custom2 ä¹Ÿå¯ä»¥åˆ†æ®µåˆ†é…ç¼–å·ï¼Œä»¥æ–¹ä¾¿ç®¡ç†ä¸åŒç±»å‹çš„è·¯ç”±è¡¨ 12100 custom1200 custom2 è·¯ç”±è§„åˆ™ï¼ˆRuleï¼‰è·¯ç”±è§„åˆ™ï¼šæ•°æ®åŒ…å¦‚ä½•åŒ¹é…å¹¶é€‰æ‹©è·¯ç”±è¡¨çš„è§„åˆ™ï¼Œæ ¹æ®ç‰¹å®šçš„æ¡ä»¶ï¼ˆå¦‚æºåœ°å€ã€ç›®çš„åœ°å€ã€å…¥æ¥å£ç­‰ï¼‰é€‰æ‹©ä¸åŒçš„è·¯ç”±è¡¨ã€‚ æŸ¥çœ‹è·¯ç”±è§„åˆ™1234root@ubuntu2404:/# ip rule show0: from all lookup local32766: from all lookup main32767: from all lookup default è·¯ç”±è§„åˆ™çš„ç»„æˆæ¯ä¸€æ¡è·¯ç”±è§„åˆ™åŒ…å« 3 ä¸ªä¿¡æ¯ï¼š ä¼˜å…ˆçº§ï¼šæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚è‡ªå®šä¹‰è§„åˆ™çš„ä¼˜å…ˆçº§é€šå¸¸è®¾ç½®åœ¨ 1 åˆ° 32765 ä¹‹é—´ã€‚ æ¡ä»¶ï¼šåŒ¹é…æ•°æ®åŒ…çš„æ¡ä»¶ï¼Œå¦‚æºåœ°å€ã€ç›®çš„åœ°å€ã€å…¥æ¥å£ç­‰ åŠ¨ä½œï¼šé€šå¸¸è§„å®šé€‰æ‹©å“ªä¸ªè·¯ç”±è¡¨ æŒ‰ç…§ä¼˜å…ˆçº§ï¼Œä»å°åˆ°å¤§åŒ¹é…è§„åˆ™ï¼Œå¦‚æœåŒ¹é…åˆ°ï¼Œåˆ™é€‰æ‹©è§„å®šçš„è·¯ç”±è¡¨ã€‚ å¢/åˆ è·¯ç”±è§„åˆ™ å¢åŠ è·¯ç”±è§„åˆ™ï¼ˆä¼˜å…ˆçº§å¯ç¼ºçœï¼Œç¼ºçœæ—¶å–ä½ä¼˜å…ˆçº§ï¼‰ 1ip rule add &lt;æ¡ä»¶&gt; lookup &lt;è¡¨å&gt; priority &lt;ä¼˜å…ˆçº§&gt; åˆ é™¤è·¯ç”±è§„åˆ™ 1ip rule del &lt;æ¡ä»¶&gt; lookup &lt;è¡¨å&gt; åŒ¹é…æ¡ä»¶è·¯ç”±è§„åˆ™çš„åŒ¹é…æ¡ä»¶æ”¯æŒä»¥ä¸‹å­—æ®µï¼š åŒ¹é…æ•°æ®åŒ…çš„æºåœ°å€ from &lt;PREFIX&gt; ç¤ºä¾‹ï¼š 12# æ¥è‡ª 192.168.1.0/24 çš„æµé‡ä½¿ç”¨ custom1 è¡¨ip rule add from 192.168.1.0/24 lookup custom1 åŒ¹é…æ•°æ®åŒ…çš„ç›®çš„åœ°å€ to &lt;PREFIX&gt; ç¤ºä¾‹ï¼š 12# å»å¾€ 8.8.8.8 çš„æµé‡ä½¿ç”¨ custom2 è¡¨ip rule add to 8.8.8.8 lookup custom2 åŒ¹é…æ•°æ®åŒ…çš„å…¥ç½‘å¡ iif &lt;ç½‘å¡&gt; ç¤ºä¾‹ï¼š 12# ä» eth1 æ¥å£è¿›å…¥çš„æµé‡ä½¿ç”¨ custom3 è¡¨ip rule add iif eth1 lookup custom3 åŒ¹é…æ•°æ®åŒ…çš„åè®® ipproto &lt;PROTOCOL&gt; ç¤ºä¾‹ï¼š 12# TCP åè®®çš„æµé‡ä½¿ç”¨ custom4 è¡¨ip rule add proto tcp lookup custom4 ç­‰ç­‰ï¼Œè¯¦ç»†è§ help help1234567891011121314151617181920root@ubuntu2404:/# ip rule helpUsage: ip rule &#123; add | del &#125; SELECTOR ACTION ip rule &#123; flush | save | restore &#125; ip rule [ list [ SELECTOR ]]SELECTOR := [ not ] [ from PREFIX ] [ to PREFIX ] [ tos TOS ] [ fwmark FWMARK[/MASK] ] [ iif STRING ] [ oif STRING ] [ pref NUMBER ] [ l3mdev ] [ uidrange NUMBER-NUMBER ] [ ipproto PROTOCOL ] [ sport [ NUMBER | NUMBER-NUMBER ] [ dport [ NUMBER | NUMBER-NUMBER ] ]ACTION := [ table TABLE_ID ] [ protocol PROTO ] [ nat ADDRESS ] [ realms [SRCREALM/]DSTREALM ] [ goto NUMBER ] SUPPRESSORSUPPRESSOR := [ suppress_prefixlength NUMBER ] [ suppress_ifgroup DEVGROUP ]TABLE_ID := [ local | main | default | NUMBER ] è·¯ç”±ï¼ˆRouteï¼‰æ¯å¼ è·¯ç”±è¡¨é‡Œéƒ½å¯ä»¥é…ç½®è‡ªå·±çš„è·¯ç”±ã€‚ ip route å‘½ä»¤ip route å‘½ä»¤å¦‚æœæ²¡æœ‰æŒ‡å®šè·¯ç”±è¡¨ï¼Œåˆ™é»˜è®¤æŒ‡å®š main è¡¨ã€‚ æŸ¥çœ‹è·¯ç”±è¡¨1ip route show table &lt;è·¯ç”±è¡¨å&gt; help123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657root@ubuntu2404:/# ip route helpUsage: ip route &#123; list | flush &#125; SELECTOR ip route save SELECTOR ip route restore ip route showdump ip route get [ ROUTE_GET_FLAGS ] ADDRESS [ from ADDRESS iif STRING ] [ oif STRING ] [ tos TOS ] [ mark NUMBER ] [ vrf NAME ] [ uid NUMBER ] [ ipproto PROTOCOL ] [ sport NUMBER ] [ dport NUMBER ] ip route &#123; add | del | change | append | replace &#125; ROUTESELECTOR := [ root PREFIX ] [ match PREFIX ] [ exact PREFIX ] [ table TABLE_ID ] [ vrf NAME ] [ proto RTPROTO ] [ type TYPE ] [ scope SCOPE ]ROUTE := NODE_SPEC [ INFO_SPEC ]NODE_SPEC := [ TYPE ] PREFIX [ tos TOS ] [ table TABLE_ID ] [ proto RTPROTO ] [ scope SCOPE ] [ metric METRIC ] [ ttl-propagate &#123; enabled | disabled &#125; ]INFO_SPEC := &#123; NH | nhid ID &#125; OPTIONS FLAGS [ nexthop NH ]...NH := [ encap ENCAPTYPE ENCAPHDR ] [ via [ FAMILY ] ADDRESS ] [ dev STRING ] [ weight NUMBER ] NHFLAGSFAMILY := [ inet | inet6 | mpls | bridge | link ]OPTIONS := FLAGS [ mtu NUMBER ] [ advmss NUMBER ] [ as [ to ] ADDRESS ] [ rtt TIME ] [ rttvar TIME ] [ reordering NUMBER ] [ window NUMBER ] [ cwnd NUMBER ] [ initcwnd NUMBER ] [ ssthresh NUMBER ] [ realms REALM ] [ src ADDRESS ] [ rto_min TIME ] [ hoplimit NUMBER ] [ initrwnd NUMBER ] [ features FEATURES ] [ quickack BOOL ] [ congctl NAME ] [ pref PREF ] [ expires TIME ] [ fastopen_no_cookie BOOL ]TYPE := &#123; unicast | local | broadcast | multicast | throw | unreachable | prohibit | blackhole | nat &#125;TABLE_ID := [ local | main | default | all | NUMBER ]SCOPE := [ host | link | global | NUMBER ]NHFLAGS := [ onlink | pervasive ]RTPROTO := [ kernel | boot | static | NUMBER ]PREF := [ low | medium | high ]TIME := NUMBER[s|ms]BOOL := [1|0]FEATURES := ecnENCAPTYPE := [ mpls | ip | ip6 | seg6 | seg6local | rpl | ioam6 | xfrm ]ENCAPHDR := [ MPLSLABEL | SEG6HDR | SEG6LOCAL | IOAM6HDR | XFRMINFO ]SEG6HDR := [ mode SEGMODE ] segs ADDR1,ADDRi,ADDRn [hmac HMACKEYID] [cleanup]SEGMODE := [ encap | encap.red | inline | l2encap | l2encap.red ]SEG6LOCAL := action ACTION [ OPTIONS ] [ count ]ACTION := &#123; End | End.X | End.T | End.DX2 | End.DX6 | End.DX4 | End.DT6 | End.DT4 | End.DT46 | End.B6 | End.B6.Encaps | End.BM | End.S | End.AS | End.AM | End.BPF &#125;OPTIONS := OPTION [ OPTIONS ]OPTION := &#123; flavors FLAVORS | srh SEG6HDR | nh4 ADDR | nh6 ADDR | iif DEV | oif DEV | table TABLEID | vrftable TABLEID | endpoint PROGNAME &#125;FLAVORS := &#123; FLAVOR[,FLAVOR] &#125;FLAVOR := &#123; psp | usp | usd | next-csid &#125;IOAM6HDR := trace prealloc type IOAM6_TRACE_TYPE ns IOAM6_NAMESPACE size IOAM6_TRACE_SIZEXFRMINFO := if_id IF_ID [ link_dev LINK ]ROUTE_GET_FLAGS := [ fibmatch ]","categories":[],"tags":[]},{"title":"å †","slug":"å †","date":"2025-01-15T17:41:45.000Z","updated":"2025-01-19T16:48:44.084Z","comments":true,"path":"2025/01/16/å †/","link":"","permalink":"https://gy23333.github.io/2025/01/16/%E5%A0%86/","excerpt":"å †ï¼ˆheapï¼‰æ˜¯ä¸€ç§æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å®Œå…¨äºŒå‰æ ‘ï¼Œåˆ†ä¸ºå¤§é¡¶å †å’Œå°é¡¶å †ï¼Œé€šå¸¸ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œè¿›è¡Œå †æ’åºã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»æ¨æ•°æ®ç»“æ„ä»¥åŠå…¶ Go å®ç°ã€‚","text":"å †ï¼ˆheapï¼‰æ˜¯ä¸€ç§æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å®Œå…¨äºŒå‰æ ‘ï¼Œåˆ†ä¸ºå¤§é¡¶å †å’Œå°é¡¶å †ï¼Œé€šå¸¸ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œè¿›è¡Œå †æ’åºã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»æ¨æ•°æ®ç»“æ„ä»¥åŠå…¶ Go å®ç°ã€‚ å †å †æ˜¯ä¸€ç§å®Œå…¨äºŒå‰æ ‘ï¼Œä¸ä¼˜å…ˆé˜Ÿåˆ—ç­‰ä»·ï¼Œåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š å°é¡¶å †ï¼ˆmin heapï¼‰ï¼šä»»æ„èŠ‚ç‚¹çš„å€¼ &lt;= å…¶å­èŠ‚ç‚¹çš„å€¼ å¤§é¡¶å †ï¼ˆmax heapï¼‰ï¼šä»»æ„èŠ‚ç‚¹çš„å€¼ &gt;= å…¶å­èŠ‚ç‚¹çš„å€¼ ä»å­˜å‚¨ç»“æ„æ¥çœ‹ï¼Œå®é™…å°±æ˜¯æ ‘å±‚æ¬¡éå†æ‰€å¾—çš„é˜Ÿåˆ—ã€‚ container/heapGolang æ ‡å‡†åº“ container/heap æä¾›äº†å †çš„å¿«é€Ÿå®ç°ã€‚ æ¥å£å®šä¹‰æºç heap.Interface æ¥å£å®šä¹‰æºç  12345type Interface interface &#123; sort.Interface Push(x any) // add x as element Len() Pop() any // remove and return element Len() - 1.&#125; sort.Interface æ¥å£å®šä¹‰æºç  1234567891011type Interface interface &#123; // Len is the number of elements in the collection. Len() int // Less reports whether the element with index i // must sort before the element with index j. Less(i, j int) bool // Swap swaps the elements with indexes i and j. Swap(i, j int)&#125; æ¥å£å®ç°é€šè¿‡å®ç° heap.Interface æ¥å£ï¼Œä»è€Œå®ç°ä¸€ä¸ªå †ã€‚ å †çš„ç»“æ„ä½“é¦–å…ˆå®šä¹‰å †çš„ç»“æ„ä½“ï¼Œå †çš„æ•°æ®ç±»å‹éœ€è¦æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼ˆå®é™…ä»¥åˆ‡ç‰‡å½¢å¼å­˜å‚¨ï¼‰ï¼Œåˆ‡ç‰‡çš„ type å³ä¸ºå †çš„æ¯ä¸ªå…ƒç´ çš„æ•°æ®ç±»å‹ã€‚ æœ€å¸¸ç”¨çš„æ•´æ•° 1type IntHeap []int ä¹Ÿå¯ä½¿ç”¨ç»“æ„ä½“çš„åˆ‡ç‰‡ï¼Œæ¯”å¦‚æƒ³è¦å®ç°ä¸€ä¸ªæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªé•¿æ–¹ä½“çš„ä¼˜å…ˆé˜Ÿåˆ— 123456type Rectangle struct &#123; width int height int&#125;type RectangleHeap []Rectangle Len() intç”¨äºè¿”å›å †ä¸­å…ƒç´ çš„æ•°é‡ã€‚ å®ç°æ–¹å¼ç›¸å¯¹å›ºå®šï¼Œè¿”å›åˆ‡ç‰‡é•¿åº¦å³å¯ã€‚ 123func (h IntHeap) Len() int &#123; return len(h)&#125; Less(i, j int) boolç”¨äºè®¾ç½®å †çš„å…ƒç´ çš„å¤§å°æ¯”è¾ƒæ–¹æ³•ã€‚ æ¯”è¾ƒç´¢å¼•ä¸º i å’Œ j ä¸Šçš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœ i ç´¢å¼•å…ƒç´ åº”è¯¥æ’åœ¨ j çš„å‰é¢ï¼Œå³è¿”å› trueã€‚ å°é¡¶å †ï¼š$h[i] &lt; h[j]$ï¼Œåˆ™è¿”å› true å¤§é¡¶å †ï¼š$h[i] &gt; h[j]$ï¼Œåˆ™è¿”å› true ç¤ºä¾‹ï¼š æ•´æ•°å°é¡¶å † 123func (h IntHeap) Less(i, j int) bool &#123; return h[i] &lt; h[j]&#125; æ•´æ•°å¤§é¡¶å † 123func (h IntHeap) Less(i, j int) bool &#123; return h[i] &gt; h[j]&#125; é•¿æ–¹ä½“å¤§é¡¶å †ï¼Œé¢ç§¯æ¯”å¤§å° 1234567func (r Rectangle) area() int &#123; return r.width * r.height&#125;func (h RectangleHeap) Less(i, j int) bool &#123; return h[i].area() &gt; h[j].area()&#125; Swap(i, j int)ç”¨äºäº¤æ¢å †ä¸­ç´¢å¼• i å’Œ j ä½ç½®çš„å…ƒç´ ã€‚ å®ç°æ–¹å¼ç›¸å¯¹å›ºå®šï¼Œç›´æ¥äº¤æ¢äºŒè€…å­˜å‚¨ä½ç½®ã€‚ 123func (h IntHeap) Swap(i, j int) &#123; h[i], h[j] = h[j], h[i]&#125; Push(x any)å°†æ–°çš„å…ƒç´  x åŠ å…¥å †åˆ‡ç‰‡ï¼Œå³ append åˆ°æœ€åã€‚ æ³¨ï¼šæ¥å£çš„ Push(x any) åªéœ€è¦å°†æ–°å…ƒç´ åŠ åˆ°å †å°¾å³å¯ï¼Œä½¿ç”¨ heap.Push() æ—¶ï¼Œå°†ä¼šè°ƒç”¨ç”¨æˆ·å®ç°çš„ Push(x any) ï¼Œå°†å…ƒç´ åŠ åˆ°é˜Ÿå°¾ï¼Œç„¶åè‡ªåŠ¨å®ç°ä¸Šæµ®æ’åºã€‚ 123func (h *IntHeap) Push(x any) &#123; *h = append(*h, x.(int))&#125; Pop() anyä»å †åˆ‡ç‰‡ä¸­ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›ã€‚ æ³¨ï¼šä½¿ç”¨ heap.Pop() æ—¶ï¼Œå°†å…ˆå°†å †é¡¶çš„å…ƒç´ ä¸‹æ²‰åˆ°é˜Ÿå°¾ï¼Œç„¶åè°ƒç”¨ç”¨æˆ·å®ç°çš„ Pop() any åˆ é™¤å¹¶è¿”å›ã€‚ 123456func (h *IntHeap) Pop() any &#123; n := len(*h) x := (*h)[n-1] *h = (*h)[:n-1] return x&#125; å®ç° Push() å’Œ Pop() æ—¶ï¼Œéƒ½éœ€ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶ã€‚åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œä½†åœ¨æ–¹æ³•ä¸­å¢åŠ /åˆ é™¤å…ƒç´ ï¼Œå¯èƒ½ä¼šä¿®æ”¹åˆ‡ç‰‡æœ¬èº«ï¼Œæ‰€ä»¥éœ€ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶ã€‚ å †çš„ä½¿ç”¨heap.Init()ä½œç”¨ï¼šå®Œæˆå †çš„åˆå§‹åŒ–ã€‚è°ƒç”¨ç»“æŸåï¼Œå †çš„åˆ‡ç‰‡å³å®Œæˆæ’åºã€‚ å®ç°æ–¹å¼ï¼šå°†å †çš„éå¶å­èŠ‚ç‚¹ä¸€ä¸€ä¸‹æ²‰ã€‚ï¼ˆç”±åº•å‘ä¸Šï¼Œä»ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ä¸‹æ²‰ï¼Œç›´åˆ°å †é¡¶ï¼Œå¶å­èŠ‚ç‚¹æ²¡æœ‰ä¸‹æ²‰çš„å¿…è¦ï¼‰ 1234567func Init(h Interface) &#123; // heapify n := h.Len() for i := n/2 - 1; i &gt;= 0; i-- &#123; down(h, i, n) &#125;&#125; heap.Push()ä½œç”¨ï¼šå°†æ–°å…ƒç´ æ¨å…¥å †ä¸­ï¼Œå¹¶å®Œæˆæ’åºã€‚ å®ç°æ–¹å¼ï¼šå…ˆè°ƒç”¨ç”¨æˆ·å®ç°çš„ Push() æ¥å£ï¼Œå°†æ–°å…ƒç´ åŠ å…¥åˆ‡ç‰‡çš„æœ€å°¾éƒ¨ï¼Œå†å°†å°¾éƒ¨ä¸Šæµ®ã€‚ 1234func Push(h Interface, x any) &#123; h.Push(x) up(h, h.Len()-1)&#125; heap.Pop()ä½œç”¨ï¼šå°†å †é¡¶æ¨å‡ºå¹¶è¿”å›ã€‚ å®ç°æ–¹å¼ï¼šå…ˆå°†å †é¡¶å’Œå †å°¾äº¤æ¢ï¼Œå†å°†æ–°æ¢ä¸Šçš„å †é¡¶ä¸‹æ²‰ï¼Œæœ€åè°ƒç”¨ç”¨æˆ·å®ç°çš„ Pop() æ¥å£ï¼Œå°†å †å°¾æ¨å‡ºå¹¶è¿”å›ã€‚ 123456func Pop(h Interface) any &#123; n := h.Len() - 1 h.Swap(0, n) down(h, 0, n) return h.Pop()&#125; ä¾‹é¢˜æ»‘åŠ¨çª—å£æœ€å¤§å€¼ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º k çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ k ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚ è¿”å› æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ ã€‚ ç¤ºä¾‹ 1ï¼š 1234567891011è¾“å…¥ï¼šnums &#x3D; [1,3,-1,-3,5,3,6,7], k &#x3D; 3è¾“å‡ºï¼š[3,3,5,5,6,7]è§£é‡Šï¼šæ»‘åŠ¨çª—å£çš„ä½ç½® æœ€å¤§å€¼--------------- -----[1 3 -1] -3 5 3 6 7 3 1 [3 -1 -3] 5 3 6 7 3 1 3 [-1 -3 5] 3 6 7 5 1 3 -1 [-3 5 3] 6 7 5 1 3 -1 -3 [5 3 6] 7 6 1 3 -1 -3 5 [3 6 7] 7 ä¼˜å…ˆé˜Ÿåˆ—æ–¹æ³•é¢˜è§£ï¼š å°†å‰ k-1 ä¸ªæ•°å­—åˆå§‹åŒ–å¤§é¡¶å † ä»ç¬¬ k ä¸ªæ•°å­—å¼€å§‹éå† å°†è¯¥æ•°å­— Push å…¥å † æŸ¥çœ‹å †é¡¶å…ƒç´  å¦‚æœå·²ç»ä¸åœ¨æ»‘åŠ¨çª—å£é‡Œï¼Œåˆ™ Pop å‡ºå † å¦åˆ™ï¼Œè¯¥å †é¡¶å³ä¸ºç°åœ¨æ»‘åŠ¨çª—å£é‡Œæœ€å¤§å…ƒç´ ï¼ŒåŠ å…¥ç»“æœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657type element struct &#123; num int index int&#125;type ElementHeap []elementfunc (h ElementHeap) Len() int &#123; return len(h)&#125;func (h ElementHeap) Less(i, j int) bool &#123; return h[i].num &gt; h[j].num&#125;func (h ElementHeap) Swap(i, j int) &#123; h[i], h[j] = h[j], h[i]&#125;func (h *ElementHeap) Push(x any) &#123; *h = append(*h, x.(element))&#125;func (h *ElementHeap) Pop() any &#123; n := h.Len() x := (*h)[n-1] *h = (*h)[:n-1] return x&#125;func maxSlidingWindow(nums []int, k int) []int &#123; h := &amp;ElementHeap&#123;&#125; for i := 0; i &lt; k-1; i++ &#123; *h = append(*h, element&#123; num: nums[i], index: i, &#125;) &#125; heap.Init(h) ans := make([]int, 0, len(nums)) for i := k - 1; i &lt; len(nums); i++ &#123; heap.Push(h, element&#123; num: nums[i], index: i, &#125;) for &#123; if (*h)[0].index &lt; i-k+1 &#123; heap.Pop(h) &#125; else &#123; ans = append(ans, (*h)[0].num) break &#125; &#125; &#125; return ans&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"å †","slug":"å †","permalink":"https://gy23333.github.io/tags/%E5%A0%86/"}]},{"title":"OpenTelemetryåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª","slug":"OpenTelemetryåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª","date":"2025-01-05T16:37:19.000Z","updated":"2025-01-06T17:48:25.073Z","comments":true,"path":"2025/01/06/OpenTelemetryåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª/","link":"","permalink":"https://gy23333.github.io/2025/01/06/OpenTelemetry%E5%88%86%E5%B8%83%E5%BC%8F%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/","excerpt":"","text":"https://jckling.github.io/2021/04/02/Jaeger/å…¨é“¾è·¯è¿½è¸ªä¸%20Jaeger%20å…¥é—¨/index.html 1docker run -d --name jaeger -e COLLECTOR_ZIPKIN_HTTP_PORT&#x3D;9411 -p 5775:5775&#x2F;udp -p 6831:6831&#x2F;udp -p 6832:6832&#x2F;udp -p 5778:5778 -p 16686:16686 -p 14268:14268 -p 14250:14250 -p 9411:9411 quay.io&#x2F;jaegertracing&#x2F;all-in-one:1.64.0","categories":[],"tags":[]},{"title":"TLS è¯ä¹¦","slug":"TLS-è¯ä¹¦","date":"2024-12-24T14:55:05.000Z","updated":"2025-05-08T05:39:32.460Z","comments":true,"path":"2024/12/24/TLS-è¯ä¹¦/","link":"","permalink":"https://gy23333.github.io/2024/12/24/TLS-%E8%AF%81%E4%B9%A6/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"Go ç¯å¢ƒé…ç½®","slug":"Go-ç¯å¢ƒé…ç½®","date":"2024-12-23T17:18:11.000Z","updated":"2025-07-10T17:58:15.605Z","comments":true,"path":"2024/12/24/Go-ç¯å¢ƒé…ç½®/","link":"","permalink":"https://gy23333.github.io/2024/12/24/Go-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","excerpt":"Go ç¯å¢ƒé…ç½®","text":"Go ç¯å¢ƒé…ç½® Go å®‰è£…Ubuntu ç›´æ¥ä½¿ç”¨ apt å®‰è£… Golang 1apt install golang Go ç‰ˆæœ¬ç®¡ç†Go ç‰ˆæœ¬ç®¡ç†å·¥å…· gvm ç®¡ç†å¤šä¸ªç‰ˆæœ¬çš„ Golang gvm å®‰è£… å®‰è£… bison 1apt-get install bison å®‰è£… gvm 1bash &lt; &lt;(curl -s -S -L https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;moovweb&#x2F;gvm&#x2F;master&#x2F;binscripts&#x2F;gvm-installer) æ·»åŠ ç¯å¢ƒå˜é‡ 1source &#x2F;root&#x2F;.gvm&#x2F;scripts&#x2F;gvm gvm ç®¡ç†å¤šä¸ª go ç‰ˆæœ¬1234567891011121314151617181920212223root@ubuntu2404:~&#x2F;.gvm&#x2F;scripts# gvm helpUsage: gvm [command]Description: GVM is the Go Version ManagerCommands: version - print the gvm version number get - gets the latest code (for debugging) use - select a go version to use (--default to set permanently) diff - view changes to Go root help - display this usage text implode - completely remove gvm install - install go versions uninstall - uninstall go versions cross - install go cross compilers linkthis - link this directory into GOPATH list - list installed go versions listall - list available versions alias - manage go version aliases pkgset - manage go packages sets pkgenv - edit the environment for a package set applymod - apply the go version in go.mod æŸ¥çœ‹å·²ä¸‹è½½ go ç‰ˆæœ¬ 1gvm list æŸ¥çœ‹å¯ä¸‹è½½ go ç‰ˆæœ¬ 1gvm listall å®‰è£…ç‰¹å®š go ç‰ˆæœ¬ï¼ˆgvm å®‰è£… go ç‰ˆæœ¬éœ€è¦å…ˆå®‰è£…ä¸€ä¸ªåŸºç¡€çš„ goï¼Œgo ç‰ˆæœ¬å…·ä½“çœ‹æŠ¥é”™æç¤ºï¼‰ 1gvm install go1.24.2 ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„ go 1gvm use go1.24.2 åˆå§‹åŒ– Go é¡¹ç›® æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ 12mkdir survey-testcd survey-test åˆå§‹åŒ– Go æ¨¡å— 12go mod init github.com/GY23333/survey-testgo: creating new go.mod: module github.com/GY23333/survey-test è¯¥æ­¥ä¼šè‡ªåŠ¨ç”Ÿæˆ go.mod æ–‡ä»¶ 123module github.com/GY23333/survey-testgo 1.23.3 å¦‚éœ€è·å–ä¾èµ– 1go get -u github.com&#x2F;gorilla&#x2F;mux VSCode Go é…ç½®Go ä»£ç è¡¥å…¨éœ€å®‰è£… gopls 1go install golang.org/x/tools/gopls@latest å…¶ä»–é…ç½®GoProxy1go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct","categories":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/categories/Golang/"}],"tags":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/tags/Golang/"}]},{"title":"Go Package: survey","slug":"Go-Package-survey","date":"2024-12-23T16:44:26.000Z","updated":"2024-12-25T18:09:26.971Z","comments":true,"path":"2024/12/24/Go-Package-survey/","link":"","permalink":"https://gy23333.github.io/2024/12/24/Go-Package-survey/","excerpt":"Go äº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·åº“ï¼Œæä¾›äº†åŒ…æ‹¬æ–‡æœ¬è¾“å…¥ã€é€‰æ‹©èœå•ã€ç¡®è®¤æç¤ºã€å¤šé¡¹é€‰æ‹©ç­‰å¤šç§äº¤äº’ç±»å‹ï¼Œå¸®åŠ©å¿«é€Ÿæ„å»ºäº¤äº’å¼å‘½ä»¤è¡Œé¡µé¢ã€‚","text":"Go äº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·åº“ï¼Œæä¾›äº†åŒ…æ‹¬æ–‡æœ¬è¾“å…¥ã€é€‰æ‹©èœå•ã€ç¡®è®¤æç¤ºã€å¤šé¡¹é€‰æ‹©ç­‰å¤šç§äº¤äº’ç±»å‹ï¼Œå¸®åŠ©å¿«é€Ÿæ„å»ºäº¤äº’å¼å‘½ä»¤è¡Œé¡µé¢ã€‚ å®‰è£…1go get -u github.com&#x2F;AlecAivazis&#x2F;survey&#x2F;v2 PromptInput å•è¡Œè¾“å…¥12345var username stringprompt := &amp;survey.Input&#123; Message: \"Input username:\",&#125;survey.AskOne(prompt, &amp;username) å¯ä»¥é€šè¿‡è®¾ç½® Suggest æ¥ç»™ç”¨æˆ·æä¾›å»ºè®®ï¼Œå¸®åŠ©è¡¥å…¨è¾“å…¥ï¼ŒSuggest ä¸ºç”±å½“å‰è¾“å…¥å€¼è¿”å›å»ºè®®å€¼åˆ—è¡¨çš„æ–¹æ³•ã€‚å¦‚ä¸‹é¢è¡¥å…¨æ–‡ä»¶è·¯å¾„ç¤ºä¾‹ã€‚ 123456789var path stringprompt := &amp;survey.Input&#123; Message: \"Input file path:\", Suggest: func(toComplete string) []string &#123; files, _ := filepath.Glob(toComplete + \"*\") return files &#125;,&#125;survey.AskOne(prompt, &amp;path) Multiline å¤šè¡Œè¾“å…¥Select å•é€‰123456var tool stringprompt := &amp;survey.Select&#123; Message: \"Choose a tool:\", Options: []string&#123;\"toolA\", \"toolB\", \"toolC\"&#125;,&#125;survey.AskOne(prompt, &amp;tool) å¯ä»¥é€šè¿‡è®¾ç½® Description ç»™æ¯ä¸ªé€‰é¡¹æ·»åŠ æè¿°ï¼Œ Description ä¸ºç”±é€‰é¡¹å€¼/åºå·è¿”å›æè¿°çš„æ–¹æ³• 1234567891011121314var tool stringdescription := map[string]string&#123; \"toolA\": \"Description for toolA\", \"toolB\": \"Description for toolB\", \"toolC\": \"Description for toolC\",&#125;prompt := &amp;survey.Select&#123; Message: \"Choose a tool:\", Options: []string&#123;\"toolA\", \"toolB\", \"toolC\"&#125;, Description: func(value string, index int) string &#123; return description[value] &#125;,&#125;survey.AskOne(prompt, &amp;tool) MultiSelect å¤šé€‰123456days := []string&#123;&#125;prompt := &amp;survey.MultiSelect&#123; Message: \"What days do you prefer:\", Options: []string&#123;\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"&#125;,&#125;survey.AskOne(prompt, &amp;days) Confirm ç¡®è®¤12345answer := falseprompt := &amp;survey.Confirm&#123; Message: \"Are you sure to continue?\",&#125;survey.AskOne(prompt, &amp;answer) Password å¯†ç 12345password := \"\"prompt := &amp;survey.Password&#123; Message: \"Please type your password\",&#125;survey.AskOne(prompt, &amp;password) OptionValidatorè®¾ç½®è¾“å…¥éªŒè¯ï¼Œæä¾›è¾“å…¥éªŒè¯å‡½æ•°ï¼ˆè¾“å…¥ï¼šè¾“å…¥å€¼ï¼Œè¿”å› errorï¼‰ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥éªŒè¯ä¸é€šè¿‡ï¼Œåˆ™æç¤ºé”™è¯¯ï¼Œå¹¶é‡æ–°æé—®ã€‚ 12345678910111213141516var input stringprompt := &amp;survey.Input&#123; Message: \"Input number:\",&#125;// éªŒè¯è¾“å…¥ä¸ºæ•°å­—ï¼Œå¹¶åœ¨0åˆ°10èŒƒå›´å†…vaildInputNumber := func(val interface&#123;&#125;) error &#123; num, err := strconv.Atoi(val.(string)) if err != nil &#123; return fmt.Errorf(\"not number\") &#125; if num &lt; 0 || num &gt; 10 &#123; return fmt.Errorf(\"not in 0~10\") &#125; return nil&#125;survey.AskOne(prompt, &amp;input, survey.WithValidator(vaildInputNumber)) Survey åº“ä¹Ÿæä¾›äº†ä¸€äº›å¯ç›´æ¥è°ƒç”¨çš„éªŒè¯å‡½æ•° Requiredï¼šè¦æ±‚éç©º MinLength(n)ï¼šæœ€å°é•¿åº¦ MaxLength(n)ï¼šæœ€å¤§é•¿åº¦ AskAskæ”¯æŒè¿ç»­é—®å¤šä¸ªé—®é¢˜ï¼Œè®¾ç½®å¤šä¸ªé—®é¢˜ï¼Œæ¯ä¸ªé—®é¢˜å¯ä»¥åŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼š Nameï¼šä¸å›ç­”ç»“æ„ä½“é‡Œçš„å…ƒç´ å¯¹åº”ï¼Œç”¨äºæŒ‡åç»“æœè§£æåˆ°å“ªä¸ªå…ƒç´  Promptï¼šå…·ä½“çš„é—®é¢˜ Vaildateï¼šå›ç­”çš„éªŒè¯æ–¹æ³• Transformï¼šè‡ªåŠ¨æ›´æ”¹æ ¼å¼ 12345678910111213141516171819202122232425262728293031323334353637383940qs := []*survey.Question&#123; &#123; Name: \"name\", Prompt: &amp;survey.Input&#123;Message: \"What is your name?\"&#125;, Validate: survey.Required, Transform: survey.Title, &#125;, &#123; Name: \"color\", Prompt: &amp;survey.Select&#123; Message: \"Choose a color:\", Options: []string&#123;\"red\", \"blue\", \"green\"&#125;, Default: \"red\", &#125;, &#125;, &#123; Name: \"age\", Prompt: &amp;survey.Input&#123;Message: \"How old are you?\"&#125;, Validate: func(val interface&#123;&#125;) error &#123; _, err := strconv.Atoi(val.(string)) if err != nil &#123; return fmt.Errorf(\"not number\") &#125; return nil &#125;, &#125;,&#125;answers := struct &#123; Name string // survey will match the question and field names FavoriteColor string `survey:\"color\"` // or you can tag fields to match a specific name Age int // if the types don't match, survey will convert it&#125;&#123;&#125;// perform the questionserr := survey.Ask(qs, &amp;answers)if err != nil &#123; fmt.Println(err.Error()) return&#125; å‚è€ƒ https://github.com/AlecAivazis/survey https://pkg.go.dev/github.com/AlecAivazis/survey/v2#section-readme","categories":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/categories/Golang/"}],"tags":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/tags/Golang/"}]},{"title":"IPIPéš§é“","slug":"IPIPéš§é“","date":"2024-12-06T16:47:53.000Z","updated":"2025-05-07T16:18:52.839Z","comments":true,"path":"2024/12/07/IPIPéš§é“/","link":"","permalink":"https://gy23333.github.io/2024/12/07/IPIP%E9%9A%A7%E9%81%93/","excerpt":"","text":"IPIPscapy æ„å»º IPIP åŒ…tcpdump -i ens160 -nn -v â€˜ip proto 4â€™ 1234567891011121314151617# å¤–å±‚IPå¤´outer_ip &#x3D; IP(src&#x3D;&quot;192.168.1.1&quot;, dst&#x3D;&quot;192.168.1.2&quot;, proto&#x3D;4) # proto&#x3D;4è¡¨ç¤ºIPIP# å†…å±‚IPå¤´inner_ip &#x3D; IP(src&#x3D;&quot;10.0.0.1&quot;, dst&#x3D;&quot;10.0.0.2&quot;)# å†…å±‚è´Ÿè½½æ•°æ®payload &#x3D; &quot;This is the payload&quot;# ç»„åˆæˆIPIPåŒ…ipip_packet &#x3D; outer_ip&#x2F;inner_ip&#x2F;payload# å‘é€æ•°æ®åŒ…send(ipip_packet)sendp(Ether(src&#x3D;&quot;00:0c:29:4e:e5:7b&quot;, dst&#x3D;&quot;00:0c:29:4e:e5:7a&quot;)&#x2F;IP(src&#x3D;&quot;192.168.1.1&quot;, dst&#x3D;&quot;172.16.19.137&quot;, proto&#x3D;4)&#x2F;IP(src&#x3D;&quot;10.0.0.1&quot;, dst&#x3D;&quot;10.0.0.2&quot;)&#x2F;&quot;This is the payload&quot;) IPv6-in-IPv6 éš§é“åŠ è½½ ip6_tunnel æ¨¡å— 1modprobe ip6_tunnel åŠ è½½ ip6_tunnel æ¨¡å—åï¼ŒLinux å†…æ ¸ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ IPv6-in-IPv6 éš§é“æ¥å£ ip6tnl0 12root@ubuntu2404:~# ip -6 tunnel showip6tnl0: ipv6/ipv6 remote :: local :: encaplimit 0 hoplimit inherit tclass 0x00 flowlabel 0x00000 (flowinfo 0x00000000) å¯ä»¥ç›´æ¥å¼€å¯è¿™ä¸ªé»˜è®¤çš„éš§é“ 1ip link set ip6tnl0 up 123ip -6 tunnel change ip6tnl0 mode ip6ip6ip link set ip6tnl0 up","categories":[],"tags":[]},{"title":"IPv6","slug":"IPv6","date":"2024-12-06T16:47:16.000Z","updated":"2025-02-18T17:24:18.406Z","comments":true,"path":"2024/12/07/IPv6/","link":"","permalink":"https://gy23333.github.io/2024/12/07/IPv6/","excerpt":"IPv6 æ˜¯ç½‘ç»œå±‚åè®®çš„ç¬¬äºŒä»£æ ‡å‡†åè®®ï¼Œå°† IP åœ°å€é•¿åº¦ä»åŸæ¥çš„ 32 ä½å‡çº§ä¸º 128 ä½ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº† IP åœ°å€è€—å°½çš„é—®é¢˜ã€‚","text":"IPv6 æ˜¯ç½‘ç»œå±‚åè®®çš„ç¬¬äºŒä»£æ ‡å‡†åè®®ï¼Œå°† IP åœ°å€é•¿åº¦ä»åŸæ¥çš„ 32 ä½å‡çº§ä¸º 128 ä½ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº† IP åœ°å€è€—å°½çš„é—®é¢˜ã€‚ IPv6 åœ°å€IPv6 åœ°å€ç”± 128 ä½äºŒè¿›åˆ¶æ•°ç»„æˆï¼Œä¹¦å†™æ—¶é‡‡ç”¨åå…­è¿›åˆ¶ï¼Œåˆ†ä¸º 8 ç»„ï¼Œç»„ä¹‹é—´ç”¨ : åˆ†å¼€ï¼Œæ¯ç»„ 16 ä½ï¼Œç”¨ 4 ä¸ªåå…­è¿›åˆ¶è¡¨ç¤ºã€‚ 1XXXX:XXXX:XXXX:XXXX:XXXX:XXXX:XXXX:XXXX æ¯”å¦‚ 2001:00b8:130F:0000:0000:09C0:0000:0000 ç®€å†™å¦‚ IPv6 åœ°å€ 2001:00b8:130F:0000:0000:09C0:0000:0000 æ¯ç»„å‰åŠéƒ¨åˆ†çš„ 0 å¯çœå»ï¼Œ0000 å¯ç®€å†™ä¸º 0 2001:b8:130F:0:0:9C0:0:0 è¿ç»­çš„ 0 å¯ä»¥ç”¨ :: ç¼©å†™ï¼ˆåªèƒ½ç”¨ä¸€ä¸ª ::ï¼Œä¸”ç¼©æœ€å‰é¢é‚£ä¸ªè¿ç»­ 0ï¼‰ 2001:b8:130F::9C0:0:0 IPv4 è½¬ IPv6åŸ IPv4 åœ°å€è½¬ IPv6 é‡‡ç”¨ 0:0:0:0:0:FFFF:IPv4-address æ ¼å¼ã€‚ å¦‚ 172.17.0.3 å˜æˆ 0:0:0:0:0:FFFF:172.17.0.3 åœ°å€ç»“æ„IPv6 åœ°å€å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šç½‘ç»œå‰ç¼€ã€æ¥å£æ ‡è¯† ç½‘ç»œå‰ç¼€ï¼šå‰ n ä½åˆ’åˆ†ä¸ºç½‘ç»œå‰ç¼€ï¼Œç±»ä¼¼äº IPv4 ä¸­çš„ç½‘ç»œå·ï¼Œä¸€èˆ¬æ¨èä½¿ç”¨ 64 ä½ æ¥å£æ ‡è¯†ï¼šå 128-n ä½åˆ’åˆ†ä¸ºç½‘ç»œå‰ç¼€ï¼Œç±»ä¼¼äº IPv4 ä¸­çš„ä¸»æœºå· å¦‚ 2001:db8:130F:0000:0000:09C0:876A:130B/64ï¼Œ/ åæ•°å­—è¡¨ç¤ºç½‘ç»œå‰ç¼€çš„é•¿åº¦ åœ°å€åˆ’åˆ†æŒ‰ç…§ç›®çš„åœ°å€ï¼Œå¯ä»¥å°† IPv6 åœ°å€åˆ’åˆ†æˆä¸‹é¢ä¸‰ç§ç±»å‹ï¼š å•æ’­åœ°å€ï¼šå”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ¥å£ï¼Œå’Œ IPv4 å•æ’­ä¸€æ ·ï¼Œç‚¹å¯¹ç‚¹çš„é€šä¿¡ã€‚ ç»„æ’­åœ°å€ï¼šä¸€ç‚¹å¯¹å¤šç‚¹çš„é€šä¿¡ï¼Œå’Œ IPv4 ç»„æ’­ä¸€æ ·ï¼Œå‘é€åˆ°ç»„æ’­åœ°å€çš„æ•°æ®åŒ…è¢«ä¼ è¾“ç»™æ­¤åœ°å€æ‰€æ ‡è¯†çš„æ‰€æœ‰æ¥å£ã€‚ ä»»æ’­åœ°å€ï¼šIPv6 ç›¸æ¯” IPv4 æ–°å¢åœ°å€ç±»å‹ï¼Œå‘é€åˆ°ä»»æ’­åœ°å€çš„æ•°æ®åŒ…è¢«ä¼ è¾“ç»™æ­¤åœ°å€æ‰€æ ‡è¯†çš„ä¸€ç»„æ¥å£ä¸­è·ç¦»æºèŠ‚ç‚¹æœ€è¿‘çš„ä¸€ä¸ªæ¥å£ã€‚ IPv6 ä¸æ”¯æŒå¹¿æ’­ï¼Œå¹¿æ’­åœ°å€çš„åŠŸèƒ½å‡ç”±ç»„æ’­åœ°å€æ¥æä¾›ã€‚IPv4 ä¾èµ– BGP æ¥å®ç°ä»»æ’­ã€‚ IPv6 å•æ’­åœ°å€åˆå¯åˆ†ä¸º åœ°å€ç±»å‹ äºŒè¿›åˆ¶å‰ç¼€ IPv6å‰ç¼€æ ‡è¯† é“¾è·¯æœ¬åœ°å•æ’­åœ°å€ 1111111010 FE80::/10 å”¯ä¸€æœ¬åœ°åœ°å€ 1111110 FC00::/7 ç¯å›åœ°å€ 00â€¦1 (128 bits) ::1/128 æœªæŒ‡å®šåœ°å€ 00â€¦0 (128 bits) ::/128 å…¨çƒå•æ’­åœ°å€ å…¶ä»– -","categories":[],"tags":[]},{"title":"Linuxæ—¥å¿—ç®¡ç†å·¥å…·--logrotate","slug":"Linuxæ—¥å¿—ç®¡ç†å·¥å…·-logrotate","date":"2024-12-06T16:45:51.000Z","updated":"2024-12-16T05:23:49.137Z","comments":true,"path":"2024/12/07/Linuxæ—¥å¿—ç®¡ç†å·¥å…·-logrotate/","link":"","permalink":"https://gy23333.github.io/2024/12/07/Linux%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-logrotate/","excerpt":"logrotate æ˜¯ Linux ç³»ç»Ÿä¸­ç”¨æ¥ç®¡ç†æ—¥å¿—çš„å·¥å…·ï¼Œé€šè¿‡é…ç½®å¯ä»¥å®ç°æ—¥å¿—çš„è‡ªåŠ¨è½®è½¬ã€å‹ç¼©ã€åˆ é™¤ã€é‚®ä»¶å‘é€åŠŸèƒ½ã€‚","text":"logrotate æ˜¯ Linux ç³»ç»Ÿä¸­ç”¨æ¥ç®¡ç†æ—¥å¿—çš„å·¥å…·ï¼Œé€šè¿‡é…ç½®å¯ä»¥å®ç°æ—¥å¿—çš„è‡ªåŠ¨è½®è½¬ã€å‹ç¼©ã€åˆ é™¤ã€é‚®ä»¶å‘é€åŠŸèƒ½ã€‚ æ¦‚è¿°logrotate æä¾›äº†æ—¥å¿—çš„è‡ªåŠ¨è½®è½¬ã€å‹ç¼©ã€åˆ é™¤ã€é‚®ä»¶å‘é€èƒ½åŠ›ï¼Œå¯ä»¥è®¾ç½®å®šæœŸæˆ–è€…é™åˆ¶æ–‡ä»¶å¤§å°æ¥è§¦å‘ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œlogrotate éƒ½æ˜¯ä½œä¸ºæ¯æ—¥çš„å®šæ—¶ä»»åŠ¡è¿è¡Œï¼Œä¸€èˆ¬ä¸ä¼šä¸€å¤©å†…å¤„ç†å¤šæ¬¡ï¼Œé™¤éè§¦å‘æ¡ä»¶æ˜¯åŸºäºæ–‡ä»¶çš„å¤§å°å¹¶ä¸”è®¾ç½® logrotate ä¸€å¤©æ‰§è¡Œå¤šæ¬¡ï¼Œæˆ–è€…åœ¨æ‰§è¡Œæ—¶ä½¿ç”¨å¼ºåˆ¶é€‰é¡¹ -f logrotate å‘½ä»¤1logrotate [OPTION...] &lt;configfile&gt; -d, --debugï¼šä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œï¼Œæ‰“å°å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼Œä½†ä¸æ‰§è¡Œä»»ä½•è½®è½¬æ“ä½œ -f, --forceï¼šå¼ºåˆ¶æ‰§è¡Œæ—¥å¿—è½®è½¬ï¼Œå³ä½¿ä¸ç¬¦åˆè½®è½¬æ¡ä»¶ -v, --verboseï¼šåœ¨è½®è½¬æ—¶æ˜¾ç¤ºæ›´å¤šä¿¡æ¯ -s, --state=statefileï¼šæŒ‡å®šä¸€ä¸ªçŠ¶æ€æ–‡ä»¶æ¥è®°å½•æ—¥å¿—è½®è½¬çš„å†å²çŠ¶æ€ï¼Œé»˜è®¤çŠ¶æ€æ–‡ä»¶æ˜¯ /var/lib/logrotate/status 1logrotate -s &#x2F;var&#x2F;log&#x2F;logrotate.status &#x2F;etc&#x2F;logrotate.conf -l, --log=logfileï¼šæŒ‡å®š logrotate æ—¥å¿—è®°å…¥çš„æ—¥å¿—æ–‡ä»¶ -m, --mail=commandï¼šæŒ‡å®šå‘é€é‚®ä»¶çš„å‘½ä»¤ logrotate å®šæ—¶ä»»åŠ¡logrotate é…ç½®æ–‡ä»¶å°† logrotate é…ç½®æ–‡ä»¶æŒ‰è·¯å¾„ä¸åŒåˆ†ä¸ºä¸‹é¢ä¸‰ç§ï¼š /etc/logrotate.conf /etc/logrotate.d/ å…¶ä»–è·¯å¾„ logrotate é…ç½®å‚è€ƒ logrotate å®˜æ–¹æ–‡æ¡£","categories":[{"name":"Linux","slug":"Linux","permalink":"https://gy23333.github.io/categories/Linux/"}],"tags":[{"name":"logrotate","slug":"logrotate","permalink":"https://gy23333.github.io/tags/logrotate/"}]},{"title":"åŸºäºFRRouting/Birdçš„OSPFç»„ç½‘åŠè´Ÿè½½å‡è¡¡å®ç°","slug":"åŸºäºFRRouting-Birdçš„OSPFç»„ç½‘åŠè´Ÿè½½å‡è¡¡å®ç°","date":"2024-12-06T16:36:31.000Z","updated":"2024-12-09T13:33:38.863Z","comments":true,"path":"2024/12/07/åŸºäºFRRouting-Birdçš„OSPFç»„ç½‘åŠè´Ÿè½½å‡è¡¡å®ç°/","link":"","permalink":"https://gy23333.github.io/2024/12/07/%E5%9F%BA%E4%BA%8EFRRouting-Bird%E7%9A%84OSPF%E7%BB%84%E7%BD%91%E5%8F%8A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%AE%9E%E7%8E%B0/","excerpt":"åŸºäº FRRouting/Bird é…ç½®å¤šè™šæ‹Ÿæœºä¹‹é—´çš„ OSPF ç»„ç½‘ï¼ˆå»ºé‚»ã€è·¯ç”±äº¤æ¢ï¼‰ï¼Œå¹¶å®ç°å¤šè·¯å¾„è´Ÿè½½å‡è¡¡ã€‚","text":"åŸºäº FRRouting/Bird é…ç½®å¤šè™šæ‹Ÿæœºä¹‹é—´çš„ OSPF ç»„ç½‘ï¼ˆå»ºé‚»ã€è·¯ç”±äº¤æ¢ï¼‰ï¼Œå¹¶å®ç°å¤šè·¯å¾„è´Ÿè½½å‡è¡¡ã€‚ æ¦‚è¿°FRRoutingã€Bird éƒ½æ˜¯å¸¸ç”¨çš„å¼€æºè·¯ç”±è½¯ä»¶ï¼Œæ”¯æŒ OSPF åè®®ã€‚æœ¬æ–‡é‡‡ç”¨ FRRouting ä½œä¸ºä¸¤å° DNS Server çš„è·¯ç”±å‘å¸ƒå™¨ï¼ŒBird ä½œä¸º DR å…¼ Client çš„è·¯ç”±è½¯ä»¶ï¼ˆåœ¨å®é™…æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä¸­ä»»ä¸€æ¬¾è½¯ä»¶æ¥å®ç° OSPF çš„ç»„ç½‘ï¼‰ï¼Œé€šè¿‡ FRRouting å‘å¸ƒ VIPï¼Œå®ç° OSPF åœºæ™¯ä¸‹çš„å¤šè·¯å¾„è´Ÿè½½å‡è¡¡ã€‚ ç¯å¢ƒå‡†å¤‡1ã€åˆ›å»ºä¸‰å°è™šæ‹Ÿæœºï¼Œæ¯å°è™šæ‹Ÿæœºè‡³å°‘æœ‰ä¸€å¼ å¯ç”¨çš„ç½‘å¡å®‰è£… Linux è™šæ‹Ÿæœºï¼Œæœ¬æ–‡å®‰è£…äº†ä¸‰å° Ubuntu 24.04.1ï¼Œå®‰è£…è¿‡ç¨‹å‚è€ƒ Macå®‰è£…è™šæ‹Ÿæœº 2ã€åœ¨å…¶ä¸­ä¸€å°è™šæ‹Ÿæœºä¸Šå®‰è£… birdbirdå®‰è£…æ–¹æ³• 1sudo apt install bird2 3ã€åœ¨å¦å¤–ä¸¤å°è™šæ‹Ÿæœºä¸Šå®‰è£… FRRouting ä»¥åŠ CorednsFRRoutingå®‰è£…æ–¹æ³• 1sudo apt install frr Coredns ä¸‹è½½ 123wget https:&#x2F;&#x2F;github.com&#x2F;coredns&#x2F;coredns&#x2F;releases&#x2F;download&#x2F;v1.12.0&#x2F;coredns_1.12.0_linux_arm64.tgztar -zxvf coredns_1.12.0_linux_arm64.tgzsudo mv coredns &#x2F;usr&#x2F;local&#x2F;bin&#x2F; 1coredns --version OSPF å»ºé‚»ç›®æ ‡ï¼šä»¥ Bird èŠ‚ç‚¹ä½œä¸º DRï¼Œå®ç° 3 å°è™šæ‹Ÿæœºçš„å»ºé‚»ç»„ç½‘ã€‚ FRRouting é…ç½® OSPFå¼€å¯ ospfd è¿›ç¨‹ ä¿®æ”¹ daemons æ–‡ä»¶ï¼Œé»˜è®¤ä½ç½®åœ¨ /etc/frr/daemonsï¼Œå°† ospfd å¼€å…³æ‰“å¼€ 1ospfd&#x3D;yes é‡å¯ FRRï¼ŒæŸ¥çœ‹ ospfd è¿›ç¨‹æ˜¯å¦æ­£å¸¸å¯åŠ¨ 1systemctl restart frr 12345678910111213141516171819202122232425262728root@ubuntu2:~$ systemctl status frrâ— frr.service - FRRouting Loaded: loaded (/etc/systemd/system/frr.service; enabled; preset: enabled) Active: active (running) since Sun 2024-12-08 16:47:09 UTC; 5s ago Docs: https://frrouting.readthedocs.io/en/latest/setup.html Process: 39653 ExecStart=/usr/lib/frr/frrinit.sh start (code=exited, status=0/SUCCESS) Main PID: 39664 (watchfrr) Status: \"FRR Operational\" Tasks: 10 (limit: 4550) Memory: 18.6M (peak: 32.1M) CPU: 117ms CGroup: /system.slice/frr.service â”œâ”€39664 /usr/lib/frr/watchfrr -d -F traditional zebra mgmtd ospfd staticd â”œâ”€39676 /usr/lib/frr/zebra -d -F traditional -A 127.0.0.1 -s 90000000 â”œâ”€39681 /usr/lib/frr/mgmtd -d -F traditional -A 127.0.0.1 â”œâ”€39683 /usr/lib/frr/ospfd -d -F traditional -A 127.0.0.1 â””â”€39686 /usr/lib/frr/staticd -d -F traditional -A 127.0.0.1Dec 08 16:47:09 ubuntu2 frrinit.sh[39693]: [39693|ospfd] doneDec 08 16:47:09 ubuntu2 staticd[39686]: [VTVCM-Y2NW3] Configuration Read in Took: 00:00:00Dec 08 16:47:09 ubuntu2 frrinit.sh[39706]: [39706|staticd] doneDec 08 16:47:09 ubuntu2 watchfrr[39664]: [QDG3Y-BY5TN] zebra state -&gt; up : connect succeededDec 08 16:47:09 ubuntu2 frrinit.sh[39653]: * Started watchfrrDec 08 16:47:09 ubuntu2 watchfrr[39664]: [QDG3Y-BY5TN] mgmtd state -&gt; up : connect succeededDec 08 16:47:09 ubuntu2 watchfrr[39664]: [QDG3Y-BY5TN] ospfd state -&gt; up : connect succeededDec 08 16:47:09 ubuntu2 watchfrr[39664]: [QDG3Y-BY5TN] staticd state -&gt; up : connect succeededDec 08 16:47:09 ubuntu2 watchfrr[39664]: [KWE5Q-QNGFC] all daemons up, doing startup-complete notifyDec 08 16:47:09 ubuntu2 systemd[1]: Started frr.service - FRRouting. FRR é…ç½®è¯¥ FRR èŠ‚ç‚¹ç½‘å¡ä¿¡æ¯ 1234567891011121314guoyi@ubuntu2:~$ ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host noprefixroute valid_lft forever preferred_lft forever2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:62:77:76 brd ff:ff:ff:ff:ff:ff altname enp2s0 inet 172.16.19.131/24 metric 100 brd 172.16.19.255 scope global dynamic ens160 valid_lft 1194sec preferred_lft 1194sec inet6 fe80::20c:29ff:fe62:7776/64 scope link valid_lft forever preferred_lft forever ä½¿ç”¨ ens160 ç½‘å¡ä½œä¸º OSPF ç½‘å¡ 123456789101112!interface ens160 ip ospf area 0.0.0.0 ip ospf dead-interval 20 ip ospf hello-interval 5 ip ospf priority 0exit!router ospf ospf router-id 172.16.19.131exit! ip ospf area 0.0.0.0 å°†è¯¥ç½‘å¡é…ç½®ä¸º OSPF ç½‘å¡ï¼Œå¹¶è®¾ç½® area ä¸º 0.0.0.0 ä¹Ÿå¯åœ¨ router ospf ä¸‹é…ç½® network 172.16.19.0/24 area 0.0.0.0ï¼Œä½†æ­¤é…ç½®ä¼šå°†æ‰€æœ‰è¯¥ç½‘æ®µçš„ç½‘å¡è®¾ç½®ä¸º OSPF ç½‘å¡ ip ospf dead-interval 20ã€ip ospf hello-interval 5 è®¾ç½® hello å’Œ dead çš„æ—¶é—´é—´éš” éœ€å»ºé‚»çš„æ‰€æœ‰èŠ‚ç‚¹è¿™ä¸¤ä¸ªé…ç½®éœ€ç›¸åŒ ip ospf priority 0 æ­¤èŠ‚ç‚¹ä¸ç«é€‰ DR/BDR ospf router-id 172.16.19.131 area å†…è¯¥ OSPF èŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ï¼Œä¸€èˆ¬ç”¨ç½‘å¡ IP æ¥è¡¨ç¤º Bird é…ç½® OSPFä½¿ç”¨ ens256 ç½‘å¡ä½œä¸º OSPF ç½‘å¡ 123456789protocol ospf v2 &#123; area 0 &#123; interface &quot;ens256&quot; &#123; priority 1; hello 10; dead 40; &#125;; &#125;;&#125; priority 1 å‚ä¸ç«é€‰ï¼Œä¸”ä¼˜å…ˆçº§æœ€é«˜ æŸ¥çœ‹å»ºé‚»BIRD èŠ‚ç‚¹ä½œä¸º DRï¼ŒæŸ¥çœ‹å…¶ä»–çš„èŠ‚ç‚¹çŠ¶æ€ï¼Œå‡å»ºé‚»æˆåŠŸï¼ˆFullï¼‰ 12345bird&gt; show ospf neighborsospf1:Router ID Pri State DTime Interface Router IP172.16.19.131 0 Full&#x2F;Other 17.621 ens256 172.16.19.131172.16.19.132 0 Full&#x2F;Other 19.486 ens256 172.16.19.132 FRRouting èŠ‚ç‚¹ä½œä¸º Otherï¼Œåªéœ€ä¸ DR èŠ‚ç‚¹å»ºé‚»æˆåŠŸï¼ŒOther èŠ‚ç‚¹ä¹‹é—´å¤„äº 2-Way çŠ¶æ€ 12345ubuntu2# show ip ospf neighborNeighbor ID Pri State Up Time Dead Time Address Interface RXmtL RqstL DBsmL172.16.19.129 1 Full&#x2F;DR 3m18s 16.350s 172.16.19.130 ens160:172.16.19.131 0 0 0172.16.19.132 0 2-Way&#x2F;DROther 3m49s 15.307s 172.16.19.132 ens160:172.16.19.131 0 0 0 éé»˜è®¤è·¯ç”±ç½‘å¡å»ºé‚»é—®é¢˜ä½¿ç”¨éé»˜è®¤è·¯ç”±ç½‘å¡ä½œä¸º OSPF ç½‘å¡æ—¶ï¼Œå¦‚å¼€å¯ä¸¥æ ¼çš„åå‘è·¯ç”±æ£€æŸ¥ï¼Œæ”¶åˆ°çš„ç»„æ’­ 224.0.0.5 çš„ hello åŒ…ä¼šè¢« rp_filter è¿‡æ»¤æ‰ï¼Œå¯¼è‡´ ospfd è¿›ç¨‹æ— æ³•æ”¶åˆ° hello åŒ…ï¼Œä¹Ÿå°±æ— æ³•å»ºé‚»ã€‚ è§£å†³æ–¹æ³•ï¼šå…³é—­æˆ–ä½¿ç”¨ loose çš„åå‘è·¯ç”±æ£€æŸ¥ã€‚è¯¦ç»†å‚è€ƒï¼šrp_filteråå‘è·¯ç”±è¿‡æ»¤ OSPF å¤šè·¯å¾„è´Ÿè½½å‡è¡¡OSPF æ”¯æŒå¤šè·¯å¾„çš„è´Ÿè½½å‡è¡¡ï¼Œå¦‚ä¸¤å° DNS Serverï¼Œä½¿ç”¨åŒæ ·çš„ VIPï¼Œé€šè¿‡ OSPF è·¯ç”±å¯ä»¥å®ç°æµé‡çš„è´Ÿè½½å‡è¡¡ã€‚ FRRouting å‘å¸ƒ VIPæ·»åŠ å¹¶å¼€å¯è™šæ‹Ÿç½‘å¡ vip_if0 12sudo ip link add vip_if0 type dummysudo ip link set vip_if0 up FRR é…ç½® vip_if0 ç½‘å¡ 123456!interface vip_if0 ip address 10.0.0.10&#x2F;32 ip ospf area 0.0.0.0exit! ip address 10.0.0.10/32 æ·»åŠ  10.0.0.10/32 ä½œä¸º VIP ip ospf area 0.0.0.0 è®¾ç½® vip_if0 ä¸º OSPF ç½‘å¡ï¼Œä½†æ­¤è™šæ‹Ÿç½‘å¡å®é™…æ— æ³•å»ºé‚» BIRD æ·»åŠ è·¯ç”±æ£€æŸ¥ BIRD é…ç½®æ˜¯å¦æ”¯æŒè·¯ç”±å¯¼å‡ºä»¥åŠå¤šè·¯å¾„è·¯ç”± ç¡®è®¤ BIRD å¼€å¯å°†å­¦åˆ°çš„è·¯ç”±å¯¼å‡ºåˆ°å†…æ ¸è·¯ç”±è¡¨ï¼Œç¡®è®¤ export all; å¼€å¯ 123456789protocol kernel &#123; ipv4 &#123; # Connect protocol to IPv4 table by channel# table master4; # Default IPv4 table is master4# import all; # Import to table, default is import all export all; # Export to protocol. default is export none &#125;;# learn; # Learn alien routes from the kernel# kernel table 10; # Kernel table to synchronize with (default: main)&#125; ç¡®è®¤ OSPF å¼€å¯ ecmpï¼Œä»¥æ”¯æŒ OSPF å¤šè·¯å¾„ã€‚ecmp é»˜è®¤ï¼ˆä¸å¡«å†™ï¼‰ä¸ºå¼€å¯çŠ¶æ€ï¼Œlimit é»˜è®¤ 16 123protocol ospf v2 &#123; ecmp &lt;switch&gt; [limit &lt;num&gt;];&#125; æŸ¥çœ‹ BIRD æ˜¯å¦å­¦ä¹ åˆ° VIP è·¯ç”±ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å­¦ä¹ åˆ°äº†è¯¥ VIP çš„ä¸¤æ¡è·¯ç”± 1234567bird&gt; show routeTable master4:10.0.0.10&#x2F;32 unicast [ospf1 05:38:47.681] * I (150&#x2F;20) [172.16.19.132] via 172.16.19.131 on ens256 weight 1 via 172.16.19.132 on ens256 weight 1172.16.19.0&#x2F;24 unicast [ospf1 04:35:44.681] * I (150&#x2F;10) [172.16.19.129] dev ens256 æŸ¥çœ‹æ˜¯å¦å¯¼å…¥åˆ°äº† Linux è·¯ç”±è¡¨ 123456root@ubuntu2404:/home/guoyi/workplace# ip route show...10.0.0.10 proto bird metric 32 nexthop via 172.16.19.131 dev ens256 weight 1 nexthop via 172.16.19.132 dev ens256 weight 1... é…ç½®å¹¶è¿è¡Œ Coredns æ·»åŠ  Coredns é…ç½®åŠåŸŸåè§£æ /etc/coredns/Corefile 1234example.com &#123; log file &#x2F;etc&#x2F;coredns&#x2F;db.example.com&#125; /etc/coredns/db.example.com 1234567891011$TTL 3600@ IN SOA ns.example.com. admin.example.com. ( 1 ; Serial 3600 ; Refresh 1800 ; Retry 604800 ; Expire 86400 ) ; Minimum TTL@ IN NS ns.example.com.@ IN A 192.168.1.10ns IN A 192.168.1.10 åœæ­¢ systemd-resolve 1systemctl stop systemd-resolved è¿è¡Œ Coredns 1coredns -conf &#x2F;etc&#x2F;coredns&#x2F;Corefile æ£€æŸ¥ Coredns æ˜¯å¦æ­£å¸¸ 1234567891011121314151617181920212223242526guoyi@ubuntu2:~$ dig @127.0.0.1 example.com; &lt;&lt;&gt;&gt; DiG 9.18.28-0ubuntu0.24.04.1-Ubuntu &lt;&lt;&gt;&gt; @127.0.0.1 example.com; (1 server found);; global options: +cmd;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 45115;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1;; WARNING: recursion requested but not available;; OPT PSEUDOSECTION:; EDNS: version: 0, flags:; udp: 1232; COOKIE: a29f8e8fa133c213 (echoed);; QUESTION SECTION:;example.com. IN A;; ANSWER SECTION:example.com. 3600 IN A 192.168.1.10;; AUTHORITY SECTION:example.com. 3600 IN NS ns.example.com.;; Query time: 0 msec;; SERVER: 127.0.0.1#53(127.0.0.1) (UDP);; WHEN: Mon Dec 09 12:50:07 UTC 2024;; MSG SIZE rcvd: 118 æ‰“æµåœ¨ BIRD èŠ‚ç‚¹é€šè¿‡ dig VIP æ‰“æµï¼ŒæŸ¥çœ‹ä¸¤ä¸ª Coredns æœåŠ¡å™¨æ—¥å¿—æ˜¯å¦è´Ÿè½½å‡è¡¡æ‰¿æ¥æµé‡ã€‚ æ‰“æµå‰å…ˆç¡®è®¤ BIRD èŠ‚ç‚¹å†…æ ¸é…ç½® net.ipv4.fib_multipath_hash_policy 1sysctl -a | grep net.ipv4.fib_multipath_hash_policy è¯¥é…ç½®è®¾ç½®äº†å¤šè·¯å¾„è·¯ç”±å“ˆå¸Œç­–ç•¥ï¼Œç›¸åŒå…ƒç»„çš„åŒ…åœ¨å¤šè·¯å¾„ä¸‹ä¼šé€‰æ‹©åŒä¸€è·¯å¾„ net.ipv4.fib_multipath_hash_policy=0ï¼š{src_ip, dst_ip} net.ipv4.fib_multipath_hash_policy=1ï¼š{src_ip, src_port , dst_ip, dst_port, proto} éœ€å°† net.ipv4.fib_multipath_hash_policy è®¾ç½®ä¸º 1 1sysctl -w net.ipv4.fib_multipath_hash_policy=1 åœ¨ BIRD èŠ‚ç‚¹æ‰“æµåˆ° VIP 1for i in &#123;1..1000&#125;; do dig @10.0.0.10 example.com; done æŸ¥çœ‹ä¸¤ä¸ª Coredns èŠ‚ç‚¹æ—¥å¿—ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤èŠ‚ç‚¹å¹³åˆ†äº† VIP çš„æµé‡","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"tags":[{"name":"FRRouting","slug":"FRRouting","permalink":"https://gy23333.github.io/tags/FRRouting/"},{"name":"BIRD","slug":"BIRD","permalink":"https://gy23333.github.io/tags/BIRD/"}]},{"title":"bird","slug":"bird","date":"2024-12-03T05:03:54.000Z","updated":"2024-12-09T13:14:57.909Z","comments":true,"path":"2024/12/03/bird/","link":"","permalink":"https://gy23333.github.io/2024/12/03/bird/","excerpt":"bird","text":"bird å®‰è£… BIRDUbuntu å®‰è£… bird 1sudo apt install bird2 æ£€æŸ¥ bird æ˜¯å¦å®‰è£…æˆåŠŸ 12345678910111213141516guoyi@ubuntu2404:~$ systemctl status birdâ— bird.service - BIRD Internet Routing Daemon Loaded: loaded (/usr/lib/systemd/system/bird.service; enabled; preset: enabled) Active: active (running) since Tue 2024-12-03 05:05:57 UTC; 5 days ago Main PID: 28186 (bird) Tasks: 1 (limit: 4542) Memory: 924.0K (peak: 1.9M) CPU: 4.824s CGroup: /system.slice/bird.service â””â”€28186 /usr/sbin/bird -f -u bird -g birdDec 03 05:05:57 ubuntu2404 systemd[1]: Starting bird.service - BIRD Internet Routing Daemon...Dec 03 05:05:57 ubuntu2404 systemd[1]: Started bird.service - BIRD Internet Routing Daemon.Dec 03 05:05:57 ubuntu2404 (bird)[28186]: bird.service: Referenced but unset environment variable evaluates to an emp&gt;Dec 03 05:05:57 ubuntu2404 bird[28186]: Chosen router ID 172.16.19.129 according to interface ens160Dec 03 05:05:57 ubuntu2404 bird[28186]: Started birdc å‘½ä»¤é€šè¿‡ birdc è¿›å…¥ é‡æ–°åŠ è½½é…ç½® 1configure æŸ¥çœ‹è·¯ç”± 1show route æŸ¥çœ‹ OSPF é‚»å±…èŠ‚ç‚¹ 1show ospf neighbors BIRD é…ç½®é»˜è®¤é…ç½®è·¯å¾„ /etc/bird/bird.conf å‚è€ƒ BIRD ä¸­æ–‡æ–‡æ¡£","categories":[],"tags":[]},{"title":"rp_filteråå‘è·¯ç”±è¿‡æ»¤","slug":"rp-filteråå‘è·¯ç”±è¿‡æ»¤","date":"2024-11-22T15:54:54.000Z","updated":"2024-11-24T18:37:03.879Z","comments":true,"path":"2024/11/22/rp-filteråå‘è·¯ç”±è¿‡æ»¤/","link":"","permalink":"https://gy23333.github.io/2024/11/22/rp-filter%E5%8F%8D%E5%90%91%E8%B7%AF%E7%94%B1%E8%BF%87%E6%BB%A4/","excerpt":"Reverse Path Filteringï¼ŒLinux å†…æ ¸å¯¹æ¥æ”¶åˆ°çš„æ•°æ®åŒ…çš„åå‘è·¯ç”±æ ¡éªŒè¿‡æ»¤ï¼Œä¸»è¦ç”¨äºé˜²æ­¢ IP åœ°å€æ¬ºéª—æ”»å‡»ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»è¯¥æ ¡éªŒæœºåˆ¶ã€ç³»ç»Ÿé…ç½®æ–¹å¼ä»¥åŠè¿‡æ»¤åŒ…æŸ¥çœ‹æ–¹æ³•ã€‚","text":"Reverse Path Filteringï¼ŒLinux å†…æ ¸å¯¹æ¥æ”¶åˆ°çš„æ•°æ®åŒ…çš„åå‘è·¯ç”±æ ¡éªŒè¿‡æ»¤ï¼Œä¸»è¦ç”¨äºé˜²æ­¢ IP åœ°å€æ¬ºéª—æ”»å‡»ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»è¯¥æ ¡éªŒæœºåˆ¶ã€ç³»ç»Ÿé…ç½®æ–¹å¼ä»¥åŠè¿‡æ»¤åŒ…æŸ¥çœ‹æ–¹æ³•ã€‚ åå‘è·¯ç”±æ ¡éªŒæœºåˆ¶åå‘è·¯ç”±æ ¡éªŒï¼Œå³åœ¨ç½‘å¡æ”¶åˆ°æ•°æ®åŒ…åï¼Œæ ¡éªŒè¯¥æ•°æ®åŒ…çš„åå‘è·¯ç”±æ˜¯å¦åŒ¹é…ï¼Œå¦‚ä¸åŒ¹é…ï¼Œåˆ™ä¸¢å¼ƒè¯¥åŒ…ã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š å¯¹äºç½‘å¡æ”¶åˆ°çš„æ•°æ®åŒ…ï¼ŒLinux å†…æ ¸ä¼šæ£€æŸ¥è¯¥æ•°æ®åŒ…çš„æº IP å‚ç…§å½“å‰çš„è·¯ç”±è¡¨ï¼Œåˆ¤æ–­å¦‚ä»¥è¯¥æ•°æ®åŒ…çš„æº IP ä½œä¸ºç›®çš„ IPï¼Œè¿”å›è·¯å¾„çš„è·¯ç”±é€‰æ‹©æ˜¯å¦ä¸å½“å‰æ¥æ”¶æ¥å£ä¸€è‡´ å¦‚ä¸ä¸€è‡´ï¼Œåˆ™è®¤ä¸ºè¯¥æ•°æ®åŒ…å¯èƒ½æ˜¯ä¼ªé€ çš„ï¼Œä¸¢å¼ƒè¯¥æ•°æ®åŒ… å¦‚ä¸‹å›¾ï¼Œeth1 ç½‘å¡å¼€å¯äº†ä¸¥æ ¼çš„ rp_filter æ£€æŸ¥ï¼Œæ­¤æ—¶ eth1 ç½‘å¡æ”¶åˆ°æº IP ä¸º 172.16.19.24 çš„åŒ…ï¼Œrp_filter æ£€æŸ¥å¦‚æœä»¥ 172.16.19.24 ä¸ºç›®çš„ IPï¼Œæ ¹æ®è·¯ç”±è¡¨ï¼ŒåŒ¹é…çš„ç½‘å¡åº”è¯¥ä¸º eth0ï¼Œè€Œä¸æ˜¯æ”¶åˆ°åŒ…çš„ eth1ï¼Œå› æ­¤åˆ¤æ–­è¯¥æ•°æ®åŒ…å¯èƒ½ä¼ªé€ æº IPï¼Œä¸¢å¼ƒè¯¥åŒ…ã€‚ Linux å†…æ ¸å‚æ•°net.ipv4.conf.XXX.rp_filterLinux å†…æ ¸å‚æ•°è¯¦è§£ rp_filter ä¸º Linux ç”¨äºè®¾ç½®åå‘è·¯ç”±æ ¡éªŒæœºåˆ¶çš„å†…æ ¸å‚æ•°ï¼Œå…±æœ‰ä¸‰ç§å¯é…ç½®å€¼ 0ã€1ã€2ï¼Œ rp_filter = 0ï¼šå…³é—­åå‘è·¯ç”±æ ¡éªŒã€‚ rp_filter = 1ï¼šå¼€å¯ä¸¥æ ¼çš„åå‘è·¯ç”±æ ¡éªŒã€‚å¦‚æœåå‘è·¯ç”±ä¸æ˜¯æœ€ä½³è·¯ç”±ï¼Œåˆ™ä¸¢å¼ƒè¯¥åŒ…ã€‚ rp_filter = 2ï¼šå¼€å¯æ¾æ•£çš„åå‘è·¯ç”±æ ¡éªŒã€‚å¯¹äºæ”¶åˆ°çš„æ•°æ®åŒ…ï¼Œåªæ£€æŸ¥å…¶æº IP æ˜¯å¦å¯è¾¾ï¼Œå³åå‘è·¯ç”±æ˜¯å¦å¯é€šï¼ˆä»»æ„ç½‘å¡å‡å¯ï¼‰ï¼Œå¦‚æœåå‘è·¯å¾„ä¸é€šï¼Œåˆ™ä¸¢å¼ƒè¯¥åŒ…ã€‚ rp_filter åˆ†ä¸ºä¸‰ç±»ï¼šallã€defaultã€ç‰¹å®šç½‘å¡ã€‚ default ç”¨äºç”Ÿæˆç½‘å¡æ—¶è®¾ç½®é»˜è®¤çš„ rp_filter å€¼ æ¯å¼ ç½‘å¡çš„ rp_filter å– conf/{all,interface}/rp_filter ä¸­çš„æœ€å¤§å€¼ å¦‚ä¸‹é¢é…ç½®ï¼Œeth0 çš„ rp_filter ä¸º 1ï¼ˆå– all å’Œ eth0 ä¸­çš„æœ€å¤§å€¼ï¼‰ï¼Œeth1 çš„ rp_filter ä¸º 2ï¼ˆå– all å’Œ eth1 ä¸­çš„æœ€å¤§å€¼ï¼‰ 123net.ipv4.conf.all.rp_filter = 1net.ipv4.conf.eth0.rp_filter = 0net.ipv4.conf.eth1.rp_filter = 2 æŸ¥çœ‹ rp_filter1234567root@ubuntu2404:~# sysctl -a | grep rp_filternet.ipv4.conf.all.rp_filter = 2net.ipv4.conf.default.rp_filter = 2net.ipv4.conf.ens160.rp_filter = 2net.ipv4.conf.ens256.rp_filter = 2net.ipv4.conf.lo.rp_filter = 0... è®¾ç½® rp_filterä¸´æ—¶è®¾ç½®ï¼ˆé‡å¯åå¤±æ•ˆï¼‰ 12root@ubuntu2404:~# sysctl -w net.ipv4.conf.ens160.rp_filter=1net.ipv4.conf.ens160.rp_filter = 1 tcpdump ä¸ rp_filtertcpdump ä¾æ—§å¯ä»¥æŠ“åˆ°è¢« rp_filter è¿‡æ»¤æ‰çš„åŒ…ã€‚ ä¸‹å›¾çš„äº”å±‚ç½‘ç»œåˆ†å±‚æ¨¡å‹ä¸­ï¼Œæ”¶åŒ…æ˜¯ä»ä¸‹åˆ°ä¸Šï¼Œå‘åŒ…æ˜¯ä»ä¸Šåˆ°ä¸‹ã€‚ tcpdump è¿è¡Œåœ¨é“¾è·¯å±‚çš„ç½‘ç»œè®¾å¤‡å±‚ï¼Œè€Œ rp_filter è¿è¡Œåœ¨åè®®æ ˆçš„ç½‘ç»œå±‚ï¼Œå¯¹äºæ”¶åŒ…æµç¨‹æ¥è¯´ï¼Œtcpdump å…ˆäº rp_filter è¿›è¡Œï¼Œæ‰€ä»¥å³ä½¿æ•°æ®åŒ…ä¼šè¢« rp_filter è¿‡æ»¤æ‰ï¼Œä¾æ—§å¯ä»¥é€šè¿‡ tcpdump æŠ“åˆ°è¯¥æ•°æ®åŒ…ã€‚ rp_filter æ—¥å¿—é»˜è®¤æƒ…å†µä¸‹ï¼Œå†…æ ¸å¹¶ä¸ä¼šè®°å½•è¢« rp_filter è¿‡æ»¤æ‰çš„åŒ…ï¼Œä½†å¯ä»¥é€šè¿‡ iptables æ·»åŠ æ—¥å¿—è§„åˆ™ï¼Œæ¨¡æ‹Ÿå’Œé¢„æµ‹å“ªäº›åŒ…ä¼šè¢« rp_filter ä¸¢å¼ƒã€‚ æ·»åŠ  iptables æ—¥å¿—è§„åˆ™ï¼ˆå¦‚éœ€åˆ é™¤ï¼Œåˆ™æŠŠå…¶ä¸­çš„ -A æ”¹æˆ -Dï¼‰ 1iptables -t raw -A PREROUTING -m rpfilter --invert -j LOG --log-prefix \"RP_FILTER_DROP: \" æŸ¥çœ‹æ·»åŠ çš„ iptables æ—¥å¿—è§„åˆ™ 1234root@ubuntu2404:~# iptables -t raw -L PREROUTING -vChain PREROUTING (policy ACCEPT 299 packets, 20976 bytes) pkts bytes target prot opt in out source destination 299 20976 LOG all -- any any anywhere anywhere rpfilter invert LOG level warn prefix \"RP_FILTER_DROP: \" æŸ¥çœ‹å†…æ ¸æ—¥å¿— 1dmesg -T | grep &quot;RP_FILTER_DROP&quot; 1234root@ubuntu2404:~# dmesg -T | grep \"RP_FILTER_DROP\" | tail -20[Sun Nov 24 18:27:49 2024] RP_FILTER_DROP: IN=ens256 OUT= MAC=00:0c:29:48:8d:03:ae:07:75:50:39:65:08:00 SRC=172.16.19.1 DST=172.16.19.129 LEN=88 TOS=0x0A PREC=0x40 TTL=64 ID=0 DF PROTO=TCP SPT=60402 DPT=22 WINDOW=2048 RES=0x00 ACK PSH URGP=0[Sun Nov 24 18:27:49 2024] RP_FILTER_DROP: IN=ens256 OUT= MAC=00:0c:29:48:8d:03:ae:07:75:50:39:65:08:00 SRC=172.16.19.1 DST=172.16.19.129 LEN=52 TOS=0x08 PREC=0x40 TTL=64 ID=0 DF PROTO=TCP SPT=60402 DPT=22 WINDOW=2047 RES=0x00 ACK URGP=0[Sun Nov 24 18:27:49 2024] RP_FILTER_DROP: IN=ens256 OUT= MAC=00:0c:29:48:8d:03:ae:07:75:50:39:65:08:00 SRC=172.16.19.1 DST=172.16.19.129 LEN=88 TOS=0x0A PREC=0x40 TTL=64 ID=0 DF PROTO=TCP SPT=60402 DPT=22 WINDOW=2048 RES=0x00 ACK PSH URGP=0","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"Linux","slug":"Linux","permalink":"https://gy23333.github.io/tags/Linux/"}]},{"title":"Go è°ƒè¯•å™¨:Delve","slug":"Goè°ƒè¯•å™¨-Delve","date":"2024-11-18T17:06:33.000Z","updated":"2025-04-23T13:47:44.851Z","comments":true,"path":"2024/11/19/Goè°ƒè¯•å™¨-Delve/","link":"","permalink":"https://gy23333.github.io/2024/11/19/Go%E8%B0%83%E8%AF%95%E5%99%A8-Delve/","excerpt":"Go è°ƒè¯•å™¨:Delve","text":"Go è°ƒè¯•å™¨:Delve å®‰è£…1go install github.com&#x2F;go-delve&#x2F;delve&#x2F;cmd&#x2F;dlv@latest æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ 1dlv version è¿›å…¥è°ƒè¯• è°ƒè¯•æºæ–‡ä»¶ 1dlv debug main.go è°ƒè¯•å¯æ‰§è¡Œæ–‡ä»¶ 1dlv exec .&#x2F;main è°ƒè¯•è¿›ç¨‹ 1dlv attach &lt;PROCESS_ID&gt; è°ƒè¯•å‘½ä»¤å¯ä»¥é€šè¿‡ help æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ è¿è¡Œç¨‹åº å‘½ä»¤ æè¿° call æ¢å¤è¿›ç¨‹ï¼Œè°ƒç”¨å‡½æ•° (å®éªŒé˜¶æ®µ) continue(c) ç»§ç»­è¿è¡Œç¨‹åºï¼Œç›´åˆ°é‡åˆ°æ–­ç‚¹æˆ–ç¨‹åºç»“æŸ next(n) å•æ­¥è°ƒè¯•ï¼ˆè·³è¿‡å‡½æ•°å†…éƒ¨ï¼‰ step(s) å•æ­¥è°ƒè¯•ï¼ˆè¿›å…¥å‡½æ•°å†…éƒ¨ï¼‰ restart(r) é‡æ–°è¿è¡Œ stepout(so) ä»å½“å‰å‡½æ•°è·³å‡º æ–­ç‚¹ å‘½ä»¤ æè¿° break(b) è®¾ç½®æ–­ç‚¹ breakpoints(bp) æ‰“å°æ‰€æœ‰æ–­ç‚¹ clear åˆ é™¤æ–­ç‚¹ clearall åˆ é™¤æ‰€æœ‰æ–­ç‚¹ condition è®¾ç½®æ¡ä»¶æ–­ç‚¹ on è®¾ç½®ä¸€ä¸ªæ–­ç‚¹è§¦å‘æ—¶æ‰§è¡Œçš„å‘½ä»¤ toggle æ‰“å¼€/å…³é—­ æ–­ç‚¹ æŸ¥çœ‹å˜é‡ å‘½ä»¤ æè¿° args æ‰“å°å‡½æ•°å‚æ•° display æ¯æ¬¡ç¨‹åºåœæ­¢æ—¶æ‰“å°è¡¨è¾¾å¼çš„å€¼ examinemem è§£æç»™å®šåœ°å€çš„å†…å­˜ locals æ‰“å°æœ¬åœ°å˜é‡ print(p) è§£æä¸€ä¸ªè¡¨è¾¾å¼ regs æ‰“å°å¯„å­˜å™¨ä¿¡æ¯ set è®¾ç½®å˜é‡çš„å€¼ vars æ‰“å°åŒ…å†…å˜é‡ whatis æ‰“å°ç±»å‹ä¿¡æ¯","categories":[],"tags":[]},{"title":"ç®—æ³•é¢˜","slug":"ç®—æ³•é¢˜","date":"2024-11-17T14:58:09.000Z","updated":"2024-11-17T15:16:21.459Z","comments":true,"path":"2024/11/17/ç®—æ³•é¢˜/","link":"","permalink":"https://gy23333.github.io/2024/11/17/%E7%AE%97%E6%B3%95%E9%A2%98/","excerpt":"LeetCode Go åˆ·é¢˜è®°å½•","text":"LeetCode Go åˆ·é¢˜è®°å½• å“ˆå¸Œè¡¨å‚è€ƒ [åŠ›æ‰£åˆ·é¢˜æ”»ç•¥] Reï¼šä»é›¶å¼€å§‹çš„åŠ›æ‰£åˆ·é¢˜ç”Ÿæ´»","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","slug":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","date":"2024-11-06T16:09:44.000Z","updated":"2024-11-12T18:01:02.564Z","comments":true,"path":"2024/11/07/ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•/","link":"","permalink":"https://gy23333.github.io/2024/11/07/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/","excerpt":"ä¸€è‡´æ€§å“ˆå¸Œï¼ŒConsistent Hashingï¼Œç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„è´Ÿè½½å‡è¡¡ï¼Œè§£å†³äº†ä¼ ç»Ÿå“ˆå¸Œç®—æ³•çš„èŠ‚ç‚¹æ‰©ç¼©å®¹é—®é¢˜ã€‚","text":"ä¸€è‡´æ€§å“ˆå¸Œï¼ŒConsistent Hashingï¼Œç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„è´Ÿè½½å‡è¡¡ï¼Œè§£å†³äº†ä¼ ç»Ÿå“ˆå¸Œç®—æ³•çš„èŠ‚ç‚¹æ‰©ç¼©å®¹é—®é¢˜ã€‚ åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé›†ç¾¤ç”±å¤šå°æœåŠ¡å™¨ç»„æˆï¼Œæ•°æ®é‡‡ç”¨åˆ†å¸ƒå¼ç¼“å­˜ï¼ŒæœŸæœ›å°†æ•°æ®å°½é‡å‡åŒ€åœ°åˆ†é…ç¼“å­˜åˆ°å„ä¸ªæœåŠ¡å™¨ï¼Œæ¯ä¸ªæœåŠ¡å™¨ä¸Šæœ‰ç€ä¸åŒçš„ç¼“å­˜ï¼Œä»¥åˆ†æ‹…å‹åŠ›ã€‚è¯·æ±‚æ•°æ®æ—¶ï¼Œå†åˆ°ç›¸åº”çš„æœåŠ¡å™¨è·å–ç¼“å­˜ã€‚è¿™éƒ¨åˆ†å·¥ä½œç”±è´Ÿè½½å‡è¡¡å±‚ LB æ¥å®Œæˆã€‚ åˆ†å¸ƒå¼ç³»ç»Ÿåº”æ»¡è¶³ä¸‹é¢è¦æ±‚ï¼š å¯¹äºåŒä¸€ä¸ªæ•°æ®çš„è¯·æ±‚è½åœ¨ç›¸åŒçš„æœåŠ¡å™¨ä¸Š æ•°æ®åˆ†é…å°½é‡å‡åŒ€ å½“æœåŠ¡å™¨æ•°é‡å¢å‡æ—¶ï¼Œå°½é‡å‡å°åŸæœ‰æ•°æ®åˆ†é…å˜åŒ– ä¼ ç»Ÿå“ˆå¸Œç®—æ³•ä¼ ç»Ÿå“ˆå¸Œç®—æ³•å“ˆå¸Œç®—æ³•é‡‡ç”¨å–æ¨¡è¿ç®—ï¼ŒåŸºäºä¸‹é¢çš„å…¬å¼ï¼Œå°† hash å€¼å¯¹æœºå™¨æ•°é‡å–ä½™ï¼Œå°†æ•°æ®çš„ key æ˜ å°„åˆ°èŠ‚ç‚¹ã€‚ hash(key) \\% size æ‰©ç¼©å®¹é—®é¢˜æœåŠ¡å™¨é›†ç¾¤ä¼šå› ä¸ºä¸šåŠ¡é‡å˜åŒ–éœ€æ±‚è€Œæ‰©ç¼©å®¹ï¼Œå¢åŠ æˆ–å‡å°‘èŠ‚ç‚¹æ•°ï¼Œæ­¤æ—¶æ˜ å°„å…³ç³»å‘ç”Ÿå¤§é‡å˜åŒ–ï¼Œç¼“å­˜å¤±æ•ˆï¼Œéœ€è¦è¿›è¡Œæ•°æ®è¿ç§»ï¼Œä»¥ä¿è¯è¯·æ±‚æ­£å¸¸ã€‚æ•°æ®è¿ç§»è§„æ¨¡ O(M)ï¼Œè¿ç§»æˆæœ¬æå¤§ï¼Œå¯¼è‡´æœåŠ¡å™¨ç¬æ—¶å‹åŠ›å·¨å¤§ã€‚ ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å“ˆå¸Œç¯ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥å“ˆå¸Œç¯è§£å†³äº†æ‰©ç¼©å®¹å¯¼è‡´è¿‡å¤šæ•°æ®è¿ç§»é—®é¢˜ã€‚ ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åŒæ ·é‡‡ç”¨äº†å–æ¨¡çš„æ–¹å¼ï¼Œä½†ä¸ä¼ ç»Ÿå“ˆå¸Œä¸åŒï¼Œå–æ¨¡å€¼å›ºå®šä¸º $2^{32}$ hash(key) \\% 2^{32}å¯ä»¥æŠŠå–æ¨¡ç»“æœå½“åšä¸€ä¸ªåœ†ç¯ï¼Œç”± $2^{32}$ ä¸ªç‚¹ç»„æˆï¼Œå…ˆå°†æœåŠ¡å™¨å–æ¨¡æ˜ å°„åˆ°å“ˆå¸Œç¯ä¸Šï¼Œå†å°†æ•°æ®åŒæ ·å–æ¨¡æ˜ å°„åˆ°ç¯ä¸Šï¼Œé€‰æ‹©é¡ºæ—¶é’ˆæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæœåŠ¡å™¨å­˜å…¥ã€‚ æ­¤æ—¶æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»…æœ‰å°‘é‡çš„æ•°æ®éœ€è¦é‡æ–°åˆ†é…æ˜ å°„ï¼Œå¤§éƒ¨åˆ†ä½ç½®åˆ†é…ä¿æŒä¸å˜ã€‚ è™šæ‹ŸèŠ‚ç‚¹å¦‚æœé‡‡ç”¨èŠ‚ç‚¹ç›´æ¥æ˜ å°„ï¼Œå¯èƒ½å­˜åœ¨èŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ hash åæ–œã€‚å¤§éƒ¨åˆ†çš„ç¼“å­˜è½åœ¨å°‘æ•°å‡ å°æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœè¯¥å°æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œä¼šå¯¼è‡´ç¬æ—¶å¤§é‡æ•°æ®è¿ç§»ã€‚ ä¸ºäº†è§£å†³ hash åæ–œé—®é¢˜ï¼Œå¼•å…¥è™šæ‹ŸèŠ‚ç‚¹ã€‚ å°†æ¯ä¸ªæœåŠ¡å™¨æ˜ å°„ä¸ºå¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œæ•°é‡è¶³å¤Ÿå¤šï¼Œä»¥ä¿è¯å‡åŒ€åˆ†å¸ƒã€‚æ•°æ®æ˜ å°„æ—¶å…ˆæ‰¾åˆ°è™šæ‹ŸèŠ‚ç‚¹ï¼Œå†å¯¹åº”åˆ°ç›¸åº”çš„çœŸå®èŠ‚ç‚¹ã€‚ Go å®ç°ä¸€è‡´æ€§å“ˆå¸Œ","categories":[],"tags":[{"name":"Load Balancing","slug":"Load-Balancing","permalink":"https://gy23333.github.io/tags/Load-Balancing/"}]},{"title":"BGP è·¯ç”±åè®®","slug":"BGP-è·¯ç”±åè®®","date":"2024-10-22T18:38:51.000Z","updated":"2024-11-11T03:57:58.125Z","comments":true,"path":"2024/10/23/BGP-è·¯ç”±åè®®/","link":"","permalink":"https://gy23333.github.io/2024/10/23/BGP-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/","excerpt":"BGP è·¯ç”±åè®®","text":"BGP è·¯ç”±åè®® BGP è·¯ç”±é€‰æ‹©ç­–ç•¥å¯¹äºåŒä¸€ä¸ªç›®çš„åœ°å€ï¼Œè·¯ç”±å™¨ä¼šæ”¶åˆ°å¤šä¸ªè·¯å¾„ï¼ŒBGP å¯¹è¿™äº›è·¯å¾„è¿›è¡Œé€‰æ‹©åˆ†ç±»ï¼Œå†³å®šæœ€ç»ˆçš„è·¯ç”±é€‰æ‹© Availableï¼šå¯ç”¨è·¯å¾„ æ‰€æœ‰åˆæ³•çš„å¯ç”¨è·¯å¾„ Bestï¼šæœ€ä½³è·¯å¾„ é€šè¿‡ BGP æœ€ä½³è·¯ç”±é€‰æ‹©ç­–ç•¥ï¼Œé€‰å‡ºæ¥çš„å”¯ä¸€ä¸€ä¸ªè·¯ç”±ï¼Œä½œä¸ºæœ€ä½³è·¯ç”± Selectï¼šé€‰æ‹©è·¯å¾„ åœ¨ BGP æœ€ä½³è·¯ç”±é€‰æ‹©ç­–ç•¥ä¸­ï¼Œå‰ 8 æ­¥éƒ½ä¸ Best Path å±æ€§ç›¸åŒçš„è·¯å¾„ è¿™äº› Select Path å°†ä¼šåŠ å…¥è·¯ç”±è¡¨ï¼Œå®ç° BGP è´Ÿè½½å‡è¡¡ BGP æœ€ä½³è·¯ç”±é€‰æ‹©ç­–ç•¥å½“è·¯ç”±å™¨æ”¶åˆ°åˆ°åŒä¸€ä¸ªç›®çš„åœ°å€çš„å¤šä¸ª Available Pathï¼ŒBGP æœ€ä½³è·¯ç”±é€‰æ‹©ç­–ç•¥ä»ä¸­é€‰å‡ºä¸€æ¡ Best Pathã€‚ ä»¥ä¸‹æ˜¯ BGP æœ€ä½³è·¯å¾„é€‰æ‹©ç­–ç•¥ï¼ŒæŒ‰æ¯”è¾ƒé¡ºåºæ’åˆ—ï¼š ä¼˜é€‰æƒé‡ï¼ˆWeightï¼‰æœ€é«˜çš„è·¯å¾„ ä¼˜é€‰æœ¬åœ°ä¼˜å…ˆçº§ï¼ˆLocal Preferenceï¼‰æœ€é«˜çš„è·¯å¾„ ä¼˜é€‰èµ·æœ¬åœ°ç”Ÿæˆçš„è·¯å¾„ æœ¬åœ°å†…éƒ¨ç”Ÿæˆçš„è·¯ç”±ä¼˜å…ˆçº§é«˜äºä»å¤–éƒ¨å­¦åˆ°çš„è·¯ç”± æœ¬åœ°ç”Ÿæˆçš„è·¯ç”±ï¼Œå³é€šè¿‡networkå‘½ä»¤æˆ–aggregateå‘½ä»¤æ‰‹åŠ¨æ³¨å…¥çš„è·¯ç”± ä¼˜é€‰ AS Path é•¿åº¦æœ€çŸ­çš„è·¯å¾„ AS Pathï¼šä¸€ä¸ªè·¯ç”±ç»è¿‡çš„è‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰åºåˆ— ä¼˜å…ˆçº§æ¯”è¾ƒ AS Path é•¿åº¦ï¼Œè€Œé AS Path æœ¬èº« è·¯å¾„ 1 çš„ AS Pathï¼š65005 65004 65003 è·¯å¾„ 2 çš„ AS Pathï¼š65006 65003 åªæ¯”è¾ƒä¸¤è€…çš„é•¿åº¦ï¼Œè·¯å¾„ 1 é•¿åº¦ä¸º 3ï¼Œè·¯å¾„ 2 é•¿åº¦ä¸º 2ï¼Œä¼˜é€‰è·¯å¾„ 2 ä¼˜é€‰ Origin Type ä¼˜å…ˆçº§æœ€é«˜çš„è·¯å¾„ Origin Type ç”¨äºè¡¨ç¤ºè·¯ç”±æ¥æºç±»å‹ï¼Œå…±æœ‰ä¸‰ç§ï¼š IGPï¼šå†…éƒ¨ç½‘å…³åè®®ï¼ŒInternal Gateway Protocol EGPï¼šå¤–éƒ¨ç½‘å…³åè®®ï¼ŒExterior Gateway Protocol Incompleteï¼šä¸ç¡®å®šæ¥æº ä¼˜å…ˆçº§ IGP &gt; EGP &gt; Incomplete ä¼˜é€‰ MED æœ€å°çš„è·¯å¾„ MEDï¼ŒMulti-Exit Discriminatorï¼Œå¤šå‡ºå£é‰´åˆ«ï¼Œåªåœ¨ä¸¤ä¸ª AS ä¹‹é—´äº¤æ¢ï¼Œä¸ä¼šä¼ åˆ°ç¬¬ä¸‰ä¸ª AS ä¸¤ä¸ª AS ä¹‹é—´å¯èƒ½æœ‰å¤šæ¡é“¾è·¯è¿æ¥ï¼ŒMED ç”¨äºå†³å®šé€‰æ‹©é‚£æ¡é“¾è·¯ MED é»˜è®¤å€¼ï¼š0 ä¼˜é€‰é‚»å±…è·¯ç”±å™¨ç±»å‹ä¸º eBGP å…ˆäº iBGP eBGPï¼Œexternal BGPï¼Œå¤–éƒ¨ BGPï¼Œä¸åŒ AS ä¹‹é—´çš„ BGP iBGPï¼Œinternal BGPï¼Œå†…éƒ¨ BGPï¼Œç›¸åŒ AS å†…éƒ¨çš„ BGP ä¼˜é€‰ eBGP è·¯ç”±å™¨ï¼Œå³ä¼˜é€‰è·¨ AZ è·¯å¾„ï¼Œåˆ°è¾¾è¿™ä¸€æ­¥æ¯”è¾ƒçš„è·¯ç”±ï¼Œå¦‚åŒæ—¶æœ‰ eBGP å’Œ iBGP è·¯å¾„ï¼ŒiBGP è·¯å¾„æ˜¯ç»è¿‡äº†å†…éƒ¨è½¬å‘å†åˆ° eBGP è·¯ç”±å™¨çš„ç»•è¡Œè·¯å¾„ï¼Œæ‰€ä»¥ä¼˜é€‰ç›´æ¥åˆ° eBGP è·¯ç”±å™¨çš„è·¯å¾„ ä¼˜é€‰åˆ° BGP next hop çš„ IGP åº¦é‡å€¼æœ€å°çš„è·¯å¾„ IGP metricï¼Œå†…éƒ¨è·¯ç”±åº¦é‡å€¼ï¼Œåœ¨ç¬¬ä¸ƒæ­¥ä¸­é€‰æ‹© iBGP æ‰éœ€è¦æ¯”è¾ƒæ­¥éª¤ï¼Œå¦åˆ™è·³è¿‡ IGP è¶Šå°ï¼Œåˆ™å»è¯¥ä¸‹ä¸€è·³çš„å¼€é”€è¶Šå° åˆ°è¯¥æ­¥å¦‚å­˜åœ¨å¤šä¸ªè·¯å¾„æ¡ä»¶éƒ½ç›¸åŒï¼Œåˆ™ BGP è´Ÿè½½å‡è¡¡ ä¼˜é€‰æ¥è‡ª Route ID æœ€å°çš„è·¯ç”±å™¨çš„è·¯å¾„ ä¼˜é€‰ Cluster List æœ€çŸ­çš„è·¯å¾„ ä¼˜é€‰æ¥è‡ª IP åœ°å€æœ€å°çš„ Neighbor çš„è·¯å¾„ BGP è´Ÿè½½å‡è¡¡BGP Multipath å…è®¸ç»™ä¸€ä¸ªç›®çš„åœ°å€åŠ è½½å¤šä¸ª BGP è·¯å¾„åˆ° IP è·¯ç”±è¡¨ï¼Œè¿™äº›è·¯ç”±å®ç° BGP è´Ÿè½½å‡è¡¡ã€‚è¿™ä¸å½±å“ä¸Šæ­¥ä¸­çš„ Best Path çš„é€‰æ‹©ï¼Œä¾æ—§ä»å¤šä¸ªè·¯å¾„ä¸­é€‰æ‹©ä¸€æ¡è·¯å¾„ä½œä¸º Best Pathã€‚åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šï¼Œå¯ä»¥é€‰å–å¤šä¸ªè·¯å¾„ä½œä¸º Select Pathï¼Œä¸€åŒåŠ å…¥è·¯ç”±è¡¨ï¼Œå®ç°å¤šè·¯å¾„è´Ÿè½½å‡è¡¡ã€‚ Select Path åœ¨è·¯ç”±é€‰æ‹©ç­–ç•¥ä¸­çš„å‰ 8 æ­¥å¿…é¡»ä¸ Best Path å®Œå…¨ç›¸åŒï¼Œå³æœ‰ç›¸åŒçš„ Weightã€Local Preferenceã€AS Path lengthã€Origin Typeã€MEDã€eBGP/iBGPã€IGP Metric Best Path å¿…ç„¶åŒ…å«åœ¨ Select Path ä¸­ maximum-paths è®¾ç½® BGP æœ€å¤šå…è®¸çš„ Select Path æ•°é‡ï¼Œå¦‚æœè®¾ç½®ä¸º 1ï¼Œåˆ™ Select Path åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯ Best Path å‚è€ƒ Select BGP Best Path Algorithm","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"è·¯ç”±åè®®","slug":"è·¯ç”±åè®®","permalink":"https://gy23333.github.io/tags/%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/"},{"name":"BGP","slug":"BGP","permalink":"https://gy23333.github.io/tags/BGP/"}]},{"title":"systemd","slug":"systemd","date":"2024-10-05T12:20:32.000Z","updated":"2024-11-11T03:57:58.130Z","comments":true,"path":"2024/10/05/systemd/","link":"","permalink":"https://gy23333.github.io/2024/10/05/systemd/","excerpt":"systemd æ˜¯ Linux çš„ç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨ã€‚ä½œä¸ºç³»ç»Ÿå¯åŠ¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œåˆå§‹åŒ–ç³»ç»Ÿå¹¶ä¸”ç®¡ç†å…¶ä»–ç”¨æˆ·æœåŠ¡ã€‚","text":"systemd æ˜¯ Linux çš„ç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨ã€‚ä½œä¸ºç³»ç»Ÿå¯åŠ¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œåˆå§‹åŒ–ç³»ç»Ÿå¹¶ä¸”ç®¡ç†å…¶ä»–ç”¨æˆ·æœåŠ¡ã€‚ æ¦‚è¿°systemd æä¾›äº†ä¸€å¥—å®Œæ•´çš„ç³»ç»Ÿå¯åŠ¨å’Œç®¡ç†çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­çš„ d ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰çš„ç¼©å†™ï¼Œå³ç³»ç»Ÿçš„å®ˆæŠ¤è¿›ç¨‹ã€‚ æŸ¥çœ‹ systemd ç®€ä»‹ 1man systemd systemd ä½œä¸ºç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ŒPID = 1ï¼Œå…¶ä½™æ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯ systemd çš„å­è¿›ç¨‹ã€‚ 123456789101112131415root@ubuntu:~# pstree -psystemd(1)â”€â”¬â”€ModemManager(855)â”€â”¬â”€&#123;ModemManager&#125;(887) â”‚ â””â”€&#123;ModemManager&#125;(894) â”œâ”€NetworkManager(777)â”€â”¬â”€&#123;NetworkManager&#125;(854) â”‚ â””â”€&#123;NetworkManager&#125;(859) â”œâ”€VGAuthService(747) â”œâ”€accounts-daemon(766)â”€â”¬â”€&#123;accounts-daemon&#125;(778) â”‚ â””â”€&#123;accounts-daemon&#125;(811) â”œâ”€acpid(767) â”œâ”€avahi-daemon(770)â”€â”€â”€avahi-daemon(840) â”œâ”€bluetoothd(771) â”œâ”€colord(1484)â”€â”¬â”€&#123;colord&#125;(1486) â”‚ â””â”€&#123;colord&#125;(1488) â”œâ”€cron(773) ..... Unitsystemd å¯ä»¥ç®¡ç†æ‰€æœ‰ç³»ç»Ÿèµ„æºï¼Œunit ä¸º systemd çš„åŸºæœ¬ç®¡ç†å•å…ƒï¼Œç”¨äºæè¿°ç³»ç»ŸæœåŠ¡ã€èµ„æºã€è®¾å¤‡å’Œå…¶ä»–å¯¹è±¡ï¼Œæ ¹æ®ä¸åŒèµ„æºåˆ†ä¸ºäº† 12 ç§ Unitã€‚ Service unitï¼šç³»ç»ŸæœåŠ¡ Target unitï¼šå¤šä¸ª Unit æ„æˆçš„ä¸€ä¸ªç»„ Device Unitï¼šç¡¬ä»¶è®¾å¤‡ Mount Unitï¼šæ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ Automount Unitï¼šè‡ªåŠ¨æŒ‚è½½ç‚¹ Path Unitï¼šæ–‡ä»¶æˆ–è·¯å¾„ Scope Unitï¼šä¸æ˜¯ç”± Systemd å¯åŠ¨çš„å¤–éƒ¨è¿›ç¨‹ Slice Unitï¼šè¿›ç¨‹ç»„ Snapshot Unitï¼šSystemd å¿«ç…§ï¼Œå¯ä»¥åˆ‡å›æŸä¸ªå¿«ç…§ Socket Unitï¼šè¿›ç¨‹é—´é€šä¿¡çš„ socket Swap Unitï¼šswap æ–‡ä»¶ Timer Unitï¼šå®šæ—¶å™¨ å¯é€šè¿‡ man systemd.service æŸ¥çœ‹å„ç§ Unit çš„ç®€ä»‹ã€‚ é…ç½®æ¯ä¸ª Unit éœ€è®¾ç½®å¯¹åº”ç±»å‹çš„é…ç½®æ–‡ä»¶ã€‚Unit é…ç½®åˆ†ä¸ºä¸‰ä¸ªåŒºå—ï¼šUnitã€Service\\Timer\\Socketã€Install Unit åŒºå—Unit çš„å…ƒæ•°æ®ï¼Œå®šä¹‰äº† unit çš„åŸºæœ¬ä¿¡æ¯ã€ä¾èµ–å…³ç³»å’Œå¯åŠ¨é¡ºåºã€‚ 1234567[Unit]Description=æœåŠ¡æˆ–å•å…ƒçš„æè¿°Documentation=man:your-man-page(1) # å¯é€‰ï¼Œæ–‡æ¡£é“¾æ¥Requires=å…¶ä»–-unit.service # å¯é€‰ï¼Œå®šä¹‰å¼ºä¾èµ–Wants=å…¶ä»–-unit.service # å¯é€‰ï¼Œå®šä¹‰å¼±ä¾èµ–After=network.target # å¯é€‰ï¼ŒæŒ‡å®šå¯åŠ¨é¡ºåºBefore=å…¶ä»–-unit.service # å¯é€‰ï¼ŒæŒ‡å®šå¯åŠ¨é¡ºåº Descriptionï¼šç®€çŸ­æè¿° Documentationï¼šæ–‡æ¡£åœ°å€ï¼Œå¯ä»¥æ˜¯æ‰‹å†Œé¡µæˆ– URL ä¾èµ–å…³ç³» ä¾‹å¦‚ï¼šunit-A Requires/BindsTo/Wants/PartOf=unit-B.service Requiresï¼š å¼ºä¾èµ– unit-A å¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨å¯åŠ¨è¢«ä¾èµ– unit-Bï¼Œå¦‚æœè¢«ä¾èµ– unit-B å¯åŠ¨å¤±è´¥ï¼Œåˆ™è¯¥ unit-A ä¹Ÿä¼šå¯åŠ¨å¤±è´¥ BindsToï¼š å¼ºä¾èµ– unit-A å¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨å¯åŠ¨è¢«ä¾èµ– unit-Bï¼Œå¦‚æœè¢«ä¾èµ– unit-B å¯åŠ¨å¤±è´¥ï¼Œåˆ™è¯¥ unit-A ä¹Ÿä¼šå¯åŠ¨å¤±è´¥ unit-B åœæ­¢æˆ–è€…å¤±è´¥æ—¶ï¼Œä¾èµ– unit-B çš„ unit-A ä¹Ÿä¼šè‡ªåŠ¨åœæ­¢ Wantsï¼š å¼±ä¾èµ– unit-A å¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨å¯åŠ¨è¢«ä¾èµ– unit-Bï¼Œä½†è¢«ä¾èµ– unit-B å¯åŠ¨å¤±è´¥ï¼Œä¹Ÿä¸ä¼šä¸€äº›è¯¥ unit-A å¯åŠ¨ ç‰¹æ€§ Requires BindsTo Wants å¯åŠ¨è¡Œä¸º å¿…é¡»æˆåŠŸå¯åŠ¨è¢«ä¾èµ–çš„ unit å¿…é¡»æˆåŠŸå¯åŠ¨è¢«ä¾èµ–çš„ unit å»ºè®®å¯åŠ¨è¢«ä¾èµ–çš„ unit åœæ­¢è¡Œä¸º ä¸ä¼šè‡ªåŠ¨åœæ­¢ä¾èµ–å®ƒçš„ unit è‡ªåŠ¨åœæ­¢ä¾èµ–å®ƒçš„ unit ä¸ä¼šè‡ªåŠ¨åœæ­¢ä¾èµ–å®ƒçš„ unit ä¾èµ–å…³ç³»ç±»å‹ å•å‘å¼ºä¾èµ– åŒå‘å¼ºä¾èµ– å¼±ä¾èµ– é€‚ç”¨åœºæ™¯ åŠŸèƒ½å¯†åˆ‡ç›¸å…³ä½†ç”Ÿå‘½å‘¨æœŸä¸å¿…ä¸€è‡´çš„æœåŠ¡ éœ€è¦åŒæ—¶è¿è¡Œå¹¶åœ¨åŒä¸€ç”Ÿå‘½å‘¨æœŸå†…è¿è¡Œçš„æœåŠ¡ å¯èƒ½ç›¸äº’å…³è”ä½†éå¿…éœ€çš„æœåŠ¡ Conflictsï¼šäº’æ–¥å…³ç³»ï¼Œunit-A å’Œ unit-B ä¸èƒ½åŒæ—¶è¿è¡Œï¼Œå½“ unit-A å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åœæ­¢ unit-Bï¼Œåä¹‹äº¦ç„¶ PartOfï¼šunit-A æ˜¯ç›®æ ‡æœåŠ¡ unit-B çš„ä¸€éƒ¨åˆ†ï¼Œå½“ç›®æ ‡æœåŠ¡ unit-B åœæ­¢æˆ–è¢«é‡å¯æ—¶ï¼Œä½œä¸ºå…¶ä¸€éƒ¨åˆ†çš„ unit-A ä¹Ÿä¼šåœæ­¢æˆ–é‡å¯ å¯åŠ¨é¡ºåº ä¾‹å¦‚ï¼šunit-A Before/After=unit-B.service Beforeï¼šå½“å‰ unit A åº”è¯¥åœ¨æŒ‡å®šçš„ unit B ä¹‹å‰å¯åŠ¨ï¼ˆA -&gt; Bï¼‰ Afterï¼šå½“å‰ unit A åº”è¯¥åœ¨æŒ‡å®šçš„ unit B ä¹‹åå¯åŠ¨ï¼ˆB -&gt; Aï¼‰ é¡ºåºé…ç½®Beforeã€After åªæ˜¯è®¾ç½®ä¸€èµ·å¯åŠ¨æ—¶çš„é¡ºåºï¼ŒA æœåŠ¡å¯åŠ¨æ—¶å¹¶ä¸ä¼šè‡ªåŠ¨å¯åŠ¨ B æœåŠ¡ï¼Œå¦‚éœ€è®¾ç½®è‡ªå¯åŠ¨ï¼Œéœ€æ­é…ä¾èµ–å…³ç³»ä½¿ç”¨ã€‚ å…¶ä»–å…³ç³» Condition...ï¼šæ£€æŸ¥æœåŠ¡å¯åŠ¨æ—¶çš„æ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼ŒæœåŠ¡å°†ä¸ä¼šè¢«å¯åŠ¨ï¼Œä½†ä¸ä¼šå¯¼è‡´å¯åŠ¨å¤±è´¥ ConditionPathExists=ï¼šæ£€æŸ¥æŒ‡å®šçš„æ–‡ä»¶æˆ–è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœè·¯å¾„å­˜åœ¨ï¼ŒæœåŠ¡å°†å¯åŠ¨ ConditionPathExistsGlob=ï¼šä½¿ç”¨é€šé…ç¬¦æ£€æŸ¥è·¯å¾„æ˜¯å¦åŒ¹é… ConditionPathIsDirectory=ï¼šæ£€æŸ¥æŒ‡å®šè·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½• ConditionPathIsSymbolicLink=ï¼šæ£€æŸ¥æŒ‡å®šè·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ ConditionKernelCommandLine=ï¼šæ£€æŸ¥å†…æ ¸å‘½ä»¤è¡Œå‚æ•°æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­—ç¬¦ä¸² ConditionVirtualization=ï¼šæ£€æŸ¥å½“å‰ç³»ç»Ÿæ˜¯å¦è¿è¡Œåœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ï¼ˆå¦‚ KVMã€LXC ç­‰ï¼‰ ConditionHost=ï¼šæ£€æŸ¥ä¸»æœºåæ˜¯å¦ä¸æŒ‡å®šå€¼åŒ¹é… Assert...ï¼šå¯¹æœåŠ¡å¯åŠ¨çš„æ¡ä»¶è¿›è¡Œå¼ºåˆ¶æ£€æŸ¥ã€‚ä¸ Condition ä¸åŒï¼Œå¦‚æœæŒ‡å®šçš„æ¡ä»¶æœªæ»¡è¶³ï¼ŒæœåŠ¡å°†ä¸ä¼šå¯åŠ¨ï¼Œä¸”ç³»ç»Ÿä¼šæŠ¥å‘Šé”™è¯¯ AssertPathExists=ï¼šæ£€æŸ¥æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ AssertPathIsDirectory=ï¼šæ£€æŸ¥æŒ‡å®šè·¯å¾„æ˜¯å¦æ˜¯ç›®å½• AssertPathIsSymbolicLink=ï¼šæ£€æŸ¥æŒ‡å®šè·¯å¾„æ˜¯å¦æ˜¯ç¬¦å·é“¾æ¥ AssertKernelCommandLine=ï¼šæ£€æŸ¥å†…æ ¸å‘½ä»¤è¡Œå‚æ•° AssertVirtualization=ï¼šæ£€æŸ¥å½“å‰ç³»ç»Ÿæ˜¯å¦åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ ç±»å‹åŒºå—Servicesystemd.service æ˜¯ç”¨äºå®šä¹‰å’Œç®¡ç†ç³»ç»ŸæœåŠ¡çš„å•ä½ç±»å‹ã€‚ é…ç½®æ–‡ä»¶ä»¥ .service ç»“å°¾ï¼Œä¸»è¦ç”¨äºæè¿°å¦‚ä½•å¯åŠ¨ã€åœæ­¢å’Œç®¡ç†æœåŠ¡ã€‚ .service é…ç½®ä¸­ï¼Œé€šè¿‡ [Service] åŒºå—å®šä¹‰æœåŠ¡çš„å¯åŠ¨å’Œè¿è¡Œå‚æ•°ã€‚ 123456789101112[Service]Type=notifyEnvironmentFile=-/etc/default/sshExecStartPre=/usr/sbin/sshd -tExecStart=/usr/sbin/sshd -D $SSHD_OPTSExecReload=/usr/sbin/sshd -tExecReload=/bin/kill -HUP $MAINPIDKillMode=processRestart=on-failureRestartPreventExitStatus=255RuntimeDirectory=sshdRuntimeDirectoryMode=0755 å¯åŠ¨ç±»å‹ Typeï¼šé…ç½®æœåŠ¡å¦‚ä½•é€šçŸ¥systemdæœåŠ¡å¯åŠ¨å®Œæˆ simpleï¼ˆé»˜è®¤å€¼ï¼‰ï¼šsystemd è°ƒç”¨å®Œ ExecStart åå³è®¤ä¸ºæœåŠ¡å¯åŠ¨æˆåŠŸï¼Œå³ä½¿ ExecStart è¿è¡Œå¤±è´¥ï¼ŒæœåŠ¡ä¹Ÿå¯åŠ¨æˆåŠŸ notifyï¼šå¯åŠ¨æ—¶ï¼ŒæœåŠ¡é€šè¿‡ sd_notify() å‘é€ä¸€ä¸ª â€œREADY=1â€ ä¿¡å·ï¼Œsystemd æ”¶åˆ°è¿™ä¸ªä¿¡å·åæ‰è®¤ä¸ºæœåŠ¡å¯åŠ¨æˆåŠŸï¼Œå†å¯åŠ¨ä¹‹åçš„ unit dbusï¼šéœ€è®¾ç½® BusName=ï¼ˆå¦‚è®¾ç½®ï¼Œè‡ªåŠ¨ä¸º dbus ç±»å‹ï¼‰ï¼Œå½“ systemd ç¡®è®¤ BusName= çš„ dbus å­˜åœ¨åï¼Œåˆ™è®¤ä¸ºæœåŠ¡å¯åŠ¨æˆåŠŸ ç­‰ç­‰ å¯åŠ¨å‘½ä»¤ EnvironmentFileï¼šå¯åŠ¨æ—¶ä¼šåŠ è½½è¿™ä¸ªé…ç½®çš„ç¯å¢ƒå˜é‡æ–‡ä»¶ ExecStartPreï¼šå¯åŠ¨æœåŠ¡ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤ å¦‚æœ ExecStartPre æ‰§è¡Œå¤±è´¥ï¼Œåˆ™æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œä¸ä¼šæ‰§è¡Œ ExecStart å¦‚æœå¸Œæœ› ExecStartPre æ‰§è¡Œå¤±è´¥ä¹Ÿèƒ½ç»§ç»­æ‰§è¡Œ ExecStartï¼Œéœ€åœ¨ ExecStartPre åŠ å‰ç¼€ - 1ExecStartPre=-/usr/bin/check_dependencies æ”¯æŒå¤šä¸ª ExecStartPreï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ ExecStartï¼ˆå¿…é€‰ï¼‰ï¼šå¯åŠ¨æœåŠ¡æ‰§è¡Œçš„å‘½ä»¤ ExecStartPostï¼šå¯åŠ¨æœåŠ¡æˆåŠŸä¹‹åæ‰§è¡Œçš„å‘½ä»¤ å¦‚æœ Type è§„å®šçš„å¯åŠ¨æ²¡æˆåŠŸï¼Œåˆ™ä¸ä¼šæ‰§è¡Œ ExecStartPost ç»ˆæ­¢ç±»å‹ KillModeï¼šåœæ­¢æœåŠ¡æ—¶å¦‚ä½•å¤„ç†è¿›ç¨‹ control-groupï¼ˆé»˜è®¤å€¼ï¼‰ï¼šåœæ­¢æœåŠ¡æ—¶ï¼Œæ‰€æœ‰å±äºè¯¥æœåŠ¡ cgroup çš„æ‰€æœ‰è¿›ç¨‹éƒ½ä¼šè¢«æ€æ­» processï¼šåœæ­¢æœåŠ¡æ—¶ï¼Œåªæ€ä¸»è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹äº§ç”Ÿçš„å­è¿›ç¨‹ä¸ä¼šè¢«æ€æ­» mixedï¼šåœæ­¢æœåŠ¡æ—¶ï¼Œå‘ä¸»è¿›ç¨‹å‘é€ SIGTERM ä¿¡å·ï¼Œæ¥ç€å‘å­è¿›ç¨‹å‘é€ SIGKILL ä¿¡å· noneï¼šæ²¡æœ‰è¿›ç¨‹ä¼šè¢«æ€æ‰ï¼Œåªæ˜¯æ‰§è¡ŒæœåŠ¡çš„ ExecStop å‘½ä»¤ æ€è¿›ç¨‹è¿‡ç¨‹ï¼š å‘è¿›ç¨‹å‘é€KillSignal= ä¿¡å·ï¼ˆé»˜è®¤ä¸º SIGTERMï¼‰ ç­‰å¾…è¿›ç¨‹è¢«æ€æ­» è‹¥ç­‰å€™ TimeoutStopSec= æ—¶é—´ï¼ˆé»˜è®¤ 90sï¼‰åï¼Œè¿›ç¨‹ä»ç„¶æœªè¢«æ€æ­»ï¼Œå‘è¿›ç¨‹å‘é€ FinalKillSignal= ä¿¡å·ï¼ˆé»˜è®¤ä¸º SIGKILLï¼‰å¼ºåˆ¶æ€æ­»è¿›ç¨‹ ç»ˆæ­¢å‘½ä»¤ ExecStopå­—æ®µï¼šåœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤ ExecStopPostå­—æ®µï¼šåœæ­¢æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤ é‡å¯ç±»å‹ æœ‰æ—¶å€™ï¼ŒæœåŠ¡éœ€è¦ä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œå¦‚æœ‰æ„å¤–å¥”æºƒï¼Œèƒ½è‡ªåŠ¨æ‹‰èµ·ï¼Œå¯é€šè¿‡ä¸‹é¢é…ç½®è®¾ç½®è‡ªæ‹‰èµ· 123Restart&#x3D;alwaysRestartSec&#x3D;5StartLimitInterval&#x3D;0 Restartï¼šé‡å¯æœºåˆ¶ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šè‡ªåŠ¨è§¦å‘é‡å¯æœåŠ¡ï¼ˆsystemctl stop/restart è§¦å‘çš„åœæ­¢æœåŠ¡ï¼Œä¸ä¼šè¢«è¿™é‡Œè®¾ç½®çš„é‡å¯æœºåˆ¶æ‹‰èµ·ï¼‰ noï¼ˆé»˜è®¤å€¼ï¼‰ï¼šé€€å‡ºåä¸ä¼šé‡å¯ alwaysï¼šæ‰€æœ‰æƒ…å†µè§¦å‘è‡ªåŠ¨é‡å¯ on-successï¼šåªæœ‰æ­£å¸¸é€€å‡ºæ—¶è§¦å‘è‡ªåŠ¨é‡å¯ on-failureï¼šå¼‚å¸¸é€€å‡ºæ—¶è§¦å‘è‡ªåŠ¨é‡å¯ on-abnormalï¼šåªæœ‰è¢«ä¿¡å·ç»ˆæ­¢å’Œè¶…æ—¶ï¼Œæ‰ä¼šé‡å¯ on-abortï¼šåªæœ‰åœ¨æ”¶åˆ°æ²¡æœ‰æ•æ‰åˆ°çš„ä¿¡å·ç»ˆæ­¢æ—¶ï¼Œæ‰ä¼šé‡å¯ on-watchdogï¼šè¶…æ—¶é€€å‡ºï¼Œæ‰ä¼šé‡å¯ é€€å‡ºåŸå›  no always on-success on-failure on-abnormal on-abort on-watchdog systemctl stop æ­£å¸¸é€€å‡º restart restart é€€å‡ºç ä¸ä¸ºâ€œ0â€ restart restart è¿›ç¨‹è¢«å¼ºåˆ¶æ€æ­» restart restart restart restart systemdæ“ä½œè¶…æ—¶ restart restart restart çœ‹é—¨ç‹—è¶…æ—¶ restart restart restart restart æ­£å¸¸é€€å‡ºï¼šé€€å‡ºç ä¸ºâ€0â€ï¼Œ æˆ–è€…è¿›ç¨‹æ”¶åˆ° SIGHUP, SIGINT, SIGTERM, SIGPIPE ä¿¡å·ä¹‹ä¸€ï¼Œå¹¶ä¸”é€€å‡ºç ç¬¦åˆ SuccessExitStatus= çš„è®¾ç½® å¼‚å¸¸é€€å‡ºï¼šåŒ…æ‹¬é€€å‡ºç ä¸ä¸ºâ€œ0â€ã€è¿›ç¨‹è¢«å¼ºåˆ¶æ€æ­»ã€systemdæ“ä½œè¶…æ—¶ã€çœ‹é—¨ç‹—è¶…æ—¶ RestartSecï¼šé…åˆ Restart ä½¿ç”¨ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡ä¹‹å‰çš„ç¡çœ æ—¶é—´ï¼Œè®¾ç½®å¦‚å¼‚å¸¸é€€å‡ºåï¼Œç­‰å¾…å¤šå°‘ç§’å†æ¬¡å¯åŠ¨ï¼Œé»˜è®¤ 100ms 123 |----RestartSec------|---------|-----------|--------------------|------------|---------- running stopping stopped starting running StartLimitIntervalã€StartLimitBurstï¼šé‡å¯é™åˆ¶æ¬¡æ•°ï¼Œåœ¨ StartLimitBurst= æ—¶é—´å†…å°è¯•é‡å¯è¶…è¿‡ StartLimitInterval= æ¬¡åˆ™ä¸å†é‡å¯ï¼Œé»˜è®¤ä¸º 10s å†… 5 æ¬¡ï¼Œå¦‚éœ€æ— é™åˆ¶ï¼Œåˆ™è®¾ç½® StartLimitInterval=0 é‡å¯å‘½ä»¤ ExecReloadå­—æ®µï¼šé‡å¯æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤ Install åŒºå—å®šä¹‰æœåŠ¡å•å…ƒçš„å®‰è£…å’Œå¯ç”¨é€‰é¡¹ï¼ŒæŒ‡å®šå¦‚ä½•å°†æœåŠ¡å•å…ƒä¸ç›®æ ‡ï¼ˆå¦‚å¯åŠ¨ç›®æ ‡æˆ–å…¶ä»–æœåŠ¡ï¼‰å…³è”ã€‚ 12[Install]WantedBy=multi-user.target WantedByï¼šå®šä¹‰æœåŠ¡åº”è¯¥è¢«å“ªäº›ç›®æ ‡â€œéœ€è¦â€ï¼Œè¿™æ„å‘³ç€åœ¨è¿™äº›ç›®æ ‡å¯åŠ¨æ—¶ï¼Œè¯¥æœåŠ¡ä¹Ÿä¼šè¢«è‡ªåŠ¨å¯åŠ¨ ç¤ºä¾‹è¯´æ˜æœåŠ¡æ‰€åœ¨ target æ˜¯ multi-user.targetï¼Œè¿™ä¸ªè®¾ç½®å¾ˆé€šç”¨ä¸”é‡è¦ åœ¨ enable è¿™ä¸ªæœåŠ¡åï¼Œåœ¨ /etc/systemd/system/multi-user.target.wants/ çš„æŒ‡å®šç›®å½•ä¸­åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘ /usr/lib/systemd/system/XXX.service çš„ç¬¦å·é“¾æ¥ 12root@ubuntu:~# systemctl enable nginxCreated symlink /etc/systemd/system/multi-user.target.wants/nginx.service â†’ /usr/lib/systemd/system/nginx.service. ç›¸å½“äºä¸º multi-user.target æ·»åŠ äº† Wants=nginx é…ç½® å½“ç³»ç»Ÿå¯åŠ¨æ—¶, multi-user.target å¯åŠ¨ï¼Œnginx.service å•å…ƒä¹Ÿä¼šè¢«å¯åŠ¨ RequiredByï¼šç±»ä¼¼äº WantedByï¼Œä½†è¡¨ç¤ºæ›´å¼ºçš„ä¾èµ–å…³ç³»ï¼Œå¦‚æœç›®æ ‡å¯åŠ¨å¤±è´¥ï¼Œç›¸å…³æœåŠ¡ä¹Ÿä¸ä¼šå¯åŠ¨ Aliasï¼šå½“å‰ Unit çš„åˆ«å Alsoï¼šå½“å‰ Unit å¯ç”¨ï¼ˆenableï¼‰æˆ–ç¦ç”¨ï¼ˆdisableï¼‰æ—¶ï¼Œä¼šè¢«åŒæ—¶ï¼ˆenableï¼‰æˆ–ç¦ç”¨ï¼ˆdisableï¼‰çš„å…¶ä»– Unit é…ç½®è·¯å¾„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨ä¸‹é¢åœ°å€ï¼š ç³»ç»Ÿçº§ç›®å½•ï¼š/lib/systemd/system/ Linux ç³»ç»Ÿæä¾›çš„é»˜è®¤ unit é…ç½®æ–‡ä»¶çš„å­˜æ”¾ä½ç½® ç”¨æˆ·çº§ç›®å½•ï¼š~/.config/systemd/user/ ç”¨æˆ·çº§çš„ unit é…ç½®æ–‡ä»¶ï¼Œå…è®¸æ™®é€šç”¨æˆ·å®šä¹‰å’Œç®¡ç†è‡ªå·±çš„æœåŠ¡å’Œä»»åŠ¡ã€‚ æœ¬åœ°é…ç½®ç›®å½•ï¼š/etc/systemd/system/ æœ¬åœ°çš„ unit é…ç½®æ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œåˆ›å»ºæˆ–ä¿®æ”¹ unit æ–‡ä»¶ã€‚ ä¼˜å…ˆçº§é¡ºåºï¼š /etc/systemd/system/ï¼ˆæœ¬åœ°é…ç½®ç›®å½•ï¼Œæœ€é«˜ä¼˜å…ˆçº§ï¼‰ /run/systemd/system/ï¼ˆä¸´æ—¶é…ç½®ï¼Œé€šå¸¸åœ¨è¿è¡Œæ—¶åˆ›å»ºï¼‰ /lib/systemd/system/ï¼ˆé»˜è®¤ç³»ç»Ÿæä¾›çš„é…ç½®ï¼‰ ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼Œå¦‚åœ¨é«˜ä½ä¼˜å…ˆçº§çš„ç›®å½•ä¸‹æœ‰åŒå unitï¼Œåˆ™é‡‡ç”¨é«˜ä¼˜å…ˆçº§ä¸­çš„é…ç½®ã€‚ å‘½ä»¤systemd ç”±ä¸€ç»„ç³»ç»Ÿå‘½ä»¤ç»„æˆï¼Œç”¨æ¥æ§åˆ¶ç³»ç»Ÿçš„æ–¹æ–¹é¢é¢ã€‚ systemctlå‚è€ƒé“¾æ¥ï¼šmanpagesã€man systemctl systemctl æ˜¯ systemd çš„ä¸»å‘½ä»¤ï¼Œç”¨äºæ§åˆ¶ systemd ç³»ç»Ÿä¸æœåŠ¡ã€‚ å‘½ä»¤æ ¼å¼ï¼šsystemctl [OPTIONS...] COMMAND [UNIT...] ç³»ç»Ÿå‘½ä»¤123456789101112131415161718# åˆ—å‡º systemd æ‰€æœ‰å•ä½systemctl list-units# é€šè¿‡ --type= ç­›é€‰å‡º unit ç±»å‹systemctl list-units --type=service# é€šè¿‡ --state= ç­›é€‰å‡º unit ç±»å‹systemctl list-units --state=running# åˆ—å‡º systemd æ‰€æœ‰å•å…ƒå’ŒçŠ¶æ€systemctl list-unit-files# åˆ—å‡ºå·²åŠ è½½çš„å¥—æ¥å­—(socket)å•å…ƒsystemctl list-sockets# åˆ—å‡ºå·²åŠ è½½çš„å®šæ—¶å™¨(timer)å•å…ƒsystemctl list-timers# é‡æ–°åŠ è½½æœåŠ¡é…ç½®systemctl daemon-reload å• Unit å‘½ä»¤1234567891011121314151617181920212223242526272829# æŸ¥çœ‹æœåŠ¡çŠ¶æ€systemctl status [SERVICE]# å¯åŠ¨æœåŠ¡systemctl start [SERVICE]# åœæ­¢æœåŠ¡systemctl stop [SERVICE]# é‡å¯æœåŠ¡systemctl restart [SERVICE]# å¼€æœºè‡ªå¯åŠ¨æœåŠ¡systemctl enable [SERVICE]# å¼€æœºä¸è‡ªå¯åŠ¨æœåŠ¡systemctl disable [SERVICE]# æ˜¾ç¤ºæœåŠ¡ä¿¡æ¯systemctl show [SERVICE]# è¯»æœåŠ¡é…ç½®æ–‡ä»¶ï¼Œç­‰åŒäº cat é…ç½®æ–‡ä»¶åœ°å€systemctl cat [SERVICE]# ç¼–è¾‘æœåŠ¡é…ç½®æ–‡ä»¶ï¼Œç›¸æ¯”ç›´æ¥ vimï¼Œç¼–è¾‘åå¯è‡ªåŠ¨æ£€æŸ¥æ ¼å¼systemctl edit [SERVICE]# æ˜¾ç¤ºæŒ‡å®š unit çš„ä¾èµ–å…³ç³»systemctl list-dependencies [UNIT] journalctlå‚è€ƒé“¾æ¥ï¼šmanpagesã€man journalctl journalctl ç”¨æ¥æŸ¥çœ‹ systemd æ—¥å¿—ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ—¥å¿—è¿˜æœ‰å„ unit æ—¥å¿—ã€‚ æœåŠ¡ï¼šsystemd-journald.service å‘½ä»¤æ ¼å¼ï¼šjournalctl [OPTIONS...] [MATCHES...] 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆé»˜è®¤æƒ…å†µä¸‹ ï¼Œåªä¿å­˜æœ¬æ¬¡å¯åŠ¨çš„æ—¥å¿—ï¼‰journalctl# æ˜¾ç¤ºå°¾éƒ¨æŒ‡å®šè¡Œæ•°çš„æ—¥å¿—journalctl -n 20# å®æ—¶æ»šåŠ¨æ˜¾ç¤ºæœ€æ–°æ—¥å¿—journalctl -f# æŸ¥çœ‹å†…æ ¸æ—¥å¿—ï¼ˆä¸æ˜¾ç¤ºåº”ç”¨æ—¥å¿—ï¼‰journalctl -k# æŸ¥çœ‹ç³»ç»Ÿæœ¬æ¬¡å¯åŠ¨çš„æ—¥å¿—journalctl -b# æŸ¥çœ‹ä¸Šä¸€æ¬¡å¯åŠ¨çš„æ—¥å¿—journalctl -b -1# æŸ¥çœ‹æŒ‡å®šæ—¶é—´çš„æ—¥å¿—journalctl --since=\"2012-10-30 18:17:16\"journalctl --since \"20 min ago\"journalctl --since yesterdayjournalctl --since \"2015-01-10\" --until \"2015-01-11 03:00\"journalctl --since 09:00 --until \"1 hour ago\"# æŸ¥çœ‹æŒ‡å®šæœåŠ¡çš„æ—¥å¿—journalctl /usr/lib/systemd/systemd# æŸ¥çœ‹æŸä¸ª Unit çš„æ—¥å¿—journalctl -u nginx.service# åˆå¹¶æ˜¾ç¤ºå¤šä¸ª Unit çš„æ—¥å¿—journalctl -u nginx.service -u php-fpm.service --since today# æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„æ—¥å¿—journalctl _PID=1# æŸ¥çœ‹æŸä¸ªè·¯å¾„çš„è„šæœ¬çš„æ—¥å¿—journalctl /usr/bin/bash# æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æ—¥å¿—journalctl _UID=33# æŸ¥çœ‹æŒ‡å®šä¼˜å…ˆçº§ï¼ˆåŠå…¶ä»¥ä¸Šçº§åˆ«ï¼‰çš„æ—¥å¿—ï¼Œå…±æœ‰8çº§# 0: emerg# 1: alert# 2: crit# 3: err# 4: warning# 5: notice# 6: info# 7: debugjournalctl -p err -b# æ—¥å¿—é»˜è®¤åˆ†é¡µè¾“å‡ºï¼Œ--no-pager æ”¹ä¸ºæ­£å¸¸çš„æ ‡å‡†è¾“å‡ºjournalctl --no-pager# ä»¥ JSON æ ¼å¼ï¼ˆå•è¡Œï¼‰è¾“å‡ºjournalctl -b -u nginx.service -o json# ä»¥ JSON æ ¼å¼ï¼ˆå¤šè¡Œï¼‰è¾“å‡ºï¼Œå¯è¯»æ€§æ›´å¥½journalctl -b -u nginx.service -o json-pretty# æ˜¾ç¤ºæ—¥å¿—å æ®çš„ç¡¬ç›˜ç©ºé—´journalctl --disk-usage# æŒ‡å®šæ—¥å¿—æ–‡ä»¶å æ®çš„æœ€å¤§ç©ºé—´journalctl --vacuum-size=1G# æŒ‡å®šæ—¥å¿—æ–‡ä»¶ä¿å­˜å¤šä¹…journalctl --vacuum-time=1years loginctlå‚è€ƒé“¾æ¥ï¼šmanpagesã€man loginctl loginctlå‘½ä»¤ç”¨æ¥æ§åˆ¶ systemd ç™»å½•ç®¡ç†å™¨ï¼ˆsystemd-logind.serviceï¼‰ã€‚ æœåŠ¡ï¼šsystemd-logind.service å‘½ä»¤æ ¼å¼ï¼šloginctl [OPTIONS...] {COMMAND} [NAME...] COMMAND åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼šç”¨æˆ·ã€ä¼šè¯å’Œå¸­ä½ ç”¨æˆ·ç”¨æˆ·æ˜¯æ“ä½œç³»ç»Ÿä¸­è¿›è¡Œäº¤äº’å’Œæ“ä½œçš„å®ä½“ã€‚åœ¨Linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç”¨æˆ·åå’Œç”¨æˆ·IDï¼ˆUIDï¼‰ã€‚ç”¨æˆ·å¯ä»¥æ˜¯æ™®é€šç”¨æˆ·ã€è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰ç­‰ï¼Œæ‹¥æœ‰ä¸åŒçš„æƒé™ã€‚ ä¼šè¯ä¼šè¯æ˜¯ç”¨æˆ·ä¸ç³»ç»Ÿä¹‹é—´çš„äº¤äº’è¿‡ç¨‹ã€‚å½“ç”¨æˆ·ç™»å½•åˆ°Linuxç³»ç»Ÿæ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¼šè¯ã€‚ä¼šè¯åŒ…å«ç”¨æˆ·çš„ç¯å¢ƒè®¾ç½®ã€è¿è¡Œçš„ç¨‹åºã€æ‰“å¼€çš„æ–‡ä»¶ç­‰ã€‚ä¸€ä¸ªç”¨æˆ·å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªä¼šè¯ï¼Œä¾‹å¦‚åœ¨ä¸åŒçš„ç»ˆç«¯æˆ–è¿œç¨‹ç™»å½•æ—¶ã€‚ å¸­ä½å¸­ä½ï¼ˆTTYæˆ–ç»ˆç«¯ï¼‰æ˜¯ç”¨æˆ·ä¸ç³»ç»Ÿä¹‹é—´äº¤äº’çš„æ¥å£ã€‚åœ¨Linuxä¸­ï¼Œæ¯ä¸ªç‰©ç†æˆ–è™šæ‹Ÿç»ˆç«¯éƒ½è¢«ç§°ä¸ºä¸€ä¸ªå¸­ä½ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡è¿™äº›å¸­ä½è¾“å…¥å‘½ä»¤å¹¶æ¥æ”¶è¾“å‡ºã€‚ç°ä»£Linuxç³»ç»Ÿé€šå¸¸æ”¯æŒå¤šä¸ªå¸­ä½ï¼Œä¾‹å¦‚é€šè¿‡è™šæ‹Ÿç»ˆç«¯ï¼ˆttyï¼‰æˆ–å›¾å½¢ç•Œé¢ï¼ˆX Window Systemï¼‰ã€‚ ç”¨æˆ·å‘½ä»¤ åˆ—å‡ºå½“å‰ç™»å½•ç”¨æˆ· list-users 123456root@ubuntu:~# loginctl list-users UID USER 0 root1000 guoyi2 users listed. æ˜¾ç¤ºç”¨æˆ·çŠ¶æ€user-status [USER...] 1234567891011121314151617181920212223242526root@ubuntu:~# loginctl user-status rootroot (0) Since: Sat 2024-10-05 01:40:47 PDT; 9h ago State: active Sessions: 321 *304 Linger: no Unit: user-0.slice â”œâ”€session-304.scope â”‚ â”œâ”€57001 sshd: root@pts/1 â”‚ â”œâ”€57094 -bash â”‚ â”œâ”€58718 loginctl user-status root â”‚ â””â”€58719 pager â”œâ”€session-321.scope â”‚ â”œâ”€58486 sshd: root@pts/2 â”‚ â””â”€58572 -bash â””â”€user@0.service â””â”€init.scope â”œâ”€57004 /lib/systemd/systemd --user â””â”€57005 (sd-pam)Oct 05 01:40:48 ubuntu systemd[57004]: Condition check resulted in Sound System being sk&gt;Oct 05 01:40:48 ubuntu systemd[57004]: Listening on REST API socket for snapd user sessi&gt;Oct 05 01:40:48 ubuntu systemd[57004]: Listening on D-Bus User Message Bus Socket.Oct 05 01:40:48 ubuntu systemd[57004]: Reached target Sockets.Oct 05 01:40:48 ubuntu systemd[57004]: Reached target Basic System.Oct 05 01:40:48 ubuntu systemd[57004]: Condition check resulted in Sound Service being s æ˜¾ç¤ºç”¨æˆ·å„å±æ€§show-user [USER...]ï¼Œå¯ä»¥ç”¨ --all é€‰é¡¹æŸ¥çœ‹ç¼ºçœç©ºç½®ï¼Œä½¿ç”¨ --property= æŸ¥çœ‹ç‰¹å®šå±æ€§ 12345678910111213141516root@ubuntu:~# loginctl show-user rootUID=0GID=0Name=rootTimestamp=Sat 2024-10-05 01:40:47 PDTTimestampMonotonic=574471117888RuntimePath=/run/user/0Service=user@0.serviceSlice=user-0.sliceDisplay=304State=activeSessions=321 304IdleHint=noIdleSinceHint=0IdleSinceHintMonotonic=0Linger=no ç­‰ç­‰ ä¼šè¯å‘½ä»¤ åˆ—å‡ºå½“å‰æ‰€æœ‰ä¼šè¯ list-sessions 1234567root@ubuntu:~# loginctl list-sessionsSESSION UID USER SEAT TTY 2 1000 guoyi seat0 tty2 304 0 root 321 0 root3 sessions listed. æ˜¾ç¤ºç®€æ´çš„ä¼šè¯çŠ¶æ€ä¿¡æ¯session-status [ID...] 1234567891011121314root@ubuntu:~# loginctl session-status 304304 - root (0) Since: Sat 2024-10-05 01:40:47 PDT; 9h ago Leader: 57001 (sshd) Remote: 192.168.45.1 Service: sshd; type tty; class user State: active Unit: session-304.scope â”œâ”€57001 sshd: root@pts/1 â”œâ”€57094 -bash â”œâ”€58744 loginctl session-status 304 â””â”€58745 pagerOct 05 01:40:48 ubuntu systemd[1]: Started Session 304 of user root. æ˜¾ç¤ºä¼šè¯çš„å„é¡¹å±æ€§å€¼show-session [ID...] 123456789101112131415161718192021root@ubuntu:~# loginctl show-session 321Id=321User=0Name=rootTimestamp=Sat 2024-10-05 10:31:06 PDTTimestampMonotonic=606290337700VTNr=0Remote=yesRemoteHost=192.168.45.1Service=sshdScope=session-321.scopeLeader=58486Audit=321Type=ttyClass=userActive=yesState=activeIdleHint=noIdleSinceHint=0IdleSinceHintMonotonic=0LockedHint=no ç­‰ç­‰ å¸­ä½å‘½ä»¤ æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å¸­ä½list-seats 12345root@ubuntu:~# loginctl list-seatsSEATseat01 seats listed. ç­‰ç­‰ å‚è€ƒ å®˜æ–¹æ–‡æ¡£","categories":[{"name":"Linux","slug":"Linux","permalink":"https://gy23333.github.io/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://gy23333.github.io/tags/Linux/"},{"name":"systemd","slug":"systemd","permalink":"https://gy23333.github.io/tags/systemd/"}]},{"title":"Docker","slug":"Docker","date":"2024-09-19T05:48:28.000Z","updated":"2025-12-15T15:31:06.667Z","comments":true,"path":"2024/09/19/Docker/","link":"","permalink":"https://gy23333.github.io/2024/09/19/Docker/","excerpt":"åŸºäº Go çš„å¼€æºåº”ç”¨å®¹å™¨å¼•æ“ Docker","text":"åŸºäº Go çš„å¼€æºåº”ç”¨å®¹å™¨å¼•æ“ Docker å¿«é€Ÿäº†è§£ Dockerå¿«é€Ÿäº†è§£ docker çš„å°è§†é¢‘ ã€dockeræ˜¯ä»€ä¹ˆï¼Ÿå’Œkubernetes(k8s)æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ-å“”å“©å“”å“©ã€‘ Docker æ˜¯ä¸€æ¬¾èƒ½å°†ç¨‹åºå’Œç¯å¢ƒä¸€èµ·æ‰“åŒ…å¹¶è¿è¡Œçš„å·¥å…·è½¯ä»¶ã€‚Docker ä½œä¸ºä¸­é—´å±‚ï¼Œä½¿å¾—åº”ç”¨å’Œæœºå™¨åŸºç¡€æ¶æ„åˆ†ç¦»ï¼Œä»è€Œå®ç°ä¸åŒæ¶æ„ä¸‹çš„å¿«é€Ÿäº¤ä»˜éƒ¨ç½²ã€‚ ç¨‹åºå’Œç¯å¢ƒæ‰“åŒ…æ„å»ºæˆä¸€ä¸ªå®¹å™¨é•œåƒæ–‡ä»¶ï¼Œæ ¹æ® Dockerfile æ„å»ºå‡ºå®¹å™¨é•œåƒï¼ŒDockerfile ä¸­è®¾ç½®åŒ…æ‹¬æŒ‡å®šç¯å¢ƒçš„åŸºç¡€é•œåƒï¼ˆå¦‚ ubuntu/centosã€python/go ç­‰ç­‰ï¼‰ä»¥åŠåç»­éœ€æ‰§è¡Œçš„å‘½ä»¤ï¼ˆæ¯”å¦‚å®‰è£…ä¾èµ–ã€è¿è¡ŒæœåŠ¡ç­‰ï¼‰ã€‚ éƒ¨ç½²ç¯å¢ƒéƒ¨ç½²å®¹å™¨é•œåƒï¼Œå°±ä¼šåœ¨ Linux ä¸Šä»¥ä¸€ä¸ªè¿›ç¨‹çš„å½¢å¼è¿è¡Œè¯¥ docker å®¹å™¨ï¼Œåˆ©ç”¨æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç©ºé—´æ„å»ºå‡ºåº”ç”¨æ‰€éœ€çš„ç¯å¢ƒï¼Œè¿è¡Œç›¸åº”æœåŠ¡ã€‚ Docker Registyï¼šç›¸å½“äº docker é•œåƒçš„ä»£ç ä»“ï¼Œä¹Ÿå°±æ˜¯é•œåƒä»“ï¼Œå¯ä»¥å°† docker é•œåƒæ¨åˆ° Registyï¼Œéƒ¨ç½²ç¯å¢ƒå†ä» Registy æ‹‰å–é•œåƒã€‚ Docker Composeï¼šä¸€æ•´å¥—æœåŠ¡ç»å¸¸åŒ…å«å¤šä¸ª docker é•œåƒéƒ¨ç½²åˆ°å•èŠ‚ç‚¹ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ Docker Compose æ¥éƒ¨ç½²ï¼Œé€šè¿‡ yaml æ–‡ä»¶å‘¢è§„å®šå„ä¸ª docker é•œåƒé—´çš„éƒ¨ç½²é¡ºåºä¸å…¶ä»–éƒ¨ç½²é…ç½®ä¿¡æ¯ã€‚ Docker Swarmï¼šè§£å†³ä¸€æ•´å¥—æœåŠ¡åœ¨å¤šä¸ªèŠ‚ç‚¹é—´çš„éƒ¨ç½²é—®é¢˜ï¼Œå¦‚è¿ç§»ã€æ‰©ç¼©å®¹ã€‚ k8sï¼šä¸ Docker Swarm ç±»ä¼¼ï¼Œä¹Ÿæ˜¯è§£å†³ä¸€æ•´å¥—æœåŠ¡åœ¨å¤šä¸ªèŠ‚ç‚¹é—´çš„éƒ¨ç½²é—®é¢˜ï¼Œå¦‚è¿ç§»ã€æ‰©ç¼©å®¹ã€‚ è™šæ‹ŸåŒ–è¿‡ç¨‹ç‰©ç†æœºç‰©ç†æœºå­˜åœ¨çš„ç—›ç‚¹ï¼š å„ä¸ªåº”ç”¨ä¼šå…±äº«ä¾èµ–åº“ï¼Œæ‰€ä»¥æœ‰å¯èƒ½å­˜åœ¨ä¸åŒåº”ç”¨ä¾èµ–æœ‰å†²çªçš„é—®é¢˜ï¼Œæ¯”å¦‚éœ€è¦åŒä¸€ä¸ªä¾èµ–çš„ä¸åŒç‰ˆæœ¬ ä½ä½¿ç”¨ç‡ï¼Œå¯èƒ½ä»…æœ‰å‡ ä¸ªåº”ç”¨åœ¨è¿è¡Œï¼Œå´å¾—å ç”¨ä¸€æ•´å°ç‰©ç†æœº çˆ†ç‚¸åŠå¾„å¤§ï¼Œæ¯”å¦‚æ”¹å˜ä¸€ä¸ªåº”ç”¨çš„ä¾èµ–ï¼Œå¯ä»¥ä¼šå¯¼è‡´å¦ä¸€åº”ç”¨å˜å¾—ä¸å¯ç”¨ å¼€å…³æœºæ…¢ åˆ›å»ºå’Œæ­å»ºç‰©ç†æœºæ…¢ è™šæ‹Ÿæœºç‰©ç†æœºä¸Šçš„ Hypervisor ä¼šä»ç‰©ç†æœºåˆ†ç¦»å‡ºç‹¬ç«‹çš„èµ„æºæ± ï¼Œåœ¨è¿™ä¸ªèµ„æºæ± ä¸­ç”Ÿæˆè™šæ‹ŸåŒ–ç¡¬ä»¶ä»¥åŠä¸ç‰©ç†æœºç›¸åŒçš„ä¸Šæ–¹ç»“æ„ã€‚ Hypervisor åˆ†ä¸ºä¸¤ç±»ï¼š Type 1ï¼šä¸ä¾èµ–ç‰©ç†æœºä¸Šçš„ OSï¼Œæ¯”å¦‚ VMwareã€Hyper-V Type 2ï¼šä¾èµ–ç‰©ç†æœºä¸Šçš„ OSï¼Œæ¯”å¦‚ Virtual Box è™šæ‹Ÿæœºä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†ç‰©ç†æœºçš„é—®é¢˜ã€‚ åº”ç”¨è¿è¡Œåœ¨ä¸åŒçš„è™šæ‹Ÿæœºä¸Šï¼Œå®ç°ç›¸äº’éš”ç¦»ï¼Œè§£å†³äº†ä¾èµ–å†²çªé—®é¢˜ å¯ä»¥æ ¹æ®éœ€è¦åˆ†é…ç›¸åº”çš„è§„æ ¼ï¼Œæé«˜ä½¿ç”¨ç‡ å‡å°äº†çˆ†ç‚¸åŠå¾„ å¼€å…³æœºå˜ä¸ºåˆ†é’Ÿçº§ æœ€å¤§çš„å¥½å¤„ï¼šå¯ä»¥å¿«é€Ÿæ„å»ºè™šæ‹Ÿæœº å®¹å™¨å®¹å™¨çš„è½½ä½“å¯ä»¥æ˜¯ç‰©ç†æœºä¹Ÿå¯ä»¥æ˜¯è™šæ‹Ÿæœºï¼Œå’Œè™šæ‹Ÿæœºçš„ Hypervisor ç›¸å¯¹ï¼Œå®¹å™¨é€šè¿‡ Container Runtime æ§åˆ¶ã€‚ å®¹å™¨ä¸è™šæ‹Ÿæœºçš„æœ€å¤§ä¸åŒç‚¹ï¼š è™šæ‹Ÿæœºå¤åˆ¶äº†ä¸€ä»½ Linux å†…æ ¸ å®¹å™¨å¹¶ä¸å­˜åœ¨å†…æ ¸ï¼Œè€Œæ˜¯ä¸è½½ä½“çš„ OS å…±ç”¨ä¸€ä¸ªå†…æ ¸ å®¹å™¨çš„å¥½å¤„ï¼š æ— ä¾èµ–å†²çªé—®é¢˜ è¿›ä¸€æ­¥æé«˜äº†èµ„æºåˆ©ç”¨ç‡ã€‚è™šæ‹Ÿæœºè¿˜éœ€è¦æ„é€ ä¸€å¥— OSï¼Œè€Œå®¹å™¨å¯ä»¥ç›´æ¥ä¾èµ–äºå®¿ä¸»æœºçš„ OS è¿›ä¸€æ­¥å‡å°äº†çˆ†ç‚¸åŠå¾„ã€‚æ¯ä¸ªå®¹å™¨æ‰€å çš„èµ„æºç›¸å¯¹æ›´å°‘äº†ï¼Œçˆ†ç‚¸åŠå¾„ä¹Ÿå°±ç›¸å¯¹å‡å°ã€‚ä¸è¿‡å…¶å®éš”ç¦»æ€§æ˜¯ä¸å¦‚è™šæ‹Ÿæœºçš„ å¼€å…³å®¹å™¨æ—¶é—´çŸ­ï¼ˆç§’çº§ï¼‰ æå¿«é€Ÿéƒ¨ç½² æ—¥å¸¸ç»“æ„ Docker æ¶æ„Docker é‡‡ç”¨ client-server æ¶æ„ï¼Œç”± Docker Client å‘å‡ºæŒ‡ä»¤ï¼Œå‘½ä»¤ Docker daemon æ„å»ºã€è¿è¡Œã€åˆ†å‘ Docker containersã€‚Docker Client å’Œ Docker daemon å¯ä»¥è¿è¡Œåœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥ç”¨ Docker Client æ§åˆ¶è¿œç¨‹çš„ Docker daemonã€‚ é•œåƒ Imageå®¹å™¨é•œåƒæ˜¯ä¸€ä¸ªç”±ç¨‹åºå’Œç¯å¢ƒæ„å»ºå‡ºçš„æ ‡å‡†åŒ…ï¼ŒåŒ…æ‹¬äº†ç”¨æ¥è¿è¡Œå®¹å™¨æ‰€éœ€çš„æ–‡ä»¶ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€åº“ä»¥åŠé…ç½®ã€‚ å®¹å™¨ ContainerUbuntu ä¸­å®‰è£… Docker Enginehttps://docs.docker.com/engine/install/ubuntu/ å¸è½½è€ç‰ˆæœ¬ 1for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done æ›´æ–° Ubuntu æºåˆ—è¡¨ 1apt-get update å®‰è£… docker ä¾èµ–åŒ… 1apt-get install ca-certificates curl æ·»åŠ  docker å®˜æ–¹ GPG å¯†é’¥ 123install -m 0755 -d /etc/apt/keyringscurl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.ascchmod a+r /etc/apt/keyrings/docker.asc æ·»åŠ  docker å®˜æ–¹åº“ 1234echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\ $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\ sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null æ›´æ–° Ubuntu æºåˆ—è¡¨ 1apt-get update å®‰è£… docker 1sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin æŸ¥çœ‹ docker æœåŠ¡è¿è¡ŒçŠ¶æ€ 1systemctl status docker é…ç½®å›½å†…é•œåƒ1vim &#x2F;etc&#x2F;docker&#x2F;daemon.json 1234567891011&#123; &quot;registry-mirrors&quot;: [ &quot;https:&#x2F;&#x2F;registry.docker-cn.com&quot;, &quot;https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&quot;, &quot;https:&#x2F;&#x2F;hub-mirror.c.163.com&quot;, &quot;https:&#x2F;&#x2F;mirror.baidubce.com&quot;, &quot;https:&#x2F;&#x2F;ccr.ccs.tencentyun.com&quot;, &quot;https:&#x2F;&#x2F;docker.shootchat.top&quot;, &quot;https:&#x2F;&#x2F;do.nark.eu.org&quot; ]&#125; 12systemctl daemon-reloadsystemctl restart docker 123456789root@ubuntu2404:&#x2F;home&#x2F;guoyi# s... Registry Mirrors: https:&#x2F;&#x2F;registry.docker-cn.com&#x2F; https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&#x2F; https:&#x2F;&#x2F;hub-mirror.c.163.com&#x2F; https:&#x2F;&#x2F;mirror.baidubce.com&#x2F; https:&#x2F;&#x2F;ccr.ccs.tencentyun.com&#x2F;... Docker ä»æ„å»ºåˆ°éƒ¨ç½²Docker é•œåƒæ„å»ºDocker é•œåƒä»“Docker å®¹å™¨éƒ¨ç½²Docker å‘½ä»¤æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ 1docker ps æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ 1docker ps -a å¼€å¯å®¹å™¨ 1docker start &lt;CONTAINER ID&gt; åœæ­¢å®¹å™¨ 1docker stop &lt;CONTAINER ID&gt; æ‰§è¡Œå‘½ä»¤ 1docker exec -it &lt;CONTAINER ID&gt; &lt;CLI&gt; Docker ComposeDocker Compose æ˜¯ä¸€ä¸ªå®šä¹‰å’Œç®¡ç†å¤šä¸ªå®¹å™¨çš„å·¥å…·ï¼Œå¯ä»¥é€šè¿‡ yaml é…ç½®åº”ç”¨æ‰€éœ€çš„æ‰€æœ‰æœåŠ¡å®¹å™¨ï¼Œè€Œåä¸€é”®å¼€å¯ã€‚ Docker Swarm ä¸ k8sOrbStackOrbStack æ˜¯ Mac ä¸Šå¯åŒæ—¶ä»£æ›¿ Docker Desktop å’Œ WSL çš„å¹³å°ï¼Œæ–¹ä¾¿å¿«é€Ÿåˆ›å»ºè™šæ‹Ÿæœºæˆ–å®¹å™¨ã€‚ å®‰è£… OrbStack1brew install orbstack é…ç½®å›½å†…é•œåƒå¯åœ¨ OrbStack è®¾ç½®ä¸­ç™½å±é…ç½® Docker é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚é•œåƒï¼Œæ›´æ–°å®Œé…ç½®åé‡å¯ OrbStack Orb å‘½ä»¤å‚è€ƒ docker å®˜ç½‘ https://www.youtube.com/watch?v=RqTEHSBrYFw","categories":[{"name":"Docker","slug":"Docker","permalink":"https://gy23333.github.io/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://gy23333.github.io/tags/Docker/"}]},{"title":"FRRouting","slug":"FRRouting","date":"2024-09-19T05:48:11.000Z","updated":"2024-12-08T17:40:21.299Z","comments":true,"path":"2024/09/19/FRRouting/","link":"","permalink":"https://gy23333.github.io/2024/09/19/FRRouting/","excerpt":"FRRoutingï¼ˆFRRï¼‰æ˜¯ä¸€æ¬¾æä¾› IP è·¯ç”±æœåŠ¡çš„å¼€æºå¥—ä»¶ï¼Œæ”¯æŒ BGPã€OSPFã€RIPã€IS-IS ç­‰ç­‰è·¯ç”±åè®®ã€‚FRR å¯ä»¥åœ¨ç½‘ç»œæ ˆä¸­ä¸å…¶ä»–è·¯ç”±å™¨äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œåšå‡ºè·¯ç”±ç­–ç•¥å†³ç­–ï¼Œå¹¶å°†å†³ç­–é€šçŸ¥ç»™å…¶ä»–å±‚ã€‚","text":"FRRoutingï¼ˆFRRï¼‰æ˜¯ä¸€æ¬¾æä¾› IP è·¯ç”±æœåŠ¡çš„å¼€æºå¥—ä»¶ï¼Œæ”¯æŒ BGPã€OSPFã€RIPã€IS-IS ç­‰ç­‰è·¯ç”±åè®®ã€‚FRR å¯ä»¥åœ¨ç½‘ç»œæ ˆä¸­ä¸å…¶ä»–è·¯ç”±å™¨äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œåšå‡ºè·¯ç”±ç­–ç•¥å†³ç­–ï¼Œå¹¶å°†å†³ç­–é€šçŸ¥ç»™å…¶ä»–å±‚ã€‚ FRR å®‰è£…ä¸¤ç§å®‰è£…æ–¹æ³• apt1sudo apt install frr æºç ç¼–è¯‘Ubuntu 22.04 å®‰è£… FRRouting å®‰è£…ä¾èµ–123456789sudo apt updatesudo apt-get install \\ git autoconf automake libtool make libreadline-dev texinfo \\ pkg-config libpam0g-dev libjson-c-dev bison flex \\ libc-ares-dev python3-dev python3-sphinx \\ install-info build-essential libsnmp-dev perl \\ libcap-dev libelf-dev libunwind-dev \\ protobuf-c-compiler libprotobuf-c-devsudo apt-get install cmake libpcre2-dev å®‰è£… libyang12345678git clone https:&#x2F;&#x2F;github.com&#x2F;CESNET&#x2F;libyang.gitcd libyanggit checkout v2.1.128mkdir build; cd buildcmake --install-prefix &#x2F;usr \\ -D CMAKE_BUILD_TYPE:String&#x3D;&quot;Release&quot; ..makesudo make install é…ç½® FRR ç”¨æˆ·/ç”¨æˆ·ç»„12345sudo groupadd -r -g 92 frrsudo groupadd -r -g 85 frrvtysudo adduser --system --ingroup frr --home &#x2F;var&#x2F;run&#x2F;frr&#x2F; \\ --gecos &quot;FRR suite&quot; --shell &#x2F;sbin&#x2F;nologin frrsudo usermod -a -G frrvty frr å®‰è£… FRR123456789101112131415161718192021222324git clone https:&#x2F;&#x2F;github.com&#x2F;frrouting&#x2F;frr.git frrcd frr.&#x2F;bootstrap.sh.&#x2F;configure \\ --prefix&#x3D;&#x2F;usr \\ --includedir&#x3D;\\$&#123;prefix&#125;&#x2F;include \\ --bindir&#x3D;\\$&#123;prefix&#125;&#x2F;bin \\ --sbindir&#x3D;\\$&#123;prefix&#125;&#x2F;lib&#x2F;frr \\ --libdir&#x3D;\\$&#123;prefix&#125;&#x2F;lib&#x2F;frr \\ --libexecdir&#x3D;\\$&#123;prefix&#125;&#x2F;lib&#x2F;frr \\ --sysconfdir&#x3D;&#x2F;etc \\ --localstatedir&#x3D;&#x2F;var \\ --with-moduledir&#x3D;\\$&#123;prefix&#125;&#x2F;lib&#x2F;frr&#x2F;modules \\ --enable-configfile-mask&#x3D;0640 \\ --enable-logfile-mask&#x3D;0640 \\ --enable-snmp&#x3D;agentx \\ --enable-multipath&#x3D;64 \\ --enable-user&#x3D;frr \\ --enable-group&#x3D;frr \\ --enable-vty-group&#x3D;frrvty \\ --with-pkg-git-version \\ --with-pkg-extra-version&#x3D;-MyOwnFRRVersionmakesudo make install ç”Ÿæˆé…ç½®123456sudo install -m 775 -o frr -g frr -d &#x2F;var&#x2F;log&#x2F;frrsudo install -m 775 -o frr -g frrvty -d &#x2F;etc&#x2F;frrsudo install -m 640 -o frr -g frrvty tools&#x2F;etc&#x2F;frr&#x2F;vtysh.conf &#x2F;etc&#x2F;frr&#x2F;vtysh.confsudo install -m 640 -o frr -g frr tools&#x2F;etc&#x2F;frr&#x2F;frr.conf &#x2F;etc&#x2F;frr&#x2F;frr.confsudo install -m 640 -o frr -g frr tools&#x2F;etc&#x2F;frr&#x2F;daemons.conf &#x2F;etc&#x2F;frr&#x2F;daemons.confsudo install -m 640 -o frr -g frr tools&#x2F;etc&#x2F;frr&#x2F;daemons &#x2F;etc&#x2F;frr&#x2F;daemons å¯åŠ¨æœåŠ¡123sudo install -m 644 tools&#x2F;frr.service &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;frr.servicesudo systemctl enable frrsudo systemctl start frr æŸ¥çœ‹å®‰è£…å®Œæˆçš„ FRR 123456789101112131415161718192021222324252627guoyi@ubuntu2:~/frr$ systemctl status frrâ— frr.service - FRRouting Loaded: loaded (/etc/systemd/system/frr.service; enabled; preset: enabled) Active: active (running) since Sun 2024-12-08 07:42:09 UTC; 7s ago Docs: https://frrouting.readthedocs.io/en/latest/setup.html Process: 38567 ExecStart=/usr/lib/frr/frrinit.sh start (code=exited, status=0/SUCCESS) Main PID: 38578 (watchfrr) Status: \"FRR Operational\" Tasks: 8 (limit: 4550) Memory: 14.5M (peak: 28.2M) CPU: 89ms CGroup: /system.slice/frr.service â”œâ”€38578 /usr/lib/frr/watchfrr -d -F traditional zebra mgmtd staticd â”œâ”€38589 /usr/lib/frr/zebra -d -F traditional -A 127.0.0.1 -s 90000000 â”œâ”€38594 /usr/lib/frr/mgmtd -d -F traditional -A 127.0.0.1 â””â”€38596 /usr/lib/frr/staticd -d -F traditional -A 127.0.0.1Dec 08 07:42:09 ubuntu2 watchfrr[38578]: [VTVCM-Y2NW3] Configuration Read in Took: 00:00:00Dec 08 07:42:09 ubuntu2 frrinit.sh[38600]: [38600|zebra] doneDec 08 07:42:09 ubuntu2 frrinit.sh[38616]: [38616|staticd] doneDec 08 07:42:09 ubuntu2 frrinit.sh[38614]: [38614|watchfrr] doneDec 08 07:42:09 ubuntu2 watchfrr[38578]: [QDG3Y-BY5TN] zebra state -&gt; up : connect succeededDec 08 07:42:09 ubuntu2 watchfrr[38578]: [QDG3Y-BY5TN] mgmtd state -&gt; up : connect succeededDec 08 07:42:09 ubuntu2 watchfrr[38578]: [QDG3Y-BY5TN] staticd state -&gt; up : connect succeededDec 08 07:42:09 ubuntu2 watchfrr[38578]: [KWE5Q-QNGFC] all daemons up, doing startup-complete notifyDec 08 07:42:09 ubuntu2 frrinit.sh[38567]: * Started watchfrrDec 08 07:42:09 ubuntu2 systemd[1]: Started frr.service - FRRouting. FRR åŸºç¡€Daemons é…ç½®æ–‡ä»¶Daemons é…ç½®æ–‡ä»¶ç”¨æ¥è®¾ç½® FRR çš„å“ªäº› daemon éœ€è¦åœ¨ FRR å¯åŠ¨æ—¶è¢«æ¿€æ´»ï¼Œå¹¶ä¸”è®¾ç½® daemon å¯åŠ¨æ—¶çš„å‚æ•°ã€‚ é€šå¸¸æ”¾åœ¨ /etc/frr/daemonsï¼Œå¦‚æœä¿®æ”¹äº†é‡Œé¢çš„å†…å®¹ï¼Œéœ€è¦é‡å¯ FRR æœåŠ¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126# This file tells the frr package which daemons to start.## Sample configurations for these daemons can be found in# &#x2F;usr&#x2F;share&#x2F;doc&#x2F;frr&#x2F;examples&#x2F;.## ATTENTION:## When activating a daemon for the first time, a config file, even if it is# empty, has to be present *and* be owned by the user and group &quot;frr&quot;, else# the daemon will not be started by &#x2F;etc&#x2F;init.d&#x2F;frr. The permissions should# be u&#x3D;rw,g&#x3D;r,o&#x3D;.# When using &quot;vtysh&quot; such a config file is also needed. It should be owned by# group &quot;frrvty&quot; and set to ug&#x3D;rw,o&#x3D; though. Check &#x2F;etc&#x2F;pam.d&#x2F;frr, too.## The watchfrr, zebra and staticd daemons are always started.#bgpd&#x3D;noospfd&#x3D;yesospf6d&#x3D;noripd&#x3D;noripngd&#x3D;noisisd&#x3D;nopimd&#x3D;nopim6d&#x3D;noldpd&#x3D;nonhrpd&#x3D;noeigrpd&#x3D;nobabeld&#x3D;nosharpd&#x3D;nopbrd&#x3D;nobfdd&#x3D;nofabricd&#x3D;novrrpd&#x3D;nopathd&#x3D;no## If this option is set the &#x2F;etc&#x2F;init.d&#x2F;frr script automatically loads# the config via &quot;vtysh -b&quot; when the servers are started.# Check &#x2F;etc&#x2F;pam.d&#x2F;frr if you intend to use &quot;vtysh&quot;!#vtysh_enable&#x3D;yeszebra_options&#x3D;&quot; -A 127.0.0.1 -s 90000000&quot;mgmtd_options&#x3D;&quot; -A 127.0.0.1&quot;bgpd_options&#x3D;&quot; -A 127.0.0.1&quot;ospfd_options&#x3D;&quot; -A 127.0.0.1&quot;ospf6d_options&#x3D;&quot; -A ::1&quot;ripd_options&#x3D;&quot; -A 127.0.0.1&quot;ripngd_options&#x3D;&quot; -A ::1&quot;isisd_options&#x3D;&quot; -A 127.0.0.1&quot;pimd_options&#x3D;&quot; -A 127.0.0.1&quot;pim6d_options&#x3D;&quot; -A ::1&quot;ldpd_options&#x3D;&quot; -A 127.0.0.1&quot;nhrpd_options&#x3D;&quot; -A 127.0.0.1&quot;eigrpd_options&#x3D;&quot; -A 127.0.0.1&quot;babeld_options&#x3D;&quot; -A 127.0.0.1&quot;sharpd_options&#x3D;&quot; -A 127.0.0.1&quot;pbrd_options&#x3D;&quot; -A 127.0.0.1&quot;staticd_options&#x3D;&quot;-A 127.0.0.1&quot;bfdd_options&#x3D;&quot; -A 127.0.0.1&quot;fabricd_options&#x3D;&quot;-A 127.0.0.1&quot;vrrpd_options&#x3D;&quot; -A 127.0.0.1&quot;pathd_options&#x3D;&quot; -A 127.0.0.1&quot;# If you want to pass a common option to all daemons, you can use the# &quot;frr_global_options&quot; variable.##frr_global_options&#x3D;&quot;&quot;# The list of daemons to watch is automatically generated by the init script.# This variable can be used to pass options to watchfrr that will be passed# prior to the daemon list.## To make watchfrr create&#x2F;join the specified netns, add the the &quot;--netns&quot;# option here. It will only have an effect in &#x2F;etc&#x2F;frr&#x2F;&lt;somename&gt;&#x2F;daemons, and# you need to start FRR with &quot;&#x2F;usr&#x2F;lib&#x2F;frr&#x2F;frrinit.sh start &lt;somename&gt;&quot;.##watchfrr_options&#x3D;&quot;&quot;# configuration profile##frr_profile&#x3D;&quot;traditional&quot;#frr_profile&#x3D;&quot;datacenter&quot;# This is the maximum number of FD&#39;s that will be available. Upon startup this# is read by the control files and ulimit is called. Uncomment and use a# reasonable value for your setup if you are expecting a large number of peers# in say BGP.##MAX_FDS&#x3D;1024# Uncomment this option if you want to run FRR as a non-root user. Note that# you should know what you are doing since most of the daemons need root# to work. This could be useful if you want to run FRR in a container# for instance.# FRR_NO_ROOT&#x3D;&quot;yes&quot;# For any daemon, you can specify a &quot;wrap&quot; command to start instead of starting# the daemon directly. This will simply be prepended to the daemon invocation.# These variables have the form daemon_wrap, where &#39;daemon&#39; is the name of the# daemon (the same pattern as the daemon_options variables).## Note that when daemons are started, they are told to daemonize with the &#96;-d&#96;# option. This has several implications. For one, the init script expects that# when it invokes a daemon, the invocation returns immediately. If you add a# wrap command here, it must comply with this expectation and daemonize as# well, or the init script will never return. Furthermore, because daemons are# themselves daemonized with -d, you must ensure that your wrapper command is# capable of following child processes after a fork() if you need it to do so.## If your desired wrapper does not support daemonization, you can wrap it with# a utility program that daemonizes programs, such as &#39;daemonize&#39;. An example# of this might look like:## bgpd_wrap&#x3D;&quot;&#x2F;usr&#x2F;bin&#x2F;daemonize &#x2F;usr&#x2F;bin&#x2F;mywrapper&quot;## This is particularly useful for programs which record processes but lack# daemonization options, such as perf and rr.## If you wish to wrap all daemons in the same way, you may set the &quot;all_wrap&quot;# variable.##all_wrap&#x3D;&quot;&quot; crash æ—¥å¿—FRR å„ä¸ª daemon çš„ crash æ—¥å¿—å‚¨å­˜åœ¨å›ºå®šä½ç½®ï¼Œå³ /var/tmp/frr/&lt;daemon&gt;[-&lt;instance&gt;].&lt;pid&gt;/crashlog æ—¥å¿—é…ç½®åœ¨ frr.conf ä¸­å¯ä»¥é…ç½®æ—¥å¿—æ–‡ä»¶è¾“å‡º 1log file &#x2F;var&#x2F;log&#x2F;frr&#x2F;frr.log [logging_level] vtyshroot æƒé™æˆ–è€… frrvty æƒé™å¯ä»¥ä½¿ç”¨ vtysh å‘½ä»¤è¿›å…¥äº¤äº’æ¨¡å¼ show å‘½ä»¤ show ip ospf neighbor æŸ¥çœ‹ OSPF é‚»å±…ï¼Œå…¶ä¸­ Neighbor IDï¼šé‚»å±…çš„ Router ID Priï¼šé‚»å±…çš„ Priority Stateï¼šé‚»å±…çŠ¶æ€ 1234568ade633bf9# show ip ospf neighborNeighbor ID Pri State Up Time Dead Time Address Interface RXmtL RqstL DBsmL12.12.0.2 1 Full/Backup 22h48m43s 37.418s 11.11.0.3 eth1:11.11.0.2 0 0 0 FRR å’Œå…¶ä»–è·¯ç”±å™¨äº¤æ¢è·¯ç”±ä¿¡æ¯ã€ æ”¯æŒåŒ—å‘grpcæ¥å£ æˆ– vtysh å‘½ä»¤ è¿›å…¥é…ç½®æ¨¡å¼ 1configure terminal é…ç½®ç½‘å¡ 1interface ens38 VIPæ˜¯192.168.1.1/24ï¼Œä½ è¦å‘å¸ƒåˆ°OSPFåŒºåŸŸ0ï¼Œä¸”è®¾ç½®æˆæœ¬ä¸º10 1234567891011121314vtyshconfigure terminalinterface eth0 ip address 192.168.1.1&#x2F;24!router ospf network 192.168.1.0&#x2F;24 area 0!interface eth0 ip ospf cost 10 endwrite memory 12345678910vtyshconfigure terminalinterface eth0 no ip address 192.168.1.1&#x2F;24!router ospf 1 no network 192.168.1.0&#x2F;24 area 0!interface eth0 ip ospf cost 10 1show ip route ospf æŸ¥çœ‹ DR 1show ip ospf neighbor æŸ¥çœ‹ ospf è·¯ç”± 1show ip ospf route FRR é…ç½®é…ç½®å‘½ä»¤ æŸ¥çœ‹å½“å‰é…ç½® 1show running-config è¿›å…¥é…ç½®æ¨¡å¼ 1configure terminal å†™åˆ°é…ç½®æ–‡ä»¶ 1write memory é€€å›ä¸Šä¸€çº§ q prefix-list é…ç½®prefix-listï¼ˆå‰ç¼€åˆ—è¡¨ï¼‰ç”¨äºåŒ¹é…å’Œè¿‡æ»¤ IP åœ°å€ å®šä¹‰ prefix-listä¸‹é¢åªæ˜¯å®šä¹‰ä¸€æ¡å‰ç¼€åˆ—è¡¨è§„åˆ™ï¼Œå¦‚æœªè®¾ç½®åº”ç”¨ï¼Œä¸ä¼šèµ·ä»»ä½•ä½œç”¨ 1ip prefix-list NAME [seq NUMBER] (permit|deny) PREFIX [le LEN] [ge LEN] NAMEï¼šå®šä¹‰çš„è¯¥å‰ç¼€åˆ—è¡¨çš„åå­—ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†è¯¥ prefix-list seqï¼šè§„åˆ™åºå·ï¼ŒåŒ¹é…çš„ä¼˜å…ˆçº§ï¼Œåºå·è¶Šå°è¶Šå…ˆåŒ¹é…ï¼Œå¯è‡ªåŠ¨è®¾ç½®ï¼Œè‡ªåŠ¨è®¾ç½®ä»¥ 5 ä¸ºå¢é‡ permit|denyï¼šåŒ¹é…åˆ°çš„å‰ç¼€å°†è¢«å…è®¸é€šè¿‡/è¢«è¿‡æ»¤æ‰ PREFIXï¼šåŒ¹é…çš„ç½‘ç»œåœ°å€å’Œå‰ç¼€é•¿åº¦ leï¼šåŒ¹é…çš„æœ€é•¿å­ç½‘æ©ç é•¿åº¦ geï¼šåŒ¹é…çš„æœ€çŸ­å­ç½‘æ©ç é•¿åº¦ é…ç½®ç¤ºä¾‹ 123456&#x2F;&#x2F; å®šä¹‰ä¸€ä¸ªå‘½åä¸º PLIST-1 çš„ prefix-listï¼Œæ‹’ç»æ‰€æœ‰å‰ç¼€ip prefix-list PLIST-1 seq 5 deny 0.0.0.0&#x2F;0 le 32&#x2F;&#x2F; å®šä¹‰ä¸€ä¸ªå‘½åä¸º PLIST-2 çš„ prefix-listï¼Œæ¥å—å‰ç¼€ IP ä¸º 1.1.1.1 å’Œ 2.2.2.2 çš„å‰ç¼€ip prefix-list PLIST-2 seq 5 permit 1.1.1.1&#x2F;32ip prefix-list PLIST-2 seq 10 permit 2.2.2.2&#x2F;32 å‰ç¼€åŒ¹é…è§„åˆ™ ä¼˜å…ˆåŒ¹é… seq å°çš„è§„åˆ™ï¼Œé€æ¡æ£€æŸ¥åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ä¸Šï¼Œåˆ™åç»­æ¡ç›®æ— éœ€å†æ£€æŸ¥ å¦‚æœæœªè®¾ç½®ä»»ä½• prefix-listï¼Œåˆ™è§†ä¸ºæ‰€æœ‰ prefix éƒ½ permit é»˜è®¤æ‹’ç»ï¼šå¦‚æœè®¾ç½®æœ‰ prefix-listï¼Œä½†æœªåŒ¹é…åˆ°ä»»ä½•ä¸€æ¡è§„åˆ™ï¼Œåˆ™é»˜è®¤æ‹’ç»è¯¥ prefix åŒ¹é…è§„åˆ™ï¼š æ£€æŸ¥ prefix IP æ˜¯å¦åŒ¹é… network/prefix-length å¦‚æœæœ‰è®¾ç½® ge æˆ– leï¼Œåˆ™æ£€æŸ¥ prefix é•¿åº¦æ˜¯å¦åœ¨ &gt;=ge ä»¥åŠ &lt;=le èŒƒå›´å†… æ¯”å¦‚ 192.168.1.0/24 ge 25 le 30 IP åŒ¹é…èŒƒå›´ 192.168.1.0 ~ 192.168.1.255 å‰ç¼€é•¿åº¦åœ¨ 25 ~ 30 192.168.1.0/24 ä¸åŒ¹é…ï¼ˆå‰ç¼€é•¿åº¦ä¸åŒ¹é…ï¼‰ã€192.168.1.0/25 åŒ¹é…ã€192.168.1.30/28 åŒ¹é… æŸ¥çœ‹ prefix-list1show ip prefix-list route-map é…ç½®ç”¨äºåŒ¹é…å’Œè¿‡æ»¤è·¯ç”± å®šä¹‰ route-mapä¸‹é¢åªæ˜¯å®šä¹‰ä¸€æ¡è·¯ç”±åŒ¹é…è§„åˆ™ï¼Œå¦‚æœªè®¾ç½®åº”ç”¨ï¼Œä¸ä¼šèµ·ä»»ä½•ä½œç”¨ 123route-map ROUTE-MAP-NAME (permit|deny) ORDER match &lt;conditions&gt; set &lt;actions&gt; ROUTE-MAP-NAMEï¼šå®šä¹‰çš„è¯¥ route-map çš„åå­—ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†è¯¥ route-map permit|deny ï¼šæ˜¯å¦å…è®¸åŒ¹é…çš„è·¯ç”±é€šè¿‡ ORDERï¼šè§„åˆ™åºå·ï¼ŒåŒ¹é…çš„ä¼˜å…ˆçº§ï¼Œåºå·è¶Šå°è¶Šå…ˆåŒ¹é…ï¼Œå¯è‡ªåŠ¨è®¾ç½®ï¼Œè‡ªåŠ¨è®¾ç½®ä»¥ 10 ä¸ºå¢é‡ matchï¼šåŒ¹é…æ¡ä»¶ setï¼šè®¾ç½®åŠ¨ä½œï¼Œå¦‚æœ match åŒ¹é…ä¸Šäº†ï¼Œåˆ™ç»™è¯¥æ¡è·¯ç”±æ‰§è¡Œè®¾ç½®åŠ¨ä½œ é…ç½®ç¤ºä¾‹ 1234567route-map EXAMPLE permit 10 match ip address prefix-list LIST-1 set local-preference 200route-map EXAMPLE permit 20 match ip address prefix-list LIST-2 set local-preference 100 match åŒ¹é…æ¡ä»¶è·¯ç”±åŒ¹é…æ¡ä»¶ï¼Œåªæœ‰å…¨éƒ¨æ»¡è¶³æ‰ç®—åŒ¹é… match ip address prefix-list PREFIX_LIST IP åœ°å€è¢« prefix-list PREFIX_LIST åŒ¹é…å¹¶å…è®¸é€šè¿‡çš„è·¯ç”±åˆ™åŒ¹é… set è®¾ç½®åŠ¨ä½œè·¯ç”±åŒ¹é…è§„åˆ™ ä¼˜å…ˆåŒ¹é… order å°çš„ route mapï¼Œé€æ¡æ£€æŸ¥åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ä¸Šï¼Œåˆ™åç»­æ¡ç›®æ— éœ€å†æ£€æŸ¥ é»˜è®¤æ‹’ç»ï¼šå¦‚æœæ‰€æœ‰çš„ route map éƒ½æ²¡åŒ¹é…ä¸Šï¼Œåˆ™é»˜è®¤æ‹’ç»è¯¥è·¯ç”± åŒ¹é…è§„åˆ™ï¼š æ£€æŸ¥æ˜¯å¦åŒ¹é…ä¸Š match çš„åŒ¹é…è§„åˆ™ï¼Œå¦‚æœæ˜¯åŒ¹é… prefix-listï¼Œéœ€è¦è¢« prefix-list permit æ‰ç®—åŒ¹é…ä¸Šè¯¥ match route-map åº”ç”¨OSPF ç»„ç½‘æ­å»ºä¸‹é¢ä¸€ä¸ªç½‘ç»œï¼Œä½¿ç”¨ Docker æ¨¡æ‹Ÿå‡ºä¸‰å° FRR è·¯ç”±å™¨ï¼Œå¹¶ç»™å…¶é…ç½‘ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªç½‘æ®µï¼šRouter 1 çš„ eth1 å’Œ Router 2 çš„ eth1ã€Router 3 çš„ eth1 å’Œ Router 2 çš„ eth2ï¼Œä½¿ç”¨ FRR è®© Router 1 å’Œ Router 3 å­¦ä¹ åˆ°åˆ°å¯¹æ–¹çš„è·¯ç”±ã€‚ 1. Docker æ¨¡æ‹Ÿ FRR è·¯ç”±å™¨æ¨¡æ‹Ÿ 3 å° FRR è·¯ç”±å™¨ Docker 123docker run -d --privileged --net&#x3D;none --name frr-01 quay.io&#x2F;frrouting&#x2F;frr:10.0.0docker run -d --privileged --net&#x3D;none --name frr-02 quay.io&#x2F;frrouting&#x2F;frr:10.0.0docker run -d --privileged --net&#x3D;none --name frr-03 quay.io&#x2F;frrouting&#x2F;frr:10.0.0 æŸ¥çœ‹ docker è¿›ç¨‹ 12345root@ubuntu:~# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES6185c04f06d1 quay.io/frrouting/frr:10.0.0 \"/sbin/tini -- /usr/â€¦\" 2 minutes ago Up 2 minutes frr-031681fd9bd374 quay.io/frrouting/frr:10.0.0 \"/sbin/tini -- /usr/â€¦\" 3 minutes ago Up 3 minutes frr-02568ade633bf9 quay.io/frrouting/frr:10.0.0 \"/sbin/tini -- /usr/â€¦\" 24 hours ago Up 24 hours frr-01 2. OvS é…ç½‘ç”±äºå®‰è£… docker å®¹å™¨æ—¶ä½¿ç”¨ --net=none æ— ç½‘ç»œï¼Œéœ€æ ¹æ®æ‹“æ‰‘å¯¹å®¹å™¨é…ç½‘ æŸ¥çœ‹å„ä¸ªè·¯ç”±å™¨çš„ç½‘å¡ï¼Œå½“å‰å„ docker å®¹å™¨æ— ç½‘å¡ 1234567891011121314151617181920212223242526272829root@ubuntu:~# docker exec -it frr-01 ifconfiglo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)root@ubuntu:~# docker exec -it frr-02 ifconfiglo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)root@ubuntu:~# docker exec -it frr-03 ifconfiglo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B) å®‰è£… OvS è™šæ‹Ÿäº¤æ¢æœºç”¨æ¥æ­å»ºå®¹å™¨ç½‘ç»œ 1apt-get install openvswitch-switch åˆ›å»ºä¸€ä¸ªç½‘æ¡¥äº¤æ¢æœº 1ovs-vsctl add-br brConn å¦‚éœ€åˆ é™¤ï¼Œä½¿ç”¨ ovs-vsctl del-br brConn æŸ¥çœ‹åˆ›å»ºå¥½çš„ç½‘æ¡¥ 1234567root@ubuntu:~# ovs-vsctl showcb63c817-8d63-4d1f-b599-9950b0aeb2eb Bridge brConn Port brConn Interface brConn type: internal ovs_version: \"2.13.8\" è®©ä¸‰å° docker è·¯ç”±å™¨éƒ½è¿æ¥åˆ°è¿™ä¸ªäº¤æ¢æœºï¼Œå¹¶é…ç½® IP 1234ovs-docker add-port brConn eth1 frr-01 --ipaddress&#x3D;11.11.0.2&#x2F;24ovs-docker add-port brConn eth1 frr-02 --ipaddress&#x3D;11.11.0.3&#x2F;24ovs-docker add-port brConn eth2 frr-02 --ipaddress&#x3D;12.12.0.2&#x2F;24ovs-docker add-port brConn eth1 frr-03 --ipaddress&#x3D;12.12.0.3&#x2F;24 å†æ¬¡æŸ¥çœ‹ç½‘æ¡¥ 123456789101112131415root@ubuntu:~# ovs-vsctl showcb63c817-8d63-4d1f-b599-9950b0aeb2eb Bridge brConn Port brConn Interface brConn type: internal Port \"0021a5f25d344_l\" Interface \"0021a5f25d344_l\" Port \"1529171a9a294_l\" Interface \"1529171a9a294_l\" Port df2bf7ec96bd4_l Interface df2bf7ec96bd4_l Port a67433ae00b04_l Interface a67433ae00b04_l ovs_version: \"2.13.8\" æ­¤æ—¶ä¸Šå„ä¸ª Docker å¯ä»¥çœ‹åˆ°å·²é…å¥½çš„ç½‘å¡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465root@ubuntu:~# docker exec -it frr-01 ifconfigeth1 Link encap:Ethernet HWaddr 1A:CF:B4:C0:93:4B inet addr:11.11.0.2 Bcast:0.0.0.0 Mask:255.255.255.0 inet6 addr: fe80::18cf:b4ff:fec0:934b/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:165 errors:0 dropped:0 overruns:0 frame:0 TX packets:42 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:13826 (13.5 KiB) TX bytes:3036 (2.9 KiB)lo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)root@ubuntu:~# docker exec -it frr-02 ifconfigeth1 Link encap:Ethernet HWaddr DE:38:AD:91:D8:24 inet addr:11.11.0.3 Bcast:0.0.0.0 Mask:255.255.255.0 inet6 addr: fe80::dc38:adff:fe91:d824/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:200 errors:0 dropped:0 overruns:0 frame:0 TX packets:42 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:16592 (16.2 KiB) TX bytes:3036 (2.9 KiB)eth2 Link encap:Ethernet HWaddr E2:4D:1E:69:47:D2 inet addr:12.12.0.2 Bcast:0.0.0.0 Mask:255.255.255.0 inet6 addr: fe80::e04d:1eff:fe69:47d2/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:190 errors:0 dropped:0 overruns:0 frame:0 TX packets:39 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:15768 (15.3 KiB) TX bytes:2798 (2.7 KiB)lo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)root@ubuntu:~# docker exec -it frr-03 ifconfigeth1 Link encap:Ethernet HWaddr 16:47:A2:B7:F5:4F inet addr:12.12.0.3 Bcast:0.0.0.0 Mask:255.255.255.0 inet6 addr: fe80::1447:a2ff:feb7:f54f/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:182 errors:0 dropped:0 overruns:0 frame:0 TX packets:38 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:15112 (14.7 KiB) TX bytes:2756 (2.6 KiB)lo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B) 3. FRR ç»„ç½‘ç”±äº Router 1 eth1 å’Œ Router 3 eth1 å±äºä¸åŒç½‘æ®µï¼Œåœ¨ç»„ç½‘å‰ä¸¤è€…é—´æ— è·¯ç”±ï¼Œping ä¸é€š 12345678root@ubuntu:~# docker exec -it frr-01 bash568ade633bf9:/# ping 12.12.0.3PING 12.12.0.3 (12.12.0.3): 56 data bytesping: sendto: Network unreachable568ade633bf9:/# route -neKernel IP routing tableDestination Gateway Genmask Flags MSS Window irtt Iface11.11.0.0 0.0.0.0 255.255.255.0 U 0 0 0 eth1 12345678root@ubuntu:~# docker exec -it frr-03 bash6185c04f06d1:/# ping 11.11.0.2PING 11.11.0.2 (11.11.0.2): 56 data bytesping: sendto: Network unreachable6185c04f06d1:/# route -neKernel IP routing tableDestination Gateway Genmask Flags MSS Window irtt Iface12.12.0.0 0.0.0.0 255.255.255.0 U 0 0 0 eth1 é€šè¿‡é…ç½® FRR ä½¿å¾—ä¸¤ä¸ªç½‘æ®µå­¦ä¹ åˆ°å¯¹æ–¹çš„è·¯ç”±ï¼Œå®ç° OSPF ç»„ç½‘ FRR å¼€å¯ OSPF è¿›ç¨‹ ç¼–è¾‘ /etc/frr/daemons 1ospfd&#x3D;yes é‡å¯ FRR æœåŠ¡ 1&#x2F;etc&#x2F;init.d&#x2F;frr restart vtysh é…ç½® FRR OSPF 1234--- frr-01 ---568ade633bf9# configure568ade633bf9(config)# router ospf568ade633bf9(config-router)# network 11.11.0.2/24 area 0 12345--- frr-02 ---1681fd9bd374# configure1681fd9bd374(config)# router ospf1681fd9bd374(config-router)# network 11.11.0.3/24 area 01681fd9bd374(config-router)# network 12.12.0.2/24 area 0 1234--- frr-03 ---6185c04f06d1# configure6185c04f06d1(config)# router ospf6185c04f06d1(config-router)# network 12.12.0.3/24 area 0 é…ç½®å®Œæ¯•åï¼Œfrr-01 å’Œ frr-03 çš„ OSPF ä¾¿èƒ½å­¦ä¹ åˆ°å¯¹æ–¹çš„è·¯ç”±ï¼Œäº’ç›¸èƒ½ ping é€š 1234567891011--- frr-01 ---568ade633bf9# show ip ospf route============ OSPF network routing table ============N 11.11.0.0/24 [10] area: 0.0.0.0 directly attached to eth1N 12.12.0.0/24 [20] area: 0.0.0.0 via 11.11.0.3, eth1============ OSPF router routing table ========================= OSPF external routing table =========== 1234567891011--- frr-01 ---568ade633bf9:/# ping 12.12.0.3PING 12.12.0.3 (12.12.0.3): 56 data bytes64 bytes from 12.12.0.3: seq=0 ttl=63 time=0.725 ms64 bytes from 12.12.0.3: seq=1 ttl=63 time=0.225 ms64 bytes from 12.12.0.3: seq=2 ttl=63 time=0.128 ms64 bytes from 12.12.0.3: seq=3 ttl=63 time=0.205 ms^C--- 12.12.0.3 ping statistics ---4 packets transmitted, 4 packets received, 0% packet lossround-trip min/avg/max = 0.128/0.320/0.725 ms 1234567891011--- frr-03 ---6185c04f06d1# show ip ospf route============ OSPF network routing table ============N 11.11.0.0/24 [20] area: 0.0.0.0 via 12.12.0.2, eth1N 12.12.0.0/24 [10] area: 0.0.0.0 directly attached to eth1============ OSPF router routing table ========================= OSPF external routing table =========== 1234567891011--- frr-03 ---6185c04f06d1:/# ping 11.11.0.2PING 11.11.0.2 (11.11.0.2): 56 data bytes64 bytes from 11.11.0.2: seq=0 ttl=63 time=1.871 ms64 bytes from 11.11.0.2: seq=1 ttl=63 time=0.236 ms64 bytes from 11.11.0.2: seq=2 ttl=63 time=0.161 ms64 bytes from 11.11.0.2: seq=3 ttl=63 time=0.151 ms^C--- 11.11.0.2 ping statistics ---4 packets transmitted, 4 packets received, 0% packet lossround-trip min/avg/max = 0.151/0.604/1.871 ms DR ç«é€‰å‚è€ƒ FRRouting å®˜ç½‘ Frroutingå¿«é€Ÿå…¥é—¨â€”â€”OSPFç»„ç½‘ï¼ˆä¸€ï¼‰","categories":[],"tags":[]},{"title":"OSPF è·¯ç”±åè®®","slug":"OSPFè·¯ç”±åè®®","date":"2024-09-18T17:38:42.000Z","updated":"2024-11-11T03:57:58.109Z","comments":true,"path":"2024/09/19/OSPFè·¯ç”±åè®®/","link":"","permalink":"https://gy23333.github.io/2024/09/19/OSPF%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/","excerpt":"OSPF è·¯ç”±åè®®","text":"OSPF è·¯ç”±åè®® RIP åè®®ç¼ºé™·ç¼ºé™·ä¸€ï¼šä»¥è·³æ•°è¯„ä¼°çš„è·¯ç”±å¹¶éæœ€ä¼˜è·¯å¾„RIP è·¯ç”±åè®®é€‰æ‹©è·³æ•°æœ€çŸ­çš„è·¯ç”±ï¼Œåœ¨ä¸‹å›¾ä¸­ä¼šé€‰æ‹© RTA â€”&gt; RTB çš„è·¯å¾„ã€‚ ä½†è™½ç„¶ RTA â€”&gt; RTB çš„è·¯å¾„è·³æ•°æœ€çŸ­ï¼Œä½†ç”±äºå¸¦å®½çš„åŒºåˆ«ï¼Œå¯¹äºå¤§æ•°æ®æµèµ° RTA â€”&gt; RTC â€”&gt; RTD â€”&gt; RTB åè€Œå¿«äºè·³æ•°æ›´çŸ­çš„ RTA â€”&gt; RTB è·¯å¾„ã€‚ ç¼ºé™·äºŒï¼šæœ€å¤§è·³æ•°15é™åˆ¶ç½‘ç»œè§„æ¨¡RIP å…è®¸çš„è·³æ•°æœ€å¤§åªæœ‰15æ¡ï¼Œå¦‚æœè·³æ•°å¤§äºç­‰äº16è·³ï¼Œåˆ™ä¼šè¢«è§†ä¸ºä¸å¯è¾¾ï¼Œæ— æ³•å­¦ä¹ åˆ°16è·³ç½‘æ®µçš„è·¯ç”±ï¼Œä»è€Œé™åˆ¶äº†ç½‘ç»œè§„æ¨¡çš„å¤§å°ã€‚ ç¼ºé™·ä¸‰ï¼šæ›´æ–°è·¯ç”±å‘é€å…¨é‡è·¯ç”±ä¿¡æ¯ï¼Œæµªè´¹ç½‘ç»œèµ„æºRIP æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œéƒ½ä¼šå‘æ‰€æœ‰é‚»å±…å‘é€å…¨é‡çš„è·¯ç”±ä¿¡æ¯ï¼Œååˆ†æ¶ˆè€—ç½‘ç»œèµ„æºã€‚ ç¼ºé™·å››ï¼šæ”¶æ•›é€Ÿåº¦æ…¢ OSPF é“¾è·¯çŠ¶æ€è·¯ç”±åè®® å·¥ä½œåœ¨ IP å±‚ï¼ŒIP åè®®å· 89 ä»¥ç»„æ’­åœ°å€ 224.0.0.5 å‘é€åè®®åŒ… æ¯ä¸ªè·¯ç”±å™¨å°†å·²çŸ¥çš„é“¾è·¯çŠ¶æ€ä¿¡æ¯å‘é€ç»™é‚»å±…ï¼Œæ”¶æ•›åï¼Œæ¯ä¸ªè·¯ç”±å™¨å¯¹å…¨ç½‘é“¾è·¯çŠ¶æ€çš„è®¤è¯†ç›¸åŒï¼Œå¹¶ç‹¬ç«‹è®¡ç®—è‡ªå·±çš„è·¯ç”± OSPF å·¥ä½œè¿‡ç¨‹1. å‘ç°é‚»å±…åœ¨å¹¿æ’­åŸŸä¸­ç»„æ’­ hello åŒ…ï¼Œæ”¶åˆ°äº’ç›¸çš„ hello åŒ…ï¼Œç¡®è®¤æ˜¯è‡ªå·±çš„é‚»å±…ï¼Œåˆ™åŠ å…¥é‚»å±…è¡¨ä¸­ 2. å»ºç«‹é‚»æ¥å…³ç³» å¹¶ä¸æ˜¯æ‰€æœ‰é‚»å±…éƒ½ä¼šå»ºç«‹é‚»æ¥å…³ç³» ç½‘æ®µçš„å¹¿æ’­åŸŸä¸­ä¼šé€‰å– DR å’Œ BDRï¼ˆå‰¯ DRï¼Œç”¨äºå®¹ç¾ï¼‰ï¼Œå‰©ä¸‹çš„èŠ‚ç‚¹éƒ½æ˜¯ DR_Othersï¼Œè¯¥å¹¿æ’­åŸŸä¸­çš„æ‰€æœ‰è·¯ç”±å™¨éƒ½åªä¸ DR å’Œ BDR å»ºç«‹é‚»æ¥å…³ç³» åªæœ‰å’Œå»ºç«‹äº†é‚»æ¥å…³ç³»çš„é‚»å±…æ‰ä¼šäº¤æ¢é“¾è·¯çŠ¶æ€ä¿¡æ¯ åªæœ‰åœ¨å¹¿æ’­å‹ç½‘ç»œä¸­æ‰ä¼šä½¿ç”¨ DR å’Œ BDRï¼Œç‚¹åˆ°ç‚¹ï¼ˆPPPï¼Œå³ä¸€å¯¹ä¸€ï¼‰ä¸ä½¿ç”¨ DR å’Œ BDR å¦‚æ­¤ï¼Œå¯ä»¥å‡å°‘äº¤æ¢ä¿¡æ¯çš„æ¬¡æ•°ï¼Œè·¯ç”±æ›´æ–°æ›´é«˜æ•ˆ 3. ä¼ é€’é“¾è·¯çŠ¶æ€ä¿¡æ¯ æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª LSDBï¼ˆé“¾è·¯çŠ¶æ€æ•°æ®åº“ï¼‰ï¼Œé‡Œé¢çš„æ¯ä¸€æ¡æ˜¯ä¸€ä¸ª LSAï¼ˆé“¾è·¯çŠ¶æ€å…¬å‘Šï¼‰ æ¯æ¡ LSA æè¿°äº†ç½‘ç»œä¸­çš„ä¸€ä¸ªè·¯ç”±å™¨çš„ç¼–å·ã€ç›´è¿ç½‘æ®µã€cost ç­‰ä¿¡æ¯ æ›´æ–°æœºåˆ¶ è§¦å‘æ›´æ–°æˆ–è€…æ¯éš” 30 åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ è§¦å‘æ›´æ–°ï¼šç½‘ç»œå‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ™æ— éœ€ç­‰åˆ° 30 åˆ†é’Ÿå‘¨æœŸï¼Œç«‹å³å‘é‚»æ¥èŠ‚ç‚¹å‘é€ä¿¡æ¯ å¢é‡æ›´æ–°ï¼Œåªå‘é€é‚»å±…éœ€è¦çš„ LSA æ”¶æ•›åï¼Œç½‘æ®µå†…çš„æ‰€æœ‰è·¯ç”±å™¨éƒ½æœ‰ç›¸åŒçš„ LSDB è·¯ç”±ä¿¡æ¯äº¤æ¢è¿‡ç¨‹ ä¸‹é¢æ˜¯ RTA è§¦å‘æ›´æ–°åï¼Œå‘ RTB äº¤æ¢è·¯ç”±ä¿¡æ¯çš„è¿‡ç¨‹ å‘é€ RTA æ‰€æœ‰ LSA çš„æ‘˜è¦ä¿¡æ¯ RTB æ¯”è¾ƒæ”¶åˆ°çš„ LSA æ‘˜è¦ä¸è‡ªå·±æœ¬åœ°çš„ LSAï¼Œå‘é€è¯·æ±‚ï¼Œå¸Œæœ›è·å¾—è‡ªå·±æ²¡æœ‰çš„ LSA çš„è¯¦ç»†ä¿¡æ¯ RTA å°†è¦æ±‚çš„ LSA å‘é€ç»™ RTB RTB å‘ RTA å›å¤æ”¶åˆ° 4. è·¯ç”±è®¡ç®—æ¯å°è·¯ç”±å™¨æ ¹æ® LSDB ç®—å‡ºæ¯å°è·¯ç”±å™¨åˆ°è‡ªå·±çš„æœ€çŸ­è·¯å¾„ OSPF åˆ†åŒºåŸŸç®¡ç†LSDB è®°å½•ç½‘ç»œæ‰€æœ‰è·¯ç”±å™¨çš„ LSAï¼Œæ‰€ä»¥å½“ç½‘ç»œè§„æ¨¡å˜å¤§æ—¶ï¼Œä¼šå¯¼è‡´æ¯å°è·¯ç”±å™¨ä¸Šéƒ½è¦æ¶ˆè€—å¤§é‡èµ„æºå‚¨å­˜ LSDBï¼Œä¸” LSDB ä¿¡æ¯æ”¶æ•›ä¹Ÿä¼šå˜å¾—å¾ˆæ…¢ï¼Œå› æ­¤éœ€è¦åˆ†åŒºåŸŸç®¡ç†ã€‚ æ¯ä¸ªåŒºåŸŸå†…éƒ¨çš„è·¯ç”±å™¨çš„ LSDB åªéœ€çŸ¥é“åŒºåŸŸå†…çš„è·¯ç”±å™¨çš„ LSA ä¸åŒåŒºåŸŸä¹‹é—´é€šè¿‡ ASRï¼ˆåŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨ï¼‰ç›¸è¿ï¼ŒåŒæ—¶æœ‰ä¸¤è¾¹çš„ LSDB ééª¨å¹²åŒºåŸŸä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œéœ€è¦é€šè¿‡éª¨å¹²åŒºåŸŸï¼ˆåŒºåŸŸ 0ï¼‰è¿›è¡Œè½¬å‘ã€‚ å¦‚ä¸Šå›¾ä¸­æœ‰ä¸‰ä¸ªåŒºåŸŸï¼šåŒºåŸŸ 0ã€åŒºåŸŸ 1ã€åŒºåŸŸ 10.0.0.1ï¼Œå…¶ä¸­åŒºåŸŸ 1ã€åŒºåŸŸ 10.0.0.1 è¿™æ ·çš„ééª¨å¹²åŒºåŸŸä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œéœ€è¦å…ˆå‘é€ç»™åŒºåŸŸ 0ï¼Œå†ç”±åŒºåŸŸ 0 è½¬å‘ã€‚ Hello åŒ…Hello åŒ…ç»„æˆ åŠŸèƒ½ï¼šHello åŒ…ç”¨äºå‘ç°é‚»å±…è·¯ç”±å™¨ï¼Œäº¤æ¢ OSPF é…ç½®ä¿¡æ¯ï¼Œå¹¶ç¡®è®¤é‚»æ¥çŠ¶æ€ã€‚ å†…å®¹ï¼šåŒ…æ‹¬ Route IDã€Priorityã€Hello é—´éš”ã€Dead é—´éš”ç­‰ 12345678root@ubuntu:/etc/frr# tcpdump -i vip0 proto ospf -vvvtcpdump: listening on vip0, link-type EN10MB (Ethernet), capture size 262144 bytes11:15:29.874116 IP (tos 0xc0, ttl 1, id 22009, offset 0, flags [none], proto OSPF (89), length 64) ubuntu &gt; ospf-all.mcast.net: OSPFv2, Hello, length 44 Router-ID ubuntu, Backbone Area, Authentication Type: none (0) Options [External] Hello Timer 10s, Dead Timer 40s, Mask 255.255.255.255, Priority 1 Designated Router ubuntu ç»„æ’­åœ°å€ ospf-all.mcast.netOSPF ä»¥ç»„æ’­åœ°å€çš„æ–¹å¼å‘é€ Hello åŒ…ï¼Œå°† Hello åŒ…å‘å¾€ç»„æ’­åœ°å€ ospf-all.mcast.netï¼ˆ224.0.0.5ï¼‰ï¼Œæ‰€æœ‰ OSPF è·¯ç”±å™¨éƒ½ä¼šç›‘å¬è¯¥åœ°å€ï¼Œå¦‚æ­¤å³å¯ç¡®ä¿åŸŸå†…æ‰€æœ‰ OSPF è·¯ç”±å™¨éƒ½æ”¶åˆ°ã€‚ Hello åŒ…å‘é€è¿‡ç¨‹ å®šæ—¶å‘é€ï¼šæ¯ä¸ª OSPF è·¯ç”±å™¨æŒ‰ç…§é…ç½®çš„ Hello é—´éš”å®šæœŸå‘é€ Hello åŒ… åŒ…çš„æ„é€ ï¼šè·¯ç”±å™¨æ„é€  Hello åŒ…ï¼Œå°†å…¶å‘é€åˆ°å¤šæ’­åœ°å€ 224.0.0.5 é‚»å±…å‘ç°ï¼šæ¥æ”¶åˆ° Hello åŒ…çš„å…¶ä»– OSPF è·¯ç”±å™¨ä¼šè§£æåŒ…ä¸­çš„ä¿¡æ¯ï¼ŒåŠ å…¥é‚»å±…è¡¨ä¸­ é‚»æ¥å…³ç³»ç»´æŠ¤ï¼šé€šè¿‡å®šæœŸå‘é€ Hello åŒ…ï¼ŒOSPF è·¯ç”±å™¨å¯ä»¥ç»´æŠ¤ä¸é‚»å±…çš„å…³ç³»ã€‚å¦‚æœåœ¨è§„å®šçš„ Dead é—´éš”å†…æœªæ”¶åˆ°æŸä¸ªé‚»å±…çš„ Hello åŒ…ï¼Œè·¯ç”±å™¨å°†è®¤ä¸ºè¯¥é‚»å±…å¤±æ•ˆ DR ç«é€‰å¹¿æ’­å‹ç½‘ç»œä¸­éœ€é€‰å‡ºè¯¥å¹¿æ’­åŸŸçš„ DRï¼ˆæŒ‡å®šè·¯ç”±ï¼‰ å’Œ BDRï¼ˆå¤‡ä»½æŒ‡å®šè·¯ç”±ï¼Œè´Ÿè´£åœ¨ DR å¤±æ•ˆæ—¶æ¥ç®¡å…¶åŠŸèƒ½ï¼‰ DR ç«é€‰è§„åˆ™ Priority å¤§è€…ä¼˜å…ˆï¼šä¼˜å…ˆé€‰æ‹© Priority è¾ƒå¤§çš„è·¯ç”±ä¸º DRï¼Œå¦‚æœ Priority è®¾ç½®ä¸º 0ï¼Œåˆ™ä¸å‚ä¸ DR ç«é€‰ Route ID å¤§è€…ä¼˜å…ˆï¼šå¦‚æœæœ‰å¤šä¸ª Priority æœ€å¤§ä¸”ç›¸åŒçš„è·¯ç”±å™¨ï¼Œåˆ™é€‰æ‹©å…¶ä¸­ Route ID æœ€å¤§çš„ï¼ˆRoute ID ä¸ºè·¯ç”±å™¨çš„å”¯ä¸€æ ‡è¯†ï¼Œé€šå¸¸æ˜¯ IPï¼Œä¸å¯èƒ½ç›¸åŒï¼‰ ç¤ºä¾‹ï¼šä¸‹é¢ä¸‰ä¸ªè·¯ç”±å™¨ä¸­ï¼ŒA çš„ Priority æœ€å¤§ï¼Œä¸º DRï¼›Bã€C çš„ Priority ç›¸åŒï¼Œä½† B çš„ Route ID å¤§äº Cï¼Œæ‰€ä»¥ B ä¸º BDR A çš„ä¼˜å…ˆçº§ä¸º 2ï¼ŒRouter ID ä¸º 1.1.1.1ï¼ˆDRï¼‰ B çš„ä¼˜å…ˆçº§ä¸º 1ï¼ŒRouter ID ä¸º 2.2.2.2ï¼ˆBDRï¼‰ C çš„ä¼˜å…ˆçº§ä¸º 1ï¼ŒRouter ID ä¸º 3.3.3.3 DR ç«é€‰è¿‡ç¨‹ Hello æ¶ˆæ¯ï¼šæ‰€æœ‰è·¯ç”±å™¨å®šæœŸç»„æ’­ Hello æ¶ˆæ¯ï¼Œå…¶ä¸­åŒ…å«æœ¬è·¯ç”±çš„ Priorityã€Route ID ç­‰ä¿¡æ¯ ä¼˜å…ˆçº§æ¯”è¾ƒï¼šæ ¹æ®ç«é€‰è§„åˆ™æ¯”è¾ƒå„ä¸ªè·¯ç”±å™¨ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„ä¸º DRï¼Œæ¬¡é«˜çš„ä¸º BDR é€‰ä¸¾åï¼ŒDR å’Œ BDR ä¼šå‘æ‰€æœ‰çš„è·¯ç”±å™¨å¹¿æ’­ LSAï¼Œå…¶ä»–æ‰€æœ‰è·¯ç”±å™¨å°†ä¸ DR å’Œ BDR å»ºç«‹é‚»æ¥å…³ç³» é‚»å±…çŠ¶æ€æœº RIP å’Œ OSPF æ¯”è¾ƒ RIPï¼ˆè·ç¦»çŸ¢é‡è·¯ç”±åè®®ï¼‰ OSPFï¼ˆé“¾è·¯çŠ¶æ€è·¯ç”±åè®®ï¼‰ æœ€ä¼˜è·¯å¾„é€‰æ‹© è·³æ•° é“¾è·¯å¼€é”€ æ›´æ–°è§¦å‘ æ¯ 30s è§¦å‘æ›´æ–°æˆ–æ¯éš”30åˆ†é’Ÿ å‘é€å¯¹è±¡ å¹¿æ’­åˆ°æ‰€æœ‰é‚»å±… å‘åˆ°é‚»æ¥è·¯ç”±å™¨ å‘é€ä¿¡æ¯ å…¨é‡ RIP è·¯ç”±è¡¨ é“¾è·¯çŠ¶æ€ä¿¡æ¯æ‘˜è¦ å‚è€ƒ HUAWEI OSPF é…ç½®","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"è·¯ç”±åè®®","slug":"è·¯ç”±åè®®","permalink":"https://gy23333.github.io/tags/%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/"},{"name":"OSPF","slug":"OSPF","permalink":"https://gy23333.github.io/tags/OSPF/"}]},{"title":"Goå¹¶å‘ç¼–ç¨‹","slug":"Goå¹¶å‘ç¼–ç¨‹","date":"2024-09-04T16:58:16.000Z","updated":"2024-11-11T03:57:58.107Z","comments":true,"path":"2024/09/05/Goå¹¶å‘ç¼–ç¨‹/","link":"","permalink":"https://gy23333.github.io/2024/09/05/Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/","excerpt":"Go å¹¶å‘ç¼–ç¨‹","text":"Go å¹¶å‘ç¼–ç¨‹ å¹¶å‘åŸºæœ¬æ¦‚å¿µè¿›ç¨‹ Process ä¸çº¿ç¨‹ Thread è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªåŸºæœ¬å•ä½ï¼Œç¨‹åºåœ¨æ“ä½œç³»ç»Ÿä¸­çš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ çº¿ç¨‹æ˜¯è¿›ç¨‹çš„æ‰§è¡Œå•ä½ï¼Œæ˜¯CPUè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºå’Œæ’¤é”€å¤šä¸ªçº¿ç¨‹;åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œ å¹¶è¡Œ Concurrent ä¸å¹¶å‘ Paralled å¹¶è¡Œï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œå¤šä¸ªèµ„æºç±» å¹¶å‘ï¼šå¤šä¸ªçº¿ç¨‹äº¤æ›¿æ“ä½œåŒä¸€èµ„æºç±» è¿›ç¨‹ process ä¸çº¿ç¨‹ thread ä¸åç¨‹ coroutine ä¸€ä¸ªè¿›ç¨‹ä¸Šå¯ä»¥è·‘å¤šä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹ä¸Šå¯ä»¥è·‘å¤šä¸ªåç¨‹ å¤šä¸ªçº¿ç¨‹å¯ä»¥åˆ©ç”¨å¤šä¸ª CPU å¹¶è¡Œï¼Œä½†ä¸€ä¸ªçº¿ç¨‹å†…çš„å¤šä¸ªåç¨‹æ˜¯ä¸²è¡Œçš„ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªåœ¨è¿è¡Œï¼Œæ— æ³•åˆ©ç”¨ CPU å¤šæ ¸ï¼Œä½†ä¸åŒçº¿ç¨‹å†…çš„åç¨‹ä¹‹é—´å¯ä»¥å¹¶è¡Œ è¿›ç¨‹ process çº¿ç¨‹ thread åç¨‹ coroutine åˆ‡æ¢è€… æ“ä½œç³»ç»Ÿ æ“ä½œç³»ç»Ÿ ç”¨æˆ· åˆ‡æ¢å†…å®¹ é¡µå…¨å±€ç›®å½•ã€å†…æ ¸æ ˆã€ç¡¬ä»¶ä¸Šä¸‹æ–‡ å†…æ ¸æ ˆã€ç¡¬ä»¶ä¸Šä¸‹æ–‡ ç¡¬ä»¶ä¸Šä¸‹æ–‡ åˆ‡æ¢å†…å®¹ä¿å­˜ä½ç½® å†…å­˜ å†…æ ¸æ ˆ ç”¨æˆ·æ ˆæˆ–å †ï¼ˆå˜é‡ï¼‰ çŠ¶æ€åˆ‡æ¢ ç”¨æˆ·æ€ â€”&gt; å†…æ ¸æ€ â€”&gt; ç”¨æˆ·æ€ ç”¨æˆ·æ€ â€”&gt; å†…æ ¸æ€ â€”&gt; ç”¨æˆ·æ€ ç”¨æˆ·æ€ åˆ‡æ¢æ•ˆç‡ ä½ ä¸­ é«˜ è¿›ç¨‹ã€çº¿ç¨‹çš„åˆ‡æ¢è€…æ˜¯æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿå†³å®šåˆ‡æ¢æ—¶åˆ»ï¼Œç”¨æˆ·æ— æ„Ÿ åç¨‹çš„åˆ‡æ¢è€…æ˜¯ç”¨æˆ·ï¼Œç”±ç”¨æˆ·ç¨‹åºå†³å®šåˆ‡æ¢æ—¶é—´ è¿›ç¨‹åˆ‡æ¢å†…å®¹ï¼šé¡µå…¨å±€ç›®å½•ã€å†…æ ¸æ ˆã€ç¡¬ä»¶ä¸Šä¸‹æ–‡ï¼Œåˆ‡æ¢çš„å†…å®¹ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé‡‡ç”¨ ç”¨æˆ·æ€ â€”&gt; å†…æ ¸æ€ â€”&gt; ç”¨æˆ·æ€ çº¿ç¨‹åˆ‡æ¢å†…å®¹ï¼šå†…æ ¸æ ˆã€ç¡¬ä»¶ä¸Šä¸‹æ–‡ï¼Œåˆ‡æ¢çš„å†…å®¹ä¿å­˜åœ¨å†…æ ¸æ ˆä¸­ï¼Œé‡‡ç”¨ ç”¨æˆ·æ€ â€”&gt; å†…æ ¸æ€ â€”&gt; ç”¨æˆ·æ€ åç¨‹åˆ‡æ¢å†…å®¹ï¼šç¡¬ä»¶ä¸Šä¸‹æ–‡ï¼Œåˆ‡æ¢çš„å†…å®¹ä¿å­˜åœ¨ç”¨æˆ·æ ˆæˆ–å †ï¼ˆå˜é‡ï¼‰ä¸­ï¼Œåˆ‡æ¢è¿‡ç¨‹å§‹ç»ˆå¤„äºç”¨æˆ·æ€ åç¨‹ GoroutineGo ä¸éœ€è¦è‡ªå·±ç¼–å†™è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ï¼Œç›´æ¥ä½¿ç”¨ goroutineï¼Œåœ¨è¯­è¨€ä¸­å†…ç½®äº†è°ƒåº¦å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶ï¼Œå¯è½»æ¾å¼€å¯ä¸Šä¸‡ goroutineã€‚ goroutine åç¨‹æ¦‚å¿µä¸Šç±»ä¼¼äºçº¿ç¨‹ï¼ŒGo ç¨‹åºå¯ä»¥æ™ºèƒ½åœ°å°† goroutine åˆ†é…ç»™ä¸åŒçš„ CPUï¼Œç”±Goçš„è¿è¡Œæ—¶ï¼ˆruntimeï¼‰è°ƒåº¦å’Œç®¡ç†çš„ã€‚ ä½¿ç”¨ goroutinegoroutine ä½¿ç”¨æ—¶å°†ä»»åŠ¡åŒ…è£…æˆå‡½æ•°ï¼Œé€šè¿‡ go å…³é”®å­—å¼€å¯ 1go func() å¦‚æœ goroutine æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä½†ä¸»çº¿ç¨‹å·²ç»ç»“æŸï¼Œgoroutine ä¹Ÿä¼šè·Ÿç€ç»“æŸã€‚ ç¤ºä¾‹æ¯ä¸¤ç§’è¾“å‡ºä¸€æ¬¡ go routineï¼Œæ¯ç§’è¾“å‡ºä¸€æ¬¡ helloï¼Œè¾“å‡º 10 æ¬¡ hello åç»“æŸ 12345678910111213141516171819202122package mainimport ( \"fmt\" \"time\")func runtime() &#123; for &#123; fmt.Println(\"go routine\") time.Sleep(time.Second * 2) &#125;&#125;func main() &#123; go runtime() for i := 0; i &lt; 10; i++ &#123; fmt.Println(\"hello\") time.Sleep(time.Second) &#125;&#125; åç¨‹è°ƒåº¦GPM æ¨¡å‹goroutine è°ƒåº¦ç³»ç»Ÿä¸º GPM è¿è¡Œæ—¶ï¼ˆruntimeï¼‰è°ƒåº¦å™¨ï¼ŒåŒ…æ‹¬äº† 3 ä¸ªéƒ¨åˆ†â€”â€” goroutine Gã€å¤„ç†å™¨ Pã€çº¿ç¨‹ M Gï¼šgoroutine å­˜æ”¾æœ¬ goroutine çš„ä¸€äº›ä¿¡æ¯ï¼Œä»¥åŠä¸ P ç»‘å®šç­‰ä¿¡æ¯ Pï¼šProcessorï¼Œå¤„ç†å™¨ P å¯¹ goroutine é˜Ÿåˆ—è¿›è¡Œè°ƒåº¦ goroutine ä¸çº¿ç¨‹çš„ä¸­é—´å±‚ï¼Œç®¡ç†ç€ä¸€ç»„ goroutine é˜Ÿåˆ—ï¼Œå‚¨å­˜æ‰€ç®¡ goroutine è¿è¡Œçš„ä¸Šä¸‹æ–‡ P çš„æ•°é‡å†³å®šäº†æœ€å¤§å¯å¹¶è¡Œæ•°é‡ï¼Œä¸ªæ•°ç”± runtime.GOMAXPROCS è®¾ç½®ï¼Œæœ€å¤§ 256ï¼Œé»˜è®¤ä¸º CPU æ•° Mï¼šMachineï¼Œçº¿ç¨‹ Go è¿è¡Œæ—¶å¯¹æ“ä½œå†…æ ¸çº¿ç¨‹çš„è™šæ‹Ÿï¼Œä¸å†…æ ¸çº¿ç¨‹ä¸€ä¸€å¯¹åº” P ç®¡ç†ç€ä¸€ç¾¤ Gï¼Œè°ƒåº¦åœ¨ M ä¸Šè¿è¡Œã€‚ä¸€èˆ¬æ¯”ä¾‹ä¸º G : P : M = n : 1 : 1 è°ƒåº¦æœºåˆ¶ï¼š æŠŠå ç”¨ CPU æ—¶é—´è¿‡é•¿çš„ goroutine æš‚åœï¼Œå»è¿è¡Œåç»­çš„ goroutine å½“è‡ªå·±é˜Ÿåˆ—çš„æ¶ˆè´¹å…‰äº†ï¼Œåˆ™å»å–å…¨å±€é˜Ÿåˆ—ä¸­çš„ goroutine å¦‚å…¨å±€é˜Ÿåˆ—ä¹Ÿæ¶ˆè´¹å…‰äº†ï¼Œåˆ™å»æŠ¢å…¶ä»– P çš„ goroutine å¦‚æœä¸€ä¸ª G é•¿æ—¶é—´å æ®ç€ Mï¼Œruntime å°±ä¼šæ–°å»ºä¸€ä¸ª Mï¼Œç®¡ç†é˜»å¡ G çš„ P ä¼šå°†å…¶ä»–çš„ G éƒ½æŒ‚åˆ°æ–°å»ºçš„ M ä¸Šã€‚å½“æ—§çš„ M ä¸Šçš„ G è¿è¡Œå®Œæˆ–è€…è¢«åˆ¤å®šä¸ºæ­»æ‰æ—¶ï¼Œå°±ä¼šå›æ”¶æ—§æœ‰çš„ Mã€‚ ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œä»è°ƒåº¦è§’åº¦çœ‹ï¼Œgoroutine ç›¸è¾ƒäºçº¿ç¨‹çš„ä¼˜åŠ¿ï¼š goroutine çš„è°ƒåº¦ç”± runtime è°ƒåº¦å™¨è°ƒåº¦ï¼Œå…¨ç¨‹åœ¨ç”¨æˆ·æ€ çº¿ç¨‹éœ€è¦å†…æ ¸è¿›è¡Œè°ƒåº¦ï¼Œéœ€è¦å†…æ ¸æ€å’Œç”¨æˆ·æ€ä¹‹é—´é¢‘ç¹åˆ‡æ¢ runtime åŒ…runtime è¿è¡Œæ—¶ç”¨æ¥è°ƒåº¦å’Œç®¡ç† goroutineï¼Œå¯é€šè¿‡ runtime åŒ…ç¨‹åºæ§åˆ¶ goroutine ä»¥åŠè·å–ç¯å¢ƒä¿¡æ¯ã€‚ runtime.Gosched()é‡Šæ”¾å½“å‰ goroutine çš„ CPU æ—¶é—´ç‰‡ç»™å…¶ä»– goroutine æ‰§è¡Œï¼Œå½“å‰ goroutine ç­‰å¾…æœªæ¥çš„æ—¶é—´ç‰‡å†æ‰§è¡Œã€‚ ç¤ºä¾‹ ä¸‹é¢ä»£ç ï¼Œè¿è¡Œåæœ‰ä¸¤ç§å¯èƒ½ï¼š ä¸€æ®µæ•°å­— + ä¸¤ä¸ª hello CPU æ—¶é—´ç‰‡å…ˆç»™æ•°å­—åç¨‹ï¼Œå†åˆ†é…ç»™ hello ä¸»åç¨‹ ä¸¤ä¸ª hello CPU æ—¶é—´ç‰‡å…ˆç»™ hello ä¸»åç¨‹ï¼Œä¸»åç¨‹ç»“æŸåç¨‹åºç›´æ¥ç»“æŸï¼Œä¸è¾“å‡ºæ•°å­—ï¼Œå†åˆ†é…æ•°å­—åç¨‹ 1234567891011121314151617package mainimport ( \"fmt\")func main() &#123; go func() &#123; for i := 0; i &lt; 100000; i++ &#123; fmt.Println(i) &#125; &#125;() // ä¸»åç¨‹ for i := 0; i &lt; 2; i++ &#123; fmt.Println(\"hello\") &#125;&#125; è¿™æ—¶åœ¨ä¸»åç¨‹è¿è¡Œè¾“å‡º hello å‰ï¼Œæ·»åŠ  runtime.Gosched()ï¼Œä¼šåˆ‡åˆ°å…¶ä»– goroutine è¾“å‡ºå¤šæ¬¡æ•°å­—ï¼Œç­‰æ•°å­—åç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼Œåˆ‡å›ä¸»åç¨‹è¾“å‡º hello ï¼Œå†åˆ‡å›æ•°å­—åç¨‹è¾“å‡ºæ•°å­—ï¼Œæœ€åä¸»åç¨‹è¾“å‡º hello åç»“æŸç¨‹åºã€‚ å³è¾“å‡ºï¼šä¸€æ®µæ•°å­— + hello + ä¸€æ®µæ•°å­— + hello 1234567891011121314151617181920package mainimport ( \"fmt\" \"runtime\")func main() &#123; go func() &#123; for i := 0; i &lt; 100; i++ &#123; fmt.Println(i) &#125; &#125;() // ä¸»åç¨‹ for i := 0; i &lt; 2; i++ &#123; // åˆ‡åˆ°å…¶ä»–è¿›ç¨‹å…ˆæ‰§è¡Œ runtime.Gosched() fmt.Println(\"hello\") &#125;&#125; runtime.Goexit()é€€å‡ºå½“å‰ goroutineï¼Œä¸è¿‡é€€å‡ºå‰è¿˜æ˜¯ä¼šæ­£å¸¸æ‰§è¡Œ defer è¯­å¥ã€‚ ç¤ºä¾‹ ä¸‹é¢ä»£ç ï¼Œä¸»åç¨‹ä¼‘çœ ä¸€ç§’ï¼Œæ•°å­—åç¨‹è¾“å‡ºä¸€æ®µæ•°å­—ä¹‹åï¼Œä¸»åç¨‹è‹é†’è¾“å‡º hello 1234567891011121314151617package mainimport ( \"fmt\" \"time\")func main() &#123; go func() &#123; for i := 0; i &lt; 100; i++ &#123; // runtime.Goexit() fmt.Println(i) &#125; &#125;() time.Sleep(time.Second) fmt.Println(\"hello\")&#125; æ·»åŠ  runtime.Goexit() åï¼Œç›´æ¥ç»“æŸåç¨‹ï¼Œä¸ä¼šè¾“å‡ºæ•°å­—ï¼Œåªè¾“å‡º hello 123456789101112131415161718package mainimport ( \"fmt\" \"runtime\" \"time\")func main() &#123; go func() &#123; for i := 0; i &lt; 100; i++ &#123; runtime.Goexit() fmt.Println(i) &#125; &#125;() time.Sleep(time.Second) fmt.Println(\"hello\")&#125; runtime.GOMAXPROCS()è®¾ç½®å¯åŒæ—¶ä½¿ç”¨æœ€å¤§ CPU æ ¸æ•°ï¼Œå¹¶è¿”å›ä¹‹å‰çš„è®¾ç½®ã€‚ 1func runtime.GOMAXPROCS(n int) int å…¶ä»–è¿è¡Œæ—¶ä¿¡æ¯ è·å– CPU æ ¸æ•°é‡ 1runtime.NumCPU() è·å– GOROOT è·¯å¾„ 1runtime.GOROOT() è·å–æ“ä½œç³»ç»Ÿ 1runtime.GOOS æ•°æ®å…±äº«ä¸´ç•Œèµ„æºä¸´ç•Œèµ„æºï¼šå¹¶å‘ç¯å¢ƒä¸­å¤šä¸ªè¿›ç¨‹/çº¿ç¨‹/åç¨‹å…±äº«çš„èµ„æºã€‚ å¤šä¸ª goroutine è®¿é—®åŒä¸€èµ„æºæ—¶ï¼Œå¤šä¸ªå†™ goroutineï¼Œä¼šé€ æˆä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜ã€‚ ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œ4 ä¸ªå”®ç¥¨å‘˜å¹¶å‘å– 10 å¼ ç¥¨ï¼ŒåŸæœ¬æ˜¯å¸Œæœ›å–åˆ°æ— ç¥¨æ—¶æ‰€æœ‰å”®ç¥¨å‘˜åœæ­¢å–ç¥¨ï¼Œä½†åŒæ—¶è¯»å†™å°±å¯èƒ½å¯¼è‡´èµ„æºå®‰å…¨é—®é¢˜ã€‚ 12345678910111213141516171819202122232425262728293031package mainimport ( \"fmt\" \"math/rand\" \"time\")var numTicket = 10func saleTicket(i int) &#123; rand.Seed(time.Now().UnixNano()) for &#123; if numTicket &gt; 0 &#123; time.Sleep(time.Duration(rand.Intn(1000)) * time.Millisecond) numTicket-- fmt.Printf(\"Saler %d sales one ticket, left %d tickets.\\n\", i, numTicket) &#125; else &#123; fmt.Printf(\"Saler %d detects no ticket.\\n\", i) break &#125; &#125;&#125;func main() &#123; numSaler := 4 for i := 0; i &lt; numSaler; i++ &#123; go saleTicket(i) &#125; time.Sleep(5 * time.Second)&#125; å¦‚è¿™æ¬¡è·‘çš„ç»“æœï¼Œæœ€åä¸‰ä¸ªå”®ç¥¨å‘˜æ£€æŸ¥æ—¶è¿˜æœ‰ä½™ç¥¨ï¼Œä½†å–æ—¶å·²ç»æ— ç¥¨äº†ï¼Œå¯¼è‡´ç¥¨æˆè´Ÿæ•°ã€‚ 1234567891011121314151617Saler 3 sales one ticket, left 9 tickets.Saler 0 sales one ticket, left 8 tickets.Saler 0 sales one ticket, left 7 tickets.Saler 2 sales one ticket, left 6 tickets.Saler 1 sales one ticket, left 5 tickets.Saler 3 sales one ticket, left 4 tickets.Saler 1 sales one ticket, left 3 tickets.Saler 0 sales one ticket, left 2 tickets.Saler 2 sales one ticket, left 1 tickets.Saler 3 sales one ticket, left 0 tickets.Saler 3 detects no ticket.Saler 2 sales one ticket, left -1 tickets.Saler 2 detects no ticket.Saler 1 sales one ticket, left -2 tickets.Saler 1 detects no ticket.Saler 0 sales one ticket, left -3 tickets.Saler 0 detects no ticket. äº’æ–¥é”äº’æ–¥é” sync.Mutexå¤šä¸ª goroutine åŒæ—¶æ“ä½œåŒä¸€ä¸ªèµ„æºï¼ˆä¸´ç•ŒåŒºï¼‰ä¼šå¯¼è‡´ç«æ€é—®é¢˜ï¼Œéœ€è¦é€šè¿‡å¯¹èµ„æºä¸Šé”ï¼Œç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ª goroutine è®¿é—®è¯¥å…±äº«èµ„æºã€‚ å£°æ˜ä¸€ä¸ªäº’æ–¥é” 1var mutex sync.Mutex åœ¨ä½¿ç”¨èµ„æºå‰åŠ é”ï¼Œé˜²æ­¢å…¶ä»– goroutine åŒæ—¶ä½¿ç”¨è¯¥èµ„æº 1mutex.Lock() åœ¨ä½¿ç”¨å®Œèµ„æºåè§£é”ï¼Œé‡Šæ”¾è¯¥èµ„æºç»™å…¶ä»– goroutine ä½¿ç”¨ 1mutex.Unlock() ä¸Šé¢çš„ç”¨ä¾‹ï¼Œåœ¨æŸ¥çœ‹ç¥¨æ•°å‰åŠ é”ï¼Œå†å”®ç¥¨å’Œé€€å‡ºå‰è§£é”ï¼Œå¦‚æ­¤å°±ä¸ä¼šå‡ºç°å¤šå–å‡ºç¥¨çš„æƒ…å†µã€‚ 123456789101112131415161718192021222324252627282930313233343536373839package mainimport ( \"fmt\" \"math/rand\" \"sync\" \"time\")var mutex sync.Mutexvar numTicket = 10func saleTicket(i int) &#123; rand.Seed(time.Now().UnixNano()) for &#123; // åŠ é” mutex.Lock() if numTicket &gt; 0 &#123; time.Sleep(time.Duration(rand.Intn(1000)) * time.Millisecond) numTicket-- fmt.Printf(\"Saler %d sales one ticket, left %d tickets.\\n\", i, numTicket) &#125; else &#123; //è§£é” mutex.Unlock() fmt.Printf(\"Saler %d detects no ticket.\\n\", i) break &#125; //è§£é” mutex.Unlock() &#125;&#125;func main() &#123; numSaler := 4 for i := 0; i &lt; numSaler; i++ &#123; go saleTicket(i) &#125; time.Sleep(5 * time.Second)&#125; è¯»å†™äº’æ–¥é” sync.RWMutexäº’æ–¥é”æ˜¯å®Œå…¨äº’æ–¥çš„ï¼Œæ— å…³æ˜¯è¯»è¿˜æ˜¯å†™ã€‚ä½†å…¶å®å¹¶å‘è¯»å¹¶ä¸ä¼šå‡ºç°èµ„æºç«äº‰çš„é—®é¢˜ï¼Œæ‰€ä»¥å¼•å…¥è¯»å†™é”ï¼Œä¸é™åˆ¶å¹¶å‘è¯»ï¼Œä½†é™åˆ¶å¹¶å‘è¯»å†™ã€å†™å†™ã€‚ è¯» å†™ è¯» Y N å†™ N N å£°æ˜ä¸€ä¸ªè¯»å†™äº’æ–¥é” 1var mutex sync.RWMutex åœ¨å†™èµ„æºå‰åŠ å†™é”ï¼Œ 1mutex.Lock() åœ¨å†™å®Œèµ„æºåè§£å†™é”ï¼Œ 1mutex.Unlock() åœ¨è¯»èµ„æºå‰åŠ è¯»é” 1mutex.RLock() åœ¨è¯»å®Œèµ„æºåè§£è¯»é” 1mutex.RUnlock() ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package mainimport ( \"fmt\" \"sync\" \"time\")var ( x int64 wg sync.WaitGroup lock sync.Mutex rwlock sync.RWMutex)func write() &#123; rwlock.Lock() // åŠ å†™é” x = x + 1 time.Sleep(10 * time.Millisecond) // å‡è®¾è¯»æ“ä½œè€—æ—¶10æ¯«ç§’ rwlock.Unlock() // è§£å†™é” wg.Done()&#125;func read() &#123; rwlock.RLock() // åŠ è¯»é” time.Sleep(time.Millisecond) // å‡è®¾è¯»æ“ä½œè€—æ—¶1æ¯«ç§’ rwlock.RUnlock() // è§£è¯»é” wg.Done()&#125;func main() &#123; start := time.Now() for i := 0; i &lt; 10; i++ &#123; wg.Add(1) go write() &#125; for i := 0; i &lt; 1000; i++ &#123; wg.Add(1) go read() &#125; wg.Wait() end := time.Now() fmt.Println(end.Sub(start))&#125; åŸå­æ“ä½œ atomic åŸå­æ“ä½œå³ä¸èƒ½è¢«ä¸­æ–­çš„æ“ä½œï¼Œå¯¹èµ„æºè¿›è¡ŒåŸå­æ“ä½œæ—¶ï¼ŒCPU ä¸ä¼šå†å¯¹è¯¥èµ„æºè¿›è¡Œå…¶ä»–æ“ä½œã€‚åŸå­æ“ä½œæ— é”ï¼Œé€šè¿‡ CPU æŒ‡ä»¤ç›´æ¥å®ç°ã€‚ é€šè¿‡äº’æ–¥é”æ“ä½œä¼šæ¶‰åŠå†…æ ¸æ€çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ŒGo å¯ä»¥è°ƒç”¨ atomic åŒ…åœ¨ç”¨æˆ·æ€å®ŒæˆåŸå­æ“ä½œæ¥ä¿è¯å¹¶å‘å®‰å…¨ã€‚ åŸå­æ“ä½œæ”¯æŒçš„ç±»å‹ï¼šint32ã€int64ã€uint32ã€uint64ã€uintptrã€unsafe.Pointerï¼Œå³æ•´æ•°å’ŒæŒ‡é’ˆ ä»¥ int64 ä¸ºä¾‹ï¼Œå–å˜é‡åœ°å€ç”¨äºæ“ä½œ è¯»å– 1func atomic.LoadInt64(addr *int64) (val int64) å†™å…¥ 1func atomic.StoreInt64(addr *int64, val int64) ä¿®æ”¹ 1func atomic.AddInt64(addr *int64, delta int64) (new int64) äº¤æ¢ 1func atomic.SwapInt64(addr *int64, new int64) (old int64) æ¯”è¾ƒäº¤æ¢ï¼Œäº¤æ¢å‰å…ˆæ£€æŸ¥å½“å‰å€¼æ˜¯å¦æ˜¯ oldï¼Œå¦‚æ˜¯åˆ™äº¤æ¢æˆ newï¼Œå¦‚ä¸æ˜¯åˆ™ä¸äº¤æ¢ 1func atomic.CompareAndSwapInt64(addr *int64, old int64, new int64) (swapped bool) ç®¡é“ ChannelGo çš„å¹¶å‘æ¨¡å‹æ˜¯ CSPï¼ŒCommunicating Sequential Processï¼Œæå€¡ä½¿ç”¨é€šä¿¡å…±äº«å†…å­˜ï¼Œè€Œä¸æ˜¯é€šè¿‡å…±äº«å†…å­˜æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚ Go å¯ä»¥é€šè¿‡å…±äº«å†…å­˜æ¥å®ç°æ•°æ®å…±äº«ï¼Œä½¿ç”¨é”æ¥é˜²æ­¢ç«æ€ï¼Œä½†è¿™ä¸å¯é¿å…çš„åŠ å¤§äº†æ€§èƒ½é—®é¢˜ã€‚ç”±æ­¤å¼•å…¥äº†ç®¡é“ Channel çš„æ¦‚å¿µï¼Œç”¨äº goroutine ä¹‹é—´é€šä¿¡ã€‚ åˆ›å»º ChannelChannel æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ¯ä¸ª Channel éƒ½éœ€è¦å®šä¹‰å…¶å…è®¸ä¼ è¾“çš„æ•°æ®ç±»å‹ã€‚ 1var ch chan æ•°æ®ç±»å‹ //é›¶å€¼ä¸ºnil é€šé“çš„é›¶å€¼ä¸º nilï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ make æ¥å®šä¹‰ï¼ˆç¼“å†²åŒºå¤§å°å¯ç¼ºçœï¼‰ 1ch := make(chan æ•°æ®ç±»å‹ [, ç¼“å†²åŒºå¤§å°]) Channel æ“ä½œåœ¨å®šä¹‰äº† Channel åï¼Œå¯å¯¹å…¶è¿›è¡Œä¸‹é¢æ“ä½œï¼Œä»¥ int ç±»å‹ä¸ºä¾‹ 1ch := make(chan int) å‘é€ 1ch &lt;- 10 å½“å­˜åœ¨ç­‰å¾…çš„æ¥æ”¶è€…æ—¶ï¼Œç›´æ¥å°†æ•°æ®å‘é€ç»™é˜»å¡çš„æ¥æ”¶è€… å½“ä¸å­˜åœ¨ç­‰å¾…çš„æ¥æ”¶è€…ï¼Œä½†ç¼“å†²åŒºå­˜åœ¨ç©ºä½™ç©ºé—´æ—¶ï¼Œå°†æ•°æ®å†™å…¥ç¼“å†²åŒº å½“ä¸å­˜åœ¨ç­‰å¾…çš„æ¥æ”¶è€…ï¼Œä¸”ä¸å­˜åœ¨ç¼“å†²åŒºæˆ–è€…ç¼“å†²åŒºå·²æ»¡æ—¶ï¼Œé˜»å¡ç­‰å¾…å…¶ä»– goroutine ä» Channel ä¸­æ¥æ”¶æ•°æ® æ¥æ”¶ 123&lt;-ch //ä¸¢å¼ƒé€šé“å€¼data := &lt;-ch //æ¥æ”¶é€šé“å€¼åˆ°datadata, ok := &lt;-ch //æ¥æ”¶é€šé“å€¼åˆ°dataï¼Œokæ¥æ”¶é€šé“æ˜¯å¦å…³é—­ï¼ˆfalseï¼Œåˆ™é€šé“å·²å…³é—­ï¼‰ å½“å­˜åœ¨ç­‰å¾…çš„å‘é€è€…æ—¶ï¼Œä»é˜»å¡çš„å‘é€è€…æˆ–è€…ç¼“å†²åŒºä¸­è·å–æ•°æ® å½“ä¸å­˜åœ¨ç­‰å¾…çš„å‘é€è€…ï¼Œä½†ç¼“å†²åŒºå­˜åœ¨æ•°æ®æ—¶ï¼Œä»ç¼“å†²åŒºæ¥æ”¶æ•°æ® å½“ä¸å­˜åœ¨ç­‰å¾…çš„å‘é€è€…ï¼Œä¸”ä¸å­˜åœ¨ç¼“å†²åŒºæˆ–è€…ç¼“å†²åŒºä¸å­˜åœ¨æ•°æ®æ—¶ï¼Œé˜»å¡ç­‰å¾…å…¶ä»– goroutine å‘ Channel ä¸­å‘é€æ•°æ® å…³é—­ï¼Œå¦‚æœä¸å†éœ€è¦å¾€é€šé“å‘é€å€¼ï¼Œåˆ™å¯ä»¥å…³é—­é€šé“ï¼Œå…³é—­é€šé“ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥è‡ªåŠ¨é€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ 1close(ch) å…³é—­åçš„é€šé“ï¼š å¯¹å…³é—­åçš„é€šé“å‘é€å€¼ä¼šå¯¼è‡´ panic å¯¹å…³é—­åçš„é€šé“æ¥æ”¶ä¼šä¸€ç›´è·å–åˆ°å€¼ï¼ŒçŸ¥é“é€šé“ç©º å¯¹å…³é—­åä¸”å·²ç»ç©ºçš„é€šé“æ¥æ”¶ä¼šå¾—åˆ°å¯¹åº”æ•°æ®ç±»å‹çš„é›¶å€¼ å…³é—­å·²ç»å…³é—­çš„é€šé“ä¼šå¯¼è‡´ panic Channelç¼“å†²åŒº nil éç©º ç©º æ»¡ éç©ºéæ»¡ å‘é€ é˜»å¡ å‘é€å€¼ å‘é€å€¼ é˜»å¡ å‘é€å€¼ æ¥æ”¶ é˜»å¡ æ¥æ”¶å€¼ é˜»å¡ æ¥æ”¶å€¼ æ¥æ”¶å€¼ å…³é—­ panic å…³é—­æˆåŠŸï¼Œè¯»å–æ‰€æœ‰æ•°æ®åï¼Œè¿”å›é›¶å€¼ å…³é—­æˆåŠŸï¼Œè¿”å›é›¶å€¼ å…³é—­æˆåŠŸï¼Œè¯»å–æ‰€æœ‰æ•°æ®åï¼Œè¿”å›é›¶å€¼ å…³é—­æˆåŠŸï¼Œè¯»å–æ‰€æœ‰æ•°æ®åï¼Œè¿”å›é›¶å€¼ æ— ç¼“å†²çš„é€šé“æ— ç¼“å†²é€šé“ï¼Œåˆç§°é˜»å¡é€šé“ã€åŒæ­¥é€šé“ï¼Œå®šä¹‰ Channel æ—¶ä¸è®¾ç½®ç¼“å†²åŒºå¤§å°å³ä¸ºæ— ç¼“å†²é€šé“ã€‚ æ­¤ç±» Channel å‘é€å’Œæ¥æ”¶éƒ½æ— ç¼“å†²ï¼Œæ‰€ä»¥æ— æ¥æ”¶æ—¶å‘é€ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å…¶ä»– goroutine ä»è¯¥é€šé“è¯»å–æ•°æ®ï¼›åŒç†ï¼Œæ— å‘é€æ—¶æ¥æ”¶ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å…¶ä»– goroutine å‘é€åˆ°è¯¥é€šé“ã€‚ ä¸‹é¢é”™è¯¯ç”¨ä¾‹ï¼Œå‘é€æ•°æ®åˆ° Channelï¼Œæ— æ¥æ”¶ï¼Œé˜»å¡ï¼Œæ— æ³•è¿è¡Œåˆ°æ¥æ”¶æ­¥éª¤ï¼Œäºæ˜¯å‘ç”Ÿæ­»é”æŠ¥é”™ 1fatal error: all goroutines are asleep - deadlock! 1234567891011package mainimport \"fmt\"func main() &#123; ch := make(chan int) ch &lt;- 10 //æ— æ¥æ”¶å‘é€ï¼Œæ­»é” data := &lt;-ch fmt.Println(data) close(ch)&#125; éœ€è¦å¯åŠ¨å¦ä¸€ä¸ª goroutine æ¥æ”¶ï¼Œè§£å¼€æ­»é” 1234567891011121314151617181920212223package mainimport ( \"fmt\" \"sync\")var wg sync.WaitGroupfunc recvFromChannel(ch chan int) &#123; data := &lt;-ch fmt.Println(data) wg.Done()&#125;func main() &#123; ch := make(chan int) wg.Add(1) go recvFromChannel(ch) ch &lt;- 10 close(ch) wg.Wait()&#125; æœ‰ç¼“å†²çš„é€šé“å®šä¹‰ Channel æ—¶è®¾ç½®ç¼“å†²åŒºå¤§å°å³å¯è®¾ç½®ä¸ºæœ‰ç¼“å†²é€šé“ï¼Œåœ¨ç¼“å†²åŒºæœ‰å‰©ä½™æ—¶ï¼Œå³ä½¿æ— æ¥æ”¶è€…ï¼Œä¹Ÿä¸é˜»å¡å‘é€ã€‚ ä¸Šè¿°æ­»é”ç”¨ä¾‹ï¼ŒåŠ ä¸Šç¼“å†²åŒºï¼Œå³å¯æ­£å¸¸è¿è¡Œã€‚ 1234567891011package mainimport \"fmt\"func main() &#123; ch := make(chan int, 1) //åˆ›å»ºå®¹é‡ä¸º1çš„ç¼“å†²åŒºçš„é€šé“ ch &lt;- 10 data := &lt;-ch fmt.Println(data) close(ch)&#125; å•å‘é€šé“æœ‰äº› goroutine å‡½æ•°è°ƒç”¨ Channel ä»…éœ€å‘é€æˆ–è€…æ¥æ”¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å•å‘é€šé“è¿›è¡Œé™åˆ¶ã€‚ åªèƒ½å‘é€çš„é€šé“ 1chan&lt;- int åªèƒ½æ¥æ”¶çš„é€šé“ 1&lt;-chan int ä¸‹é¢ä¾‹å­ï¼Œä¸¤ä¸ªå‡½æ•°ä¸€ä¸ªä»…éœ€è¦å‘é€ï¼Œä¸€ä¸ªä»…éœ€è¦æ¥æ”¶ï¼Œå³å¯ä¼ å…¥å•å‘é€šé“ 12345678910111213141516171819202122232425262728package mainimport ( \"fmt\" \"sync\")var wg sync.WaitGroupfunc recvFromChannel(ch &lt;-chan int) &#123; //ä»…æ¥æ”¶é€šé“ data := &lt;-ch fmt.Println(data) wg.Done()&#125;func sendToChannel(ch chan&lt;- int) &#123; //ä»…å‘é€é€šé“ ch &lt;- 10 close(ch) wg.Done()&#125;func main() &#123; ch := make(chan int) wg.Add(2) go recvFromChannel(ch) go sendToChannel(ch) wg.Wait()&#125; é€šé“çš„éå†å¾ªç¯ä»é€šé“å–å€¼çš„æ–¹æ³• æ–¹æ³•ä¸€ï¼šä½¿ç”¨ for æŒç»­å¾ªç¯ 123456789101112131415161718192021222324252627282930package mainimport ( \"fmt\" \"sync\")var wg sync.WaitGroupfunc sendToChannel(ch chan&lt;- int) &#123; for i := 0; i &lt; 10; i++ &#123; ch &lt;- i &#125; close(ch) wg.Done()&#125;func main() &#123; ch := make(chan int) wg.Add(1) go sendToChannel(ch) for &#123; data, ok := &lt;-ch if !ok &#123; break &#125; fmt.Println(data) &#125; wg.Wait()&#125; æ–¹æ³•äºŒï¼šfor...rangeï¼Œæ—¢å¯ä»¥å¾ªç¯å–å€¼ï¼Œå¹¶ä¸”åœ¨é€šé“å…³é—­åé€€å‡º 1234567891011121314151617181920212223242526package mainimport ( \"fmt\" \"sync\")var wg sync.WaitGroupfunc sendToChannel(ch chan&lt;- int) &#123; for i := 0; i &lt; 10; i++ &#123; ch &lt;- i &#125; close(ch) wg.Done()&#125;func main() &#123; ch := make(chan int) wg.Add(1) go sendToChannel(ch) for data := range ch &#123; fmt.Println(data) &#125; wg.Wait()&#125; é€šé“çš„è°ƒåº¦é€šè¿‡ select éšæœºè¿è¡Œä¸€ä¸ªæ¥æ”¶åˆ°çš„ Channel çš„ case å¦‚æœæœ‰å¯æ¥æ”¶çš„ Channelï¼Œåˆ™éšæœºè¿è¡Œå…¶ä¸­ä¸€ä¸ª case å¦‚æœæ²¡æœ‰å¯æ¥æ”¶çš„ Channelï¼Œåˆ™è¿è¡Œ default case å¦‚æœæ²¡æœ‰å¯æ¥æ”¶çš„ Channelï¼Œä¸”æ²¡æœ‰ default caseï¼Œåˆ™ä¼šé˜»å¡ç›´åˆ°æœ‰æ¥æ”¶åˆ° Channel ä½¿ç”¨æ— é™ for å¾ªç¯åŒ…è£¹ selectï¼Œåˆ™å¯å®ç°æŒç»­ç›‘å¬å¤šä¸ªé€šé“ï¼Œè§¦å‘ç›¸åº”æ“ä½œã€‚ 123456789101112for &#123; select &#123; case data1, ok := &lt;-ch1: if !ok &#123; fmt.Println(\"ch1 closed.\") break &#125; // ch1å¤„ç† case &lt;-ch2: // ch2å¤„ç† &#125;&#125; sync åŒ…sync.WaitGroupåœ¨å¤šçº¿ç¨‹å¹¶å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸»åç¨‹ç»“æŸï¼Œå…¶ä»– goroutine ä¹Ÿä¼šè·Ÿç€ç»“æŸï¼Œæ‰€ä»¥ç»å¸¸éœ€è¦è®©ä¸»åç¨‹ç­‰å¾…å…¶ä»– goroutine ç»“æŸã€‚ä½¿ç”¨ time.Sleep è¿‡äºç”Ÿç¡¬ï¼Œä¸åˆé€‚ã€‚äºæ˜¯å¼•å…¥äº† sync.WaitGroup å¤„ç†è¯¥é—®é¢˜ ã€‚ (wg * WaitGroup) Add(delta int)ï¼šè®¡æ•°å™¨ + delta (wg *WaitGroup) Done()ï¼šè®¡æ•°å™¨ -1 (wg *WaitGroup) Wait()ï¼šé˜»å¡ç›´åˆ°è®¡æ•°å™¨å˜ä¸º 0 æ¯å¼€ä¸€ä¸ªå¹¶å‘ goroutine å°±è®©è®¡æ•°å™¨ +1ï¼Œå¹¶å‘ goroutine ç»“æŸæ—¶åˆ™è®©è®¡æ•°å™¨ -1ï¼Œä¸»åç¨‹è°ƒç”¨ Wait() é˜»å¡ç›´åˆ°æ‰€æœ‰ goroutine ç»“æŸï¼Œè®¡æ•°å™¨æ¸…é›¶ã€‚ 123456789101112131415161718192021222324package mainimport ( \"fmt\" \"sync\")var wg sync.WaitGroup //å£°æ˜ä¸€ä¸ªWaitGroupfunc funcA() &#123; for i := 0; i &lt; 100; i++ &#123; fmt.Println(i) &#125; wg.Done() //ä¸€ä¸ªgoroutineç»“æŸï¼Œè®¡æ•°å™¨-1&#125;func main() &#123; numGoroutine := 4 wg.Add(numGoroutine) //è®¡æ•°å™¨+å¹¶å‘goroutineæ•° for i := 0; i &lt; numGoroutine; i++ &#123; go funcA() &#125; wg.Wait() //ä¸»åç¨‹é˜»å¡ç›´åˆ°æ‰€æœ‰goroutineè·‘å®Œ&#125; sync.Oncesync.Once æä¾›å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡çš„æ–¹æ³•ï¼Œå¦‚åˆå§‹åŒ–é…ç½®ã€æ•°æ®åº“è¿æ¥æ­¤ç±»å¹¶å‘åªéœ€è¦è°ƒç”¨ä¸€æ¬¡çš„å‡½æ•°ï¼Œå¯ç”¨æ­¤æ–¹æ³• 1func (o *Once) Do(f func()) ä¸‹é¢ç¤ºä¾‹ï¼ŒfuncA å’Œ funcB éƒ½éœ€è¦è°ƒç”¨ InitConfig å‡½æ•°ï¼Œä½¿ç”¨ sync.Onceï¼Œå¯ä½¿å¾—è¯¥å‡½æ•°åªè¢«è°ƒç”¨ä¸€æ¬¡ã€‚ 12345678910111213141516171819202122232425262728293031323334package mainimport ( \"fmt\" \"sync\")var ( wg sync.WaitGroup once sync.Once //å£°æ˜once)func InitConfig() &#123; fmt.Println(\"Init Configuration\")&#125;func funcA() &#123; once.Do(InitConfig) //å¹¶å‘åªè°ƒç”¨ä¸€æ¬¡ fmt.Println(\"function A\") wg.Done()&#125;func funcB() &#123; once.Do(InitConfig) //å¹¶å‘åªè°ƒç”¨ä¸€æ¬¡ fmt.Println(\"function B\") wg.Done()&#125;func main() &#123; wg.Add(2) go funcA() go funcB() wg.Wait()&#125; è¾“å‡º 123Init Configurationfunction Bfunction A sync.MapGo åŸç”Ÿçš„ map å¹¶ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œéœ€è¦é¢å¤–åŠ é”ã€‚sync åŒ…æä¾› sync.Map åˆ™æ˜¯ä¸€ç§å¹¶å‘å®‰å…¨çš„ mapï¼Œæ— éœ€åŠ é”ã€‚å†…ç½®äº†è¯¸å¦‚Storeã€Loadã€LoadOrStoreã€Deleteã€Rangeç­‰æ“ä½œæ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627package mainimport ( \"fmt\" \"strconv\" \"sync\")var ( wg sync.WaitGroup once sync.Once)func main() &#123; m := sync.Map&#123;&#125; //å®šä¹‰map for i := 0; i &lt; 20; i++ &#123; wg.Add(1) go func(n int) &#123; key := strconv.Itoa(n) m.Store(key, n) //å­˜å€¼ value, _ := m.Load(key) //å–å€¼ fmt.Printf(\"key: %v, value: %v\\n\", key, value) wg.Done() &#125;(i) &#125; wg.Wait()&#125; å®šæ—¶å™¨å‘¨æœŸæ€§å®šæ—¶å™¨ tickerticker æ˜¯å‘¨æœŸæ€§å®šæ—¶å™¨ï¼Œé™¤éä¸»åŠ¨åœæ­¢ï¼Œå°±ä¼šä¸€ç›´å¾ªç¯è®¡æ—¶ä¸‹å»ã€‚å¦‚æœå¸Œæœ›æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡ï¼Œæ¨èä½¿ç”¨ ticker ç”¨æ³• ä½œç”¨ func time.NewTicker(d time.Duration) *time.Ticker å®šä¹‰ä¸€ä¸ªå®šæ—¶å™¨ tickerï¼Œæ¯éš”ä¸€ä¸ªé—´éš”æ—¶é—´å°±ä¼šå‘ .C é€šé“å‘é€å½“å‰æ—¶é—´ func (t *time.Ticker) Stop() å›æ”¶èµ„æºï¼Œå¦åˆ™ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ &lt;-t.C æ¯éš”ä¸€ä¸ªè®¾ç½®çš„æ—¶é—´å°±ä¼šä»é€šé“æ¥æ”¶åˆ°å½“å‰æ—¶é—´ ä»¥ä¸‹ç¤ºä¾‹ï¼Œæ¯éš” 5s è¾“å‡ºå½“å‰æ—¶é—´ 12345678910111213141516171819package mainimport ( \"fmt\" \"time\")func main() &#123; ticker := time.NewTicker(5 * time.Second) //å®šä¹‰5sä¸€æ¬¡çš„å®šæ—¶å™¨ defer ticker.Stop() //å›æ”¶èµ„æº go func(t *time.Ticker) &#123; for &#123; fmt.Println(\"Time: \", time.Now().Format(\"2006-01-02 15:04:05\")) &lt;-t.C //æ¯éš”5sè§¦å‘ä¸€æ¬¡ &#125; &#125;(ticker) time.Sleep(15 * time.Second)&#125; ä¸€æ¬¡æ€§å®šæ—¶å™¨ timertimer æ˜¯ä¸€æ¬¡æ€§å®šæ—¶å™¨ï¼Œåªè®¡æ—¶ä¸€æ¬¡ï¼Œé‡æ–°å¼€å§‹è®¡æ—¶éœ€è¦é‡ç½®ã€‚å¦‚æœå¸Œæœ›åªæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ–è€…éœ€è¦é‡æ–°è®¾ç½®é—´éš”æ—¶é—´çš„ï¼Œæ¨èä½¿ç”¨ timer ç”¨æ³• ä½œç”¨ func time.NewTimer(d time.Duration) *time.Timer å®šä¹‰ä¸€ä¸ªå®šæ—¶å™¨ timerï¼Œè¿‡ä¸€ä¸ªé—´éš”æ—¶é—´åä¼šå‘ .C é€šé“å‘é€å½“å‰æ—¶é—´ &lt;-t.C è¿‡ä¸€ä¸ªè®¾ç½®çš„æ—¶é—´ä»é€šé“æ¥æ”¶åˆ°å½“å‰æ—¶é—´ func (t *time.Timer) Stop() bool åœæ­¢å½“å‰è®¡æ—¶ï¼Œå¦‚æœå½“å‰åœ¨è®¡æ—¶ï¼Œåˆ™è¿”å› trueï¼Œå¹¶ä¸ä¼šå†å‘é€åˆ°é€šé“ï¼›å¦‚æœä¸åœ¨è®¡æ—¶ä¸­ï¼Œåˆ™è¿”å› fasle func (t *time.Timer) Reset(d time.Duration) bool é‡ç½®è®¡æ—¶å™¨ï¼Œå¦‚æœç°åœ¨æ­£åœ¨è®¡æ—¶ï¼Œåˆ™åœæ­¢å½“å‰è®¡æ—¶ï¼Œé‡æ–°è®¡æ—¶ï¼ˆè¿”å›åŒ Stopï¼‰ ä»¥ä¸‹ç¤ºä¾‹ï¼Œä½¿ç”¨ä¸€æ¬¡æ€§è®¡æ—¶å™¨ timer æ¨¡æ‹Ÿå‘¨æœŸæ€§è®¡æ—¶å™¨ ticker 123456789101112131415161718192021222324252627package mainimport ( \"fmt\" \"time\")func main() &#123; timer := time.NewTimer(5 * time.Second) //å®šä¹‰ä¸€æ¬¡æ€§è®¡æ—¶å™¨timer fmt.Println(\"Time: \", time.Now().Format(\"2006-01-02 15:04:05\")) go func(t *time.Timer) &#123; times := 0 for &#123; &lt;-t.C //è®¡æ—¶ fmt.Println(\"Time: \", time.Now().Format(\"2006-01-02 15:04:05\")) times++ t.Reset(5 * time.Second) //é‡æ–°å¼€å§‹è®¡æ—¶ if times &gt; 3 &#123; t.Stop() //åœæ­¢è®¡æ—¶ &#125; &#125; &#125;(timer) time.Sleep(30 * time.Second)&#125; å‚è€ƒ å¹¶å‘ç¼–ç¨‹ Golang å¹¶å‘ç¼–ç¨‹","categories":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/categories/Golang/"}],"tags":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/tags/Golang/"}]},{"title":"Goå­¦ä¹ è·¯çº¿","slug":"Goå­¦ä¹ è·¯çº¿","date":"2024-09-04T15:38:51.000Z","updated":"2024-11-19T18:02:53.285Z","comments":true,"path":"2024/09/04/Goå­¦ä¹ è·¯çº¿/","link":"","permalink":"https://gy23333.github.io/2024/09/04/Go%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/","excerpt":"Golang å­¦ä¹ è·¯çº¿æ¢³ç†","text":"Golang å­¦ä¹ è·¯çº¿æ¢³ç† Go åŸºç¡€ Go åŸºæœ¬è¯­æ³• Go å¹¶å‘ç¼–ç¨‹ SQL æ•°æ®ç»“æ„ä¸ç®—æ³• ç½‘ç»œç¼–ç¨‹ å‘½ä»¤è¡Œå·¥å…· cobra Web æ¡†æ¶ Gin æ•°æ®åº“ PostgreSQL MongoDB Redis Mysql kafka æ—¥å¿— zap logrus å¾®æœåŠ¡ gRPC goKit äº‘åŸç”Ÿ gitlab Docker Kubernetes Promethues å…¶ä»– Opentelemetry Promethues https://github.com/talkgo/read https://www.topgoer.com https://www.liwenzhou.com/posts/Go/golang-menu/","categories":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/categories/Golang/"}],"tags":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/tags/Golang/"},{"name":"å­¦ä¹ è·¯çº¿","slug":"å­¦ä¹ è·¯çº¿","permalink":"https://gy23333.github.io/tags/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"}]},{"title":"TRex æ•™ç¨‹","slug":"TRex-æ•™ç¨‹","date":"2024-08-23T14:18:42.000Z","updated":"2024-11-11T03:57:58.117Z","comments":true,"path":"2024/08/23/TRex-æ•™ç¨‹/","link":"","permalink":"https://gy23333.github.io/2024/08/23/TRex-%E6%95%99%E7%A8%8B/","excerpt":"TRex æ˜¯åŸºäº DPDK çš„ä¸€ä¸ªå¼€æºã€ä½æˆæœ¬çš„æµé‡ç”Ÿæˆå™¨ï¼Œæ”¯æŒç”Ÿæˆ L3ï½7 æµé‡ï¼Œæä¾›æœ‰çŠ¶æ€ã€æ— çŠ¶æ€ä¸¤ç§æ¨¡å¼ã€‚","text":"TRex æ˜¯åŸºäº DPDK çš„ä¸€ä¸ªå¼€æºã€ä½æˆæœ¬çš„æµé‡ç”Ÿæˆå™¨ï¼Œæ”¯æŒç”Ÿæˆ L3ï½7 æµé‡ï¼Œæä¾›æœ‰çŠ¶æ€ã€æ— çŠ¶æ€ä¸¤ç§æ¨¡å¼ã€‚ TRex æ¶æ„TRex ä¹‹æ‰€ä»¥èƒ½å¤Ÿäº§ç”Ÿç›¸æ¯”å…¶ä»–æµé‡ç”Ÿæˆå™¨æ›´å¤§çš„æµé‡ï¼ŒåŸå› æ˜¯ä½¿ç”¨äº† DPDKã€‚ ä¼ ç»Ÿçš„å·¥å…·ï¼Œæ¯”å¦‚ iperfï¼Œå¦‚æœæƒ³è¦ç”ŸæˆåŒ…ï¼Œéœ€è¦èµ° Linux å†…æ ¸ï¼Œç»è¿‡ç»‘å®šçš„ socket APIã€ TCP/IP æ ˆã€è®¾å¤‡é©±åŠ¨è¿™æ ·ä¸€å¥—å®Œæ•´çš„æµç¨‹ï¼Œæœ€ç»ˆæ‰èƒ½åˆ°è¾¾ç‰©ç†ç½‘å¡ã€‚ è€Œ TRex ä½¿ç”¨ DPDKï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ç»•è¿‡ Linux å†…æ ¸æ€åè®®æ ˆï¼Œç›´æ¥æ§åˆ¶ç‰©ç†ç½‘å¡ï¼Œåº”ç”¨å•ç‹¬å®ç°åŒ…å¤„ç†è¿‡ç¨‹ï¼Œä¸ç”¨ç»å†å†…æ ¸/ç”¨æˆ·æ€åˆ‡æ¢ã€å†…å­˜æ‹·è´ã€å†—ä½™çš„ TCP/IP åè®®æ ˆç­‰æ­¥éª¤ã€‚ å®‰è£… è¿›å…¥å®‰è£…ç›®å½•ï¼Œæ¯”å¦‚ /opt/trex ä¸‹è½½ TRex å‹ç¼©åŒ… 1wget --no-cache --no-check-certificate https://trex-tgn.cisco.com/trex/release/latest è§£å‹ TRex å‹ç¼©åŒ… 1tar -xzvf latest ç½‘å¡é…ç½®TRex éœ€è¦ DPDK ç»‘å®šç½‘å¡ï¼Œé€šè¿‡ TRex æä¾›çš„è„šæœ¬å¯ä»¥æŸ¥çœ‹æˆ–ä¿®æ”¹ç½‘å¡ æŸ¥çœ‹ç½‘å¡çŠ¶æ€123456789101112131415root@ubuntu:/opt/trex/v3.05# ./dpdk_setup_ports.py -sNetwork devices using DPDK-compatible driver============================================&lt;none&gt;Network devices using kernel driver===================================0000:02:01.0 '82545EM Gigabit Ethernet Controller (Copper)' if=ens33 drv=e1000 unused=igb_uio,vfio-pci,uio_pci_generic *Active*0000:02:05.0 '82545EM Gigabit Ethernet Controller (Copper)' if=ens37 drv=e1000 unused=igb_uio,vfio-pci,uio_pci_generic0000:02:06.0 '82545EM Gigabit Ethernet Controller (Copper)' if=ens38 drv=e1000 unused=igb_uio,vfio-pci,uio_pci_genericOther network devices=====================&lt;none&gt; å½“å‰ä¸‰å¼ ç½‘å¡éƒ½ç»‘å®šåœ¨ kernel ä¸‹ï¼ŒDPDK æœªç»‘å®šç½‘å¡ Activeçš„ç½‘å¡ä¸º ssh ä½¿ç”¨çš„ç®¡ç†ç½‘å¡ï¼Œä¸å¯ä»¥è®¾ç½®åœ¨ TRex é…ç½®æ–‡ä»¶ä¸­ï¼Œåˆ†é…ç»™ DPDK åœ¨è¿è¡Œ TRex æ—¶ï¼Œä¼šè‡ªåŠ¨å°† TRex é…ç½®æ–‡ä»¶ä¸­interfacesç½‘å¡ç»‘å®š DPDK TRex é…ç½®å®˜æ–¹æ–‡æ¡£ Yaml æ ¼å¼é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥é…ç½® TRex æœåŠ¡å™¨ï¼ŒåŒ…æ‹¬ï¼š æ¯ä¸ªç½‘å¡çš„æºã€ç›®çš„ IP å’Œ MAC åœ°å€ å±è”½ç½‘å¡ï¼Œä¿è¯ TRex ä¸ä½¿ç”¨ç®¡ç†ç½‘å¡ä½œä¸ºæµé‡ç½‘å¡ åœ¨è¿è¡Œ TRex æœåŠ¡å™¨æ—¶ï¼Œé€šè¿‡ --cfgé…ç½®ï¼Œå¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä½¿ç”¨é»˜è®¤è·¯å¾„/etc/trex_cfg.yamlï¼ŒTRex æä¾›äº†ä¸€äº›ç¤ºä¾‹ TRex é…ç½®æ–‡ä»¶åœ¨ $TREX_ROOT/cfg é…ç½®é¡¹ port_limitï¼šï¼ˆå¿…é€‰ï¼‰ç½‘å¡æ•°é‡ï¼Œç»‘å®š DPDK çš„ç½‘å¡æ•°é‡ï¼Œå¿…é¡»å’Œinterfacesä¸­çš„ç½‘å¡æ•°é‡å¯¹åº” versionï¼šï¼ˆå¿…é€‰ï¼‰å¿…é¡»æ˜¯ 2 interfacesï¼šï¼ˆå¿…é€‰ï¼‰TRex ä½¿ç”¨çš„ç½‘å¡ PCIï¼Œé¡ºåºæœ‰æ„ä¹‰ï¼Œå¯¹åº”port_infoä¸­çš„é¡ºåº å¿…é¡»æ˜¯å¶æ•°ä¸ªï¼Œæˆå¯¹å­˜åœ¨ï¼ŒæŒ‰é¡ºåºåˆ†åˆ«ä¸º clinet å’Œ server ç½‘å¡ å¦‚æ˜¯å¥‡æ•°ä¸ªç½‘å¡ï¼Œå¯ä»¥ä½¿ç”¨dummyå¡«å……ï¼Œä½†æ¯å¯¹ç½‘å¡å¯¹å¿…é¡»æœ‰édummy çš„ç½‘å¡ é€šè¿‡ ./dpdk_setup_ports.py -s æŸ¥çœ‹ç½‘å¡ PCI ä¸èƒ½å¡«å…¥ ssh ä½¿ç”¨çš„ç½‘å¡ cï¼šåˆ†é…ç»™æ¯ä¸ªç½‘å¡å¯¹çš„çº¿ç¨‹æ•°ï¼Œä¼šè¢«è¿è¡Œæ—¶çš„å‘½ä»¤è¡Œå‚æ•°-cè¦†ç›– services_coreï¼šï¼ˆéå¿…é€‰ï¼‰ç”¨æ¥è·‘ scapyã€PyBirdã€Emu è¿™äº› service çš„æ ¸ï¼Œå¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä¼šé‡‡ç”¨ä»¥ä¸‹é€»è¾‘ low_end å¼€å¯ï¼Œä½¿ç”¨ low_end_core low_end æœªå¼€å¯ï¼Œä½¿ç”¨ master_thread_id low_end æœªå¼€å¯ï¼Œä½¿ç”¨ master_thread_idï¼Œä½¿ç”¨ core 0 port_infoï¼šï¼ˆå¿…é€‰ï¼‰ ç½‘å¡ä¿¡æ¯ï¼Œæ¯é¡¹æŒ‰é¡ºåºå¯¹åº”interfacesä¸­çš„ç½‘å¡ ï¼ˆå¿…é€‰ï¼‰å¯¹äºæ¯å¼ ç½‘å¡ï¼Œéƒ½å¿…é¡»è¦è®¾ç½®ç›®çš„ MAC åœ°å€ï¼Œæœ‰ä¸¤ç§è®¾ç½®æ–¹å¼ï¼š ç›´æ¥è®¾ç½®dest_mac è®¾ç½®default_gwï¼Œåœ¨æœªè®¾ç½®dest_macæ—¶ï¼ŒTRex ä¼šå¯¹default_gwè¿™ä¸ª IP å‘é€ ARP è¯·æ±‚ï¼Œä½¿ç”¨å›å¤çš„ç»“æœä½œä¸ºç›®çš„ MAC åœ°å€ dest_macï¼šç›®çš„ MAC åœ°å€ï¼Œè¯¥ç½‘å¡æ‰“æµå°†æ‰“å¾€è¿™ä¸ª MAC åœ°å€ default_gwï¼šé»˜è®¤ç½‘å…³ï¼Œç”¨äºç”Ÿæˆç›®çš„ MAC åœ°å€ src_macï¼šï¼ˆéå¿…é€‰ï¼‰è¯¥ç½‘å¡ç”Ÿæˆæµé‡çš„æº MAC åœ°å€ï¼Œå¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨è¯¥ç½‘å¡çš„ MAC åœ°å€ä½œä¸ºæº MAC åœ°å€ platformï¼šï¼ˆéå¿…é€‰ï¼‰ master_thread_idï¼šæ§åˆ¶çº¿ç¨‹ä½¿ç”¨çš„çº¿ç¨‹ id latency_thread_idï¼šRX çº¿ç¨‹ä½¿ç”¨çš„çº¿ç¨‹ idï¼Œç”¨æ¥è®¡ç®—å»¶è¿Ÿ dual_ifï¼š ä¸interfacesä¸­çš„ç½‘å¡å¯¹ä¸€ä¸€å¯¹åº” socketï¼šè¯¥ç½‘å¡å¯¹è¢«åˆ†é…çš„ NUMA èŠ‚ç‚¹ threadsï¼šè¯¥ç½‘å¡å¯¹ç”¨æ¥å‘åŒ…çš„çº¿ç¨‹ id ç¤ºä¾‹123456789101112131415- port_limit : 2 version : 2#List of interfaces. Change to suit your setup. Use ./dpdk_setup_ports.py -s to see available options interfaces : [\"03:00.0\",\"03:00.1\"] port_info : # Port IPs. Change to suit your needs. In case of loopback, you can leave as is. - ip : 1.1.1.1 default_gw : 2.2.2.2 - ip : 2.2.2.2 default_gw : 1.1.1.1 platform : master_thread_id : 0 latency_thread_id : 7 dual_if : - socket : 0 threads : [1,2,3,4,5,6] Traffic æ¨¡ç‰ˆé…ç½®å®˜æ–¹æ–‡æ¡£ Stateful æ¨¡å¼æ—¶éœ€é…ç½® Traffic æ¨¡ç‰ˆï¼Œç”¨ä»¥ç”Ÿæˆæµé‡ã€‚ è¿è¡Œ TRex æ—¶ï¼Œé€šè¿‡é…ç½®-f &lt;file&gt;å‚æ•°æ¥è®¾ç½®æµé‡æ¨¡ç‰ˆ yaml æ–‡ä»¶ã€‚ é…ç½®é¡¹ durationï¼šæµ‹è¯•æŒç»­æ—¶é—´ï¼Œå³æ‰“å¤šä¹…çš„æµé‡ï¼Œå•ä½ sã€‚ä¼šè¢«è¿è¡Œæ—¶çš„å‘½ä»¤è¡Œå‚æ•°-dè¦†ç›– generatorï¼š ç”Ÿæˆæµé‡çš„ IP ä¾æ®clients_startã€clients_endã€servers_startã€servers_endã€dual_port_mask clients_startã€clients_endã€servers_startã€servers_end åˆ†åˆ«è®¾ç½®äº† client å’Œ server çš„ IP æ± ï¼Œè¯¥èŒƒå›´å³é™å®šäº† client å’Œ server çš„æ€»æ•° dual_port_mask è®¾ç½®ç½‘å¡å¯¹çš„åç§»é‡ï¼Œä½¿å¾—å¯ä»¥ä¸ºæ¯ä¸ªç½‘å¡å¯¹é…ç½®ä¸åŒçš„é™æ€è·¯ç”±ï¼Œå¦‚éœ€è¦å‘é€åŒæ ·çš„èŒƒå›´ï¼Œåˆ™è®¾ç½®ä¸º0.0.0.0 ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œå¦‚æœ TRex é…ç½®è®¾ç½®äº†ä¸¤ä¸ªç½‘å¡å¯¹ï¼ˆ4å¼ ç½‘å¡ï¼‰ï¼Œåˆ™åˆ†é… IP å¦‚ä¸‹ ```powershellport pair-0 (0,1) â€”&gt; C (16.0.0.1-16.0.0.128 ) &lt;-&gt; S( 48.0.0.1 - 48.0.0.128)port pair-1 (2,3) â€”&gt; C (17.0.0.129-17.0.0.255 ) &lt;-&gt; S( 49.0.0.129 - 49.0.0.255) + mask (â€œ1.0.0.0â€)12345678910 - client å’Œ server æ•°é‡å³ä¸ºè®¾ç½®èŒƒå›´çš„æ•°é‡ï¼Œéƒ½æ˜¯ 255ï¼Œä¸ä¼šå› ä¸ºç½‘å¡æ•°é‡è€Œå˜åŒ– - ç½‘å¡å¯¹åç§»é‡ä¸º&#96;dual_port_mask&#96;ï¼Œç¬¬äºŒå¯¹ç½‘å¡å¯¹æ¯”ç¬¬ä¸€å¯¹åç§» &#96;1.0.0.0&#96;- å¦‚æœ &#96;dual_port_mask&#96; è®¾ç½®ä¸º&#96;0.0.0.0&#96;ï¼Œä¾æ—§è®¾ç½® TRex é…ç½®ä¸¤ä¸ªç½‘å¡å¯¹ï¼ˆ4å¼ ç½‘å¡ï¼‰ï¼Œåˆ™åˆ†é… IP å¦‚ä¸‹ - &#96;&#96;&#96;powershell port pair-0 (0,1) --&gt; C (16.0.0.1-16.0.0.128 ) &lt;-&gt; S( 48.0.0.1 - 48.0.0.128) port pair-1 (2,3) --&gt; C (16.0.0.129-16.0.0.255 ) &lt;-&gt; S( 48.0.0.129 - 48.0.0.255) ç”Ÿæˆæµé‡çš„ IP èŒƒå›´ client IP èŒƒå›´ï¼šç½‘å¡å¯¹ä¸­çš„ client å‘é€æµé‡çš„æº IPã€ç½‘å¡å¯¹ä¸­çš„ server å‘é€æµé‡çš„ç›®çš„ IP server IP èŒƒå›´ï¼šç½‘å¡å¯¹ä¸­çš„ client å‘é€æµé‡çš„ç›®çš„ IPã€ç½‘å¡å¯¹ä¸­çš„ server å‘é€æµé‡çš„æº IP clients_per_gbï¼šå·²åºŸå¼ƒ min_clientsï¼šå·²åºŸå¼ƒ cap_info nameï¼špcapæ–‡ä»¶ï¼Œæµé‡æ¨¡ç‰ˆæ–‡ä»¶ åªå…è®¸å•æ•°æ®æµ ç”Ÿæˆæµé‡æ—¶ä½¿ç”¨è¯¥æµé‡æ¨¡ç‰ˆï¼Œå¹¶å°† IP æ›¿æ¢ä¸º client å’Œ server çš„ IP æ± ä¸­çš„ IP cpsï¼šæ¯ç§’è¿æ¥æ•°ï¼Œå®é™…è¿æ¥æ•°éœ€ä¹˜ä»¥è¿è¡Œæ—¶è®¾ç½®çš„ -m ipgï¼šæŠ¥æ–‡é—´éš™ï¼Œå•ä½ ms rttï¼šè®¾ç½®ä¸ipgç›¸åŒçš„å€¼ wï¼šå®šä¹‰ä¸€ä¸ªburstä¸­è¯¥templateç”Ÿæˆå‡ ä¸ªflowï¼Œé»˜è®¤ä¸º 1 ç¤ºä¾‹123456789101112131415161718- duration : 10.0 generator : distribution : \"seq\" clients_start : \"16.0.0.1\" clients_end : \"16.0.0.255\" servers_start : \"48.0.0.1\" servers_end : \"48.0.0.255\" clients_per_gb : 201 min_clients : 101 dual_port_mask : \"1.0.0.0\" tcp_aging : 1 udp_aging : 1 cap_info : - name: cap2/dns.pcap cps : 1.0 ipg : 10000 rtt : 10000 w : 1 è¿è¡Œå‘½ä»¤è¡Œå‚æ•°é€šè¿‡./t-rex-64è¿è¡Œ TRex æœåŠ¡å™¨ï¼Œæ·»åŠ å‚æ•°è®¾ç½®æœ‰çŠ¶æ€/æ— çŠ¶æ€ä»¥åŠå…¶ä»–é€‰é¡¹ 1./t-rex-64 [mode] &lt;options&gt; ä½¿ç”¨ ./t-rex-64 -hæŸ¥çœ‹ç»†èŠ‚ è®¾ç½® modeï¼š -f &lt;file&gt;ï¼šè¿è¡Œæœ‰çŠ¶æ€æ¨¡å¼ï¼Œéœ€è®¾ç½®æµé‡æ¨¡ç‰ˆ yaml æ–‡ä»¶ -iï¼šè¿è¡Œæ— çŠ¶æ€æ¨¡å¼ å¯é€‰å‚æ•°ï¼š --cfg &lt;file&gt;ï¼šTRex é…ç½®æ–‡ä»¶ï¼Œå¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä½¿ç”¨é»˜è®¤è·¯å¾„/etc/trex_cfg.yaml -c &lt;num&gt;ï¼šç»™æ¯ä¸ªç½‘å¡å¯¹åˆ†é…çš„çº¿ç¨‹æ•°ï¼Œä¼šè¦†ç›– TRex é…ç½®ä¸­çš„c -m &lt;num&gt;ï¼šæµé‡æ”¾å¤§å€æ•°ï¼Œç”ŸæˆåŸºç¡€æµé‡å¤§å°ä¹˜ä»¥è¿™ä¸ªå€æ•°çš„æµé‡ -dï¼šæŒç»­æ—¶é—´ï¼Œå•ä½ sï¼Œé»˜è®¤3600s Stateful ç¤ºä¾‹ä½¿ç”¨ä¸‹é¢æµ‹è¯•äº¤æ¢æœºæ€§èƒ½ç¤ºä¾‹æ¥ç†è§£ Stateful è¿è¡Œæ¨¡å¼ã€‚ è¯¥ç¤ºä¾‹é…ç½®æœ‰ä¸€å° TRex æœºå™¨å’Œä¸€å°äº¤æ¢æœºã€‚ Trex æœºå™¨æœ‰ä¸¤å¼ ç½‘å¡ç»‘å®š DPDKï¼Œport 1 ä½œä¸ºæ¨¡æ‹Ÿ client çš„ç½‘å¡ï¼Œport 2 ä½œä¸ºæ¨¡æ‹Ÿ server çš„ç½‘å¡ äº¤æ¢æœºé…ç½®æœ‰ä¸¤æ¡é™æ€è·¯ç”±ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥å°†16.0.0.0/8çš„åŒ…ä¼ åˆ° TRex çš„ port 0ï¼Œå°†48.0.0.0/8çš„åŒ…ä¼ åˆ° TRex çš„ port 1 æ ¹æ®ä¸‹é¢é…ç½®ï¼Œè¿è¡Œ TRex æœ‰çŠ¶æ€æ¨¡å¼ ./t-rex-64 -f traffic.yamlï¼Œæ‰“æµæµç¨‹å¦‚ä¸‹ Port 0 å‘åŒ… TRex é…ç½®ä¸­çš„interfacesç½‘å¡å¯¹ä¸­çš„å‰ä¸€å¼ ç½‘å¡ port 0 ä½œä¸º client å‘åŒ… å‘åŒ…ä½¿ç”¨ Traffic æ¨¡ç‰ˆé…ç½®ä¸­çš„ cap_info ä¸­çš„ç¬¬ä¸€ä¸ªåŒ…ï¼Œä¹Ÿå°±æ˜¯å…¶ä¸­çš„ DNS query è¯·æ±‚ å‘é€çš„åŒ…ä¸­çš„æºç›®çš„ IP ä¼šéšæœºè¢«æ›¿æ¢ä¸º Traffic æ¨¡ç‰ˆä¸­çš„é…ç½®çš„èŒƒå›´ï¼Œå…¶ä¸­ï¼Œæº IP èŒƒå›´ 16.0.0.1(clients_start) ~ 16.0.0.255(clients_end)ï¼Œç›®çš„ IP èŒƒå›´ 48.0.0.1(servers_start) ~ 48.0.255.255(servers_end) åŒ…è¢«å‘å¾€ TRex é…ç½®ä¸­è®¾ç½®çš„ port 0 ç½‘å¡çš„ç›®çš„ MAC åœ°å€ dest_macï¼Œæœ¬ç¤ºä¾‹å³é€šè¿‡é»˜è®¤ç½‘å¡ default_gw å¾—åˆ°çš„ç›®çš„ MAC åœ°å€ Port 1 æ”¶åŒ… äº¤æ¢æœº port 2 æ”¶åˆ° TRex æœºå™¨ port 1 å‘æ¥çš„ç›®çš„ IP ä¸º48.0.0.1~ 48.0.255.255çš„åŒ…ï¼Œæ ¹æ®è·¯ç”±ï¼Œå°†å…¶é€šè¿‡ port 3 è½¬å‘åˆ° TRex æœºå™¨çš„ port 1 TRex é…ç½®ä¸­çš„interfacesç½‘å¡å¯¹ä¸­çš„åä¸€å¼ ç½‘å¡ port 1 ä½œä¸º server æ”¶åŒ… Port 1 å‘åŒ… TRex é…ç½®ä¸­çš„interfacesç½‘å¡å¯¹ä¸­çš„åä¸€å¼ ç½‘å¡ port 1 ä½œä¸º server å‘åŒ… å‘åŒ…ä½¿ç”¨ Traffic æ¨¡ç‰ˆé…ç½®ä¸­çš„ cap_info ä¸­çš„ç¬¬äºŒä¸ªåŒ…ï¼Œä¹Ÿå°±æ˜¯å…¶ä¸­çš„ DNS response å›å¤ å‘é€çš„åŒ…ä¸­çš„æºç›®çš„ IP ä¼šéšæœºè¢«æ›¿æ¢ä¸º Traffic æ¨¡ç‰ˆä¸­çš„é…ç½®çš„èŒƒå›´ï¼Œå…¶ä¸­ï¼Œæº IP èŒƒå›´48.0.0.1(servers_start) ~ 48.0.255.255(servers_end)ï¼Œç›®çš„ IP èŒƒå›´ 16.0.0.1(clients_start) ~ 16.0.0.255(clients_end) åŒ…è¢«å‘å¾€ TRex é…ç½®ä¸­è®¾ç½®çš„ port 1 ç½‘å¡çš„ç›®çš„ MAC åœ°å€ dest_macï¼Œæœ¬ç¤ºä¾‹å³é€šè¿‡é»˜è®¤ç½‘å¡ default_gw å¾—åˆ°çš„ç›®çš„ MAC åœ°å€ Port 0 æ”¶åŒ… äº¤æ¢æœº port 3 æ”¶åˆ° TRex æœºå™¨ port 2 å‘æ¥çš„ç›®çš„ IP ä¸º16.0.0.1 ~ 16.0.0.255çš„åŒ…ï¼Œæ ¹æ®è·¯ç”±ï¼Œå°†å…¶é€šè¿‡ port 2 è½¬å‘åˆ° TRex æœºå™¨çš„ port 0 TRex é…ç½®ä¸­çš„interfacesç½‘å¡å¯¹ä¸­çš„åä¸€å¼ ç½‘å¡ port 0 ä½œä¸º server æ”¶åŒ… TRex é…ç½® 1234567891011121314151617- port_limit : 2 #å¯¹åº”ä¸‹é¢çš„ç½‘å¡æ•°é‡ version : 2 interfaces : [\"06:00.0\",\"06:00.1\"] #port0ã€port1çš„PCIï¼Œç½‘å¡å¯¹ï¼Œå‰ä¸€ä¸ªä¸ºæ¨¡æ‹Ÿclientçš„ç½‘å¡ï¼Œåä¸€ä¸ªä¸ºæ¨¡æ‹Ÿserverçš„ç½‘å¡ c : 6 #å¯¹åº”ä¸‹é¢çš„æ¯å¯¹ç½‘å¡å‡ ä¸ªå‘åŒ…threads port_info : #port0çš„é…ç½® - ip : 11.11.11.11 #port0çš„IP default_gw : 11.11.11.1 #port2ï¼ˆport0çš„ç½‘å…³ï¼‰çš„IPï¼Œç”±æ­¤æ¨å‡ºport0ç½‘å¡å‘åŒ…æ—¶çš„ç›®çš„MACåœ°å€ #port1çš„é…ç½® - ip : 12.12.12.12 #port1çš„IP default_gw : 12.12.12.1 #port3ï¼ˆport1çš„ç½‘å…³ï¼‰çš„IPï¼Œç”±æ­¤æ¨å‡ºport1ç½‘å¡å‘åŒ…æ—¶çš„ç›®çš„MACåœ°å€ platform : master_thread_id : 0 latency_thread_id : 7 dual_if : - socket : 0 threads : [1,2,3,4,5,6] Traffic æ¨¡ç‰ˆé…ç½® 123456789101112131415161718- duration : 10.0 generator : distribution : \"seq\" clients_start : \"16.0.0.1\" clients_end : \"16.0.0.255\" servers_start : \"48.0.0.1\" servers_end : \"48.0.255.255\" clients_per_gb : 201 min_clients : 101 dual_port_mask : \"1.0.0.0\" tcp_aging : 1 udp_aging : 1 cap_info : - name: cap2/dns.pcap cps : 1.0 ipg : 10000 rtt : 10000 w : 1 pcap åŒ…æ¨¡ç‰ˆ 1234root@ubuntu:/opt/trex/v3.05# tcpdump -r cap2/dns.pcapreading from file cap2/dns.pcap, link-type EN10MB (Ethernet)-7:00:00.000000 IP 21.0.0.2.1030 &gt; 22.0.0.12.domain: 48 A? www.cisco.com. (31)-7:00:00.020944 IP 22.0.0.12.domain &gt; 21.0.0.2.1030: 48* 1/0/0 A 100.100.100.100 (47) ç¤ºä¾‹Statefulåœ¨ Linux è™šæ‹Ÿæœºä¸Šæ¼”ç¤º Stateful æ¨¡å¼ç®€å•ç¤ºä¾‹ï¼Œç›´æ¥å°†æµé‡ä» ens37 æ‰“åˆ° ens38ï¼Œå†ä» ens38 å›å¤åˆ° ens37ï¼Œé…ç½®å¦‚ä¸‹ åˆå§‹ç½‘å¡ä¿¡æ¯123456789101112131415root@ubuntu:/opt/trex/v3.05# ./dpdk_setup_ports.py -sNetwork devices using DPDK-compatible driver============================================&lt;none&gt;Network devices using kernel driver===================================0000:02:01.0 '82545EM Gigabit Ethernet Controller (Copper)' if=ens33 drv=e1000 unused=igb_uio,vfio-pci,uio_pci_generic *Active*0000:02:05.0 '82545EM Gigabit Ethernet Controller (Copper)' if=ens37 drv=e1000 unused=igb_uio,vfio-pci,uio_pci_generic0000:02:06.0 '82545EM Gigabit Ethernet Controller (Copper)' if=ens38 drv=e1000 unused=igb_uio,vfio-pci,uio_pci_genericOther network devices=====================&lt;none&gt; 12345678910111213141516171819202122232425262728root@ubuntu:/opt/trex/v3.05# ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether 00:0c:29:f6:9c:9a brd ff:ff:ff:ff:ff:ff altname enp2s1 inet 192.168.0.106/24 brd 192.168.0.255 scope global dynamic noprefixroute ens33 valid_lft 6304sec preferred_lft 6304sec inet6 fe80::dbd1:95a:915f:65a7/64 scope link noprefixroute valid_lft forever preferred_lft forever3: ens37: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether 00:0c:29:f6:9c:a4 brd ff:ff:ff:ff:ff:ff altname enp2s5 inet 192.168.45.137/24 brd 192.168.45.255 scope global dynamic noprefixroute ens37 valid_lft 904sec preferred_lft 904sec inet6 fe80::205c:eff4:8197:d72f/64 scope link noprefixroute valid_lft forever preferred_lft forever4: ens38: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether 00:0c:29:f6:9c:ae brd ff:ff:ff:ff:ff:ff altname enp2s6 inet 192.168.45.138/24 brd 192.168.45.255 scope global dynamic noprefixroute ens38 valid_lft 903sec preferred_lft 903sec inet6 fe80::99b1:de77:f189:6869/64 scope link noprefixroute valid_lft forever preferred_lft forever TRex é…ç½®1234567891011121314- port_limit : 2 version : 2 interfaces : [\"02:05.0\",\"02:06.0\"] port_info : - ip : 192.168.45.137 dest_mac : 00:0c:29:f6:9c:ae - ip : 192.168.45.138 dest_mac : 00:0c:29:f6:9c:a4 platform : master_thread_id : 0 latency_thread_id : 1 dual_if : - socket : 0 threads : [2] Traffic é…ç½®123456789101112131415161718- duration : 10.0 generator : distribution : \"seq\" clients_start : \"16.0.0.1\" clients_end : \"16.0.0.255\" servers_start : \"48.0.0.1\" servers_end : \"48.0.0.255\" clients_per_gb : 201 min_clients : 101 dual_port_mask : \"1.0.0.0\" tcp_aging : 1 udp_aging : 1 cap_info : - name: cap2/dns.pcap cps : 1.0 ipg : 10000 rtt : 10000 w : 1 è¿è¡Œ1./t-rex-64 -f /opt/trex/config/traffic.yaml -d 10 è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå®æ—¶çŠ¶æ€æ˜¾ç¤ºå¦‚ä¸‹ 123456789101112131415161718192021222324252627282930-Per port stats table #ä¸¤å¼ ç½‘å¡å½“å‰çš„çŠ¶æ€ ports | 0 | 1 ----------------------------------------------------------------------------------------- opackets | 2 | 2 #å½“å‰æ€»å‘åŒ…æ•° obytes | 154 | 186 #å½“å‰æ€»å‘åŒ…æ¯”ç‰¹ ipackets | 2 | 2 #å½“å‰æ€»æ”¶åŒ…æ•° ibytes | 186 | 154 #å½“å‰æ€»æ”¶åŒ…æ¯”ç‰¹ ierrors | 0 | 0 oerrors | 0 | 0 Tx Bw | 282.57 bps | 341.28 bps-Global stats enabled Cpu Utilization : 0.2 % 0.0 Gb/core #CPUå ç”¨ç‡ Platform_factor : 1.0 Total-Tx : 623.85 bps #å®é™…å‘åŒ… byte per second Total-Rx : 623.85 bps #å®é™…æ”¶åŒ… byte per second Total-PPS : 0.92 pps #å®é™… packet per second Total-CPS : 0.46 cps #å®é™… connect per second Expected-PPS : 2.00 pps #æœŸæœ› packet per second Expected-CPS : 1.00 cps #æœŸæœ› connect per second Expected-BPS : 1.36 Kbps #æœŸæœ› byte per second# Client æ•°é‡ Active-flows : 0 Clients : 255 Socket-util : 0.0000 %# Server æ•°é‡ Open-flows : 2 Servers : 255 Socket : 2 Socket/Clients : 0.0 drop-rate : 0.00 bps #ä¸¢åŒ…ç‡ current time : 3.9 sec #å·²æµ‹è¯•æ—¶é—´ test duration : 6.1 sec #å‰©ä½™æµ‹è¯•æ—¶é—´ æœ€ç»ˆç»“æœ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677 ================== interface sum ==================------------------------ per core stats core id : 1------------------------------------------------ per core per if stats id : 1------------------------ port 0, queue id :0 - client ---------------------------- port 1, queue id :0 - server ---------------------------- ================== generators ==================normal------------- min_delta : 10 usec cnt : 0 high_cnt : 0 max_d_time : 0 usec sliding_average : 0 usec precent : -nan % histogram ----------- m_total_bytes : 1.49 Kbytes m_total_pkt : 18.00 pkt m_total_open_flows : 9.00 flows m_total_pkt : 18 m_total_open_flows : 9 m_total_close_flows : 9 m_total_bytes : 1530 ---------------port : 0------------ opackets : 9 obytes : 693 ipackets : 9 ibytes : 837 Tx : 290.02 bpsport : 1------------ opackets : 9 obytes : 837 ipackets : 9 ibytes : 693 Tx : 350.28 bps Cpu Utilization : 0.4 % 0.0 Gb/core Platform_factor : 1.0 Total-Tx : 640.30 bps Total-Rx : 640.30 bps Total-PPS : 0.94 pps Total-CPS : 0.47 cps Expected-PPS : 2.00 pps Expected-CPS : 1.00 cps Expected-BPS : 1.36 Kbps Active-flows : 0 Clients : 255 Socket-util : 0.0000 % Open-flows : 9 Servers : 255 Socket : 0 Socket/Clients : 0.0 drop-rate : 0.00 bps summary stats -------------- Total-pkt-drop : 0 pkts Total-tx-bytes : 1530 bytes Total-tx-sw-bytes : 0 bytes Total-rx-bytes : 1530 byte Total-tx-pkt : 18 pkts Total-rx-pkt : 18 pkts Total-sw-tx-pkt : 0 pkts Total-sw-err : 0 pkts Total ARP sent : 2 pkts Total ARP received : 1 pkts é—®é¢˜è®°å½•åˆå§‹åŒ– EAL ç¯å¢ƒå¤±è´¥å¦‚è¿è¡Œ TRex é‡åˆ°ä¸‹é¢ EAL ç¯å¢ƒæŠ¥é”™ï¼Œåˆ™éœ€è®¾ç½®å¤§é¡µ 123456789root@ubuntu:/opt/trex/v3.05# ./t-rex-64 -f /opt/trex/config/traffic.yamlWARNING: tried to configure 2 hugepages for socket 0, but result is: 1The ports are bound/configured.Starting TRex v3.04 please wait ...EAL: FATAL: Cannot get hugepage information.EAL: Cannot get hugepage information. You might need to run ./trex-cfg onceEAL: Error - exiting with code: 1 Cause: Invalid EAL arguments è®¾ç½® 1024 ä¸ª 2048kB å¤§é¡µï¼Œå³å†™å…¥ 1024 åˆ° hugepages-2048kB ä¸‹çš„ nr_hugepages æ–‡ä»¶ï¼ˆåˆå§‹ä¸º 0ï¼‰ 12root@ubuntu:/opt/trex/v3.05# echo 1024 | tee /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages1024 é‡æ–°è¿è¡Œï¼Œå³å¯æ­£å¸¸ å‚è€ƒé“¾æ¥https://trex-tgn.cisco.com https://blog.csdn.net/shaoyunzhe/article/details/132344878 https://www.youtube.com/watch?v=ginboH5cCyA","categories":[],"tags":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/tags/DPDK/"},{"name":"TRex","slug":"TRex","permalink":"https://gy23333.github.io/tags/TRex/"}]},{"title":"æ—¥è¯­è¯­æ³•","slug":"æ—¥è¯­è¯­æ³•","date":"2024-04-13T18:08:41.000Z","updated":"2025-10-28T15:09:14.677Z","comments":true,"path":"2024/04/14/æ—¥è¯­è¯­æ³•/","link":"","permalink":"https://gy23333.github.io/2024/04/14/%E6%97%A5%E8%AF%AD%E8%AF%AD%E6%B3%95/","excerpt":"æ—¥è¯­å­¦ä¹ è®°å½•","text":"æ—¥è¯­å­¦ä¹ è®°å½• åŠ¨è¯åˆ†ç±»ä¸€ç±»åŠ¨è¯ï¼ˆäº”æ®µåŠ¨è¯ï¼‰ ã†æ®µéã‚‹ æ›¸ãï¼ˆã‹ãï¼‰ã€æ¢ã™ï¼ˆã•ãŒã™ï¼‰ã€å‹ã¤ï¼ˆã‹ã¤ï¼‰ ã‚æ®µ+ã‚‹ã€ã†æ®µ+ã‚‹ã€ãŠæ®µ+ã‚‹ å›°ã‚‹ï¼ˆã“ã¾ã‚‹ï¼‰ã€æ€’ã‚‹ï¼ˆãŠã“ã‚‹ï¼‰ã€ã‚„ã‚‹ ç‰¹ä¾‹ åˆ‡ã‚‹ï¼ˆãã‚‹ï¼‰ã€å¸°ã‚‹ï¼ˆã‹ãˆã‚‹ï¼‰ã€èµ°ã‚‹ï¼ˆã¯ã—ã‚‹ï¼‰ äºŒç±»åŠ¨è¯ ã„æ®µ+ã‚‹ èµ·ãã‚‹ï¼ˆãŠãã‚‹ï¼‰ ãˆæ®µ+ã‚‹ é£Ÿã¹ã‚‹ï¼ˆãŸã¹ã‚‹ï¼‰ ä¸‰ç±»åŠ¨è¯ æ¥ã‚‹ï¼ˆãã‚‹ï¼‰ å ï¼‹ ã™ã‚‹ å‹‰å¼·ã™ã‚‹ ã¦å½¢ä¸€ç±» ã†ã€ã¤ã€ã‚‹ â†’ ã£ã¦ è²·ã† â†’ è²·ã£ã¦ ç«‹ã¤ â†’ ç«‹ã£ã¦ æ­¢ã¾ã‚‹ â†’ æ­¢ã¾ã£ã¦ ã‚€ã€ã¶ã€ã¬ â†’ ã‚“ã§ ä½ã‚€ â†’ ä½ã‚“ã§ éŠã¶ â†’ éŠã‚“ã§ æ­»ã¬ â†’ æ­»ã‚“ã§ ã â†’ ã„ã¦ æ³£ã â†’ æ³£ã„ã¦ ã â†’ ã„ã§ æ³³ã â†’ æ³³ã„ã§ ã™ â†’ ã—ã¦ è©±ã™ â†’ è©±ã—ã¦ äºŒç±» å» ã‚‹ + ã¦ é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ã¦ ä¸‰ç±» æ¥ã‚‹ â†’ æ¥ã¦ï¼ˆãã¦ï¼‰ ã™ã‚‹ â†’ ã—ã¦ ãŸå½¢ã¦å½¢ ã¦ â†’ ãŸ ã§ â†’ ã  ã¾ã™å½¢ä¸€ç±» ã†æ®µ â†’ ã„æ®µ + ã¾ã™ æ›¸ã â†’ æ›¸ãã¾ã™ å›°ã‚‹ â†’ å›°ã‚Šã¾ã™ åˆ‡ã‚‹ â†’ åˆ‡ã‚Šã¾ã™ äºŒç±» å» ã‚‹ + ã¾ã™ èµ·ãã‚‹ â†’ èµ·ãã¾ã™ é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ã¾ã™ ä¸‰ç±» æ¥ã‚‹ â†’ ãã¾ã™ ã™ã‚‹ â†’ ã—ã¾ã™ å‹‰å¼·ã™ã‚‹ â†’ å‹‰å¼·ã—ã¾ã™ è¿ç”¨å½¢ã¾ã™å½¢ å»æ‰ ã€Œã¾ã™ã€ ãªã„å½¢è¡¨å¦å®šï¼Œå¯ä»¥å°†ã€Œãªã„ã€æ¢ã€Œãšã€ï¼Œæ¯”å¦‚ã€Œæ›¸ã‹ãšã€ ä¸€ç±» ã†æ®µ â†’ ã‚æ®µ + ãªã„ æ›¸ã â†’ æ›¸ã‹ãªã„ å›°ã‚‹ â†’ å›°ã‚‰ãªã„ åˆ‡ã‚‹ â†’ åˆ‡ã‚‰ãªã„ äºŒç±» å» ã‚‹ + ãªã„ èµ·ãã‚‹ â†’ èµ·ããªã„ é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ãªã„ ä¸‰ç±» æ¥ã‚‹ â†’ æ¥ãªã„ï¼ˆã“ãªã„ï¼‰ ã™ã‚‹ â†’ ã—ãªã„ å‹‰å¼·ã™ã‚‹ â†’ å‹‰å¼·ã—ãªã„ å‡å®šå½¢åˆç§° ã° å½¢ï¼Œå‡å®šå½¢ + ã° è¡¨ç¤ºâ€œå¦‚æœâ€¦.â€ ä¸€ç±» ã†æ®µ â†’ ãˆæ®µ æ›¸ã â†’ æ›¸ã‘ã° åˆ‡ã‚‹ â†’ åˆ‡ã‚Œã° äºŒç±» å» ã‚‹ é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ã° è¦‹ã‚‹ â†’ è¦‹ã° ä¸‰ç±» æ¥ã‚‹ â†’ æ¥ï¼ˆãã‚Œï¼‰ ã™ã‚‹ â†’ ã™ã‚Œ å‹‰å¼·ã™ã‚‹ ï¼ï¼ å‹‰å¼·ã™ã‚Œã° ä¾‹ï¼š å¼•ã‘ã°è¿½ã£ã¦ãã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªã‚“ã¦ ã€Œå¼•ã‘ã°ã€å¦‚æœé€€ç¼© å¯èƒ½å½¢åŠ¨è¯å¯èƒ½å½¢è¡¨ç¤ºèƒ½åŠ›ï¼Œå³â€œèƒ½â€¦â€ ä¸€ç±» ã†æ®µ â†’ ãˆæ®µ + ã‚‹ æ›¸ã â†’ æ›¸ã‘ã‚‹ åˆ‡ã‚‹ â†’ åˆ‡ã‚Œã‚‹ äºŒç±» å» ã‚‹ + ã‚‰ã‚Œã‚‹ é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ã‚‰ã‚Œã‚‹ è¦‹ã‚‹ â†’ è¦‹ã‚‰ã‚Œã‚‹ ä¸‰ç±» æ¥ã‚‹ â†’ æ¥ã‚‰ã‚Œã‚‹ï¼ˆã“ã‚‰ã‚Œã‚‹ï¼‰ ã™ã‚‹ â†’ ã§ãã‚‹ å‹‰å¼·ã™ã‚‹ ï¼ï¼ å‹‰å¼·ã§ãã‚‹ ä¾‹ï¼š ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼é–¢ä¿‚ã‚’çµã¹ã‚‹æ™‚ãŒæ¥ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ è¢«åŠ¨å½¢ä¸€ç±» ã†æ®µ â†’ ã‚æ®µ + ã‚Œã‚‹ æ›¸ã â†’ æ›¸ã‹ã‚Œã‚‹ æ€’ã‚‹ â†’ æ€’ã‚‰ã‚Œã‚‹ åˆ‡ã‚‹ â†’ åˆ‡ã‚‰ã‚Œã‚‹ äºŒç±» å» ã‚‹ + ã‚‰ã‚Œã‚‹ ï¼ˆä¸å¯èƒ½å½¢ç›¸åŒï¼‰ é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ã‚‰ã‚Œã‚‹ è¦‹ã‚‹ â†’ è¦‹ã‚‰ã‚Œã‚‹ ä¸‰ç±» æ¥ã‚‹ â†’ æ¥ã‚‰ã‚Œã‚‹ï¼ˆã“ã‚‰ã‚Œã‚‹ï¼‰ ã™ã‚‹ â†’ ã•ã‚Œã‚‹ å‹‰å¼·ã™ã‚‹ â†’ å‹‰å¼·ã•ã‚Œã‚‹ å¥å‹ï¼š ã€Œå—å®³è€…ã€ãŒï¼ã¯ ã€ŒåŠ å®³è€…ã€ã« ã€Œæ‰€å±ç‰©ã€ã‚’ åŠ¨è¯è¢«åŠ¨å½¢ ä¾‹ï¼š ä¿ºãŒä¸­ï¼“ã®é ƒå½¼ã«å‘Šç™½ã•ã‚ŒãŸã“ã¨ãŒã‚ã‚‹ã€‚ï¼ˆæˆ‘è¢«ä»–å‘Šç™½è¿‡ï¼‰ ä½¿å½¹å½¢è®©æŸäººåšæŸäº‹ ä¸€ç±» ã†æ®µ â†’ ã‚æ®µ + ã›ã‚‹ æ›¸ã â†’ æ›¸ã‹ã›ã‚‹ æ€’ã‚‹ â†’ æ€’ã‚‰ã›ã‚‹ åˆ‡ã‚‹ â†’ åˆ‡ã‚‰ã›ã‚‹ äºŒç±» å» ã‚‹ + ã•ã›ã‚‹ é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ã•ã›ã‚‹ è¦‹ã‚‹ â†’ è¦‹ã•ã›ã‚‹ ä¸‰ç±» æ¥ã‚‹ â†’ æ¥ã•ã›ã‚‹ï¼ˆã“ã•ã›ã‚‹ï¼‰ ã™ã‚‹ â†’ ã•ã›ã‚‹ å‹‰å¼·ã™ã‚‹ â†’ å‹‰å¼·ã•ã›ã‚‹ å¥å‹ï¼š ã€Œä½¿å½¹è€…ã€ ã¯ ã€Œè¢«ä½¿å½¹è€…ã€ ã« ã€Œå®¾è¯­ã€ ã‚’ ä½¿å½¹åŠ¨è¯ ä¾‹ï¼š è¢«åŠ¨ä½¿å½¹åŠ¨è¯ ä½¿å½¹å½¢ + è¢«åŠ¨å½¢ï¼Œè¡¨ç¤ºâ€œè¢«è¿«åšæŸäº‹â€ ä¸€ç±» ã†æ®µ â†’ ã‚æ®µ + ã›ã‚‹ï¼ˆä½¿å½¹å½¢ï¼‰â†’ ã‚æ®µ + ã›ã‚‰ã‚Œã‚‹ï¼ˆè¢«åŠ¨ä½¿å½¹åŠ¨è¯ï¼‰â†’ ã‚æ®µ + ã•ã‚Œã‚‹ï¼ˆè¢«åŠ¨ä½¿å½¹åŠ¨è¯ã€å£è¯­ã€‘ï¼‰ æ›¸ã â†’ æ›¸ã‹ã›ã‚‰ã‚Œã‚‹ â†’ æ›¸ã‹ã•ã‚Œã‚‹ æ€’ã‚‹ â†’ æ€’ã‚‰ã›ã‚‰ã‚Œã‚‹ â†’ æ€’ã‚‰ã•ã‚Œã‚‹ åˆ‡ã‚‹ â†’ åˆ‡ã‚‰ã›ã‚‰ã‚Œã‚‹ â†’ åˆ‡ã‚‰ã•ã‚Œã‚‹ äºŒç±» å» ã‚‹ + ã•ã›ã‚‹ï¼ˆä½¿å½¹å½¢ï¼‰â†’ å» ã‚‹ + ã•ã›ã‚‰ã‚Œã‚‹ï¼ˆè¢«åŠ¨ä½¿å½¹åŠ¨è¯ï¼‰ é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ã•ã›ã‚‰ã‚Œã‚‹ è¦‹ã‚‹ â†’ è¦‹ã‚‰ã•ã›ã‚‰ã‚Œã‚‹ ä¸‰ç±» æ¥ã‚‹ â†’ æ¥ã•ã›ã‚‰ã‚Œã‚‹ï¼ˆæ¥ã•ã›ã‚‰ã‚Œã‚‹ï¼‰ ã™ã‚‹ â†’ ã•ã›ã‚‰ã‚Œã‚‹ å‹‰å¼·ã™ã‚‹ â†’ å‹‰å¼·ã•ã›ã‚‰ã‚Œã‚‹ ä¾‹ï¼š è¨€ã‚ã•ã‚Œã¦ã‚‹æ„ŸåŠç«¯ãªã„ æ—¶æ€ä»¥åŠè‚¯å¦å®šä¸€èˆ¬ç°åœ¨ï¼šã¾ã™ ä¸€èˆ¬ç°åœ¨ï¼ˆå¦ï¼‰ï¼šã¾ã›ã‚“ è¿‡å»ï¼šã¾ã—ãŸ è¿‡å»ï¼ˆå¦ï¼‰ï¼šã¾ã›ã‚“ã§ã—ãŸ å½¢å®¹è¯åˆ†ç±»ä¸€ç±»å½¢å®¹è¯ ã„ ç»“å°¾ æ±‰å­— ï¼‹ ã„ å¯’ã„ã€æš–ã‹ã„ äºŒç±»å½¢å®¹è¯ æ±‰å­— è³‘ã‚„ã‹ ç¶ºéº—ï¼ˆãã‚Œã„ï¼‰ æ—¶æ€ä¸€ç±»ç°åœ¨è‚¯å®šï¼šXX ã„ ä»Šæ—¥ã¯æš‘ã„ã§ã™ ç°åœ¨å¦å®šï¼šã„ â†’ ããªã„ æˆ– XX ã ã‚ã‚Šã¾ã›ã‚“ ä»Šæ—¥ã¯æš‘ããªã„ã§ã™ ä»Šæ—¥ã¯æš‘ãã‚ã‚Šã¾ã›ã‚“ è¿‡å»è‚¯å®šï¼šã„ â†’ ã‹ã£ãŸ æ˜¨æ—¥ã¯æš‘ã‹ã£ãŸã§ã™ è¿‡å»å¦å®šï¼šã„ â†’ ããªã‹ã£ãŸ æˆ– ã ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ æ˜¨æ—¥ã¯æš‘ããªã‹ã£ãŸã§ã™ ä¸€ç±»å½¢å®¹è¯ åè¯ äºŒç±»ç°åœ¨è‚¯å®šï¼šäºŒç±»å½¢å®¹è¯ ï¼‹ ã§ã™ è¿‡å»è‚¯å®šï¼šäºŒç±»å½¢å®¹è¯ ï¼‹ ã§ã—ãŸ å¦å®šï¼šäºŒç±»å½¢å®¹è¯ ï¼‹ ã§ã¯ã‚ã‚Šã¾ã›ã‚“ è¿‡å»å¦å®šï¼šäºŒç±»å½¢å®¹è¯ ï¼‹ ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ äºŒç±»å½¢å®¹è¯ ãª åè¯ ã€œã‚å½¢å®¹è¯è¯å¹² ï¼‹ ã€Œã‚ã€ è¡¨ç¤ºâ€œç¨å¾®Â·Â·Â·Â·Â·Â·â€ ã„å½¢å®¹è¯ï¼šå»æ‰ã€Œã„ã€ + ã€Œã‚ã€ é«˜ã„ï¼ˆé«˜ï¼‰ â†’ é«˜ã‚ï¼ˆç¨é«˜ï¼‰ ç”˜ã„ï¼ˆç”œï¼‰ â†’ ç”˜ã‚ï¼ˆåç”œï¼‰ ãªå½¢å®¹è¯ï¼šç›´æ¥ + ã€Œã‚ã€ ãã‚Œã„ï¼ˆæ¼‚äº®ï¼‰ â†’ ãã‚Œã„ã‚ï¼ˆç¨æ¼‚äº®ï¼‰ å®‰é™ï¼ˆå®‰é™ï¼‰ â†’ å®‰é™ã‚ï¼ˆè¾ƒä¸ºå®‰é™ï¼‰ æ³¨æ„ï¼š ä¸å¯æ¥æ‰€æœ‰å½¢å®¹è¯ï¼š ä¸»è¦æ¥ç»­å±æ€§å½¢å®¹è¯ï¼ˆå¦‚å¤§å°ã€å‘³é“ã€é€Ÿåº¦ç­‰ï¼‰ï¼Œä¸æ¥æƒ…æ„Ÿå½¢å®¹è¯ï¼š âŒ æ‚²ã—ã‚ï¼ˆÃ—ï¼‰ â†’ å¯ç”¨ã€Œå°‘ã—æ‚²ã—ã„ã€ âŒ ã†ã‚Œã—ã‚ï¼ˆÃ—ï¼‰ åè¯åŒ–ç”¨æ³•ï¼š å¯ååŠ ã€Œã®ã€ä¿®é¥°åè¯ï¼š ã¬ã‚‹ã‚ã®ç™½æ¹¯ï¼ˆç¨æ¸©çš„ç™½å¼€æ°´ ï¼‰ è¯­æ³•å ´æ‰€ ã«ãƒ»ã§ãƒ»ã‚’ãƒ»ã¸ãƒ»ã‹ã‚‰ãƒ»ã¾ã§ åŠ©è¯ æ ¸å¿ƒåŠŸèƒ½ ä¸­æ–‡è¿‘ä¼¼ä¹‰ ä¾‹å¥ï¼ˆå ´æ‰€ï¼šå…¬åœ’ï¼‰ ã« å­˜åœ¨ç‚¹ã€ç€ç‚¹ï¼ˆé™æ€ï¼‰ åœ¨ï¼ˆæŸåœ°å­˜åœ¨ï¼‰ã€åˆ°ï¼ˆæŸåœ°å»ï¼‰ å…¬åœ’ã« ã„ã‚‹ã€‚ï¼ˆåœ¨å…¬å›­ã€‚ï¼‰ ã§ åŠ¨ä½œå‘ç”Ÿçš„åœ°ç‚¹ï¼ˆåŠ¨æ€ï¼‰ åœ¨ï¼ˆæŸåœ°åšï¼‰ å…¬åœ’ã§ éŠã¶ã€‚ï¼ˆåœ¨å…¬å›­ç©è€ã€‚ï¼‰ ã‚’ ç§»åŠ¨ç»è¿‡æˆ–ç¦»å¼€çš„åœºæ‰€ï¼ˆåŠ¨æ€ï¼‰ ç»è¿‡ã€ç¦»å¼€ã€åœ¨ï¼ˆç©¿è¶Šï¼‰ å…¬åœ’ã‚’ æ•£æ­©ã™ã‚‹ã€‚ï¼ˆåœ¨å…¬å›­é‡Œæ•£æ­¥ã€‚ï¼‰ ã¸ ç§»åŠ¨çš„æ–¹å‘ï¼ˆåŠ¨æ€ï¼‰ å¾€ã€å‘ å…¬åœ’ã¸ è¡Œãã€‚ï¼ˆå»å…¬å›­ã€‚ï¼‰ ã‹ã‚‰ èµ·ç‚¹ ä»ã€ç”± å…¬åœ’ã‹ã‚‰ æ¥ãŸã€‚ï¼ˆä»å…¬å›­æ¥çš„ã€‚ï¼‰ ã¾ã§ ç»ˆç‚¹ åˆ° å…¬åœ’ã¾ã§ èµ°ã‚‹ã€‚ï¼ˆè·‘åˆ°å…¬å›­ã€‚ï¼‰ A ã¯ B ã§ã™ A ã¯ B ã§ã¯ ã‚ã‚Šã¾ã›ã‚“ ã˜ã‚ƒ ã‚ã‚Šã¾ã›ã‚“ A ã¯ B ã§ã™ã‹ A ã® B å ´æ‰€ ã« ä½• ãŒ ã‚ã‚Šãªã™ å ´æ‰€ ã« èª° ãŒ ã„ã¾ã™ ä½• ã¯ å ´æ‰€ ã« ã‚ã‚Šã¾ã™ èª° ã¯ å ´æ‰€ ã« ã„ã¾ã™ å ´æ‰€ ã« ä½• ã‚‚ ã‚ã‚Šã¾ã›ã‚“ å ´æ‰€ ã« èª° ã‚‚ ã„ã¾ã›ã‚“ å ´æ‰€ ã¸ è¡Œãã¾ã™ å ´æ‰€ã€Œæ™‚é–“ã€ ã‹ã‚‰ã€å ´æ‰€ã€Œæ™‚é–“ã€ ã¾ã§ è»Š ã§ è¡Œãã¾ã™ ä½•ã‚’ ä»–åŠ¨è¯åŠ¨ä½œå¯¹è±¡ + ã‚’ ã”é£¯ã‚’é£Ÿã¹ã‚‹ å ´æ‰€ã§ åŠ¨è¯åœ¨æŸåœ°åšæŸäº‹ å›³æ›¸é¤¨ã§å‹‰å¼·ã™ã‚‹ Aã‹ BA æˆ– B ä¼‘ã¿ã¯åœŸæ›œæ—¥ã‹æœˆæ›œæ—¥ã§ã™ æ‰‹æ®µ/åŸæ–™ã§ åŠ¨è¯ æ—¥æœ¬èªã§æ‰‹ç´™ã‚’æ›¸ãã¾ã™ èª°ã« ä½•ã‚’ ã‚ã’ã¾ã™ç»™æŸäºº æ£®ã•ã‚“ã«ãŠåœŸç”£ã‚’ã‚ã’ã¾ã—ãŸ èª°ã«ãƒ»ã‹ã‚‰ ä½•ã‚’ ã‚‚ã‚‰ã„ã¾ã™ä»æŸäººé‚£é‡Œå¾—å€’ æ£®ã•ã‚“ã«ãŠåœŸç”£ã‚’ã‚‚ã‚‰ã„ã¾ã—ãŸ æ£®ã•ã‚“ã‹ã‚‰ãŠåœŸç”£ã‚’ã‚‚ã‚‰ã„ã¾ã—ãŸ èª°ã« ä¼šã„ã¾ã™è§è° æ£®ã•ã‚“ã«é§…ã§ä¼šã„ã¾ã—ãŸ ä½•ãŒ å¥½ãã§ã™ æƒ…æ„Ÿçš„å¯¹è±¡åé¢åŠ  ãŒ å¥½ãã€å«Œã„ã€æ€–ã„ æ£®ã•ã‚“ã¯æ˜ ç”»ãŒå¥½ãã§ã™ èƒ½åŠ›çš„å¯¹è±¡åé¢åŠ  ãŒ åˆ†ã‹ã‚Šã¾ã™ã€ã§ãã¾ã™ã€è‹¦æ‰‹ã§ã™ã€ä¸Šæ‰‹ã§ã™ æ£®ã•ã‚“ã¯æ–™ç†ãŒè‹¦æ‰‹ã§ã™ åã‚„ åï¼ˆãªã©ï¼‰æ¯”å¦‚ä»€ä¹ˆã€ä»€ä¹ˆ æ£®ã•ã‚“ã¯ãƒ“ãƒ¼ãƒ«ãƒ¼ã‚„ãŠèŒ¶ãªã©ãŒå¥½ãã§ã™ å¥å‹ã€œã—ã‹ã€œãªã„åªå¯¹ï½æ€ä¹ˆæ ·ï¼Œè™½ç„¶æœ‰ ã€Œãªã„ã€ä½†å®é™…ä¸Šæ˜¯è¡¨ç¤ºåªå¯¹ç‰¹å®šäº‹ç‰©è‚¯å®š ä¾‹ï¼š å……ã®Domæ€§ã¯ä¿ºã«ã—ã‹åå¿œã—ãªã„ åªå¯¹ã€Œä¿ºã€æœ‰ååº”ï¼Œå¯¹å…¶ä»–äººæ²¡æœ‰ ã“ã‚Œä»¥ä¸Šã€œãªã„ä¸èƒ½å†æ€ä¹ˆæ · ã€œã¦ã—ã¾ã†è¡¨ç¤ºåŠ¨ä½œå·²ç»å®Œæˆï¼Œå¸¦æœ‰é—æ†¾ã€æ‚”æ„ã€æ— å¯æŒ½å›ã€ç³Ÿç³•çš„æ„Ÿæƒ… ä¾‹ï¼š å¼•ã„ãŸã‚‰ã‚ãˆãªãæ¶ˆæ»…ã—ã¦ã—ã¾ã£ãŸ åˆšä¸€é€€ç¼©ï¼Œå°±è½»æ˜“åœ°æ¶ˆå¤±ä¸è§äº† ã€œã¦ãã‚Œã‚‹ä»–äººä¸ºè‡ªå·±åšæŸäº‹ ä¾‹ï¼š å¼•ã‘ã°è¿½ã£ã¦ãã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªã‚“ã¦ ã€Œå¼•ã‘ã°ã€å¦‚æœé€€ç¼©ï¼Œå‡å®šå½¢ã€Œå¼•ã‘ã€ï¼‹ã° ã€Œè¿½ã£ã¦ãã‚Œã‚‹ã€æ¥è¿½æˆ‘ ã€Œã‚“ã˜ã‚ƒãªã„ã‹ã€ ã€Œã®ã§ã¯ãªã„ã‹ã€çš„å£è¯­ ä¼šä¸ä¼šâ€¦å‘¢ï¼Ÿ ã€Œãªã‚“ã¦ã€ä¹‹ç±»çš„ åŠ¨è¯è¿ç”¨å½¢ ï¼‹ ã‹ã‘ã‚‹å·®ä¸€ç‚¹å°±â€¦. ä¾‹ï¼š çš¿è½ã¨ã—ã‹ã‘ã‚‹ã¨ã‹ãƒ‰ã‚¸ã£å­ã‹ã‚ˆãª å·®ç‚¹å°±æ‘”äº†ç›˜å­ï¼ŒçœŸæ˜¯ä¸ªå†’å¤±é¬¼å•Š ã€Œè½ã¨ã—ã‹ãˆã‚‹ã€ ã€Œè½ã¨ã—ã€æ˜¯ ã€Œè½ã¨ã™ã€çš„è¿ç”¨å½¢ å·®ä¸€ç‚¹å°±æ‘”äº† ã€œã§ã‚ã‚‹ä¹¦é¢è¯­çš„ â€œæ˜¯â€¦..â€ ä¾‹ï¼š çªç„¶ã ãŒã€ä¿ºã¯ã‚²ã‚¤ã§ã‚ã‚‹ ï½ã¦ããŸè¡¨ç¤ºä»è¿‡å»ä¸€ç›´æŒç»­åˆ°ç°åœ¨ ä¾‹ï¼š äººã€…ã¯å¤ä»£ã‚ˆã‚Šç•ªã‚’æ±‚ã‚äº‰ã£ã¦ããŸ ã€Œã‚ˆã‚Šã€ç±»ä¼¼äºã€Œã‹ã‚‰ã€ï¼Œä»Â·Â·Â·Â·ä»¥æ¥","categories":[],"tags":[]},{"title":"DPDK","slug":"DPDK","date":"2024-01-14T16:47:35.000Z","updated":"2025-04-13T18:06:03.190Z","comments":true,"path":"2024/01/15/DPDK/","link":"","permalink":"https://gy23333.github.io/2024/01/15/DPDK/","excerpt":"DPDK å­¦ä¹ ","text":"DPDK å­¦ä¹  DPDK æ¦‚è¿°åŒ…å¤„ç†åŸºäºç³»ç»Ÿæ˜¯ç½‘ç»œç»ˆç«¯è¿˜æ˜¯ä¸­é—´ä»¶ï¼ŒåŒ…å¤„ç†ä¼šæœ‰ä¸åŒçš„èŒƒå›´ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒåŒ…å«äº†åŒ…çš„æ¥æ”¶å’Œä¼ è¾“ã€åŒ…å¤´çš„è§£æã€åŒ…çš„ä¿®æ”¹ä»¥åŠè½¬å‘ï¼Œè¿™äº›æ­¥éª¤å‘ç”Ÿåœ¨å¤šä¸ªåä¹‰å±‚ã€‚ å¯¹äºç½‘ç»œç»ˆç«¯ï¼ŒåŒ…ä¼šå‘ç»™æœ¬åœ°åº”ç”¨è¿›è¡Œæ›´å¤šçš„å¤„ç†ï¼Œå¦‚åŒ…çš„åŠ è§£å¯†ã€éš§é“è¦†ç›–ï¼Œè¿™äº›éƒ½å¯èƒ½æ˜¯åŒ…å¤„ç†ã€ä¼šè¯å»ºç«‹åŠç»“æŸçš„ä¸€éƒ¨åˆ†ã€‚ å¯¹äºä¸­é—´ä»¶ï¼ŒåŒ…ä¼šè¢«è½¬å‘ç»™ç½‘ç»œä¸­çš„ä¸‹ä¸€è·³ã€‚ä¸€èˆ¬è¿™ç§ç³»ç»Ÿéœ€è¦å¤„ç†å¤§é‡çš„è¿›å‡ºæ•°æ®åŒ…ï¼ŒåŠŸèƒ½åŒ…æ‹¬åŒ…æŸ¥è¯¢ã€è®¿é—®æ§åˆ¶ã€QoS ç­‰ç­‰ã€‚ ä¼ ç»ŸåŒ…å¤„ç†åœ¨ DPDK å‰ï¼ŒLinux ä¸€èˆ¬çš„ç½‘å¡åŒ…å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š åŒ…çš„æ•°æ®å¸§æŠµè¾¾ç½‘å¡ ç½‘å¡æŠŠåŒ…çš„å¸§ä»¥ DMAï¼ˆDirect Memory Accessï¼‰çš„æ–¹å¼å†™åˆ°å†…å­˜ ç½‘å¡ç¡¬ä¸­æ–­é€šçŸ¥ CPU æœ‰åŒ…åˆ°è¾¾ CPU å“åº”ç¡¬ä¸­æ–­ï¼Œç®€å•å¤„ç†åï¼Œå‘å‡ºè½¯ä¸­æ–­ï¼Œå°½é‡å¿«é€Ÿé‡Šæ”¾ CPU èµ„æº ksoftirqd å†…æ ¸çº¿ç¨‹æ£€æµ‹åˆ°è½¯ä¸­æ–­åï¼Œè°ƒç”¨ç½‘å¡é©±åŠ¨æ³¨å†Œçš„ poll å‡½æ•°å¼€å§‹è½®è¯¢æ”¶åŒ… å¸§ä» RingBuffer æ‘˜ä¸‹ï¼Œæ”¶åˆ°çš„åŒ…äº¤ç»™ Linux å†…æ ¸çš„å„ä¸ªåè®®æ ˆå¤„ç† å¦‚æœæœ€ç»ˆæ”¶åŒ…çš„åº”ç”¨åœ¨ç”¨æˆ·æ€ï¼ŒåŒ…ä¸­çš„ä¿¡æ¯ä¼šä»å†…æ ¸æ€æ‹·è´åˆ°ç”¨æˆ·æ€ å¦‚æœæœ€ç»ˆæ”¶åŒ…çš„åº”ç”¨åœ¨å†…æ ¸æ€ï¼ŒåŒ…ä¸­çš„ä¿¡æ¯ç›´æ¥åœ¨å†…æ ¸æ€è¢«å¤„ç† åœ¨ä¸Šè¿°åŒ…å¤„ç†è¿‡ç¨‹ä¸­ï¼ŒLinux é‡‡ç”¨äº† NAPI å’Œ Netmapä¸¤ä¸ªæœºåˆ¶æ¥åŠ å¿«åŒ…å¤„ç†è¿‡ç¨‹ NAPI å³è½®è¯¢æ”¶åŒ…ï¼Œä¸€æ¬¡å¤„ç†å¤šä¸ªæ•°æ®åŒ…ï¼Œå¤„ç†ç»“æŸåï¼Œå†å›åˆ°ä¸­æ–­çŠ¶æ€ Netmap åˆ™æ˜¯æ•°æ®åŒ…é€šè¿‡å…±äº«æ± çš„æ–¹å¼ï¼Œå‡å°‘åŒ…ä»å†…æ ¸æ€åˆ°ç”¨æˆ·æ€çš„å¤åˆ¶ ä½†è¿™ä¾æ—§ä¸å¤Ÿï¼Œå¦‚ä½•ä½¿åŒ…å¤„ç†æ€§èƒ½æ›´å¼ºï¼Ÿå¾…è§£å†³çš„é—®é¢˜å¦‚ä¸‹ï¼š Linux åŒ…å¤„ç†è¿‡ç¨‹éœ€è¦åœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€ä¹‹é—´è½¬æ¢ï¼Œä»»åŠ¡åˆ‡æ¢ã€cache æ›¿æ¢ç­‰éƒ½ä¼šå¸¦æ¥ä¸å°çš„å¼€é”€ éšç€ CPU æ ¸æ•°è¶Šæ¥è¶Šå¤šï¼Œæ—©æœŸä¸ºäº†é€‚åº” CPU æ ¸æ•°è¾ƒå°‘çš„åˆ†æ—¶è°ƒåº¦æœºåˆ¶é™åˆ¶äº†å¤„ç†æ€§èƒ½ ç”±ä¸Šè¿°é—®é¢˜ï¼ŒæœŸæœ›çš„åŒ…å¤„ç†æ¡†æ¶åº”å…·æœ‰å¦‚ä¸‹èƒ½åŠ›ï¼š ä¸€ä¸ªè½¯ä»¶æ–¹å¼å¯ä»¥åœ¨ x86 CPU è¿›è¡ŒåŒ…å¤„ç† è‡ªå®šä¹‰åŒ…å¤„ç† èƒ½ä½¿ç”¨å¤šæ ¸æ¶æ„ï¼Œå…·æœ‰é«˜æ€§èƒ½ å°†ä¸€èˆ¬çš„ Linux ç³»ç»Ÿè°ƒæ•™ä¸ºåŒ…å¤„ç†ç¯å¢ƒ DPDK ç‰¹æ€§DPDK å°±æ˜¯å›åº”ä¸Šè¿°æœŸå¾…çš„åŒ…å¤„ç†æŠ€æœ¯ï¼ŒDPDK æ‹¥æœ‰ä¸‹é¢è¿™äº›ç‰¹æ€§ï¼š è½®è¯¢ ä¸ºç½‘å¡çš„æ”¶å‘åŒ…åˆ†é…ç‹¬ç«‹çš„æ ¸ï¼Œä¸éœ€è¦ä¸å…¶ä»–ä»»åŠ¡å…±äº«æ ¸ï¼Œå› æ­¤è¯¥ç±»æ ¸å¯ä»¥æ— é™å¾ªç¯åœ°æ£€æŸ¥æ˜¯å¦æœ‰åŒ…åˆ°è¾¾ä»¥åŠæ˜¯å¦éœ€è¦å‘é€åŒ… è¯¥æ–¹æ³•å‡å°‘äº†ä¸­æ–­æœåŠ¡å¯¼è‡´çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ç­‰å¼€é”€ ç”¨æˆ·æ€é©±åŠ¨ åœ¨å¤§å¤šæ•°æœŸé—´ä¸‹ï¼ŒåŒ…æœ€åéƒ½ä¼šè¢«å‘åˆ°ç”¨æˆ·æ€ï¼Œä½† Linux ç½‘å¡é©±åŠ¨åœ¨å†…æ ¸æ€ ç”¨æˆ·æ€é©±åŠ¨å¯ä»¥é¿å…åŒ…ä»å†…æ ¸æ€åˆ°ç”¨æˆ·æ€ä¸å¿…è¦çš„å†…å­˜æ‹·è´ï¼Œå¹¶é¿å…ç³»ç»Ÿè°ƒç”¨å¼€é”€ ç”¨æˆ·é©±åŠ¨æ›´åŠ çµæ´»ï¼Œå¯è‡ªå®šä¹‰ï¼Œä¸å—é™äºå†…æ ¸ç°æœ‰çš„æ•°æ®æ ¼å¼ä¸è¡Œä¸ºå®šä¹‰ CPU äº²å’Œ DPDK è™½ç„¶å·¥ä½œåœ¨ç”¨æˆ·æ€ï¼Œä½†çº¿ç¨‹è°ƒåº¦ä¾æ—§ä¾èµ–å†…æ ¸ çº¿ç¨‹åœ¨ä¸åŒçš„æ ¸é—´åˆ‡æ¢ï¼Œç”±äºç¼“å­˜æœªå‘½ä¸­å’Œç¼“å­˜å†™å›ï¼Œä¼šå¯¼è‡´æ€§èƒ½çš„ä¸‹é™ åŒä¸€æ ¸å†…ä¸åŒä»»åŠ¡åˆ‡æ¢ï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½éœ€è¦ä¿å­˜å½“å‰çŠ¶æ€å¯„å­˜å™¨åˆ°å †æ ˆä¸­ï¼Œå¹¶æ¢å¤åˆ‡æ¢åçš„è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¸¦æ¥äº†é¢å¤–çš„å¼€é”€ CPU äº²å’Œï¼Œå³å°†è¿›ç¨‹æˆ–çº¿ç¨‹ç»‘å®šåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å®šçš„ CPUï¼Œè¿›ä¸€æ­¥å¯ç‹¬å è¯¥æ ¸ï¼Œè€Œä¸ä¼šè¿ç§»åˆ°å…¶ä»–æ ¸ å¦‚æ­¤ï¼Œç‹¬å å›ºå®šçš„æ ¸è¿è¡Œ DPDKï¼Œæ—¢é¿å…äº†æ ¸ä¹‹é—´çš„åˆ‡æ¢ï¼Œæé«˜äº†ç¼“å­˜å‘½ä¸­ç‡ï¼Œåˆä½¿å¾—è¯¥æ ¸ä¸ç”¨é¢‘ç¹çš„è¿›è¡Œä»»åŠ¡åˆ‡æ¢ï¼Œå‡å°‘äº†ä»»åŠ¡åˆ‡æ¢çš„å¼€é”€ ä½è®¿å­˜å¼€é”€ åŒ…å¤„ç†å¤§é‡çš„ I/O éœ€è¦é¢‘ç¹åœ°è®¿å­˜ï¼Œéœ€è¦é™ä½è®¿å­˜å¸¦æ¥çš„å¼€é”€ å¦‚é‡‡ç”¨å¤§é¡µæŠ€æœ¯é™ä½ TLB miss è½¯ä»¶è°ƒä¼˜ ä¸€ç³»åˆ—è°ƒä¼˜æ–¹å¼ï¼Œå¦‚ cache line å¯¹é½ã€cache line å…±äº«ç­‰ç­‰ DPDK æ¡†æ¶ä¸‹é¢æ˜¯ DPDK çš„åŸºæœ¬æ¨¡å—ï¼Œä½œä¸ºå¼€å‘åŒ…å¤„ç†ç³»ç»Ÿçš„åŸºç¡€å±‚ï¼Œå¯ä»¥ç”¨è½¯ä»¶æ¨¡æ‹Ÿå¤§éƒ¨åˆ†çš„ç½‘ç»œåŠŸèƒ½ã€‚ åœ¨æœ€åº•éƒ¨çš„å†…æ ¸æ€æœ‰ä¸‰ä¸ªæ¨¡å— ï¼šKNIã€IGB_UIOã€VFIOï¼Œå…¶ä¸­ KNIï¼ŒKernel Network Interfaceï¼Œå†…æ ¸ç½‘ç»œæ¥å£ï¼Œæä¾› DPDK å’Œå†…æ ¸äº¤æ¢æŠ¥æ–‡çš„è§£å†³æ–¹æ¡ˆã€‚ KNI æ¨¡æ‹Ÿäº†ä¸€ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œæä¾› DPDK ä¸ Linux å†…æ ¸ä¹‹é—´é€šè®¯ï¼Œå…è®¸æŠ¥æ–‡è¢«ç”¨æˆ·æ€æ¥æ”¶åè½¬å‘åˆ° Linux å†…æ ¸åè®®æ ˆã€‚ IGB_UIOï¼Œé€šè¿‡ UIO æŠ€æœ¯ï¼Œåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­å°†ç½‘å¡ç¡¬ä»¶å¯„å­˜å™¨æ˜ å°„åˆ°ç”¨æˆ·æ€ã€‚ UIO æŠ€æœ¯æ˜¯ä¸€ç§ç”¨æˆ·æ€ I/O æ¡†æ¶ï¼Œæ”¯æŒå°†ç”¨æˆ·æ€é©±åŠ¨çš„å¾ˆå°‘ä¸€éƒ¨åˆ†è¿è¡Œåœ¨å†…æ ¸ç©ºé—´ï¼Œå¤§éƒ¨åˆ†åˆ™è¿è¡Œåœ¨ç”¨æˆ·ç©ºé—´ IGB_UIO åˆ™æ˜¯ UIO çš„ï¼Œå½¢æ€ä¸Šæ˜¯ä¸€ç§ç½‘å¡é©±åŠ¨ï¼Œç½‘å¡ç»‘å®š IGB_UIO é©±åŠ¨åï¼Œç›¸å½“äºéš”ç¦»äº†å†…æ ¸çš„ç½‘å¡é©±åŠ¨ï¼ŒåŒæ—¶ IGB_UIO è¿˜èƒ½å¤Ÿå®Œæˆç½‘å¡ä¸­æ–­å†…æ ¸æ€çš„åˆå§‹åŒ–ï¼Œå¹¶å°†ä¸­æ–­ä¿¡å·æ˜ å°„åˆ°ç”¨æˆ·æ€ VFIOï¼Œå¯ä»¥å®‰å…¨åœ°æŠŠè®¾å¤‡ I/Oã€ä¸­æ–­ã€DMA ç­‰æš´éœ²åˆ°ç”¨æˆ·ç©ºé—´ï¼Œä»è€Œå¯ä»¥åœ¨ç”¨æˆ·ç©ºé—´å®Œæˆè®¾å¤‡é©±åŠ¨çš„æ¶æ„ åœ¨ä¸Šå±‚çš„ç”¨æˆ·æ€ï¼ŒDPDKç”±å¾ˆå¤šåº“ç»„æˆï¼Œä¸»è¦åŒ…æ‹¬ï¼šæ ¸å¿ƒéƒ¨ä»¶åº“ï¼ˆCore Libsï¼‰ã€å¹³å°ç›¸å…³æ¨¡å—ï¼ˆplatformï¼‰ã€ç½‘å¡è½®è¯¢æ¨¡å¼é©±åŠ¨æ¨¡å—ï¼ˆPMD-natives &amp; virtualï¼‰ã€QoS åº“ã€æŠ¥æ–‡è½¬å‘åˆ†ç±»ç®—æ³•ï¼ˆclassify ç®—æ³•ï¼‰ç­‰å‡ å¤§ç±»ã€‚ æ ¸å¿ƒéƒ¨ä»¶åº“ï¼ˆCore Libsï¼‰ï¼šæä¾›ç¯å¢ƒæŠ½è±¡å±‚ï¼ˆEALï¼‰ã€å¤§é¡µå†…å­˜ã€ç¼“å­˜æ± ã€å®šæ—¶å™¨ä»¥åŠæ— é”ç¯ç­‰åŸºç¡€ç»„ä»¶ PMD åº“ï¼šæä¾›æ‰€æœ‰ç”¨æˆ·æ€é©±åŠ¨ï¼Œä»¥ä¾¿é€šè¿‡è½®è¯¢å’Œçº¿ç¨‹ç»‘å®šå¾—åˆ°é«˜ç½‘ç»œååé‡ã€‚æ”¯æŒå„ç§æœ¬åœ°æˆ–è€…è™šæ‹Ÿç½‘å¡ Classify åº“ï¼šæ”¯æŒç²¾ç¡®åŒ¹é…ï¼ˆexact matchï¼‰ã€æœ€é•¿åç¼€åŒ¹é…ï¼ˆLPMï¼Œlongest prefix matchï¼‰ã€é€šé…ç¬¦åŒ¹é…ï¼ˆACLï¼Œaccess control listï¼‰å’Œ cuckoo hash ç®—æ³•ï¼Œè¿™äº›ç®—æ³•ç”¨æ¥åŒ…å¤„ç†ä¸­çš„æŸ¥è¡¨æ“ä½œ åŠ é€Ÿå™¨ APIï¼šæ”¯æŒåŒ…å®‰å…¨ï¼ˆCryptoDevï¼‰ã€æ•°æ®å‹ç¼©ï¼ˆCompressionDevï¼‰å’Œç”¨äºå†…æ ¸é—´é€šä¿¡çš„äº‹ä»¶å»ºæ¨¡å™¨ï¼ˆEventDevï¼‰ QoS åº“ï¼šæä¾›ç½‘ç»œæœåŠ¡è´¨é‡ç›¸å…³ç»„ä»¶ï¼Œå¦‚é™é€Ÿï¼ˆMeterï¼‰å’Œè°ƒåº¦ï¼ˆSchedï¼‰ å¹³å°ç›¸å…³æ¨¡å—ï¼š POWERï¼šèƒ½è€—ç®¡ç†ï¼Œè¿è¡Œæ—¶è°ƒæ•´ CPU æ—¶é’Ÿé¢‘ç‡ï¼Œå¯ä»¥æ ¹æ®åˆ†ç»„æ¥æ”¶é¢‘ç‡åŠ¨æ€è°ƒæ•´ CPU é¢‘ç‡ï¼Œæˆ–è¿›å…¥ CPU çš„ä¸åŒä¼‘çœ çŠ¶æ€ KNIï¼šé€šè¿‡ kni.ko æ¨¡å—å°†æ•°æ®æŠ¥æ–‡ä»ç”¨æˆ·æ€ä¼ é€’åˆ°å†…æ ¸æ€åè®®æ ˆï¼Œä»¥ä¾¿ç”¨æˆ·è¿›ç¨‹ä½¿ç”¨ä¼ ç»Ÿçš„ Socket æ¥å£å¯¹ç›¸å…³æŠ¥æ–‡è¿›è¡Œå¤„ç† Packet Framework å’Œ DISTRIB ä¸ºæ­å»ºæ›´å¤æ‚çš„å¤šæ ¸æµæ°´çº¿å¤„ç†æ¨¡å‹æä¾›äº†åŸºç¡€çš„ç»„ä»¶ æ ¸å¿ƒç»„ä»¶æ ¸å¿ƒç»„ä»¶æ˜¯ç”¨æ¥åšé«˜æ€§èƒ½åŒ…å¤„ç† app çš„ä¸€ç³»åˆ—åº“ã€‚ å¤§é¡µæŠ€æœ¯ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜CPU çš„å†…å­˜ç®¡ç†åŒ…å«ä¸¤ä¸ªæ¦‚å¿µï¼š ç‰©ç†å†…å­˜ï¼šå³å®‰è£…åœ¨è®¡ç®—æœºçš„ç‰©ç†å†…å­˜æ¡ è™šæ‹Ÿå†…å­˜ï¼šè™šæ‹Ÿçš„å†…å­˜åœ°å€ å¤šè¿›ç¨‹æ“ä½œç³»ç»Ÿï¼Œè¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®ç‰©ç†å†…å­˜ï¼Œé¿å…ä¸å®‰å…¨è¡Œä¸ºï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½ç»´æŠ¤äº†ä¸€å¥—è‡ªå·±çš„è™šæ‹Ÿåœ°å€ï¼Œç”± CPU çš„å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰å°†è™šæ‹Ÿåœ°å€è½¬æ¢åˆ°ç‰©ç†åœ°å€ï¼Œå†é€šè¿‡ç‰©ç†åœ°å€è®¿é—®å®é™…çš„ç‰©ç†å†…å­˜ï¼Œä¿è¯å„ä¸ªè¿›ç¨‹ä¹‹é—´å†…å­˜ä¸äº’ç›¸å¹²æ¶‰ã€‚ è½¬æ¢è¿‡ç¨‹å¯¹è¿›ç¨‹æ˜¯å…¨é€æ˜çš„ï¼Œè¿›ç¨‹å¯è®¤ä¸ºç¨‹åºç›´æ¥é€šè¿‡è™šæ‹Ÿåœ°å€è®¿é—®è™šæ‹Ÿå†…å­˜å¾—åˆ°äº†æ•°æ®ï¼Œå®é™…æ˜¯é€šè¿‡è™šæ‹Ÿåœ°å€æ˜ å°„åˆ°çš„ç‰©ç†åœ°å€åœ¨ç‰©ç†å†…å­˜å¾—åˆ°çš„æ•°æ®ã€‚ å†…å­˜åˆ†é¡µåˆ†é¡µæ˜¯æ•´ä¸ªè™šæ‹Ÿå’Œç‰©ç†å†…å­˜ç©ºé—´åˆ‡æˆä¸€æ®µæ®µå›ºå®šå°ºå¯¸çš„å¤§å°çš„é¡µï¼ˆPageï¼‰ï¼Œåœ¨ Linux çš„ç¼ºçœé…ç½®ï¼Œé¡µå¤§å°ä¸º 4 KBã€‚ åˆ†é¡µæœºåˆ¶ä¸‹ï¼Œè™šæ‹Ÿåœ°å€åˆ†ä¸ºäº†é¡µå·å’Œé¡µå†…åç§»é‡ä¸¤ä¸ªéƒ¨åˆ† æ ¹æ®è™šæ‹Ÿé¡µå·ï¼Œåœ¨é¡µè¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†é¡µå· åœ¨ç‰©ç†é¡µå·å¯¹åº”çš„ç‰©ç†å†…å­˜é¡µä¸Šï¼ŒåŠ ä¸Šé¡µå†…åç§»é‡ï¼Œå¾—åˆ°ç‰©ç†å†…å­˜åœ°å€ å¤šçº§é¡µè¡¨ä½†åˆ†é¡µæ–¹å¼ä¾æ—§æœ‰ç¼ºé™·ï¼Œå‡å¦‚æ¯ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜æœ‰ 4GBï¼Œé‡‡ç”¨é»˜è®¤çš„é¡µå¤§å° 4KBï¼Œä¹Ÿå°±æ˜¯éœ€è¦å¯¹åº” 1M ä¸ªç‰©ç†é¡µï¼Œå³éœ€è¦ 1M ä¸ªé¡µè¡¨é¡¹ï¼Œæ¯ä¸ªé¡µè¡¨é¡¹ 4Bï¼Œé‚£ä¹ˆæ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦ 4MB çš„å¤§å°ç©ºé—´ç”¨äºå­˜å‚¨é¡µè¡¨ã€‚100 ä¸ªè¿›ç¨‹å°±ä¼šéœ€è¦ 400 MB ç©ºé—´ã€‚ ç”±æ­¤å¼•å‡ºå¤šçº§é¡µè¡¨ï¼Œå°†è™šæ‹Ÿé¡µå·å’Œç‰©ç†é¡µå·çš„å¯¹åº”æ‹†æˆå¤šçº§ï¼Œå¯¹äºç›¸åŒçš„ç‰©ç†é¡µæ•°é‡ï¼Œæ˜ å°„ä½¿ç”¨çš„é¡µè¡¨æ€»å¤§å°å‡å°ã€‚ ä»¥äºŒçº§é¡µè¡¨ä¸ºä¾‹ï¼Œè™šæ‹Ÿåœ°å€åˆ†ä¸ºäº†ä¸€çº§é¡µå·ã€äºŒçº§é¡µå·å’Œé¡µå†…åç§»é‡ä¸‰ä¸ªéƒ¨åˆ† åœ¨ä¸€çº§é¡µè¡¨ï¼Œæ ¹æ®ä¸€çº§é¡µå·æ‰¾åˆ°å¯¹åº”çš„äºŒçº§é¡µè¡¨åœ°å€ åœ¨äºŒçº§é¡µè¡¨åœ°å€å¯¹åº”çš„äºŒçº§é¡µè¡¨ä¸Šï¼Œæ ¹æ®äºŒçº§é¡µå·æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†é¡µå· åœ¨ç‰©ç†é¡µå·å¯¹åº”çš„ç‰©ç†å†…å­˜é¡µä¸Šï¼ŒåŠ ä¸Šé¡µå†…åç§»é‡ï¼Œå¾—åˆ°ç‰©ç†å†…å­˜åœ°å€ TLBå¤šçº§é¡µè¡¨è™½ç„¶è§£å†³äº†ç©ºé—´é—®é¢˜ï¼Œä½†æ˜¯å¤šäº†å‡ é“åœ°å€è½¬æ¢çš„æŸ¥è¡¨ï¼Œæ—¶é—´æˆæœ¬å¢åŠ ã€‚ ç”±æ­¤å¼•å…¥ TLBï¼ˆTranslation Lookaside Bufferï¼‰å¿«è¡¨ï¼Œç¨‹åºæœ‰å±€éƒ¨æ€§ï¼Œå¯¹äºä¸€ä¸ªç¨‹åºè€Œè¨€ï¼Œå¾€å¾€è®¿é—®çš„éƒ½æ˜¯å†…å­˜çš„æŸäº›åŒºåŸŸï¼Œæ‰€ä»¥å¯ä»¥å°†è¿›ç¨‹ç»å¸¸è®¿é—®çš„é¡µè¡¨é¡¹å­˜å…¥ Cache ä¸­ï¼Œè¿™ä¸ª Cache å³æ˜¯ TLB å¿«è¡¨ã€‚ åœ¨ä¹‹å‰çš„æ­¥éª¤å‰åŠ ä¸ŠæŸ¥è¯¢ TLB å¿«è¡¨çš„æµç¨‹ï¼ŒTLB å¿«è¡¨ä¸­å­˜å‚¨äº†ç»å¸¸è®¿é—®çš„è™šæ‹Ÿé¡µå·åˆ°ç‰©ç†é¡µå·çš„æ˜ å°„ã€‚ å…ˆæŸ¥è¯¢ TLBï¼Œå¦‚æœæŸ¥åˆ°äº†ï¼Œåˆ™ç›´æ¥å¿«é€Ÿæ‹¿åˆ°ç‰©ç†åœ°å€ å¦‚æœ TLB æœªèƒ½æŸ¥åˆ°ï¼Œä¹Ÿå°±æ˜¯ TLB missï¼Œåˆ™æŒ‰ç…§æ­£å¸¸åœ°æµç¨‹æ­¥éª¤è·å–ç‰©ç†åœ°å€ï¼Œå¹¶å°†å…¶åŠ å…¥ TLB ä¸­ å¤§é¡µTLB çš„å¤§å°æœ‰é™ï¼Œå³å¯ä»¥å­˜å‚¨çš„å¿«é€ŸæŸ¥æ‰¾çš„è™šæ‹Ÿé¡µå·åˆ°ç‰©ç†é¡µå·çš„æ˜ å°„æœ‰é™ã€‚ åœ¨ Linux çš„ç¼ºçœé…ç½®ï¼Œé¡µå¤§å°ä¸º 4 KBã€‚ä½†ä¹Ÿæ”¯æŒæ›´å¤§çš„å°ºå¯¸ï¼Œå¦‚ 2MB æˆ– 1 GB çš„å¤§é¡µï¼Œè¿™æ ·è™½ç„¶ TLB çš„é¡µè¡¨é¡¹æ•°é‡ä¸å˜ï¼Œä½†æ˜¯æ¯ä¸€é¡¹å¯¹åº”çš„ç‰©ç†é¡µé¢çš„å¤§å°å¢åŠ ï¼Œå¯ä»¥ç”± TLB ç›´æ¥å‘½ä¸­çš„èŒƒå›´ä¹Ÿå°±å¢åŠ äº†ã€‚ TLB å‘½ä¸­æ¦‚ç‡å¢åŠ ï¼ŒTLB miss å‘ç”Ÿæ¦‚ç‡å‡å°ï¼Œå¦‚æ­¤å¤§å¤§å¢åŠ äº†è®¿å­˜æ•ˆç‡ã€‚ æ¿€æ´»å¤§é¡µè®¾ç½®å¤§é¡µï¼Œ2MB çš„å¤§é¡µè®¾ç½® 1024 ä¸ª 1echo 1024 &gt; /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages æŸ¥çœ‹å¤§é¡µè®¾ç½® 12345678910root@ubuntu:~# cat /proc/meminfo |grep HuAnonHugePages: 0 kBShmemHugePages: 0 kBFileHugePages: 0 kBHugePages_Total: 1024HugePages_Free: 1024HugePages_Rsvd: 0HugePages_Surp: 0Hugepagesize: 2048 kBHugetlb: 2097152 kB å†…å­˜ç®¡ç†lcoreMEMPOOL Libraryrte_pktmbuf_pool_create rte_pktmbuf_pool_create_by_ops rte_mempool_lookup rte_mempool_free ç¯å¢ƒæŠ½è±¡å±‚ EALEALï¼ˆEnvironment Abstraction Layerï¼Œç¯å¢ƒæŠ½è±¡å±‚ï¼‰ç”¨äºè·å–åº•å±‚èµ„æºã€‚EAL å¯ä»¥ä½¿ç”¨é€šç”¨æ¥å£ï¼Œå±è”½åº”ç”¨å’Œåº“çš„ç¯å¢ƒç‰¹æ®Šæ€§ï¼ŒåŒæ—¶è´Ÿè´£åˆå§‹åŒ–åˆ†é…èµ„æºã€‚ EAL ä¸»è¦æä¾›ä¸‹åˆ—å…¸å‹æœåŠ¡ï¼š DPDK çš„åŠ è½½å’Œå¯åŠ¨ï¼šDPDK å’ŒæŒ‡å®šçš„ç¨‹åºé“¾æ¥æˆä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå¹¶ä»¥æŸç§æ–¹å¼åŠ è½½ CPU äº²å’Œæ€§å’Œåˆ†é…å¤„ç†ï¼šDPDK æä¾›æœºåˆ¶å°†æ‰§è¡Œå•å…ƒç»‘å®šåˆ°ç‰¹å®šçš„æ ¸ä¸Šï¼Œå°±åƒåˆ›å»ºä¸€ä¸ªæ‰§è¡Œç¨‹åºä¸€æ ·ã€‚ ç³»ç»Ÿå†…å­˜åˆ†é…ï¼šEAL å®ç°äº†ä¸åŒåŒºåŸŸå†…å­˜çš„åˆ†é…ï¼Œä¾‹å¦‚ä¸ºè®¾å¤‡æ¥å£æä¾›äº†ç‰©ç†å†…å­˜ã€‚ PCI åœ°å€æŠ½è±¡ï¼šEAL æä¾›äº†å¯¹ PCI åœ°å€ç©ºé—´çš„è®¿é—®æ¥å£ã€‚ è·Ÿè¸ªè°ƒè¯•åŠŸèƒ½ï¼šæ—¥å¿—ä¿¡æ¯ï¼Œå †æ ˆæ‰“å°ã€å¼‚å¸¸æŒ‚èµ·ç­‰ç­‰ã€‚ å…¬ç”¨åŠŸèƒ½ï¼šæä¾›äº†æ ‡å‡† libc ä¸æä¾›çš„è‡ªæ—‹é”ã€åŸå­è®¡æ•°å™¨ç­‰ã€‚ CPU ç‰¹å¾è¾¨è¯†ï¼šç”¨äºå†³å®š CPU è¿è¡Œæ—¶çš„ä¸€äº›ç‰¹æ®ŠåŠŸèƒ½ï¼Œå†³å®šå½“å‰ CPU æ”¯æŒçš„ç‰¹æ€§ï¼Œä»¥ä¾¿ç¼–è¯‘å¯¹åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä¸­æ–­å¤„ç†ï¼šæä¾›æ¥å£ç”¨äºå‘ä¸­æ–­æ³¨å†Œ/è§£æ³¨å†Œå›æ‰å‡½æ•°ã€‚ å‘Šè­¦åŠŸèƒ½ï¼šæä¾›æ¥å£ç”¨äºè®¾ç½®/å–æ¶ˆæŒ‡å®šæ—¶é—´ç¯å¢ƒä¸‹è¿è¡Œçš„æ¯æ‰å‡½æ•°ã€‚ EAL å‚æ•°EAL parameters å†…æ ¸åˆå§‹åŒ–ä¸å¯åŠ¨å†…æ ¸çš„åˆå§‹åŒ–ç”± rte_eal_init() å‡½æ•°å®Œæˆï¼Œå¾…æ‰€æœ‰æ ¸å®Œæˆåˆå§‹åŒ–åï¼Œé€šè¿‡ `rte_eal_remote_launch() ` å‡½æ•°å¯åŠ¨å„ä¸ªæ ¸ä¸Šçš„åº”ç”¨ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ MAIN lcore å¯åŠ¨ main() å‡½æ•° MAIN lcore è°ƒç”¨ rte_eal_init() è¿›è¡Œå„ç§åˆå§‹åŒ– å‘½ä»¤è¡Œå‚æ•° -l å¯ä»¥è®¾ç½®è¿è¡Œ lcoreï¼Œç¬¬ä¸€ä¸ªä½œä¸º MAIN lcoreï¼Œå‰©ä¸‹çš„ä½œä¸º WORKER lcoresï¼Œå¦‚ä¸è®¾ç½®ï¼Œ åœ¨ MAIN lcore ä¸­ä¸»è¦åŒ…æ‹¬å†…å­˜ã€æ—¥å¿—ã€PCI ç­‰åˆå§‹åŒ–å·¥ä½œ åœ¨ WORKER lcores å¯åŠ¨çº¿ç¨‹ï¼Œå¹¶ä½¿ä¹‹å¤„äº WAIT çŠ¶æ€ MAIN lcore ç­‰å¾…æ‰€æœ‰é€»è¾‘æ ¸åˆå§‹åŒ–å®Œæ¯• å…¶ä»–åˆå§‹åŒ–å·¥ä½œï¼Œå¦‚åˆå§‹åŒ– lib åº“å’Œé©±åŠ¨ MAIN lcore è°ƒç”¨ rte_eal_remote_launch(func, arg, worker_id) å‡½æ•°ï¼Œç»™ WORKER lcore åˆ†é… function å¹¶å¯åŠ¨ å‘é€ä¿¡æ¯åˆ°å¯¹åº” worker_id çš„ WORKER lcoreï¼Œç¡®è®¤è¯¥æ ¸å¤„åœ¨ WAIT çŠ¶æ€ WORKER lcore æ¥æ”¶åˆ°ä¿¡æ¯ï¼Œåˆ‡æ¢åˆ° RUNNING çŠ¶æ€ï¼Œå¹¶æ‰§è¡Œ function å¸¦ arg å‚æ•° WORKER lcore æ‰§è¡Œ function å®Œæ¯•åï¼Œåˆ‡æ¢å› WAIT çŠ¶æ€ï¼Œfunction çš„è¿”å›å€¼å¯ä»¥é€šè¿‡ rte_eal_wait_lcore() è¯»å– MAIN lcore è°ƒç”¨ rte_cal_mp_wait_Icore() å‡½æ•°ï¼Œç­‰å¾…æ‰€æœ‰ WORKER lcores å®Œæˆ app å¦‚æœä¸è®¾ç½®ç­‰å¾…ï¼ŒMAIN lcore ä¼šç›´æ¥ç»“æŸï¼Œä¸çŸ¥é“å…¶ä»–æ ¸çš„è¿è¡Œæƒ…å†µ ç­‰å¾…æ‰€æœ‰çš„æ ¸å®Œæˆ function åˆ‡å› WAIT çŠ¶æ€ å…³é—­ä¸æ¸…ç†ç¯å¢ƒåœ¨ MAIN lcore ç¨‹åºçš„æœ€åè¿è¡Œ rte_eal_cleanup() å‡½æ•°ï¼Œç”¨äºæ¸…ç† EAL ç¯å¢ƒã€‚rte_eal_cleanup() å°†ä¼šé‡Šæ”¾ rte_eal_init() åˆ†é…çš„å†…å­˜ï¼Œåœ¨æ¸…ç†ä¹‹åï¼ŒDPDK å‡½æ•°å°±æ— æ³•å†è¢«è°ƒç”¨äº†ã€‚ EAL åº“rte_eal.h ä¸­çš„å¸¸ç”¨å‡½æ•° rte_eal_init()ç”¨äºåˆå§‹åŒ– eal å±‚ï¼Œåªèƒ½åœ¨ main() ä¸­ä½¿ç”¨ã€‚ 1int rte_eal_init(int argc, char **argv) è¾“å…¥ï¼šmain å‡½æ•°çš„å‚æ•° è¾“å‡ºï¼šè¿”å› eal ä½¿ç”¨äº†çš„å‚æ•°çš„æ•°é‡ã€‚å¦‚æœ eal åˆå§‹åŒ–å¤±è´¥ï¼Œåˆ™è¿”å›è´Ÿæ•°ã€‚ DPDK ç¯å¢ƒæ­å»ºä»¥ Ubuntu 20.04.6 å®‰è£… DPDK 23.11 ä¸ºä¾‹ ä¾èµ– å®‰è£… C ç¼–è¯‘å™¨ 1apt install build-essential å®‰è£… meson å’Œ ninja 1apt install meson ninja-build å®‰è£… pyelftools 1pip3 install python3-pyelftools å®‰è£… NUMA Library 1apt install libnuma-dev å¤§é¡µè®¾ç½®å¤§é¡µ 1echo 1024 &gt; /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages DPDK å®‰è£… ä¸‹è½½è§£å‹ 123wget http://fast.dpdk.org/rel/dpdk-23.11.tar.xztar xJf dpdk-23.11.tar.xzcd dpdk-23.11 è®¾ç½®ç¼–è¯‘é€‰é¡¹ 1meson setup build -Dplatform=generic ç¼–è¯‘ 1234cd buildninjameson installldconfig DPDK ä¸ç½‘å¡å®˜æ–¹å®ä¾‹Hello Worldç¼–è¯‘è¿è¡Œ ç¼–è¯‘ 123cd buildmeson configure -Dexamples=helloworldninja è¿è¡Œ 12echo 1024 &gt; /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepagescd build 1234567891011root@ubuntu:/opt/dpdk-23.11/build# ./examples/dpdk-helloworldEAL: Detected CPU lcores: 3EAL: Detected NUMA nodes: 1EAL: Detected static linkage of DPDKEAL: Multi-process socket /var/run/dpdk/rte/mp_socketEAL: Selected IOVA mode 'PA'EAL: VFIO support initializedTELEMETRY: No legacy callbacks, legacy socket not createdhello from core 1hello from core 2hello from core 0 ä»£ç è§£æå»ºç«‹ä¸€ä¸ªå¤šæ ¸ï¼ˆçº¿ç¨‹ï¼‰è¿è¡Œç¯å¢ƒï¼Œæ¯ä¸ªçº¿ç¨‹æ‰“å°hello from core 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/* SPDX-License-Identifier: BSD-3-Clause * Copyright(c) 2010-2014 Intel Corporation */#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;stdint.h&gt;#include &lt;errno.h&gt;#include &lt;sys/queue.h&gt;#include &lt;rte_memory.h&gt;#include &lt;rte_launch.h&gt;#include &lt;rte_eal.h&gt;#include &lt;rte_per_lcore.h&gt;#include &lt;rte_lcore.h&gt;#include &lt;rte_debug.h&gt;/* Launch a function on lcore. 8&lt; */static intlcore_hello(__rte_unused void *arg)&#123; unsigned lcore_id; lcore_id = rte_lcore_id(); printf(\"hello from core %u\\n\", lcore_id); return 0;&#125;/* &gt;8 End of launching function on lcore. *//* Initialization of Environment Abstraction Layer (EAL). 8&lt; */intmain(int argc, char **argv)&#123; int ret; unsigned lcore_id; ret = rte_eal_init(argc, argv); if (ret &lt; 0) rte_panic(\"Cannot init EAL\\n\"); /* &gt;8 End of initialization of Environment Abstraction Layer */ /* Launches the function on each lcore. 8&lt; */ RTE_LCORE_FOREACH_WORKER(lcore_id) &#123; /* Simpler equivalent. 8&lt; */ rte_eal_remote_launch(lcore_hello, NULL, lcore_id); /* &gt;8 End of simpler equivalent. */ &#125; /* call it on main lcore too */ lcore_hello(NULL); /* &gt;8 End of launching the function on each lcore. */ rte_eal_mp_wait_lcore(); /* clean up the EAL */ rte_eal_cleanup(); return 0;&#125; ç¤ºä¾‹ç¼–è¯‘è¿è¡Œ ç¼–è¯‘ 123cd buildmeson configure -Dexamples=playgroundninja è¿è¡Œ 1.&#x2F;examples&#x2F;dpdk-playground rte å‡½æ•°rte_exit é€€å‡ºå‡½æ•°ä½œç”¨ï¼šé€€å‡ºä¸­æ­¢ç¨‹åº 1void rte_exit(int exit_code, const char *format, ...) å‚æ•°è¯´æ˜ exit_code: é€€å‡ºçŠ¶æ€ç ï¼ˆ0 è¡¨ç¤ºæˆåŠŸï¼Œéé›¶è¡¨ç¤ºé”™è¯¯ï¼‰ ä¸€èˆ¬ä½¿ç”¨ DPDK æä¾›çš„çŠ¶æ€ç  12#define EXIT_FAILURE 1 /* Failing exit status. */#define EXIT_SUCCESS 0 /* Successful exit status. */ format: æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç±»ä¼¼ printfï¼‰ ...: å¯å˜å‚æ•°ï¼Œç”¨äºæ ¼å¼åŒ–å­—ç¬¦ä¸² ä½¿ç”¨ç¤ºä¾‹1234int ret = rte_eal_init(argc, argv);if (ret &lt; 0) &#123; rte_exit(EXIT_FAILURE, \"Error with EAL initialization\\n\"); &#125; å‚è€ƒ DPDK å®˜æ–¹æ–‡æ¡£ ã€Šæ·±å…¥æµ…å‡ºDPDKã€‹ https://zzqcn.github.io/opensource/dpdk/index.html","categories":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/categories/DPDK/"}],"tags":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/tags/DPDK/"}]},{"title":"Neovim","slug":"Neovim","date":"2023-10-12T15:53:52.000Z","updated":"2025-08-16T19:11:11.289Z","comments":true,"path":"2023/10/12/Neovim/","link":"","permalink":"https://gy23333.github.io/2023/10/12/Neovim/","excerpt":"vim","text":"vim Neovim å®‰è£…Linuxå¯¹äº Ubuntuï¼Œå®‰è£…æ›´æ–°ç‰ˆæœ¬çš„ Neovim æ·»åŠ æº 1sudo add-apt-repository ppa:neovim-ppa&#x2F;unstable æ›´æ–°æº 1sudo apt-get update å®‰è£… Neovim 1sudo apt-get install neovim å®‰è£…åè¾“å…¥ nvim å³å¯è¿›å…¥ å¦‚æœä¾æ—§æƒ³è¦è¾“å…¥ vim è¿›å…¥ï¼Œå¯ä½¿ç”¨é“¾æ¥æ›¿æ¢ 1alias vim&#x3D;&#39;nvim&#39; Macå¯¹äº macï¼Œ 1brew install neovim åœ¨ ~/.bash_profile ä¸­æ·»åŠ  1alias vim&#x3D;&#39;nvim&#39; 1source ~&#x2F;.bash_profile Vim æ¨¡å¼æ™®é€šæ¨¡å¼æ‰“å¼€ Vim ç›´æ¥è¿›å…¥çš„å°±æ˜¯æ™®é€šæ¨¡å¼ï¼Œä¸»è¦ç”¨äºæµè§ˆæ–‡ä»¶ã€æ‰§è¡Œå¤åˆ¶ç²˜è´´åˆ é™¤ç­‰çš„æ“ä½œ è¾“å…¥æ¨¡å¼æ™®é€šæ¨¡å¼ä¸‹è¾“å…¥ i è¿›å…¥è¾“å…¥æ¨¡å¼ï¼Œè¾“å…¥ Esc é€€å‡ºè¾“å…¥æ¨¡å¼å›åˆ°æ™®é€šæ¨¡å¼ å‘½ä»¤æ¨¡å¼æ™®é€šæ¨¡å¼ä¸‹è¾“å…¥ : è¿›å…¥å‘½ä»¤æ¨¡å¼ å¯è§†æ¨¡å¼æ™®é€šæ¨¡å¼ä¸‹è¾“å…¥ v è¿›å…¥å¯è§†æ¨¡å¼ï¼Œç”¨äºé€‰ä¸­ æ™®é€šæ¨¡å¼å…‰æ ‡ç§»åŠ¨å¯ä»¥ä½¿ç”¨æ–¹å‘é”®è¿›è¡Œç§»åŠ¨ï¼Œä½†æ›´å¤šåœ°ä½¿ç”¨ hjkl ç§»åŠ¨å…‰æ ‡ å¿«æ·é”® æŒ‡ä»¤ h å·¦ç§» j ä¸‹ç§» k ä¸Šç§» l å³ç§» 4h å·¦ç§»4æ ¼ w (word) è·³è½¬åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ b (beginning) è·³è½¬åˆ°å‰ä¸€ä¸ªå•è¯çš„å¼€å¤´ gg è·³è½¬åˆ°æ–‡ä»¶å¼€å¤´ G è·³è½¬åˆ°æ–‡ä»¶ç»“å°¾ Ctrl+u (PgUp) å‘ä¸Šç¿»é¡µ Ctrl+d (PgDown) å‘ä¸‹ç¿»é¡µ fr (find r) ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ª r å¤åˆ¶ç²˜è´´å¤åˆ¶é”® y (yank)ï¼Œç²˜è´´é”® p (paste) å¿«æ·é”® æŒ‡ä»¤ yaw (yank all word) å¤åˆ¶æ•´ä¸ªå•è¯ y4j å¤åˆ¶æœ¬è¡Œä»¥åŠä¸‹4è¡Œï¼ˆä¸€å…±5è¡Œï¼‰ yfr å¤åˆ¶åˆ° r ä¸ºæ­¢çš„å†…å®¹ï¼ˆåŒ…æ‹¬ rï¼‰ p ç²˜è´´ åˆ é™¤åˆ é™¤é”® d (delete)ï¼Œæ“ä½œä¸å¤åˆ¶åŒç† æ”¹å˜æ”¹å˜é”® c (change)ï¼Œæ“ä½œä¸å¤åˆ¶åŒç†ï¼Œåˆ é™¤é€‰ä¸­å†…å®¹å¹¶è¿›å…¥è¾“å…¥æ¨¡å¼ æŸ¥æ‰¾ å¿«æ·é”® æŒ‡ä»¤ / ä»ä¸Šå¾€ä¸‹æŸ¥æ‰¾ ? ä»ä¸‹å¾€ä¸ŠæŸ¥æ‰¾ n ä¸‹ä¸€ä¸ª N ä¸Šä¸€ä¸ª å‘½ä»¤æ¨¡å¼å‘½ä»¤ :h &lt;plugin name&gt; æŸ¥çœ‹æ’ä»¶è¯´æ˜ä¹¦ çª—å£ å¿«æ·é”® æŒ‡ä»¤ :b&lt;N&gt; è·³åˆ°ç¬¬ N ä¸ª Tab :b &lt;file name&gt; è·³åˆ°ç›¸åº”æ–‡ä»¶åçš„ Tab :bn è·³åˆ°ä¸Šä¸€ä¸ªçš„ Tab :bp è·³åˆ°ä¸‹ä¸€ä¸ªçš„ Tab å¿«æ·é”® å¿«æ·é”® æŒ‡ä»¤ &lt;Ctrl-w&gt; + h/j/k/l åˆ‡æ¢èšç„¦çª—å£ &lt;Ctrl-w&gt; + w åˆ‡æ¢èšç„¦åˆ°ä¸‹ä¸€ä¸ªçª—å£ LazyVimhttp://www.lazyvim.org ã€ã€æ•™å®Œå¿…ä¼šã€‘åˆ«å†è¯´é…ç½®neoviméº»çƒ¦äº†ï¼ç»™æˆ‘1åˆ†é’Ÿå°±å¤Ÿï¼â€” Lazyvimæ•™ç¨‹ã€‘https://www.bilibili.com/video/BV1ds4y1P7Rs?vd_source=c44e01a0c037484413d7d1b782385f3e æ’ä»¶å¸¸ç”¨æ“ä½œå…‰æ ‡è·³è½¬ è·³è½¬åˆ°å‘¨å›´ç‰¹å®šå­—æ¯ s è¿›å…¥æŸ¥æ‰¾çŠ¶æ€ è¾“å…¥å¾…æŸ¥æ‰¾å­—æ¯ï¼Œæ ‡äº®å‘¨å›´è¯¥å­—æ¯ï¼Œå¹¶é™„ä¸Šæ ‡ç­¾ è¾“å…¥æ ‡ç­¾ï¼Œè·³è½¬åˆ°ç‰¹å®šä½ç½® ç›®å½•æ ‘ä¾§è¾¹æ çš„ç›®å½•æ ‘ç”± NeoTree æ’ä»¶é©±åŠ¨ æ˜¾ç¤º/éšè—ä¾§è¾¹æ  Space -&gt; e æŸ¥çœ‹å¿«æ·é”® ? ç»ˆç«¯ å”¤å‡º/éšè—ç»ˆç«¯ï¼šctrl + \\ Buffer åˆ‡æ¢ä¸‹ä¸€ä¸ª Bufferï¼šSHIFT + l åˆ‡æ¢ä¸Šä¸€ä¸ª Bufferï¼šSHIFT + h LSPå®‰è£… è¾“å…¥:Mason è¿›å…¥ Mason LSPLazyvim é»˜è®¤é…ç½® LSP MasonMason ç”¨æ¥åš LSP çš„åŒ…ç®¡ç† è¿›å…¥ Mason ç®¡ç†çª—å£ æœ‰ä¸¤ç§æ–¹æ³•ï¼š :Mason leader -&gt; c -&gt; m åœ¨è¿™ä¸ªçª—å£é€‚ç”¨æ–‡ä»¶çš„å„ç§æŸ¥æ‰¾æ“ä½œ æœç´¢åŒ… å¯ä»¥é€šè¿‡ Language Filter è¿‡æ»¤å‡ºæŒ‡å®šè¯­è¨€ï¼šCTRL + f æˆ–è€…å’Œæ–‡ä»¶ä¸€æ ·ï¼Œé€šè¿‡ / æˆ–å…¶ä»–æœç´¢ å®‰è£…åŒ… ç§»åŠ¨åˆ°ç›¸åº”åŒ…ï¼ŒæŒ‰ i å¸è½½åŒ… ç§»åŠ¨åˆ°ç›¸åº”åŒ…ï¼ŒæŒ‰ X æ“ä½œè·³è½¬æŸ¥çœ‹ æŸ¥çœ‹å®šä¹‰ï¼šg â€”&gt; d è·³è½¬åˆ°å®šä¹‰ï¼šg â€”&gt; D æŸ¥çœ‹å¼•ç”¨ï¼šg â€”&gt; r æŸ¥çœ‹è¯¦æƒ…ï¼šK æŸ¥æ‰¾æ›¿æ¢ å˜é‡é‡å‘½åï¼šLeader â€”&gt; c â€”&gt; r æ–‡ä»¶æ ‘lazyvim ä¸­é»˜è®¤é›†æˆäº†æ–‡ä»¶æ ‘ neo-tree.nvim å¿«æ·é”® æŒ‡ä»¤ &lt;leader&gt;e æ‰“å¼€/å…³é—­æ–‡ä»¶æ ‘ ? help é…ç½®æ–°å»º nvim çš„é…ç½®æ–‡ä»¶å¤¹ ~/.config/nvim ï¼Œç»“æ„å¦‚ä¸‹ 1234567891011121314151617181920â”œâ”€â”€ init.vim å…¥å£æ–‡ä»¶ï¼Œè¿™é‡Œè´Ÿè´£åŠ è½½æ‰€æœ‰luaæ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶â””â”€â”€ lua æ‰€æœ‰ lua é…ç½®æ–‡ä»¶ â”œâ”€â”€ basic.lua Neovim çš„åŸºç¡€é…ç½® â”œâ”€â”€ keybindings.lua å¿«æ·é”®é…ç½® â”œâ”€â”€ lsp å†…ç½® LSP (Language Server Protocol) é…ç½® â”‚ â”œâ”€â”€ diagnostic_signs.lua â”‚ â”œâ”€â”€ language_servers.lua â”‚ â””â”€â”€ nvim-cmp-config.lua â”œâ”€â”€ plugin-config å„ä¸ªæ’ä»¶é…ç½®åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ â”‚ â”œâ”€â”€ bufferline.lua â”‚ â”œâ”€â”€ comment.lua â”‚ â”œâ”€â”€ nvim-autopairs.lua â”‚ â”œâ”€â”€ nvim-colorizer.lua â”‚ â”œâ”€â”€ nvim-tree.lua â”‚ â”œâ”€â”€ nvim-treesitter.lua â”‚ â”œâ”€â”€ rust-tools.lua â”‚ â”œâ”€â”€ surround.lua â”‚ â”œâ”€â”€ telescope.lua â”‚ â””â”€â”€ which-key.lua â””â”€â”€ plugins.lua æ’ä»¶å®‰è£…ç®¡ç† nvim åœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æŸ¥çœ‹å…¶ä¸­çš„å†…å®¹è¿›è¡Œæ›´æ–°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ç¼–è¾‘åç›´æ¥ä½¿ç”¨ :so å‘½ä»¤å½“é‡æ–°è½½å…¥ã€‚ ä»¥ ~/.config/nvim/init.lua ä½œä¸ºå…¥å£ï¼Œlua æ–‡ä»¶å¤¹æ”¾ç½®ä¸åŒçš„æ¨¡å— æ’ä»¶ä½¿ç”¨æ’ä»¶ç®¡ç†å™¨ lazy.vim è¿›è¡Œæ’ä»¶ç®¡ç† å®‰è£… lazyvim æ–°å»º lua/lazynvim-init.lua 12345678910111213local lazypath = vim.fn.stdpath(\"data\") .. \"/lazy/lazy.nvim\"if not vim.loop.fs_stat(lazypath) then vim.fn.system(&#123; \"git\", \"clone\", \"--filter=blob:none\", \"https://github.com/folke/lazy.nvim.git\", \"--branch=stable\", -- latest stable release lazypath, &#125;)endvim.opt.rtp:prepend(lazypath)require(\"lazy\").setup(&#123;&#125;) åœ¨ init.lua ä¸­ 1require(\"lazynvim-init\") å¦‚æ­¤åï¼Œä¾¿å¯è¾“å…¥ :Lazy æ‰“å¼€ å®‰è£…æ’ä»¶ ä»¥å®‰è£… nvim-tree ä¸ºä¾‹ åœ¨ lua æ–‡ä»¶å¤¹ä¸‹æ–°å»º plugins ç›®å½• åœ¨ lazynvim-init.lua ä¸­çš„ setup ä¸­å°† plugins ç›®å½•æ·»åŠ ä¸ºå‚æ•° 1require(\"lazy\").setup(\"plugins\") åœ¨ lua/plugins ä¸‹æ·»åŠ æ–‡ä»¶ plugin-nvim-tree.lua 12345678910return &#123; &#123; \"nvim-tree/nvim-tree.lua\", version = \"*\", dependencies = &#123;\"nvim-tree/nvim-web-devicons\"&#125;, config = function() require(\"nvim-tree\").setup &#123;&#125; end &#125;&#125; &quot;nvim-tree/nvim-tree.lua&quot;ï¼šæ’ä»¶åœ¨ github ä¸Šçš„çŸ­ url versionï¼šä¸‹è½½çš„ç‰ˆæœ¬ï¼Œ* è¡¨ç¤ºè‡ªåŠ¨æ›´æ–°æœ€æ–°ç‰ˆæœ¬ dependencies = {&quot;nvim-tree/nvim-web-devicons&quot;}ï¼šä¾èµ–æ’ä»¶ config = ... ...ï¼šå½“æ’ä»¶å¯åŠ¨åŠ è½½ä»¥åï¼Œåˆ™ä¼šæ‰§è¡Œè¯¥ config çš„ä»£ç  é‡æ–°æ‰“å¼€ vim å³å¯è‡ªåŠ¨åŠ è½½æ’ä»¶ å¸¸ç”¨æ’ä»¶ä¸»é¢˜æ’ä»¶ TokyoNight123456789return &#123; &#123; \"folke/tokyonight.nvim\", version = \"*\", config = function() require(\"tokyonight\").setup &#123;&#125; end &#125;&#125; æ–‡ä»¶æ ‘æ’ä»¶ nvim-tree ä¸‹è½½ nerd fornt å­—ä½“ Linux 1wget -c https:&#x2F;&#x2F;github.com&#x2F;ryanoasis&#x2F;nerd-fonts&#x2F;releases&#x2F;download&#x2F;v3.0.2&#x2F;DejaVuSansMono.zip 1sudo unzip DejaVuSansMono.zip -d &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;DejaVuSansMono 1234cd &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;SourceCodeProsudo mkfontscale # ç”Ÿæˆæ ¸å¿ƒå­—ä½“ä¿¡æ¯sudo mkfontdir # ç”Ÿæˆå­—ä½“æ–‡ä»¶å¤¹sudo fc-cache -fv # åˆ·æ–°ç³»ç»Ÿå­—ä½“ç¼“å­˜ Mac https://joit.info/essay/a5f51f2cbbb240d7a992d481fc09f7e0 ä¸‹è½½å­—ä½“ååœ¨é…ç½®é‡Œé…ç½® Terminal å­—ä½“ 12brew tap homebrew&#x2F;cask-fontsbrew install --cask font-hack-nerd-font 12345678910return &#123; &#123; \"nvim-tree/nvim-tree.lua\", version = \"*\", dependencies = &#123;\"nvim-tree/nvim-web-devicons\"&#125;, config = function() require(\"nvim-tree\").setup &#123;&#125; end &#125;&#125; ç›¸å…³å‘½ä»¤ï¼š å¿«æ·é”® æŒ‡ä»¤ g? æŸ¥çœ‹å¸®åŠ© &lt;C-k&gt; æŸ¥çœ‹ä¿¡æ¯ r é‡å‘½å o å¼€æ–‡ä»¶ a åˆ›å»ºæ–°æ–‡ä»¶ d åˆ é™¤æ–‡ä»¶ c å¤åˆ¶æ–‡ä»¶ p ç²˜è´´æ–‡ä»¶ x å‰ªåˆ‡æ–‡ä»¶ J è·³åˆ°é¡¶éƒ¨çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ K è·³åˆ°åº•éƒ¨çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ &lt; / &gt; è·³åˆ°ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªå…„å¼Ÿæ–‡ä»¶/æ–‡ä»¶å¤¹ y å¤åˆ¶æ–‡ä»¶å Y å¤åˆ¶ç›¸å¯¹åœ°å€ gy å¤åˆ¶ç»å¯¹åœ°å€ çŠ¶æ€æ æ’ä»¶ lualine.nvim123456789return &#123; &#123; \"nvim-lualine/lualine.nvim\", version = \"*\", config = function() require(\"lualine\").setup &#123;&#125; end &#125;&#125; é¡µæ’ä»¶ bufferline.nvim12345678910return &#123; &#123; \"akinsho/bufferline.nvim\", version = \"*\", config = function() vim.opt.termguicolors = true require(\"bufferline\").setup&#123;&#125; end &#125;&#125; å‚è€ƒ https://zhuanlan.zhihu.com/p/571617696 lazy.vimå®˜ç½‘ lazy-nvimæ’ä»¶ç®¡ç†å™¨åŸºç¡€å…¥é—¨ ã€å…¨ç¨‹è®²è§£ã€‘Neovimä»é›¶é…ç½®æˆå±äºä½ çš„ä¸ªäººç¼–è¾‘å™¨ Lazyvimå®˜æ–¹æ–‡æ¡£","categories":[],"tags":[]},{"title":"Linux ç½‘ç»œ","slug":"Linux-ç½‘ç»œ","date":"2023-10-11T15:15:53.000Z","updated":"2024-11-11T03:57:58.129Z","comments":true,"path":"2023/10/11/Linux-ç½‘ç»œ/","link":"","permalink":"https://gy23333.github.io/2023/10/11/Linux-%E7%BD%91%E7%BB%9C/","excerpt":"","text":"å†…æ ¸å¦‚ä½•æ”¶åŒ… å‚è€ƒ Linux ç½‘ç»œæ ˆæ¥æ”¶æ•°æ®","categories":[],"tags":[]},{"title":"gRPCä¸Go","slug":"gRPCä¸Go","date":"2023-09-19T17:29:19.000Z","updated":"2025-05-08T05:36:22.418Z","comments":true,"path":"2023/09/20/gRPCä¸Go/","link":"","permalink":"https://gy23333.github.io/2023/09/20/gRPC%E4%B8%8EGo/","excerpt":"gRPCï¼Œç”± google å¼€å‘çš„ä¸€ç§è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ã€‚gRPC æ”¯æŒå¤šç§è¯­è¨€ä¹‹é—´çš„è°ƒç”¨ï¼Œæœ¬æ–‡ä¸»è¦è®²è¿° gRPC åŸºäº Go çš„å®ç°ã€‚","text":"gRPCï¼Œç”± google å¼€å‘çš„ä¸€ç§è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ã€‚gRPC æ”¯æŒå¤šç§è¯­è¨€ä¹‹é—´çš„è°ƒç”¨ï¼Œæœ¬æ–‡ä¸»è¦è®²è¿° gRPC åŸºäº Go çš„å®ç°ã€‚ gRPC ç®€ä»‹ gRPC ä½¿ç”¨ Protocol Buffer ä½œä¸ºå…¶æ¥å£å®šä¹‰è¯­è¨€ï¼Œä½¿å¾— gRPC å®¢æˆ·ç«¯å¯ä»¥è·¨æœºå™¨ã€è·¨è¯­è¨€è°ƒç”¨ gRPC æœåŠ¡å™¨çš„æ–¹æ³•ã€‚ Protocol Buffer å®šä¹‰æ¥å£çš„è¾“å…¥å‚æ•°å’Œè¿”å›ç±»å‹ gRPC æœåŠ¡ç«¯ï¼šå®ç°æ¥å£æ–¹æ³•ï¼Œå¹¶è¿è¡Œ gRPC Server gRPC å®¢æˆ·ç«¯ï¼šè°ƒç”¨ gRPC Stub ï¼ˆç›¸å½“äº gRPC Server åœ¨å®¢æˆ·ç«¯çš„ä»£ç†ï¼Œæ‹¥æœ‰ä¸ Server å®ç°çš„æ¥å£æ–¹æ³•ï¼‰çš„æ¥å£ ç¯å¢ƒå®‰è£…Mac å®‰è£… go gRPC æ‰€éœ€ç¯å¢ƒ protobufå®‰è£… protobuf 1brew install protobuf æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ 12â¯ protoc --versionlibprotoc 28.3 protoc-gen-goã€protoc-gen-go-grpcå®‰è£… protoc-gen-goã€protoc-gen-go-grpc 1go install google.golang.org&#x2F;protobuf&#x2F;cmd&#x2F;protoc-gen-go@latest 1go install google.golang.org&#x2F;grpc&#x2F;cmd&#x2F;protoc-gen-go-grpc@latest å®‰è£…å®Œæˆåï¼Œå¯ä»¥åœ¨ ${GOPATH}/bin ä¸‹çœ‹åˆ° protoc-gen-go å’Œ protoc-gen-go-grpc ç¡®è®¤ ${GOPATH}/bin å·²æ·»åŠ åˆ°ç¯å¢ƒå˜é‡çš„ PATH ä¸­ ProtobufProtobuf æ˜¯ google å¼€å‘çš„åºåˆ—åŒ–æ•°æ®æ ¼å¼ï¼Œå®šä¹‰äº¤æ¢çš„æ•°æ®æ ¼å¼ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ•°æ®åˆ°å„ç§è¯­è¨€ï¼Œå®ç°è·¨è¯­è¨€ã€è·¨å¹³å°é€šä¿¡ã€‚ Protobuf ç‰ˆæœ¬.proto æ–‡ä»¶çš„å¼€å¤´éœ€è¦æ³¨æ˜ä½¿ç”¨çš„ Protobuf ç‰ˆæœ¬å·ï¼ŒProtobuf å…±æœ‰ editionsã€proto2ã€proto3 ä¸‰ç§ç‰ˆæœ¬ï¼Œå»ºè®®ä½¿ç”¨ proto3ï¼Œä¸‹é¢è¯´æ˜å‡ä»¥ proto3 ä¸ºä¾‹ã€‚ 1syntax = \"proto3\"; å¦‚ä¸å£°æ˜ï¼Œé»˜è®¤ä½¿ç”¨ proto2ã€‚ æ•°æ®ç±»å‹åŸºç¡€ç±»å‹Protobuf æ”¯æŒå¤šç§å†…ç½®æ•°æ®ç±»å‹ï¼Œå¹¶å¯ä»¥æ˜ å°„åˆ°å„ç§è¯­è¨€ï¼Œä»¥ Go è¯­è¨€ä¸ºä¾‹ï¼š Protobuf Goæ•°æ®ç±»å‹ å¤‡æ³¨ double float64 float float32 int32 int32 è´Ÿæ•°ä¼šå ç”¨æ›´å¤šå­—èŠ‚ int64 int64 uint32 uint32 å­—èŠ‚é•¿åº¦ä¼šä¾æ®æ•°å­—å¤§å°å˜åŒ– uint64 uint64 sint32 int32 ä¸ int32 åŒè¡¨ç¤º 32 ä½æ•´æ•°ï¼Œä½† sin32 æ›´é€‚åˆå¤„ç†è´Ÿæ•°åœºæ™¯ï¼Œæ­£è´Ÿæ•°ç›¸åŒå­—èŠ‚æ•° sint64 int64 fixed32 uint32 ä¸ uint32 åŒè¡¨ç¤º 32 ä½æ­£æ•´æ•°ï¼Œfixed32 åœ¨å¤„ç†å¤§äº $2^{28}$ çš„æ•°æ—¶æ›´é«˜æ•ˆï¼Œæ°¸è¿œæ˜¯ 4 å­—èŠ‚ fixed64 uint64 sfixed32 int32 sfixed64 int64 bool bool string string bytes []byte å®šä¹‰çš„ enum å’Œ message ä¹Ÿå¯ä½œä¸ºæ•°æ®ç±»å‹ã€‚ repeatedç”¨äºæè¿°æ•°ç»„ï¼Œå¯é‡å¤å„ç§åŸºç¡€ç±»å‹ï¼ŒåŒ…æ‹¬å†…ç½®ç±»å‹ã€ enum å’Œ message 1234message Example &#123; repeated int32 numbers = 1; // ä¸€ä¸ªæ•´æ•°åˆ—è¡¨ repeated string names = 2; // ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨&#125; mapç”¨äºé”®å€¼å¯¹ç»“æ„ï¼Œç¬¬ä¸€ä½ä¸º key ç±»å‹ï¼Œç¬¬äºŒä½ value ç±»å‹ 1234message Example &#123; map&lt;string, int32&gt; scores = 1; // é”®ä¸ºå­—ç¬¦ä¸²ï¼Œå€¼ä¸ºæ•´æ•° map&lt;int32, string&gt; ids = 2; // é”®ä¸ºæ•´æ•°ï¼Œå€¼ä¸ºå­—ç¬¦ä¸²&#125; key å’Œ value çš„ç±»å‹å¯ä»¥æ˜¯åŸºç¡€ç±»å‹ï¼ŒåŒ…æ‹¬å†…ç½®ç±»å‹ã€ enum å’Œ message ï¼Œä½†ä¸èƒ½æ˜¯ repeatedï¼Œå¦‚æœå¸Œæœ› value ä¸ºæ•°ç»„ï¼Œéœ€è¦å…ˆç”¨ message åŒ…è£…è¿™ä¸ª repeated 123456message Class &#123; message StudentList &#123; repeated string name = 1; &#125; map&lt;string, StudentList&gt; class_map = 1;&#125; enumenum æšä¸¾ç±»å‹ï¼Œç±»å‹åé‡‡ç”¨é©¼å³°å‘½åæ–¹å¼ï¼Œå­—æ®µå‘½åé‡‡ç”¨å¤§å†™å­—æ¯åŠ ä¸‹åˆ’çº¿åˆ†éš”æ–¹å¼ã€‚ 123456789101112131415161718// å®šä¹‰ä¸€ä¸ª enum ç±»å‹enum Corpus &#123; CORPUS_UNSPECIFIED = 0; CORPUS_UNIVERSAL = 1; CORPUS_WEB = 2; CORPUS_IMAGES = 3; CORPUS_LOCAL = 4; CORPUS_NEWS = 5; CORPUS_PRODUCTS = 6; CORPUS_VIDEO = 7;&#125;message SearchRequest &#123; string query = 1; int32 page_number = 2; int32 results_per_page = 3; Corpus corpus = 4; // ä½¿ç”¨ enum ç±»å‹å­—æ®µ&#125; enum çš„é»˜è®¤å€¼ä¸ºå…¶ 0 å€¼ï¼Œæ‰€ä»¥å¿…é¡»åœ¨ç¬¬ä¸€ä½å®šä¹‰ 0 å€¼ã€‚ enum å¯ä»¥é€šè¿‡æ·»åŠ  option allow_alias = true; å…è®¸ä½¿ç”¨åˆ«åã€‚ 1234567enum EnumAllowingAlias &#123; option allow_alias = true; // å…è®¸åˆ«å EAA_UNSPECIFIED = 0; EAA_STARTED = 1; // EAA_STARTED å’Œ EAA_RUNNINGäº’ä¸ºåˆ«å EAA_RUNNING = 1; EAA_FINISHED = 2;&#125; messagemessage æ¶ˆæ¯ç±»å‹ï¼Œç±»å‹åé‡‡ç”¨é©¼å³°å‘½åæ–¹å¼ï¼Œå­—æ®µå‘½åé‡‡ç”¨å°å†™å­—æ¯åŠ ä¸‹åˆ’çº¿åˆ†éš”æ–¹å¼ã€‚ 12345message SearchRequest &#123; string query = 1; int32 page_number = 2; int32 results_per_page = 3;&#125; æ¯ä¸ªå­—æ®µéƒ½è¦åˆ†é…å”¯ä¸€çš„æ•°å€¼æ ‡ç­¾ tagã€‚å·²æœ‰åºå·ä¸èƒ½éšæ„æ”¹åŠ¨ï¼Œä¸ç„¶ä¼šå¯¼è‡´è°ƒç”¨å¤±è´¥ï¼Œåœ¨åé¢æ·»åŠ æ–° tag å­—æ®µä¸å½±å“æ—§æœ‰è°ƒç”¨ã€‚ message ç±»å‹é‡Œæ”¯æŒåµŒå¥—å…¶ä»– message æˆ– enum å®šä¹‰. 12345678message SearchResponse &#123; message Result &#123; string url = 1; string title = 2; repeated string snippets = 3; &#125; repeated Result results = 1;&#125; åœ¨ parent message å¤–ä¹Ÿå¯ä»¥å¼•ç”¨åˆ°åµŒå¥—çš„ message ç±»å‹. 123message SomeOtherMessage &#123; SearchResponse.Result result = 1;&#125; serviceå®šä¹‰è¿œç¨‹è°ƒç”¨æ–¹æ³•ä½œä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„çº¦å®šï¼ŒæœåŠ¡ç«¯éœ€å®ç°æ­¤æ¥å£ï¼Œç”¨æˆ·ç«¯è°ƒç”¨æ­¤æ¥å£ 123service SearchService &#123; rpc Search(SearchRequest) returns (SearchResponse);&#125; ç”Ÿæˆä»£ç ç¼–è¾‘å®Œ .proto æ–‡ä»¶åï¼Œä¾¿å¯ç”Ÿæˆå„ç§è¯­è¨€çš„ä»£ç ï¼Œä¾›å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä½¿ç”¨ï¼Œä»¥ Go è¯­è¨€ä¸ºä¾‹ï¼Œç”Ÿæˆä»£ç å‘½ä»¤å¦‚ä¸‹ï¼š TLS è¯ä¹¦ä¸€ä¸ªç®€å•çš„ gRPCå®ç°å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯æŸ¥è¯¢ç”¨æˆ·çš„ä¿¡æ¯ Protocol Bufferå‚è€ƒ gRPC å®˜æ–¹æ–‡æ¡£ Go-gRPC ä½¿ç”¨æ•™ç¨‹","categories":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/categories/Golang/"}],"tags":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/tags/Golang/"},{"name":"gRPC","slug":"gRPC","permalink":"https://gy23333.github.io/tags/gRPC/"}]},{"title":"git","slug":"git","date":"2023-07-31T17:11:30.000Z","updated":"2024-11-11T03:57:58.127Z","comments":true,"path":"2023/08/01/git/","link":"","permalink":"https://gy23333.github.io/2023/08/01/git/","excerpt":"Git å¸¸ç”¨å‘½ä»¤ä»¥åŠä½¿ç”¨åœºæ™¯","text":"Git å¸¸ç”¨å‘½ä»¤ä»¥åŠä½¿ç”¨åœºæ™¯ æ–‡ä»¶çŠ¶æ€ åˆå§‹åŒ–æ–°ä»“ 1go init æ­¤æ—¶é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ˜¯â€œæœªè·Ÿè¸ªâ€çŠ¶æ€ å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº 1git add &lt;name&gt; æäº¤ 1git commit -m &quot;message&quot; å‘½ä»¤æŸ¥çœ‹ git é…ç½®1git config --list åˆ›å»ºæ–°ä»“åº“åˆå§‹åŒ–æ–°ä»“ 1go init æ­¤æ—¶ä¼šåœ¨ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª .git éšè—ç›®å½•ï¼Œç”¨äºè·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“ å…‹éš†å·²æœ‰é¡¹ç›®1git clone &lt;HTTP or SSH&gt; æ·»åŠ ä¿®æ”¹å°†ä¿®æ”¹è¿‡çš„æ–‡ä»¶ä¿®æ”¹ä¸ºç¼“å­˜çŠ¶æ€ 1git add &lt;name&gt; å–æ¶ˆç¼“å­˜çŠ¶æ€é€šè¿‡ add è®¾ç½®çš„ç¼“å­˜çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡ reset å–æ¶ˆ 1git reset HEAD &lt;name&gt; git clone é€Ÿåº¦æ…¢æ·»åŠ  git çš„åŸŸåæ˜ å°„ æŸ¥è¯¢ ip 123456789101112131415(base) âœ ~ nslookup github.global.ssl.fastly.NetServer: 192.168.1.1Address: 192.168.1.1#53Non-authoritative answer:Name: github.global.ssl.fastly.NetAddress: 173.252.88.67(base) âœ ~ nslookup github.comServer: 192.168.1.1Address: 192.168.1.1#53Non-authoritative answer:Name: github.comAddress: 20.205.243.166 åœ¨ /etc/hosts æ·»åŠ åŸŸåæ˜ å°„ 1220.205.243.166 github.com173.252.88.67 github.global.ssl.fastly.Net åˆ·æ–° DNS ç¼“å­˜ 1sudo killall -HUP mDNSResponder","categories":[],"tags":[{"name":"git","slug":"git","permalink":"https://gy23333.github.io/tags/git/"}]},{"title":"Python","slug":"Python","date":"2023-05-29T16:47:12.000Z","updated":"2024-11-22T15:57:39.319Z","comments":true,"path":"2023/05/30/Python/","link":"","permalink":"https://gy23333.github.io/2023/05/30/Python/","excerpt":"Python å­¦ä¹ è®°å½•","text":"Python å­¦ä¹ è®°å½• åŸºæœ¬è¯­æ³•æ³¨é‡Š123456# å•è¡Œæ³¨é‡Š\"\"\"å¤šè¡Œæ³¨é‡Šå¤šè¡Œæ³¨é‡Š\"\"\" è¡Œä¸ç¼©è¿›ä¸ä½¿ç”¨ {}ï¼Œè€Œæ˜¯ä½¿ç”¨ç¼©è¿›çš„æ–¹å¼æ¥è¡¨ç¤ºä»£ç å— 1234if True: print (\"True\")else: print (\"False\") å¤šè¡Œè¯­å¥è¿‡é•¿çš„è¯­å¥é‡‡ç”¨ \\ æ¢è¡Œ 123total = item_one + \\ item_two + \\ item_three åœ¨ [], {}, æˆ– () ä¸­çš„å¤šè¡Œè¯­å¥ï¼Œä¸éœ€è¦ä½¿ç”¨åæ–œæ  \\ 12total = ['item_one', 'item_two', 'item_three', 'item_four', 'item_five'] å¼•å…¥æ¨¡å—å¼•å…¥æ•´ä¸ªæ¨¡å— 1import somemodule å¼•å…¥æ¨¡å—ä¸­çš„éƒ¨åˆ†å‡½æ•° 1from somemodule import somefunction å˜é‡èµ‹å€¼Python ä¸­çš„å˜é‡èµ‹å€¼ä¸éœ€è¦ç±»å‹å£°æ˜ï¼Œæ‰€ä»¥æ¯ä¸ªå˜é‡åœ¨ä½¿ç”¨å‰éƒ½å¿…é¡»èµ‹å€¼ã€‚ 1a = 1 å¤šä¸ªå˜é‡èµ‹å€¼ 1a, b = 1, 'abc' å…è®¸è¿ç­‰ 1a = b = 1 Numberæ”¯æŒ intã€floatã€boolã€complex å¯ä»¥ç”¨ type() æ¥æŸ¥è¯¢å˜é‡æ‰€æŒ‡çš„å¯¹è±¡ç±»å‹ 12a, b, c, d = 1, 1.5, True, 4+3jprint(type(a), type(b), type(c), type(d)) è¾“å‡ºï¼š 1&lt;class &#39;int&#39;&gt; &lt;class &#39;float&#39;&gt; &lt;class &#39;bool&#39;&gt; &lt;class &#39;complex&#39;&gt; æ•°å€¼è¿ç®—ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼Œpython ä¸­ \\ å’Œ \\\\ éƒ½æ˜¯é™¤æ³•ï¼Œä½†æ˜¯ \\ å¾—ä¸€æµ®ç‚¹æ•°ï¼Œ\\\\ å¾—ä¸€æ•´æ•° 1234&gt;&gt;&gt; 1 / 20.5&gt;&gt;&gt; 1 // 20 ** è¡¨ç¤ºä¹˜æ–¹ï¼Œx ** y å³ $x^y$ 12&gt;&gt;&gt; 2 ** 532 ç±»å‹è½¬æ¢è½¬æ¢æˆæ•°å­—ç±»å‹ç›´æ¥ç”¨ int()ã€float() è¿™æ ·çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ 1234567&gt;&gt;&gt; a, b, c = 1, 1.2, '123'&gt;&gt;&gt; float(a)1.0&gt;&gt;&gt; int(b)1&gt;&gt;&gt; int(c)123 Stringå¯ä»¥ç”¨ &#39; æˆ– &quot; æ¥åˆ›å»ºå­—ç¬¦ä¸² Python ä¸æ”¯æŒå•å­—ç¬¦ç±»å‹ï¼Œå•å­—ç¬¦ä¹Ÿå½“ä½œå­—ç¬¦ä¸²å¤„ç† ç´¢å¼•ä¸æˆªå–å­—ç¬¦ä¸²ç´¢å¼•ï¼Œå‰é¢ä» 0 å¼€å§‹ï¼Œåé¢ä» -1 å¼€å§‹ å­—ç¬¦ä¸²æˆªå– 1str[ä¸Šæ ‡ : ä¸‹æ ‡] èŒƒå›´æ˜¯ [ä¸Šæ ‡, ä¸‹æ ‡)ï¼Œä¸åŒ…æ‹¬ä¸‹æ ‡ 123456789&gt;&gt;&gt; str = 'python'&gt;&gt;&gt; str[0:3]'pyt'&gt;&gt;&gt; str[2:-1]'tho'&gt;&gt;&gt; str[1:]'ython'&gt;&gt;&gt; str[:-1]'pytho' Liståˆ—è¡¨ List çš„æ•°æ®é¡¹ä¸éœ€è¦æ˜¯ç›¸åŒçš„ç±»å‹ï¼Œç´¢å¼•æ–¹å¼ä¸ String ç›¸åŒ 1234567&gt;&gt;&gt; list = [1, 2, \"Red\"]&gt;&gt;&gt; list[0]1&gt;&gt;&gt; list[-1]'Red'&gt;&gt;&gt; list[1:][2, 'Red'] ä½¿ç”¨ append() æ–¹æ³•æ¥æ·»åŠ åˆ—è¡¨é¡¹ 123&gt;&gt;&gt; list.append(\"Green\")&gt;&gt;&gt; list[1, 2, 'Red', 'Green'] ä¹Ÿå¯ç”¨ + æˆ– * æ¥æ‰©å±• List 12&gt;&gt;&gt; [1, 2, 3] + [4, 5, 6][1, 2, 3, 4, 5, 6] 12&gt;&gt;&gt; [1] * 3[1, 1, 1] ä½¿ç”¨ del è¯­å¥æ¥åˆ é™¤åˆ—è¡¨çš„çš„å…ƒç´  123&gt;&gt;&gt; del list[2]&gt;&gt;&gt; list[1, 2, 'Green'] æ±‚é•¿åº¦ 12&gt;&gt;&gt; len([1, 2, 3])3 åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨ List ä¸­ 12&gt;&gt;&gt; 1 in [1, 2, 3]True éå† List 12for x in [1, 2, 3]: ... åˆ¤æ–­ä¸¤ä¸ª List æ˜¯å¦ç›¸åŒï¼Œéœ€å¼•å…¥ operator æ¨¡å— 12345import operatorlist1, list2, list3 = [1, 2], [1, 2], [2, 3]print(operator.eq(list1, list2)) # Trueprint(operator.eq(list1, list3)) # False Tupleå…ƒç¥– Tuple ä¸ List ç±»ä¼¼ï¼Œä½†æ˜¯ Tuple ä¸èƒ½ä¿®æ”¹ Dictionaryæ•°æ®ç±»å‹è½¬æ¢è¿ç®—ç¬¦éƒ¨åˆ†è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° å®ä¾‹ ** è¯­å¥ifwhileforbreakcontinuepasså‘½ä»¤è¡Œå‚æ•°å‡½æ•°æ¨¡å—ç±»æ–‡ä»¶å¼‚å¸¸æµ‹è¯•","categories":[],"tags":[{"name":"python","slug":"python","permalink":"https://gy23333.github.io/tags/python/"}]},{"title":"GDBè°ƒè¯•å·¥å…·","slug":"GDBè°ƒè¯•å·¥å…·","date":"2023-04-17T05:20:36.000Z","updated":"2024-11-11T03:57:58.107Z","comments":true,"path":"2023/04/17/GDBè°ƒè¯•å·¥å…·/","link":"","permalink":"https://gy23333.github.io/2023/04/17/GDB%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/","excerpt":"GDBè°ƒè¯•å™¨çš„","text":"GDBè°ƒè¯•å™¨çš„ GDBå¯ä»¥å®Œæˆä»¥ä¸‹åŠŸèƒ½ï¼š å¼€å§‹å¹¶è®¾ç½®å‚æ•° æ‰“æ–­ç‚¹ GDBæ”¯æŒå¤šç§è¯­è¨€ï¼Œå¸¸è§çš„æ¯”å¦‚ Cã€C++ã€Go æ­å»ºç¯å¢ƒ å®‰è£…GDB 1brew install gdb å¦‚brewä¸‹è½½ç¼“æ…¢ï¼Œä¹Ÿå¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½ æŸ¥çœ‹GDBç‰ˆæœ¬ QuickStart","categories":[],"tags":[{"name":"GDB","slug":"GDB","permalink":"https://gy23333.github.io/tags/GDB/"}]},{"title":"Linuxå­¦ä¹ ","slug":"Linuxå­¦ä¹ ","date":"2023-03-19T14:39:41.000Z","updated":"2024-12-08T07:08:55.750Z","comments":true,"path":"2023/03/19/Linuxå­¦ä¹ /","link":"","permalink":"https://gy23333.github.io/2023/03/19/Linux%E5%AD%A6%E4%B9%A0/","excerpt":"åŸºäºLinux Ubuntuçš„å­¦ä¹ ","text":"åŸºäºLinux Ubuntuçš„å­¦ä¹  Linux è™šæ‹Ÿæœºç¯å¢ƒæ­å»ºLinuxè™šæ‹Ÿæœºçš„å®‰è£… å®‰è£… VMware ä¸‹è½½ Linux OS é•œåƒï¼ˆæ³¨æ„ Mac éœ€è¦ä¸‹è½½ arm æ¶æ„ç‰ˆæœ¬ï¼‰ Ubuntu ä¸‹è½½åœ°å€ï¼šubuntu-24.04.1-live-server-arm64.iso Centos å°†isoæ–‡ä»¶æ‹–æ‹½åˆ°VMwareä¸­ è™šæ‹Ÿæœºç½‘ç»œæ¨¡å¼è™šæ‹Ÿæœºå’Œå®¿ä¸»æœºçš„ç½‘ç»œæ‹“æ‰‘å…³ç³»æœ‰ä¸‰ç§æ¨¡å¼ï¼šæ¡¥æ¥æ¨¡å¼ã€ä¸»æœºæ¨¡å¼ã€NAT æ¨¡å¼ VMwareçš„ä¸‰ç§ç½‘ç»œæ¨¡å¼ æ¡¥æ¥æ¨¡å¼è™šæ‹Ÿæœºç½‘å¡é€šè¿‡è™šæ‹Ÿäº¤æ¢æœº VMnet0 ä¸å®¿ä¸»æœºç½‘å¡è¿›è¡Œæ¡¥æ¥ï¼Œè™šæ‹Ÿæœºç½‘å¡å’Œå®¿ä¸»æœºç½‘å¡åœ¨æ‹“æ‰‘å¤„äºåŒç­‰åœ°ä½ï¼Œç›¸å½“äºå±€åŸŸç½‘ä¸­çš„ä¸€å°ç‹¬ç«‹çš„ä¸»æœºã€‚ æ¡¥æ¥æ¨¡å¼å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œä½†æ˜¯éœ€è¦å ç”¨è¯¥ç½‘æ®µ IPï¼Œå¦‚æœ IP èµ„æºç´§ç¼ºï¼Œä½¿ç”¨ NAT æ¨¡å¼ã€‚ ä¸»æœºæ¨¡å¼è™šæ‹Ÿæœºç½‘å¡å’Œå®¿ä¸»æœºç½‘å¡éƒ½è¿åœ¨è™šæ‹Ÿäº¤æ¢æœº VMnet1 ä¸Šï¼Œè™šæ‹Ÿæœºä¸å¤–ç•Œéš”å¼€æˆç‹¬ç«‹çš„ç³»ç»Ÿï¼Œåªä¸ä¸»æœºç›¸äº’é€šä¿¡ã€‚ NAT æ¨¡å¼åœ¨å®¿ä¸»æœºä¸Šå»ºç«‹å•ç‹¬çš„ä¸“ç”¨ç½‘ç»œï¼Œè™šæ‹Ÿæœºä¸ä¸»æœºä¹‹é—´éƒ½å¯ä»¥ç›¸äº’é€šä¿¡ï¼Œè™šæ‹Ÿæœºä¸å¤–ç•Œé€šè®¯æ—¶ï¼Œæ•°æ®ä¼šè¢«åŒ…è£¹ï¼Œä»¥ä¸»æœºçš„åä¹‰å‘å‡ºå»ã€‚ Virtual Networking Mode VM â€”&gt; Host VM &lt;â€” Host VM1 &lt;â€”&gt; VM2 VM â€”&gt; Net VM &lt;â€” Net Bridge + + + + + Host-Only + + + - - NAT + + - + + NAT Network + + + + + SSHSSHè¿æ¥è™šæ‹Ÿæœº è™šæ‹Ÿæœºå®‰è£… openssh-server 1sudo apt install openssh-server å¼€å¯ sshd æœåŠ¡ 1systemctl start sshd è®¾ç½®è™šæ‹Ÿæœºç½‘å¡ï¼Œè‡³å°‘éœ€è¦ä¸€å¼  NAT æ¨¡å¼ç½‘å¡ç”¨äº ssh è¿æ¥ï¼ŒæŸ¥çœ‹è¯¥ç½‘å¡ 1ip a ç½‘å¡ IP ä¸º 192.168.45.136 ssh è¿æ¥è™šæ‹Ÿæœº 1ssh guoyi@192.168.45.136 è®¾ç½® ssh åˆ«åå°†ä¸‹é¢ç›´æ¥ç™»å…¥æ–¹å¼æ”¹ä¸ºåˆ«åç™»å½• 1ssh guoyi@192.168.45.136 åœ¨ ~/.ssh/config æ–‡ä»¶ä¸­æ·»åŠ è¿œç«¯æœåŠ¡å™¨ä¿¡æ¯ 1234Host Ubuntu HostName 192.168.45.136 User guoyi Port 22 å³å¯ç”¨åˆ«å Ubuntu è¿›è¡Œç™»å½• 1ssh Ubuntu è®¾ç½®å…å¯†ç™»å½• æŸ¥çœ‹æœ¬æœºçš„ ~/.ssh æ–‡ä»¶å¤¹æ˜¯å¦æœ‰å…¬ç§é’¥å¯¹ï¼Œæ²¡æœ‰åˆ™ç”Ÿæˆä¸€å¯¹ 1ssh-keygen é»˜è®¤å‘½åä¸º id_rsaï¼Œä¹Ÿå¯è¾“å…¥è‡ªå®šä¹‰åå­—ï¼Œå¦‚ mac_keyï¼Œå¯†ç æ— éœ€è®¾ç½®ï¼Œè‡ªåŠ¨ç”Ÿæˆç§é’¥ mac_key å’Œå…¬é’¥ mac_key.pub ä¸¤ä¸ªæ–‡ä»¶ å°†å…¬é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ 1ssh-copy-id -i mac_key.pub Ubuntu æ­¤å‘½ä»¤è‡ªåŠ¨å°†å…¬é’¥ä¼ åˆ° Ubuntu æ‰€æŒ‡æœåŠ¡å™¨å’Œç”¨æˆ·çš„ .ssh/known_hosts æ–‡ä»¶ä¸­ ï¼ˆMac é¢å¤–æ­¥éª¤ï¼‰æœ¬æœºæ·»åŠ ç§é’¥æ–‡ä»¶ 1ssh-add -K mac_key ä¸Šé¢ä¸‰æ­¥è®¾ç½®å®Œæˆåï¼Œå³å¯å…å¯†ç™»å½•æœåŠ¡å™¨ å¼€å¯ root ç”¨æˆ·ç™»å½•Ubuntué»˜è®¤ä¸å…è®¸ç›´æ¥ ssh åˆ° root ç”¨æˆ·ï¼Œéœ€åœ¨æœåŠ¡å™¨ä¸Šå¼€å¯ root ç”¨æˆ·ç™»å½•å¼€å…³ åœ¨ Ubuntu æœåŠ¡å™¨çš„ /etc/ssh/sshd_config ä¸­ï¼Œå–æ¶ˆ PermitRootLogin å‚æ•°çš„æ³¨é‡Šï¼Œå¹¶å°†ç”±å…¶ prohibit-password æ”¹ä¸º yes 1PermitRootLogin yes é‡å¯ sshd 1systemctl restart sshd apt æ›´æ–° aptï¼Œæœ‰äº›åŒ…æ‰¾ä¸åˆ°ï¼Œå¯èƒ½æ˜¯å› ä¸º apt æ²¡æ›´æ–° 1apt update Linuxç›®å½•ç»“æ„Linuxçš„ç›®å½•åŒæ ·ä¸ºæ ‘å½¢ç»“æ„ï¼Œæœ€é¡¶çº§çš„æ ¹ç›®å½•ä¸º/ ç»å¯¹è·¯å¾„ ä»æ ¹ç›®å½•/å†™èµ·ï¼Œä¾‹å¦‚/usr/share/doc ç›¸å¯¹è·¯å¾„ LinuxåŸºç¡€å‘½ä»¤ ls æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶ cat &lt;æ–‡ä»¶è·¯å¾„&gt; æŸ¥çœ‹æ–‡ä»¶å†…å®¹ clear æ¸…ç©ºå‘½ä»¤è¡Œ rpmå‘½ä»¤redhat package managerï¼ŒåŒ…ç®¡ç†å‘½ä»¤ rpm -q &lt;package name&gt; ï¼šæŸ¥çœ‹åŒ…æ˜¯å¦å®‰è£… rpm -qi &lt;package name&gt; ï¼šæŸ¥çœ‹åŒ…çš„è¯¦ç»†ä¿¡æ¯ rpm -ql &lt;package name&gt; ï¼šæŸ¥çœ‹åŒ…åˆ—è¡¨ï¼ˆé‡Œé¢çš„æ–‡ä»¶ï¼‰ vimæ‰“å¼€å¹¶ç¼–è¾‘æ–‡ä»¶ 1vi &lt;æ–‡ä»¶è·¯å¾„&gt; i åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ ESC``:wqä¿å­˜å¹¶é€€å‡º yumyum æ˜¯ Shell å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œæä¾›äº†æ–¹ä¾¿çš„å®‰è£…ã€å¸è½½ã€æ›´æ–°è½¯ä»¶åŒ…çš„å‘½ä»¤ yumçš„å®‰è£…ç£ç›˜æ‰©å±•æ ¹ç›®å½•æŸ¥çœ‹å½“å‰ç£ç›˜å ç”¨æƒ…å†µï¼Œå¯ä»¥çœ‹åˆ°æ ¹ç›®å½•å ç”¨ç‡å¾ˆé«˜ï¼Œä¸”åœ¨ /dev/mapper/ubuntu--vg-ubuntu--lv åˆ†åŒº 1234567891011guoyi@ubuntu2404:~$ df -hFilesystem Size Used Avail Use% Mounted ontmpfs 391M 1.7M 389M 1% /runefivarfs 256K 32K 225K 13% /sys/firmware/efi/efivars/dev/mapper/ubuntu--vg-ubuntu--lv 9.8G 8.3G 974M 90% /tmpfs 2.0G 0 2.0G 0% /dev/shmtmpfs 5.0M 8.0K 5.0M 1% /run/lock/dev/nvme0n1p2 1.7G 105M 1.5G 7% /boot/dev/nvme0n1p1 952M 6.4M 945M 1% /boot/efitmpfs 391M 124K 391M 1% /run/user/1000/dev/sr0 2.4G 2.4G 0 100% /media/guoyi/Ubuntu-Server 24.04.1 LTS arm64 æŸ¥çœ‹å½“å‰ç£ç›˜åˆ†åŒºï¼Œubuntu--vg-ubuntu--lv åœ¨ nvme0n1p3 ä¸‹ 123456789101112131415guoyi@ubuntu2404:~$ lsblkNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTSloop0 7:0 0 4K 1 loop /snap/bare/5loop1 7:1 0 68.8M 1 loop /snap/core22/1666loop2 7:2 0 250.3M 1 loop /snap/firefox/5236loop3 7:3 0 483.3M 1 loop /snap/gnome-42-2204/178loop4 7:4 0 91.7M 1 loop /snap/gtk-common-themes/1535loop5 7:5 0 33.7M 1 loop /snap/snapd/21761loop6 7:6 0 144.1M 1 loop /snap/thunderbird/560sr0 11:0 1 2.3G 0 rom /media/guoyi/Ubuntu-Server 24.04.1 LTS arm64nvme0n1 259:0 0 50G 0 diskâ”œâ”€nvme0n1p1 259:1 0 953M 0 part /boot/efiâ”œâ”€nvme0n1p2 259:2 0 1.8G 0 part /bootâ””â”€nvme0n1p3 259:3 0 11.9G 0 part â””â”€ubuntu--vg-ubuntu--lv 252:0 0 10G 0 lvm / æ‰©å±•æ­¥éª¤ï¼š é€šè¿‡ VMWare æ‰©å±•ç£ç›˜ é€šè¿‡ Disks æˆ–è€… GParted è½¯ä»¶å°† nvme0n1p3 åˆ†åŒºæ‰©å±• å°†å‰©ä½™ç©ºé—´åˆ†é…ç»™ /dev/mapper/ubuntu--vg-ubuntu--lv åˆ†åŒº 1sudo lvextend -r -l +100%FREE &#x2F;dev&#x2F;mapper&#x2F;ubuntu--vg-ubuntu--lv æŸ¥çœ‹ç£ç›˜æƒ…å†µ 123456789101112131415161718192021222324252627guoyi@ubuntu2404:~$ lsblkNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTSloop0 7:0 0 4K 1 loop /snap/bare/5loop1 7:1 0 68.8M 1 loop /snap/core22/1666loop2 7:2 0 250.3M 1 loop /snap/firefox/5236loop3 7:3 0 483.3M 1 loop /snap/gnome-42-2204/178loop4 7:4 0 91.7M 1 loop /snap/gtk-common-themes/1535loop5 7:5 0 33.7M 1 loop /snap/snapd/21761loop6 7:6 0 144.1M 1 loop /snap/thunderbird/560sr0 11:0 1 2.3G 0 rom /media/guoyi/Ubuntu-Server 24.04.1 LTS arm64nvme0n1 259:0 0 50G 0 diskâ”œâ”€nvme0n1p1 259:1 0 953M 0 part /boot/efiâ”œâ”€nvme0n1p2 259:2 0 1.8G 0 part /bootâ””â”€nvme0n1p3 259:3 0 47.3G 0 part â””â”€ubuntu--vg-ubuntu--lv 252:0 0 47.3G 0 lvm / guoyi@ubuntu2404:~$ df -hFilesystem Size Used Avail Use% Mounted ontmpfs 391M 1.7M 389M 1% /runefivarfs 256K 32K 225K 13% /sys/firmware/efi/efivars/dev/mapper/ubuntu--vg-ubuntu--lv 47G 8.3G 37G 19% /tmpfs 2.0G 0 2.0G 0% /dev/shmtmpfs 5.0M 8.0K 5.0M 1% /run/lock/dev/nvme0n1p2 1.7G 105M 1.5G 7% /boot/dev/nvme0n1p1 952M 6.4M 945M 1% /boot/efitmpfs 391M 128K 391M 1% /run/user/1000/dev/sr0 2.4G 2.4G 0 100% /media/guoyi/Ubuntu-Server 24.04.1 LTS arm64 é—®é¢˜è®°å½•su root æ—¶ï¼ŒæŠ¥é”™ Authentication failureé¦–æ¬¡ su root æ—¶ï¼Œéœ€å…ˆå½•å…¥å¯†ç  1sudo passwd root å¦åˆ™ä¼šå‡ºç° Authentication failure çš„æŠ¥é”™","categories":[],"tags":[]},{"title":"DNSä¸Bind","slug":"DNSä¸Bind","date":"2023-03-19T13:15:53.000Z","updated":"2024-11-11T03:57:58.128Z","comments":true,"path":"2023/03/19/DNSä¸Bind/","link":"","permalink":"https://gy23333.github.io/2023/03/19/DNS%E4%B8%8EBind/","excerpt":"åŸºäºã€ŠDNSä¸Bindã€‹çš„å­¦ä¹ ","text":"åŸºäºã€ŠDNSä¸Bindã€‹çš„å­¦ä¹  DNSåŸºç¡€TCP/IPç½‘ç»œä¾èµ–IPåœ°å€è¿›è¡Œè®¾å¤‡é—´é€šä¿¡ï¼Œä½†æ˜¯æ•°å­—å½¢å¼çš„IPåœ°å€éš¾ä»¥è®°å¿†ï¼Œæ‰€ä»¥ä½¿ç”¨åŸŸåï¼ˆå¦‚www.google.comï¼‰è§£ææˆIPåœ°å€ï¼Œä»¥ä¾¿è®¿é—®è¯¥ç½‘ç»œè®¾å¤‡ã€‚ æœ¬æœºä¸Šçš„/etc/hostsä¸­å­˜æ”¾äº†éƒ¨åˆ†åŸŸååˆ°IPåœ°å€çš„æ˜ å°„ï¼Œå¯ä»¥æ‰‹å·¥ç»´æŠ¤ï¼Œåˆ†æ•£å¼ç®¡ç†æ˜ å°„ã€‚ å¦‚åœ¨macä¸­çš„Finderä¸­æŒ‰ä¸‹Shift+command+Gï¼Œè¾“å…¥/etc/hostsï¼Œå³å¯æ‰¾åˆ°æœ¬æœºçš„åç§°è§£æé…ç½®æ–‡ä»¶ã€‚ ä½†hostsæ–‡ä»¶ä¸å¯èƒ½å­˜ä¸‹æ‰€æœ‰çš„ï¼ˆåŸŸåï¼ŒIPåœ°å€ï¼‰æ˜ å°„ï¼Œäºæ˜¯ä¾¿å¼•å…¥äº†DNSã€‚ åŸŸåç³»ç»Ÿï¼ˆDomain Name Systemï¼ŒDNSï¼‰é€šè¿‡åˆ†å¸ƒå¼çš„æ•°æ®åº“æ¥å®ç°IPåœ°å€å’ŒåŸŸåçš„æ˜ å°„ã€‚ DNSåŸºäºC/Sæ¶æ„ï¼ŒæœåŠ¡ç«¯ç«¯å£å·UDP53ã€TCP53ã€‚ DNSåŸŸåç»“æ„DNSé‡‡ç”¨åˆ†å¸ƒå¼çš„æ•°æ®åº“ï¼Œæ˜¯ä¸€ä¸ªé€†å‘çš„æ ‘å½¢ç»“æ„ã€‚ DNSæ ‘æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªåŸŸ æ ¹åŸŸåæœåŠ¡å™¨ æœ€é«˜å±‚çš„åŸŸå°±æ˜¯æ ¹åŸŸrootï¼Œå…¨çƒå…±13å°æ ¹åŸŸåæœåŠ¡å™¨ï¼Œæ ¹åŸŸå³æ˜¯ä¸€ä¸ªç‚¹ . ï¼Œé€šå¸¸éƒ½çœç•¥ä¸å†™ã€‚ é¡¶çº§åŸŸåæœåŠ¡å™¨ åˆç§°ä¸€çº§åŸŸåï¼Œå¸¸è§çš„æœ‰â€.comâ€ã€â€.orgâ€ã€â€.netâ€ã€â€.cnâ€ç­‰ã€‚ å‰©ä¸‹çš„åŸŸä¸ºäºŒçº§ã€ä¸‰çº§ã€å››çº§åŸŸï¼Œæœ€å¤šå¯è¾¾127çº§åŸŸåã€‚ FQDN å…¨ç§°åŸŸå = ä¸»æœºå + åŸŸå ä»¥ www.baidu.com å’Œ tieba.baidu.com ä¸ºä¾‹baidu.com ä¸ºåŸŸåï¼Œwww å’Œ tieba éƒ½æ˜¯ baidu.com ä¸‹çš„ä¸»æœºï¼Œä¸€ä¸ªåŸŸä¸‹å¯ä»¥å®šä¹‰å¤šå°ä¸»æœºï¼Œåªéœ€é…ç½®å¥½ä¸»æœºåå’Œå¯¹åº”ä¸»æœºçš„IPåœ°å€å³å¯ã€‚ www.baidu.comæœ¬è¯¥æœ‰ä¸€ä¸ªæ ¹åŸŸåçš„ .ï¼Œå³ www.baidu.com.ï¼Œä½†æ ¹åŸŸåçš„ . ä¸€èˆ¬çœç•¥ä¸å†™ã€‚ DNSæŸ¥è¯¢æ–¹æ³•è¿­ä»£æŸ¥è¯¢ é€’å½’æŸ¥è¯¢ ç¼“å­˜å’Œæ›´æ–°åŸŸåè§£æé¡ºåº æŸ¥æ‰¾ /etc/hosts DNSè½¯ä»¶BINDBINDæ˜¯ä¸€æ¬¾æä¾›DNSæœåŠ¡çš„è½¯ä»¶ï¼ŒCentoså®‰è£…BINDä½œä¸ºDNSæœåŠ¡å™¨ï¼Œç¨‹åºåç§°ä¸ºnamed BINDç›¸å…³ç¨‹åºåŒ…æœ‰4ä¸ªï¼š bindï¼šæœåŠ¡å™¨ bind-libsï¼šç›¸å…³åº“ bind-utilsï¼šå®¢æˆ·ç«¯å·¥å…· bind-chrootï¼šå®‰å…¨åŒ… Bindå®‰è£…åœ¨Centosä¸Šä½¿ç”¨yumå®‰è£…çš„bind åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œä»¥è·å–æƒé™ 1su root ä½¿ç”¨yumå®‰è£…Bind 1yum -y install bind å®‰è£…å®Œbindåï¼Œç›¸å…³ç¨‹åºåŒ…å­˜åœ¨ä¾èµ–æ€§ï¼Œä¹Ÿä¼šä¸€èµ·å®‰è£…ï¼Œå¯ä»¥ç”¨rpmæŸ¥çœ‹æ˜¯å¦é¡ºå¸¦å®‰è£…äº†ç›¸å…³ç¨‹åºåŒ… 1rpm -qi bind-libs 1rpm -qi bind-utils 1rpm -qi bind-chroot å¦‚ç¼ºå°‘bind-libsã€bind-utilsï¼Œå»ºè®®å•ç‹¬å®‰è£… BINDåŒ…ç›¸å…³æ–‡ä»¶æŸ¥è¯¢BINDåŒ…ç›¸å…³æ–‡ä»¶åˆ—è¡¨ 1rpm -ql bind é‡Œé¢çš„å¸¸ç”¨æ–‡ä»¶ä»‹ç»ï¼š BINDä¸»ç¨‹åºï¼š/usr/sbin/named ä¸»é…ç½®æ–‡ä»¶ï¼š/etc/named.conf æ•°æ®åº“ç›®å½•ï¼š/var/named å¯åŠ¨DNSæœåŠ¡å¯åŠ¨namedç¨‹åºï¼Œæœ¬æœºå³å¯å……å½“DNSæœåŠ¡å™¨ 1systemctl start named æŸ¥çœ‹DNSæœåŠ¡å™¨æ–¹æ³•ä¸€ï¼šå¯è§†åŒ–é¡µé¢ä¸­æŸ¥çœ‹DNSå³ä¸Šè§’ Wired Settings -&gt; Wiredçš„è®¾ç½® -&gt; DNS æ–¹æ³•äºŒï¼šæŸ¥çœ‹DNSå®¢æˆ·æœºé…ç½®æ–‡ä»¶ï¼ˆ/etc/resolv.confï¼‰/etc/resolv.confæ˜¯DNSå®¢æˆ·æœºé…ç½®æ–‡ä»¶ 1cat &#x2F;etc&#x2F;resolv.conf æŸ¥çœ‹è¯¥æ–‡ä»¶ 123# Generated by NetworkManagersearch localdomainnameserver 192.168.45.2 æŸ¥çœ‹nameserveré¡¹ï¼Œå¯ä»¥çœ‹å‡ºä½¿ç”¨çš„DNSæœåŠ¡å™¨çš„IPåœ°å€ä¸º192.168.45.2 æ–¹æ³•ä¸‰ï¼šæŸ¥çœ‹ç½‘å¡é…ç½®æ–‡ä»¶ï¼ˆ/etc/sysconfig/network-scripts/ifcfg-ens33ï¼‰æ¯ç§Linuxç³»ç»Ÿçš„ç½‘å¡é…ç½®æ–‡ä»¶è·¯å¾„ä¸åŒï¼Œè¯¦è§ ç›¸å…³æ–‡ä»¶é…ç½® -&gt; ç½‘å¡é…ç½®æ–‡ä»¶ 1cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33 æŸ¥çœ‹DNSé…ç½®é€‰é¡¹ è®¾ç½®DNSæœåŠ¡å™¨CentOSé…ç½®ç½‘å¡ä¸ºé™æ€IPDHCPåè®®ä¼šè‡ªåŠ¨åŠ¨æ€é…ç½®IPå’ŒDNSæœåŠ¡å™¨ï¼Œä¸ºäº†æ–¹ä¾¿å­¦ä¹ DNSï¼Œå»ºè®®æ”¹ä¸ºé™æ€IPæ¨¡å¼å­¦ä¹ ã€‚ å¦‚æœ¬èº«å°±æ˜¯é™æ€IPï¼Œè¯·è·³è¿‡æ­¤æ­¥ã€‚ æŸ¥çœ‹æ˜¯é™æ€IPè¿˜æ˜¯åŠ¨æ€IPå¯ä»¥åœ¨ç½‘å¡é…ç½®æ–‡ä»¶ä¸­æŸ¥çœ‹é‡‡ç”¨çš„æ˜¯DHCPåè®®è¿˜æ˜¯é™æ€IP æŸ¥çœ‹ç½‘å¡é…ç½®æ–‡ä»¶ 1cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33 æ˜¾ç¤º 123456789101112131415TYPE&#x3D;&quot;Ethernet&quot;PROXY_METHOD&#x3D;&quot;none&quot;BROWSER_ONLY&#x3D;&quot;no&quot;BOOTPROTO&#x3D;&quot;dhcp&quot;DEFROUTE&#x3D;&quot;yes&quot;IPV4_FAILURE_FATAL&#x3D;&quot;no&quot;IPV6INIT&#x3D;&quot;yes&quot;IPV6_AUTOCONF&#x3D;&quot;yes&quot;IPV6_DEFROUTE&#x3D;&quot;yes&quot;IPV6_FAILURE_FATAL&#x3D;&quot;no&quot;IPV6_ADDR_GEN_MODE&#x3D;&quot;stable-privacy&quot;NAME&#x3D;&quot;ens33&quot;UUID&#x3D;&quot;0a5c00b5-f7bc-49cf-9a58-11ca6df07fe2&quot;DEVICE&#x3D;&quot;ens33&quot;ONBOOT&#x3D;&quot;yes&quot; æŸ¥çœ‹BOOTPROTOé€‰é¡¹ï¼Œå¦‚æœæ˜¯dhcpï¼Œåˆ™é‡‡ç”¨DHCPåè®®ï¼›å¦‚æ˜¯staticï¼Œåˆ™é‡‡ç”¨é™æ€IP é…ç½®ç½‘å¡ä¸ºé™æ€IP æ‰“å¼€ç½‘å¡é…ç½®æ–‡ä»¶ 1vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33 ä¿®æ”¹é…ç½® 12BOOTPROTO&#x3D;staticONBOOT&#x3D;yes å¢åŠ é…ç½® æŸ¥çœ‹ç½‘ç»œé…ç½®ï¼Œæ‰‹åŠ¨å¡«å…¥ 123IPADDR&#x3D;192.168.45.130NETMASK&#x3D;255.255.255.0GATEWAY&#x3D;192.168.45.2 é‡å¯ç½‘å¡ 1nmcli connection reload 1nmcli connection up ens33 æˆ–è€… 1systemctl restart network æ­¤æ—¶ï¼Œç½‘å¡é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ 123456789101112131415161718TYPE&#x3D;EthernetPROXY_METHOD&#x3D;noneBROWSER_ONLY&#x3D;noBOOTPROTO&#x3D;staticDEFROUTE&#x3D;yesIPV4_FAILURE_FATAL&#x3D;noIPV6INIT&#x3D;yesIPV6_AUTOCONF&#x3D;yesIPV6_DEFROUTE&#x3D;yesIPV6_FAILURE_FATAL&#x3D;noIPV6_ADDR_GEN_MODE&#x3D;stable-privacyNAME&#x3D;ens33UUID&#x3D;0a5c00b5-f7bc-49cf-9a58-11ca6df07fe2DEVICE&#x3D;ens33ONBOOT&#x3D;yesIPADDR&#x3D;192.168.45.130NETMASK&#x3D;255.255.255.0GATEWAY&#x3D;192.168.45.2 æ²¡æœ‰é…ç½®DNSæœåŠ¡å™¨ï¼ŒæŸ¥çœ‹DNSæœåŠ¡å™¨ï¼Œä¹Ÿéƒ½æ˜¯ä¸ºç©º æ­¤æ—¶ï¼Œå°è¯•pingä¸€ä¸‹åŸŸå 1ping baidu.com æ²¡æœ‰DNSæœåŠ¡å™¨ï¼ŒåŸŸåè§£æå¤±è´¥ è®¾ç½®DNSæœåŠ¡å™¨ ç¼–è¾‘ç½‘å¡é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹DNSæœåŠ¡å™¨ï¼Œå¦‚å°è¯•åŠ å…¥æœ¬æœºIPä½œä¸ºDNSæœåŠ¡å™¨ 1vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33 åŠ å…¥ä¸€è¡ŒDNSé…ç½®ï¼Œ127.0.0.1æ˜¯é€å›åœ°å€ï¼ŒæŒ‡æœ¬æœºã€‚ 1DNS1&#x3D;127.0.0.1 å¦‚æœ‰å¤šä¸ªDNSæœåŠ¡å™¨ï¼Œåˆ™DNS1ã€DNS2ä¾æ¬¡ç±»æ¨ é‡å¯è¯¥ç½‘å¡ 1nmcli connection reload 1nmcli connection up ens33 é‡æ–°æŸ¥çœ‹DNSæœåŠ¡å™¨ 1cat &#x2F;etc&#x2F;resolv.conf æ˜¾ç¤º 1nameserver 127.0.0.1 å¯ä»¥çœ‹åˆ°127.0.0.1æ·»åŠ è¿›äº†DNSæœåŠ¡å™¨ä¸­ï¼Œæ­¤æ—¶æœ¬æœºæ—¢æ˜¯DNSæœåŠ¡å™¨ï¼Œåˆæ˜¯DNSçš„å®¢æˆ·ç«¯ å¯åŠ¨BINDçš„DNSæœåŠ¡ 1systemctl start named pingä¸€ä¸‹åŸŸå 1ping baidu.com pingæˆåŠŸï¼Œæœ¬æœºä½œä¸ºDNSæœåŠ¡å™¨å®Œæˆäº†baidu.comçš„åŸŸåè§£æ å¤šIPé…ç½®ä¸€å°è™šæ‹Ÿæœºå¯ä»¥é…ç½®å¤šä¸ªé™æ€IPï¼Œå³å¤šç½‘å¡ã€‚ ä¸Šé¢çš„DNSé…ç½®åªåˆ©ç”¨äº†å•ç½‘å¡ens33ï¼ŒåŒæ—¶ä½œä¸ºDNSæœåŠ¡å™¨å’Œå®¢æˆ·æœºã€‚ å¯ä»¥é…ç½®å¤šä¸ªIPåœ°å€ï¼Œåˆ†åˆ«ä½œä¸ºDNSæœåŠ¡å™¨å’Œå®¢æˆ·æœºã€‚ å¤šIPé…ç½®12 ä¸»DNSé…ç½®ç›¸å…³æ–‡ä»¶é…ç½®DNSå®¢æˆ·æœºé…ç½®æ–‡ä»¶ /etc/resolv.conf/etc/resolv.confæ˜¯DNSå®¢æˆ·æœºé…ç½®æ–‡ä»¶ï¼Œç”¨äºè®¾ç½®DNSæœåŠ¡å™¨çš„IPåœ°å€åŠDNSåŸŸåï¼Œä¾›åŸŸåè§£æå™¨ï¼ˆresolverï¼‰ä½¿ç”¨ã€‚ æ¯ä¸€è¡Œä»¥ä¸€ä¸ªå…³é”®å­—å¼€å¤´ï¼Œåæ¥ä¸€ä¸ªæˆ–å¤šä¸ªç”±ç©ºæ ¼éš”å¼€çš„å‚æ•°ã€‚ å…³é”®å­—å…³é”®å­—æœ‰å››ä¸ªï¼šï¼ˆnameserveræ˜¯å¿…å¡«é¡¹ï¼Œå…¶ä½™çš„å…³é”®å­—éƒ½æ˜¯å¯é€‰ï¼‰ nameserver è¡¨æ˜DNSæœåŠ¡å™¨çš„IPåœ°å€ å¯ä»¥æœ‰å¤šè¡Œï¼ŒæŒ‰é¡ºåºæŸ¥è¯¢ï¼Œå¦‚æœå‰é¢çš„IPæ— å“åº”ï¼Œåˆ™æŸ¥è¯¢ä¸‹ä¸€ä¸ªIP domain å£°æ˜ä¸»æœºçš„åŸŸå å¾ˆå¤šç¨‹åºç”¨åˆ°å®ƒï¼Œå¦‚é‚®ä»¶ç³»ç»Ÿï¼›å½“ä¸ºæ²¡æœ‰åŸŸåçš„ä¸»æœºè¿›è¡ŒDNSæŸ¥è¯¢æ—¶ï¼Œä¹Ÿè¦ç”¨åˆ°ã€‚å¦‚æœæ²¡æœ‰åŸŸåï¼Œä¸»æœºåå°†è¢«ä½¿ç”¨ï¼Œåˆ é™¤æ‰€æœ‰åœ¨ç¬¬ä¸€ä¸ªç‚¹( .)å‰é¢çš„å†…å®¹ search å®ƒçš„å¤šä¸ªå‚æ•°æŒ‡æ˜åŸŸåæŸ¥è¯¢é¡ºåºã€‚å½“è¦æŸ¥è¯¢æ²¡æœ‰åŸŸåçš„ä¸»æœºï¼Œä¸»æœºå°†åœ¨ç”±searchå£°æ˜çš„åŸŸä¸­åˆ†åˆ«æŸ¥æ‰¾ å¦‚è¦åŸŸå www è§£æï¼Œä½† www æ— æ³•è§£æï¼Œå¦‚é…ç½®ä¸­æœ‰ search baidu.com ï¼Œåˆ™åœ¨wwwååŠ ä¸Š . + baidu.com ï¼Œå¯¹ www.baidu.comé‡æ–°è¿›è¡Œè§£æ domainå’Œsearchä¸èƒ½å…±å­˜ï¼›å¦‚æœåŒæ—¶å­˜åœ¨ï¼Œåé¢å‡ºç°çš„å°†ä¼šè¢«ä½¿ç”¨ sortlist å…è®¸å°†å¾—åˆ°åŸŸåç»“æœè¿›è¡Œç‰¹å®šçš„æ’åºã€‚å®ƒçš„å‚æ•°ä¸ºç½‘ç»œ/æ©ç å¯¹ï¼Œå…è®¸ä»»æ„çš„æ’åˆ—é¡ºåº åŸŸåè§£æé¡ºåº æŸ¥æ‰¾ etc/hosts æ ¹æ® nameserver æŒ‡å®šçš„DNSæœåŠ¡å™¨è§£æåŸŸå å¦‚æœæ‰€æœ‰çš„ nameserver éƒ½æ‰¾ä¸åˆ°åŸŸåï¼Œåˆ™è¿›è¡Œsearchè¡¥å…¨ï¼Œé‡æ–°èµ°1ï½2æ­¥ ç¤ºä¾‹åˆ†ææŸ¥çœ‹/etc/resolv.confæ–‡ä»¶ 1cat &#x2F;etc&#x2F;resolv.conf å¦‚ 123# Generated by NetworkManagersearch localdomainnameserver 192.168.45.2 ç½‘å¡é…ç½®æ–‡ä»¶ /etc/sysconfig/network-scripts/ifcfg-ens33Centoså¯åœ¨/etc/sysconfig/network-scriptsç›®å½•ä¸‹æŸ¥æ‰¾ç½‘å¡é…ç½®æ–‡ä»¶ï¼ŒLinuxä¼ ç»Ÿç½‘å¡è®¾å¤‡å‘½åæ˜¯eth0ã€eth1è¿™æ ·çš„ï¼Œè€ŒCentosæä¾›äº†ä¸åŒçš„å‘½åè§„åˆ™ï¼Œæ¯”å¦‚ens33ï¼ˆUbuntuçš„ç½‘å¡é…ç½®æ–‡ä»¶æœ‰æ‰€ä¸åŒï¼‰ æŸ¥çœ‹ç½‘å¡é…ç½®æ–‡ä»¶ 1cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33 123456789101112131415TYPE&#x3D;Ethernet #ç½‘å¡ç±»å‹ï¼šä¸ºä»¥å¤ªç½‘PROXY_METHOD&#x3D;none # ä»£ç†æ–¹å¼ï¼šå…³é—­çŠ¶æ€BROWSER_ONLY&#x3D;no # åªæ˜¯æµè§ˆå™¨ï¼šå¦BOOTPROTO&#x3D;dhcp # ç½‘å¡çš„å¼•å¯¼åè®®ï¼šDHCP[ä¸­æ–‡åç§°: åŠ¨æ€ä¸»æœºé…ç½®åè®®]DEFROUTE&#x3D;yes # é»˜è®¤è·¯ç”±ï¼šæ˜¯IPV4_FAILURE_FATAL&#x3D;no # æ˜¯ä¸å¼€å¯IPV4è‡´å‘½é”™è¯¯æ£€æµ‹ï¼šå¦IPV6INIT&#x3D;yes # IPV6æ˜¯å¦è‡ªåŠ¨åˆå§‹åŒ–: æ˜¯IPV6_AUTOCONF&#x3D;yes # IPV6æ˜¯å¦è‡ªåŠ¨é…ç½®ï¼šæ˜¯IPV6_DEFROUTE&#x3D;yes # IPV6æ˜¯å¦å¯ä»¥ä¸ºé»˜è®¤è·¯ç”±ï¼šæ˜¯IPV6_FAILURE_FATAL&#x3D;no # æ˜¯ä¸å¼€å¯IPV6è‡´å‘½é”™è¯¯æ£€æµ‹ï¼šå¦IPV6_ADDR_GEN_MODE&#x3D;stable-privacy # IPV6åœ°å€ç”Ÿæˆæ¨¡å‹ï¼šstable-privacyNAME&#x3D;ens33 # ç½‘å¡ç‰©ç†è®¾å¤‡åç§°UUID&#x3D;0a5c00b5-f7bc-49cf-9a58-11ca6df07fe2 # é€šç”¨å”¯ä¸€è¯†åˆ«ç , æ¯ä¸€ä¸ªç½‘å¡éƒ½ä¼šæœ‰, ä¸èƒ½é‡å¤, å¦ä¸¤å°linuxåªæœ‰ä¸€å°ç½‘å¡å¯ç”¨DEVICE&#x3D;ens33 # ç½‘å¡è®¾å¤‡åç§°, å¿…é¡»å’Œ &#96;NAME&#96; å€¼ä¸€æ ·ONBOOT&#x3D;yes # æ˜¯å¦å¼€æœºå¯åŠ¨ï¼Œè¦æƒ³ç½‘å¡å¼€æœºå°±å¯åŠ¨æˆ–é€šè¿‡ &#96;systemctl restart network&#96;æ§åˆ¶ç½‘å¡,å¿…é¡»è®¾ç½®ä¸º &#96;yes&#96; å‚è€ƒ Linux DNSæœåŠ¡Bindæœ€å…¨æ•™ç¨‹","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"tags":[{"name":"DNS","slug":"DNS","permalink":"https://gy23333.github.io/tags/DNS/"},{"name":"BIND","slug":"BIND","permalink":"https://gy23333.github.io/tags/BIND/"}]},{"title":"GoåŸºæœ¬è¯­æ³•","slug":"GoåŸºæœ¬è¯­æ³•","date":"2023-03-15T14:27:26.000Z","updated":"2024-11-11T03:57:58.122Z","comments":true,"path":"2023/03/15/GoåŸºæœ¬è¯­æ³•/","link":"","permalink":"https://gy23333.github.io/2023/03/15/Go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/","excerpt":"GoLangåŸºæœ¬è¯­æ³•","text":"GoLangåŸºæœ¬è¯­æ³• ç¯å¢ƒé…ç½® goä¸‹è½½åœ°å€ é…ç½®ç¯å¢ƒå˜é‡ï¼Œå‘½ä»¤è¡Œè¾“å…¥ 1export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;go&#x2F;bin:$PATH æ­¤æ—¶å¯åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨goå‘½ä»¤ æ–°å»ºä¸€ä¸ªtest.goæ–‡ä»¶ 1234567package mainimport \"fmt\"func main() &#123; fmt.Println(\"Hello, World!\")&#125; åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼Œå³å¯è¿è¡Œ 1go run test.go å…¥é—¨goçš„åŸºæœ¬ç»“æ„å’Œè¯­æ³•ä¸€ä¸ªç®€å•çš„goç¨‹åºï¼š 123456789// å®šä¹‰åŒ…package main// è°ƒç”¨åŒ…import \"fmt\"func main() &#123; fmt.Print(\"Hello, World!\")&#125; åŒ…å£°æ˜ å¿…é¡»åœ¨éæ³¨é‡Šçš„ç¬¬ä¸€è¡Œè¿›è¡ŒåŒ…å£°æ˜ 1package main æ¯ä¸ªGoåº”ç”¨ç¨‹åºéƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªmainåŒ… å¼•å…¥åŒ… 1import \"fmt\" è¡Œåˆ†éš”ç¬¦ goä¸­æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè¯­å¥ç»“æŸï¼Œç»“å°¾ä¸éœ€è¦åŠ åƒCé‚£æ ·åŠ ; è¾“å…¥è¾“å‡ºPrintf æ ¼å¼åŒ–å­—ç¬¦ä¸²ä½¿ç”¨fmt.Printfæ¥æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸² 1fmt.Printf(æ ¼å¼åŒ–æ ·å¼, å‚æ•°åˆ—è¡¨â€¦) æ ¼ å¼ æ è¿° %s å­—ç¬¦ä¸² %f æµ®ç‚¹æ•° %d åè¿›åˆ¶æ•´å‹ %b äºŒè¿›åˆ¶æ•´å‹ %o å…«è¿›åˆ¶æ•´å‹ %x åå…­è¿›åˆ¶æ•´å‹ %X åå…­è¿›åˆ¶æ•´å‹ï¼Œå­—æ¯å¤§å†™æ–¹å¼æ˜¾ç¤º 123name := \"John\"age := 23fmt.Printf(\"%s is %d\", name, age) è¾“å‡º: John is 23 å˜é‡å’Œå¸¸é‡å˜é‡å˜é‡åç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç»„æˆï¼Œå…¶ä¸­é¦–ä¸ªå­—ç¬¦ä¸èƒ½ä¸ºæ•°å­— ä½¿ç”¨ var æ¥å£°æ˜å˜é‡ 1var identifier type å¯ä»¥ä¸€æ¬¡å£°æ˜å¤šä¸ªå˜é‡ 1var identifier1, identifier2 type ä¾‹å¦‚ 12var str string = \"Hello\"var num1, num2 int = 1, 2 å¦‚æœæ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™å˜é‡é»˜è®¤ä¸ºé›¶å€¼ 1234567891011package mainimport \"fmt\"func main() &#123; var i int var f float64 var b bool var s string fmt.Printf(\"%v %v %v %q\\n\", i, f, b, s)&#125; è¾“å‡ºï¼š 0 0 false â€œâ€ å¯ä»¥æ ¹æ®å€¼è‡ªè¡Œåˆ¤æ–­å˜é‡ç±»å‹ 1var str, num = \"Hello\", 1 å¯çœç•¥varï¼Œä½¿ç”¨å…³é”®å­—:= 1str, num := \"Hello\", 1 å¸¸é‡å¸¸é‡ä¸ä¼šè¢«ä¿®æ”¹ï¼Œæ•°æ®ç±»å‹åªå¯ä»¥æ˜¯å¸ƒå°”å‹ã€æ•°å­—å‹å’Œå­—ç¬¦ä¸²å‹ã€‚ 1const identifier [type] = value å› ä¸ºå¯ä»¥é€šè¿‡valueæ¥åˆ¤æ–­æ•°æ®ç±»å‹ï¼Œæ‰€æœ‰typeå¯çœç•¥ æ˜¾å¼è¡¨ç¤º 1const str string = \"abc\" éšå¼è¡¨ç¤º 1const str = \"abc\" å¯ä»¥ä¸€æ¬¡å£°æ˜å¤šä¸ªå¸¸é‡ 1const str, num = \"Hello\", 1 æˆ–è€…ç”¨æšä¸¾ï¼š 12345const ( str = \"Hello\" a = 1 b) è¿™é‡Œï¼Œaå’Œbéƒ½æ˜¯1ï¼Œbä¼šç»§æ‰¿açš„=1 iotaiotaæ˜¯ä¸€ä¸ªå¯ä»¥è¢«ç¼–è¯‘å™¨ä¿®æ”¹çš„ç‰¹æ®Šå¸¸é‡ï¼Œä»£è¡¨äº†ä½äºconstçš„ç¬¬å‡ è¡Œï¼Œå¦‚ç¬¬ n è¡Œ =iota åˆ™ä¸º n 12345678const ( a = iota // 0 b // 1 c = \"hello\" d // \"hello\" e = iota // 4 f // 5) æ•°æ®ç»“æ„æ•°ç»„æ¦‚è¿°æ•°ç»„ï¼Œæ˜¯ç›¸åŒå…ƒç´ ç±»å‹çš„é›†åˆã€‚ æ•°ç»„ç”±ä¸¤ä¸ªç»´åº¦æè¿°ï¼š å…ƒç´ ç±»å‹ æœ€å¤šå­˜å‚¨çš„å…ƒç´ ä¸ªæ•° åªæœ‰è¿™ä¸¤ä¸ªæ¡ä»¶éƒ½ç›¸åŒçš„æ•°ç»„æ‰æ˜¯åŒä¸€ç±»å‹ åˆå§‹åŒ–è®¿é—®å’Œèµ‹å€¼å£°æ˜æ•°ç»„ 1var variable_name [SIZE] variable_type ç¤ºä¾‹ï¼š 1var nums [5] int åˆå§‹åŒ–æ•°ç»„ 1var nums = [5]int&#123;1,2,3,4,5&#125; 1nums := [5]int&#123;1, 2, 3, 4, 5&#125; å¦‚æœæ•°ç»„é•¿åº¦ä¸ç¡®å®šï¼Œå¯ä»¥ç”¨...ä»£æ›¿ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å…ƒç´ ä¸ªæ•°è‡ªè¡Œæ¨æ–­æ•°ç»„çš„é•¿åº¦ 1nums := [...]int&#123;1, 2, 3, 4, 5&#125; å¯ä»¥é€šè¿‡ä¸‹æ ‡ï¼Œåªåˆå§‹åŒ–ç‰¹å®šçš„å‡ ä¸ª 12//åˆå§‹åŒ– nums[1] = 2.1 , nums[3] = 1.6nums := [5]float64&#123;1: 2.1, 3: 1.6&#125; å¤šç»´æ•°ç»„ä»¥äºŒç»´æ•°ç»„ä¸ºä¾‹ 1var arrayName [ x ][ y ] variable_type ç¤ºä¾‹ï¼š æ¯è¡Œçš„ç»“å°¾éƒ½è¦åŠ , 1234nums := [2][3]int&#123; &#123;0, 1, 2&#125;, &#123;3, 4, 5&#125;,&#125; æˆ– 123456nums := [][]int&#123;&#125;row1 := []int&#123;0, 1, 2&#125;row2 := []int&#123;3, 4, 5&#125;nums = append(nums, row1)nums = append(nums, row2) æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°ä¸€ç»´æ•°ç»„åšå‚æ•°ï¼š è®¾å®šæ•°ç»„å¤§å° 123func f1(nums [10]int) &#123; ...&#125; æœªè®¾å®šæ•°ç»„å¤§å° 123func f1(nums []int) &#123; ...&#125; æŒ‡é’ˆgoä¸­æŒ‡é’ˆçš„è§„åˆ™ä¸Cç±»ä¼¼ &amp;ç”¨æ¥å–åœ°å€ï¼Œ*ç”¨æ¥å–å†…å®¹ å®šä¹‰æŒ‡é’ˆï¼š 1var var_name *var-type ç©ºæŒ‡é’ˆå½“ä¸€ä¸ªæŒ‡é’ˆè¢«å®šä¹‰åæ²¡æœ‰åˆ†é…åˆ°ä»»ä½•å˜é‡æ—¶ï¼Œå³ä¸ºä¸€ä¸ªç©ºæŒ‡é’ˆ nil æŒ‡é’ˆæ•°ç»„ &amp; æ•°ç»„æŒ‡é’ˆ æŒ‡é’ˆæ•°ç»„ æ•°ç»„æŒ‡é’ˆ æ˜¯ä¸€ä¸ªæ•°ç»„ æ˜¯ä¸€ä¸ªæŒ‡é’ˆ æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæŒ‡é’ˆ æŒ‡å‘ä¸€ä¸ªæ•°ç»„ 12345n1, n2, n3 := 1, 2, 3nums := [3]int&#123;n1, n2, n3&#125; //æ™®é€šæ•°ç»„ptrs := [3]*int&#123;&amp;n1, &amp;n2, &amp;n3&#125; //æŒ‡é’ˆæ•°ç»„nums_ptr1 := &amp;nums //æ•°ç»„æŒ‡é’ˆvar nums_ptr2 *[3]int = &amp;nums //æ•°ç»„æŒ‡é’ˆ ç»“æ„ä½“å®šä¹‰ç»“æ„ä½“ 123456type struct_variable_type struct &#123; member definition member definition ... member definition&#125; å£°æ˜ç»“æ„ä½“å˜é‡ 1variable_name := structure_variable_type &#123;value1, value2...valuen&#125; 1variable_name := structure_variable_type &#123; key1: value1, key2: value2..., keyn: valuen&#125; é€šè¿‡ . æ¥è®¿é—®ç»“æ„ä½“æˆå‘˜ ç¤ºä¾‹ï¼š 1234567891011121314package mainimport \"fmt\"type Book struct &#123; title string author string id int&#125;func main() &#123; book := Book&#123;id: 1, title: \"BookName\", author: \"John\"&#125; fmt.Println(book.id, book.title, book.author)&#125; ç»“æ„ä½“æŒ‡é’ˆï¼ˆä¸Cä¸åŒï¼‰åŒæ ·ç”¨ . æ¥è®¿é—®ç»“æ„ä½“æˆå‘˜ 12book_ptr := &amp;bookfmt.Println(book_ptr.id, book_ptr.title, book_ptr.author) Slice åˆ‡ç‰‡ä¸C++ä¸­çš„ vector ç±»ä¼¼ï¼Œé•¿åº¦ä¸å›ºå®šçš„åŠ¨æ€æ•°ç»„ï¼Œå¯ä»¥è¿½åŠ å…ƒç´  å®šä¹‰åˆ‡ç‰‡ å®šä¹‰ä¸€ä¸ªæœªæŒ‡å®šå¤§å°çš„æ•°ç»„ 1var identifier []type ä¹Ÿå¯ä»¥ä½¿ç”¨ make() å‡½æ•°æ¥åˆ›å»ºåˆ‡ç‰‡ 1slice1 := make([]type, len, capacity) åˆå§‹åŒ–åˆ‡ç‰‡ ç›´æ¥åˆå§‹åŒ–åˆ‡ç‰‡ï¼Œå£°æ˜ä¸€ä¸ªæœªæŒ‡å®šå¤§å°çš„æ•°ç»„ 1s := []int&#123;1,2,3&#125; é€šè¿‡å¼•ç”¨æ•°ç»„/åˆ‡ç‰‡åˆå§‹åŒ–åˆ‡ç‰‡ å¦‚æœ‰ä¸€æ•°ç»„/åˆ‡ç‰‡arrï¼Œå¯ä»¥é€šè¿‡å¼•ç”¨è¿™ä¸ªæ•°ç»„/åˆ‡ç‰‡æ¥åˆå§‹åŒ–åˆ‡ç‰‡ å¼•ç”¨å…¨éƒ¨çš„æ•°ç»„ 1s := arr[:] å¼•ç”¨ä»ä¸‹æ ‡ startIndex åˆ° endIndex-1 çš„éƒ¨åˆ† 1s := arr[startIndex:endIndex] å¼•ç”¨ä»ä¸‹æ ‡ startIndex åˆ° æœ€åä¸€ä¸ªå…ƒç´  çš„éƒ¨åˆ† 1s := arr[startIndex:] å¼•ç”¨ä» ç¬¬ä¸€ä¸ªå…ƒç´  åˆ° endIndex-1 çš„éƒ¨åˆ† 1s := arr[:endIndex] len() å’Œ cap() len(s) è·å–åˆ‡ç‰‡é•¿åº¦ cap(s) è·å–åˆ‡ç‰‡å®¹é‡ 12s := make([]int, 3, 5)fmt.Println(len(s), cap(s), s) //3 5 [0 0 0] append()appendæ‰©å±•åˆ‡ç‰‡ï¼ŒåŸåˆ‡ç‰‡ä¸å˜ï¼Œè¿”å›çš„æ–°åˆ‡ç‰‡åœ¨åŸåˆ‡ç‰‡ä¸ŠåŠ ä¸Šæ‰©å±•é¡¹ 1new_slice = append(old_slice []Type, elems ...Type) append()çš„åŸç†ï¼š å¦‚æœ old slice çš„ capacityå¤ŸåŠ ï¼Œåˆ™ new slice ç›´æ¥åœ¨ old slice çš„å†…å­˜ä¸Šè¿½åŠ ï¼Œå…±äº«å†…å­˜ï¼›å¦‚æœcapacityä¸å¤ŸåŠ ï¼Œåˆ™ new slice ä¸ä¸ old slice å…±äº«å†…å­˜ï¼Œè€Œæ˜¯å¦å¼€ä¸€ç‰‡å†…å­˜ï¼Œå¤åˆ¶ old slice çš„æ•°æ® ç¤ºä¾‹ï¼š old slice çš„ capacity ä¸å¤ŸåŠ  12345s1 := []int&#123;0&#125;s2 := append(s1, 1, 2) //s1çš„capä¸å¤Ÿï¼Œs2ä¸s1ä¸å…±å†…å­˜fmt.Println(s1, s2) //[0] [0 1 2]s1[0] = -1 //s2ä¸s1ä¸å…±å†…å­˜ï¼Œs1ä¿®æ”¹ï¼Œä¸å½±å“s2fmt.Println(s1, s2) //[-1] [0 1 2] old slice çš„ capacity å¤ŸåŠ  12345s1 := make([]int, 1, 3)s2 := append(s1, 1, 2) //s1çš„capè¶³å¤Ÿï¼Œs2ä¸s1å…±å†…å­˜fmt.Println(s1, s2) //[0] [0 1 2]s1[0] = -1 //s4ä¸s3å…±å†…å­˜ï¼Œs3ä¿®æ”¹ï¼Œs4ä¹Ÿä¼šç›¸åº”å˜åŒ–fmt.Println(s1, s2) //[-1] [-1 1 2] copy()copyå¤åˆ¶åˆ‡ç‰‡ï¼Œå¿…é¡»åˆ›é€ ä¸€ä¸ªæ¯”åŸåˆ‡ç‰‡ capacity æ›´å¤§çš„æ–°åˆ‡ç‰‡ï¼Œæ‰èƒ½å¤åˆ¶è¿‡æ¥ 1copy(new_slice, old_slice) copy å’Œ = çš„åŒºåˆ«ï¼š = èµ‹å€¼æ‹·è´ï¼Œä¼šå°†åŸæ¥sliceçš„åœ°å€æ‹·è´ï¼Œæ–°æ—§sliceå…±äº«å†…å­˜ copy å°†sliceå†…å®¹è¿›è¡Œæ‹·è´ï¼Œæ–°æ—§sliceä¸å…±äº«å†…å­˜ 1234567891011s1 := []int&#123;0, 1, 2&#125;s2 := s1 //`=`èµ‹å€¼ï¼ŒæŒ‡å‘åŒä¸€ç‰‡å†…å­˜s3 := make([]int, len(s1), 2*cap(s1))copy(s3, s1) //copyå¤åˆ¶ï¼Œä¸å…±äº«å†…å­˜fmt.Println(s1, s2, s3) //[0 1 2] [0 1 2] [0 1 2]s1[0] = -1fmt.Println(s1, s2, s3) //[-1 1 2] [-1 1 2] [0 1 2] Map é›†åˆæ— åºçš„é”®å€¼å¯¹ï¼Œä¸C++ä¸­çš„mapç±»ä¼¼ï¼Œä½†ä¸C++ä¸­çš„mapä¸åŒï¼Œ å®šä¹‰ Map ä½¿ç”¨ make å‡½æ•° 1map_variable := make(map[KeyType]ValueType, initialCapacity) initialCapacity å¯é€‰å¡«ï¼Œç”¨äºæŒ‡å®š Map çš„åˆå§‹å®¹é‡ã€‚Map çš„å®¹é‡æ˜¯æŒ‡ Map ä¸­å¯ä»¥ä¿å­˜çš„é”®å€¼å¯¹çš„æ•°é‡ã€‚ ç¤ºä¾‹ï¼š 12345// åˆ›å»ºä¸€ä¸ªç©ºçš„ Mapm1 := make(map[string]int)// åˆ›å»ºä¸€ä¸ªåˆå§‹å®¹é‡ä¸º 10 çš„ Mapm2 := make(map[string]int, 10) ä½¿ç”¨ map å…³é”®å­— 1234567m1 := map[string]int&#123;&#125;m2 := map[string]int&#123; \"a\": 1, \"b\": 2, \"c\": 3,&#125; å¸¸ç”¨æ“ä½œ è·å–å…ƒç´  123v1 := m[\"a\"] v2, ok := m[\"d\"] // å¦‚æœé”®ä¸å­˜åœ¨ï¼Œv2ä¸ºè¯¥ç±»å‹çš„é›¶å€¼ï¼Œok=false ä¿®æ”¹å…ƒç´  1m[\"a\"] = 2 åˆ é™¤å…ƒç´  1delete(m, \"a\") è·å–é•¿åº¦ 1l := len(m) éå† map 123for k, v := range m &#123; ...&#125; æ§åˆ¶ç»“æ„æ¡ä»¶è¯­å¥if è¯­å¥ä¸Cä¸­ç±»ä¼¼ï¼Œä½†æ˜¯æ¡ä»¶è¯­å¥ä¸éœ€è¦ç”¨æ‹¬å·åŒ…ä½ 1234567if condition1 &#123; ...&#125; else if condition2 &#123; ...&#125; else &#123; ...&#125; switch è¯­å¥12345678switch expression &#123;case val1: ...case val2: ...default: ...&#125; å…ˆæ‰§è¡Œ expression ä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ‰¾åŒ¹é…çš„ case goä¸­çš„ switch é»˜è®¤è‡ªå¸¦ breakï¼ŒåŒ¹é…æˆåŠŸåï¼Œå°±ä¸ä¼šæ‰§è¡Œå…¶ä»– case å¦‚æœå¸Œæœ›åŒ¹é…æˆåŠŸåç»§ç»­æ‰§è¡Œåé¢çš„ caseï¼Œå¯ä»¥ä½¿ç”¨ fallthrough ç¤ºä¾‹1: 12345678switch tag &#123;case 0: f1()case 1, 2: f2()default: f3()&#125; ç¤ºä¾‹2: expression å¯ä»¥ä¸ºç©º 12345678switch &#123;case tag == 0: f1()case tag == 1, tag == 2: f2()default: f3()&#125; Type Switchswitchè¿˜å¯ä»¥ç”¨æ¥åˆ¤æ–­æŸä¸ª interface å˜é‡ä¸­å®é™…å­˜å‚¨çš„å˜é‡ç±»å‹ 123456789101112var x interface&#123;&#125;switch i := x.(type) &#123;case nil: f1()case int: f2()case float64: f3()default: f4()&#125; fallthroughå¦‚æœåœ¨ case çš„æœ€ååŠ ä¸Šäº† fallthroughï¼Œåˆ™æ— è®ºç´§æ¥ç€çš„ä¸‹ä¸€æ¡ case ä¸º ture è¿˜æ˜¯ falseï¼Œéƒ½ä¼šæ‰§è¡Œã€‚ ç¤ºä¾‹1: 123456789101112131415161718tag := 1switch &#123;case tag == 0: // false fmt.Println(\"0\") // ä¸æ‰§è¡Œ fallthroughcase tag == 1: // true fmt.Println(\"1\") // æ‰§è¡Œ fallthrough // ä¸‹ä¸€ä¸ªcaseæ— æ¡ä»¶æ‰§è¡Œcase tag == 2: // ä¸å¿…åˆ¤æ–­ï¼Œç›´æ¥æ‰§è¡Œ fmt.Println(\"2\") // æ‰§è¡Œ // è¿™é‡Œå…¶å®æœ‰ä¸ªé»˜è®¤çš„ breakcase tag == 3: fmt.Println(\"3\") // ä¸æ‰§è¡Œ fallthroughdefault: fmt.Println(\"default\") // ä¸æ‰§è¡Œ&#125; è¾“å‡ºï¼š12 ç¤ºä¾‹2: 123456789101112131415161718tag := 1switch &#123;case tag == 0: // false fmt.Println(\"0\") // ä¸æ‰§è¡Œ fallthroughcase tag == 1: // true fmt.Println(\"1\") // æ‰§è¡Œ fallthrough // ä¸‹ä¸€ä¸ªcaseæ— æ¡ä»¶æ‰§è¡Œcase tag == 2: // ä¸å¿…åˆ¤æ–­ï¼Œç›´æ¥æ‰§è¡Œ fmt.Println(\"2\") // æ‰§è¡Œ fallthrough // ä¸‹ä¸€ä¸ªcaseæ— æ¡ä»¶æ‰§è¡Œcase tag == 3: // ä¸å¿…åˆ¤æ–­ï¼Œç›´æ¥æ‰§è¡Œ fmt.Println(\"3\") // æ‰§è¡Œ fallthrough // ä¸‹ä¸€ä¸ªcaseæ— æ¡ä»¶æ‰§è¡Œdefault: // ä¸å¿…åˆ¤æ–­ï¼Œç›´æ¥æ‰§è¡Œ fmt.Println(\"default\") // æ‰§è¡Œ&#125; è¾“å‡ºï¼š123default select è¯­å¥select ç±»ä¼¼äº switchï¼Œä½†æ˜¯ select åªèƒ½ç”¨äºé€šé“æ“ä½œ select ä¼šç›‘å¬æ‰€æœ‰é€šé“ï¼Œä¸€æ—¦æœ‰é€šé“å‡†å¤‡å¥½ï¼Œå°±éšæœºé€‰æ‹©å…¶ä¸­ä¸€ä¸ªé€šé“æ‰§è¡Œ å¦‚æœæ‰€æœ‰é€šé“éƒ½æ²¡å‡†å¤‡å¥½ï¼Œåˆ™æ‰§è¡Œ default å¦‚æœæ²¡æœ‰ defaultï¼Œselect å°†é˜»å¡ï¼Œç›´åˆ°æŸä¸ªé€šé“å¯ä»¥è¿è¡Œ å¤šä¸ªcaseåŒ¹é…æ—¶ï¼Œswitchä»ä¸Šè‡³ä¸‹åŒ¹é…ç¬¬ä¸€ä¸ªï¼ŒselectéšæœºåŒ¹é…ä¸€ä¸ª 1234567891011select &#123;// éšæœºæ‰§è¡Œä¸€ä¸ªå‡†å¤‡å¥½äº†çš„é€šé“case &lt;- channel1: ...case value := &lt;- channel2: ...case channel3 &lt;- value: ...default:// æ‰€æœ‰é€šé“éƒ½æ²¡æœ‰å‡†å¤‡å¥½ï¼Œæ‰§è¡Œçš„ä»£ç &#125; ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334package mainimport \"fmt\"func main() &#123; // å®šä¹‰ä¸¤ä¸ªé€šé“ ch1 := make(chan string) ch2 := make(chan string) // å¯åŠ¨ä¸¤ä¸ª goroutineï¼Œåˆ†åˆ«ä»ä¸¤ä¸ªé€šé“ä¸­è·å–æ•°æ® go func() &#123; for &#123; ch1 &lt;- \"from 1\" &#125; &#125;() go func() &#123; for &#123; ch2 &lt;- \"from 2\" &#125; &#125;() // ä½¿ç”¨ select è¯­å¥éé˜»å¡åœ°ä»ä¸¤ä¸ªé€šé“ä¸­è·å–æ•°æ® for i := 0; i &lt; 10; i++ &#123; select &#123; case msg1 := &lt;-ch1: fmt.Println(msg1) case msg2 := &lt;-ch2: fmt.Println(msg2) default: // å¦‚æœä¸¤ä¸ªé€šé“éƒ½æ²¡æœ‰å¯ç”¨çš„æ•°æ®ï¼Œåˆ™æ‰§è¡Œè¿™é‡Œçš„è¯­å¥ fmt.Println(\"no message received\") &#125; &#125;&#125; è¾“å‡ºï¼šno message receivedfrom 1from 2from 1from 2no message receivedno message receivedfrom 2from 1no message received å¾ªç¯è¯­å¥for è¯­å¥goçš„ for è¯­å¥æœ‰å¤šç§ç”¨æ³•ï¼š ä¸Cçš„ for ç›¸ä¼¼çš„ç”¨æ³• 123for init; condition; post &#123; ...&#125; ä¸Cçš„ while ç›¸ä¼¼çš„ç”¨æ³• åªç•™ä¸‹ condition é¡¹ï¼Œåˆ™åªéœ€åˆ¤æ–­ condition 123for condition &#123; ...&#125; ä¸Cçš„ while(1) ç›¸ä¼¼çš„ç”¨æ³• ä¸‰é¡¹éƒ½ä¸å¡«ï¼Œåˆ™æ— é™å¾ªç¯ 123for &#123; ...&#125; rangeæ ¼å¼ for å¾ªç¯çš„ range æ ¼å¼å¯ä»¥å¯¹ sliceã€mapã€æ•°ç»„ã€å­—ç¬¦ä¸²ç­‰è¿›è¡Œè¿­ä»£å¾ªç¯ 123for key, value := range oldMap &#123; newMap[key] = value&#125; ä¹Ÿå¯ä»¥åªæå– key æˆ–è€… value 123for key := range oldMap &#123; ...&#125; åªæå– value æ—¶ï¼Œéœ€è¦ç”¨ _, å æ‰ key çš„ä½ç½® 123for _, value := range oldMap &#123; ...&#125; breakä¸Cä¸­çš„breakç”¨æ³•ç›¸ä¼¼ï¼Œä½†å¤šä¸€ä¸ªæ ‡å·çš„åŠŸèƒ½ï¼š åœ¨å¤šé‡å¾ªç¯ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ ‡å· label è·³å‡ºæŒ‡å®šçš„å¾ªç¯ã€‚ ç¤ºä¾‹ï¼š ä¸åŠ æ ‡å·æ—¶ï¼Œä¸Cä¸€æ ·ï¼Œåªä¼š break æ‰æœ€é‡Œé¢çš„é‚£å±‚å¾ªç¯ 123456789101112package mainimport \"fmt\"func main() &#123; for i := 0; i &lt; 3; i++ &#123; for j := 0; j &lt; 3; j++ &#123; // breakæ‰è¿™å±‚å¾ªç¯ fmt.Printf(\"i = %d, j = %d\\n\", i, j) break &#125; &#125;&#125; è¾“å‡ºï¼ši = 0, j = 0i = 1, j = 0i = 2, j = 0 åŠ ä¸Šæ ‡å·åï¼Œä¼š break æ‰æ ‡å·çš„é‚£å±‚å¾ªç¯ 12345678910111213package mainimport \"fmt\"func main() &#123;re: for i := 0; i &lt; 3; i++ &#123; // breakæ‰æ ‡å·reè¿™å±‚å¾ªç¯ for j := 0; j &lt; 3; j++ &#123; fmt.Printf(\"i = %d, j = %d\\n\", i, j) break re &#125; &#125;&#125; è¾“å‡ºï¼ši = 0, j = 0 continueä¸ break ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡æ ‡å· label æŒ‡å®šéœ€è¦ continue çš„å¾ªç¯ å‡½æ•°å‡½æ•°çš„å®šä¹‰123func function_name( [parameter list] ) [return_types] &#123; ...&#125; parameter list å‚æ•°åˆ—è¡¨ï¼Œé€‰å¡«ï¼Œå¯ä»¥æ— å‚ï¼Œæ ¼å¼ä¸º parameter_name1 type1, parameter_name2 type2, ... return_types è¿”å›ç±»å‹ï¼Œé€‰å¡«ï¼Œå¯ä»¥æ— è¿”å›å€¼ï¼ˆç›¸å½“äºCä¸­çš„voidï¼‰ï¼Œä¹Ÿå¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œæ ¼å¼ä¸º (type1, type2, ...) ç¤ºä¾‹1ï¼š 1234567func max(num1, num2 int) int &#123; if num1 &gt; num2 &#123; return num1 &#125; else &#123; return num2 &#125;&#125; ç¤ºä¾‹2: 123func swap(x, y string) (string, string) &#123; return y, x&#125; 1y, x := swap(\"hello\", \"world\") å¼•ç”¨ä¼ é€’å‚æ•°ä¸Cä¸­çš„æŒ‡é’ˆç±»ä¼¼ï¼Œä¼ é€’åœ°å€æŒ‡é’ˆ 12345func swap(x *int, y *int) &#123; temp := *x *x = *y *y = temp&#125; å‡½æ•°å˜é‡1234567891011121314151617package mainimport \"fmt\"func main() &#123; // å£°æ˜å‡½æ•°å˜é‡ findMax := func(num1, num2 int) int &#123; if num1 &gt; num2 &#123; return num1 &#125; else &#123; return num2 &#125; &#125; max := findMax(1, 2) fmt.Println(max)&#125; é—­åŒ…é—­åŒ…åŒ…å«ä¸¤ç‚¹ï¼š å­˜åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰ï¼Œä½†åœ¨å‡½æ•°å†…éƒ¨å¼•ç”¨çš„è‡ªç”±å˜é‡ è„±ç¦»äº†å½¢æˆé—­åŒ…çš„ä¸Šä¸‹æ–‡ï¼Œé—­åŒ…ä¹Ÿèƒ½ç…§å¸¸ä½¿ç”¨è¿™äº›è‡ªç”±å˜é‡ï¼Œé€šå¸¸ç§°è¿™äº›è‡ªç”±å˜é‡ä¸ºæ•è·å˜é‡ goè¯­è¨€ä¸­å‡½æ•°æ˜¯å¤´ç­‰å¯¹è±¡ï¼Œé—­åŒ…å¯ä»¥å……å½“C++ä¸­ç±»çš„å˜é‡åŠŸèƒ½ï¼Œä¹Ÿç»å¸¸ç§°é—­åŒ…ä¸ºæœ‰çŠ¶æ€çš„å‡½æ•° ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031package mainimport \"fmt\"// getSequenceå‡½æ•°çš„è¿”å›å€¼ä¸ºä¸€ä¸ªå‡½æ•°func getSequence() func() int &#123; i := 0 // é—­åŒ…å‡½æ•° return func() int &#123; //è¿”å›å‡½æ•°å†…éƒ¨ï¼Œä½¿ç”¨äº†è¿”å›å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡i i++ return i &#125;&#125;func main() &#123; //å£°æ˜ä¸€ä¸ªå‡½æ•°å˜é‡ï¼Œæ­¤æ—¶ä¼šæ‰§è¡ŒgetSequenceå‡½æ•°ï¼Œä»¤i=0ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªç´¯åŠ å‡½æ•°nextNumber nextNumber1 := getSequence() nextNumber2 := getSequence() // å³ä½¿getSequenceæ‰§è¡Œç»“æŸï¼Œä¾æ—§å¯ä»¥é€šè¿‡nextNumberè°ƒç”¨é—­åŒ…å‡½æ•°ï¼Œå¹¶ä½¿ç”¨i // nextNumberæ¯è°ƒç”¨ä¸€æ¬¡ï¼ŒiåŠ ä¸€ fmt.Println(nextNumber1()) // è¾“å‡º1 fmt.Println(nextNumber1()) // è¾“å‡º2 fmt.Println(nextNumber1()) // è¾“å‡º3 //ä¸¤ä¸ªé—­åŒ…å‡½æ•°äº’ä¸å½±å“ fmt.Println(nextNumber2()) // è¾“å‡º1 fmt.Println(nextNumber2()) // è¾“å‡º2 fmt.Println(nextNumber2()) // è¾“å‡º3&#125; getSequenceè¿”å›ä¸€ä¸ªé—­åŒ…å‡½æ•° å˜é‡iå°±æ˜¯åœ¨é—­åŒ…å¤–å®šä¹‰ï¼Œé—­åŒ…å†…ä½¿ç”¨çš„å˜é‡ å³ä½¿è„±ç¦»äº†é—­åŒ…çš„ä¸Šä¸‹æ–‡ï¼Œåœ¨mainä¸­ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨nextNumberé—­åŒ…å‡½æ•°ï¼Œå¹¶ä½¿ç”¨å®šä¹‰åœ¨getSequenceä¸­çš„å±€éƒ¨å˜é‡å˜é‡i nextNumber1 := getSequence() å’Œ nextNumber2 := getSequence() åˆ†åˆ«ç‹¬ç«‹ï¼Œå„è‡ªçš„æ•è·å˜é‡iä¸å½±å“ æ–¹æ³•åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œå‡½æ•°å’Œæ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œä½†åœ¨goä¸­æœ‰æ‰€åŒºåˆ« æ–¹æ³•æ˜¯ä¸€ç§æœ‰æ¥æ”¶è€…çš„ç‰¹æ®Šå‡½æ•°ï¼Œå¯ä»¥å®ç°C++ç±»çš„å‡½æ•°åŠŸèƒ½ æ¥å—è€…å¯ä»¥æ˜¯å‘½åç±»å‹æˆ–è€…ç»“æ„ä½“ç±»å‹çš„ä¸€ä¸ªå€¼æˆ–è€…æ˜¯ä¸€ä¸ªæŒ‡é’ˆ 123func (variable_name variable_data_type) function_name() [return_type]&#123; ...&#125; variable_name æ¥å—è€…å variable_data_type æ¥å—è€…ç±»å‹ ç¤ºä¾‹ï¼š 12345678910111213141516171819package mainimport \"fmt\"// åœ†çš„ç»“æ„ä½“type Circle struct &#123; radius float64&#125;// æ–¹æ³•ï¼Œæ¥å—è€…å¿…é¡»ä¸ºä¸º c Circlefunc (c Circle) getArea() float64 &#123; return 3.14 * c.radius * c.radius&#125;func main() &#123; var c1 Circle c1.radius = 1 fmt.Println(c1.getArea()) //è°ƒç”¨æ±‚é¢ç§¯çš„æ–¹æ³•&#125; ç±»å‹è½¬æ¢æ•°å€¼ç±»å‹è½¬æ¢æ ¼å¼ï¼š 1type_name(expression) ç¤ºä¾‹ï¼š 12var v1 int = 10var v2 float64 = float64(v1) å­—ç¬¦ä¸²ç±»å‹è½¬æ¢ string è½¬ int ä½¿ç”¨ strconv.Atoi å°† string è½¬æ¢ä¸º intï¼Œç¬¬äºŒä¸ªè¿”å›å€¼ä¸ºå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œå¯ä»¥ç”¨ _ æ¥å¿½ç•¥è¿™ä¸ªé”™è¯¯ 1234567891011121314151617package mainimport ( \"fmt\" \"strconv\")func main() &#123; str := \"10\" num, err := strconv.Atoi(str) if err != nil &#123; fmt.Println(err) &#125; else &#123; fmt.Println(num) &#125;&#125; int è½¬ string ä½¿ç”¨ strconv.Itoa å°† int è½¬æ¢ä¸º string 12num := 10str := strconv.Itoa(num) string è½¬ float ä½¿ç”¨ strconv.ParseFloat å°† string è½¬æ¢ä¸º floatï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸º bitSizeï¼Œç”¨æ¥é€‰æ‹©ç©¶ç«Ÿæ˜¯64ä½è¿˜æ˜¯32ä½çš„ float 12str := \"3.14\"num, err := strconv.ParseFloat(str, 64) æ¥å£ç±»å‹è½¬æ¢æ¥å£go é€šè¿‡æ¥å£å®ç°äº†C++ä¸­å¤šæ€çš„æ•ˆæœã€‚ æ¥å£æŠŠæ‰€æœ‰çš„å…·æœ‰å…±æ€§çš„æ–¹æ³•å®šä¹‰åœ¨ä¸€èµ· éšå¼å®ç°ï¼Œä¸ç”¨å£°æ˜æŸä¸ªstructå®ç°äº†é‚£ä¸ªæ¥å£ï¼Œå¦‚æœä¸€ä¸ªstructå®ç°äº†ä¸€ä¸ªæ¥å£å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±è‡ªåŠ¨åœ°å®ç°äº†è¯¥æ¥å£ 12345678910111213141516171819202122/* å®šä¹‰æ¥å£ */type interface_name interface &#123; method_name1 [return_type] method_name2 [return_type] method_name3 [return_type] ... method_namen [return_type]&#125;/* å®šä¹‰ç»“æ„ä½“ */type struct_name struct &#123; /* variables */&#125;/* å®ç°æ¥å£æ–¹æ³• */func (struct_name_variable struct_name) method_name1() [return_type] &#123; /* æ–¹æ³•å®ç° */&#125;...func (struct_name_variable struct_name) method_namen() [return_type] &#123; /* æ–¹æ³•å®ç°*/&#125; ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940package mainimport \"fmt\"// æ¥å£å£°æ˜type Sleeper interface &#123; sleep() //å£°æ˜æ–¹æ³•&#125;type Cat struct &#123; name string&#125;type Dog struct &#123; name string&#125;// Catå’ŒDogéƒ½åˆ†åˆ«å®ç°äº†Sleeperçš„sleepæ–¹æ³•func (c Cat) sleep() &#123; fmt.Printf(\"Cat %s is sleeping\\n\", c.name)&#125;func (d Dog) sleep() &#123; fmt.Printf(\"Dog %s is sleeping\\n\", d.name)&#125;// AnimalSleepå‡½æ•°å®ç°äº†ä¸€ä¸ªå‡½æ•°å¤šä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å¤šæ€func AnimalSleep(s Sleeper) &#123; s.sleep()&#125;func main() &#123; var s Sleeper s = Cat&#123;name: \"cici\"&#125; AnimalSleep(s) //Cat cici is sleeping s = Dog&#123;name: \"dodo\"&#125; AnimalSleep(s) //Dog dodo is sleeping&#125; å®šä¹‰ä¸€ä¸ª Sleeper æ¥å£ï¼ŒCat å’Œ Dog éƒ½å®ç°äº†Sleeper æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ‰€ä»¥éšå¼å®ç°äº†æ¥å£ã€‚ å¦‚æ­¤ AnimalSleep() å‡½æ•°å®ç°äº†ä¸€ä¸ªå‡½æ•°å¤šä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å¤šæ€ é”™è¯¯å¤„ç†å‡½æ•°å®šä¹‰æ—¶ï¼Œä½¿ç”¨ errors.New è¿”å›é”™è¯¯ä¿¡æ¯ 123456789func Sqrt(f float64) (float64, error) &#123; // é”™è¯¯æ—¶ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯ if f &lt; 0 &#123; return 0, errors.New(\"math: square root of negative number\") &#125; // å®ç° ...&#125; è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ¥æ”¶è¿”å›çš„é”™è¯¯ä¿¡æ¯err 12345result, err:= Sqrt(-1)if err != nil &#123; fmt.Println(err)&#125; å¹¶å‘ç¼–ç¨‹goroutine çº¿ç¨‹goroutine æ˜¯è½»é‡çº§çº¿ç¨‹ï¼Œé€šè¿‡ go å…³é”®å­—å¼€å¯ï¼Œå¦‚æ­¤å¯ä»¥åŒæ—¶å¤šä¸ªçº¿ç¨‹å¹¶å‘è¿›è¡Œã€‚ åŒä¸€ä¸ªç¨‹åºä¸­çš„æ‰€æœ‰ goroutine å…±äº«åŒä¸€ä¸ªåœ°å€ç©ºé—´ã€‚ æ ¼å¼ï¼š 1go func(x, y, z) å¦‚æ­¤ï¼Œå°±å¼€å¯äº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ func(x, y, z) ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425package mainimport ( \"fmt\" \"time\")func eat() &#123; for i := 0; i &lt; 3; i++ &#123; time.Sleep(100 * time.Millisecond) fmt.Println(\"eating\") &#125;&#125;func drink() &#123; for i := 0; i &lt; 3; i++ &#123; time.Sleep(100 * time.Millisecond) fmt.Println(\"drinking\") &#125;&#125;func main() &#123; go eat() // å¼€å¯ä¸€ä¸ªeatçº¿ç¨‹ drink() // eatå’Œdrinkä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ&#125; è¾“å‡ºï¼šdrinkingeatingdrinkingeatingeatingdrinking å¯ä»¥çœ‹å‡º eat å’Œ drink ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œä¸€ä¸‹è¾“å‡º eatingï¼Œä¸€ä¸‹è¾“å‡º drinking channel é€šé“é€šé“æ˜¯ç”¨æ¥ä¼ é€’æ•°æ®çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ç”¨äºä¸¤ä¸ª goroutine ä¹‹é—´é€šè¿‡ä¼ é€’å€¼æ¥åŒæ­¥è¿è¡Œå’Œé€šè®¯ å‘é€å’Œæ¥æ”¶ç”¨ &lt;- æ¥å‘é€å’Œæ¥æ”¶æ•°æ® 1ch &lt;- value // æŠŠ value å‘é€åˆ°é€šé“ ch 12v := &lt;-ch // ä» ch æ¥æ”¶æ•°æ® // å¹¶æŠŠå€¼èµ‹ç»™ v 12&lt;-ch // ä» ch æ¥æ”¶æ•°æ® // å¹¶ä¸¢å¼ƒå€¼ å®šä¹‰é€šé“åˆ©ç”¨ chan å…³é”®å­—å®šä¹‰é€šé“ï¼Œä½¿ç”¨ make åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼Œå½“å¤åˆ¶ä¸€ä¸ªchannelæˆ–ç”¨äºå‡½æ•°å‚æ•°ä¼ é€’æ—¶ï¼Œå®é™…åªæ˜¯æ‹·è´äº†ä¸€ä¸ªchannelå¼•ç”¨ï¼Œå› æ­¤è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…å°†å¼•ç”¨åŒä¸€ä¸ªchannelå¯¹è±¡ ä¸å¸¦ç¼“å†²åŒºçš„é€šé“ï¼ˆé»˜è®¤ï¼‰ 1ch := make(chan int) å¦‚æ­¤å®šä¹‰äº†ä¸€ä¸ªä¸å¸¦ç¼“å†²åŒºçš„é€šé“ï¼Œé€šé“å¯ä»¥ä¼ é€’ int å‚æ•° å¸¦ç¼“å†²åŒºçš„é€šé“ 1ch := make(chan int, 100) å¦‚æ­¤å®šä¹‰äº†ä¸€ä¸ªå¸¦ç¼“å†²åŒºçš„é€šé“ï¼Œç¼“å†²åŒºå¤§å°ä¸º100 é»˜è®¤ä¸å¸¦ç¼“å†²åŒºï¼Œå‘é€ç«¯å‘é€æ•°æ®ï¼ŒåŒæ—¶å¿…é¡»æœ‰æ¥æ”¶ç«¯ç›¸åº”çš„æ¥æ”¶æ•°æ®ã€‚å¦‚æœè¿Ÿè¿Ÿæ²¡æœ‰æ¥æ”¶ï¼Œå‘é€æ–¹ä¼šé˜»å¡ç›´åˆ°æ¥æ”¶æ–¹ä»é€šé“ä¸­æ¥æ”¶äº†å€¼ã€‚ 123456789package mainimport \"fmt\"func main() &#123; ch := make(chan int) //æ²¡æœ‰ç¼“å†²åŒºçš„é€šé“ ch &lt;- 1 //è¿™é‡Œå‘é€ç«¯ä¼šç›´æ¥å¡æ­»ï¼Œä¸€ç›´å¡åœ¨è¿™é‡Œç­‰å¾…æ¥æ”¶ç«¯çš„å‡ºç° fmt.Println(&lt;-ch) //æ— æ³•è¿è¡Œåˆ°æ­¤&#125; å¸¦ç¼“å†²åŒºçš„é€šé“å…è®¸å‘é€ç«¯å’Œæ¥æ”¶ç«¯å¼‚æ­¥ï¼Œå‘é€ç«¯å¯ä»¥å…ˆæŠŠæ•°æ®æ”¾è¿›ç¼“å­˜åŒºå†…ï¼Œå‘é€ç«¯è¿›ç¨‹è¿›è¡Œå‘ä¸‹è¿›è¡Œï¼Œä¸éœ€è¦ç­‰å¾…æ¥æ”¶ç«¯æ¥æ”¶ã€‚ ä½†å¦‚æœç¼“å†²åŒºæ»¡äº†ï¼Œå‘é€ç«¯åŒæ ·ä¼šåƒä¸å¸¦ç¼“å†²åŒºçš„é€šé“é‚£æ ·å¡ä½ï¼Œç›´åˆ°æœ‰æ¥æ”¶æ–¹ä»é€šé“ä¸­æ¥æ”¶äº†å€¼ã€‚ 123456789package mainimport \"fmt\"func main() &#123; ch := make(chan int, 1) //æœ‰å¤§å°ä¸º1ç¼“å†²åŒºçš„é€šé“ ch &lt;- 1 //1æ”¾å…¥ç¼“å†²åŒºï¼Œä¸ä¼šå¡ä½ fmt.Println(&lt;-ch) //å¯ä»¥è¿è¡Œè¾“å‡º1&#125; å…³é—­é€šé“å…³é—­é€šé“åï¼Œä¸ä¼šå†å‘é€æ•°æ®åˆ°é€šé“ä¸Šäº† 1close(ch) æ¥æ”¶ç«¯åœ¨æ¥æ”¶æ—¶ï¼Œå¯ä»¥é€šè¿‡é¢å¤–çš„ç¬¬äºŒä¸ªå˜é‡æ¥åˆ¤æ–­é€šé“æ˜¯å¦å…³é—­ 1v, ok := &lt;- ch éå†é€šé“ä¸æ•°ç»„ã€åˆ‡ç‰‡ç›¸åŒï¼Œä½¿ç”¨ range å…³é”®å­—æ¥éå†é€šé“ 123for v := range ch &#123; ...&#125; è§„åˆ™ï¼š éå†ä¸€ä¸ªç©ºçš„é€šé“ï¼ˆnilï¼‰æ—¶ï¼Œé˜»å¡ éå†ä¸€ä¸ª é˜»å¡ &amp;&amp; æœªå…³é—­ çš„é€šé“ï¼ˆnilï¼‰æ—¶ï¼Œé˜»å¡ éå†ä¸€ä¸ª é˜»å¡ &amp;&amp; å·²å…³é—­ çš„é€šé“ï¼ˆnilï¼‰æ—¶ï¼Œä¸åšä»»ä½•æ“ä½œ éå†ä¸€ä¸ª éé˜»å¡ &amp;&amp; æœªå…³é—­ çš„é€šé“ï¼ˆnilï¼‰æ—¶ï¼Œæ¥æ”¶æ‰€æœ‰ç¼“å­˜æ•°æ®ï¼Œç„¶åé˜»å¡ éå†ä¸€ä¸ª éé˜»å¡ &amp;&amp; å·²å…³é—­ çš„é€šé“ï¼ˆnilï¼‰æ—¶ï¼Œæ¥æ”¶æ‰€æœ‰ç¼“å­˜æ•°æ®ï¼Œç„¶åè¿”å› ä¸Šä¸‹æ–‡é—®é¢˜è®°å½•å•å¼•å·ã€åŒå¼•å·ã€åå¼•å· å•å¼•å· &#39;&#39;ï¼šåŒ…è£¹å­—ç¬¦ åŒå¼•å· &quot;&quot;ï¼šåŒ…è£¹å­—ç¬¦ä¸²ï¼Œä¼šè§£æå…¶ä¸­çš„è½¬ä¹‰ç¬¦ åå¼•å· ````ï¼šåŒ…è£¹å­—ç¬¦ä¸²ï¼Œä¸ä¼šè§£æå…¶ä¸­çš„è½¬ä¹‰ç¬¦ 12fmt.Print(\"Hello, World!\\n\") //åŒå¼•å·ï¼Œä¼šè§£æå…¶ä¸­çš„è½¬ä¹‰ç¬¦fmt.Print(`Hello, World!\\n`) //åå¼•å·ï¼Œä¸ä¼šè§£æå…¶ä¸­çš„è½¬ä¹‰ç¬¦ è¾“å‡ºï¼š Hello, World!Hello, World!\\n% Go modulesgo modules æ˜¯ go çš„ä¾èµ–åŒ…ç®¡ç†å·¥å…· go çš„åŒ…ç®¡ç†å‘å±•åœ¨å¼•å…¥ go modules ä¹‹å‰ï¼Œgo ç®¡ç†ä¾èµ–åŒ…å…ˆæ˜¯ç”¨ GOPATHï¼Œåæ¥ç”¨ go vender GOPATHgo path ç†è®ºä¸Šå¹¶ä¸ç®—æ˜¯åŒ…ç®¡ç†å·¥å…·ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†ä¾èµ–åŒ…ï¼Œå†™ç¨‹åºä»£ç å¿…é¡»æ”¾åœ¨ $GOPATH/src ç›®å½•ä¸‹ï¼Œä¸”ä¾èµ–åŒ…æ²¡æœ‰ç‰ˆæœ¬å¯è¨€ go vendorè§£å†³äº†åŒ…ç®¡ç†é—®é¢˜ï¼Œæ‰€æœ‰ä¾èµ–åŒ…ä¸‹è½½åˆ°é¡¹ç›®çš„ vendor ç›®å½•ä¸‹ go modules çš„ä½¿ç”¨é¦–å…ˆè¦ç¡®å®š go è¯­è¨€çš„ç‰ˆæœ¬ï¼Œè‡³å°‘éœ€æ˜¯ v1.11 ä»¥ä¸Šç‰ˆæœ¬ 1go version ç¯å¢ƒè®¾ç½®æŸ¥çœ‹ go çš„ç¯å¢ƒå˜é‡ 1go env å…¶ä¸­ä¸ Go Modules ç›¸å…³çš„ç¯å¢ƒè®¾ç½®å¦‚ä¸‹ GO111MODULE1go env -w GO111MODULE&#x3D;on å‚è€ƒ Goè¯­è¨€åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰","categories":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/categories/Golang/"}],"tags":[{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/tags/Golang/"},{"name":"è¯­è¨€åŸºæœ¬è¯­æ³•","slug":"è¯­è¨€åŸºæœ¬è¯­æ³•","permalink":"https://gy23333.github.io/tags/%E8%AF%AD%E8%A8%80%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"}]},{"title":"æ’åº","slug":"æ’åº","date":"2023-02-11T19:00:36.000Z","updated":"2024-11-11T03:57:58.132Z","comments":true,"path":"2023/02/12/æ’åº/","link":"","permalink":"https://gy23333.github.io/2023/02/12/%E6%8E%92%E5%BA%8F/","excerpt":"æ’åºç®—æ³•æ€»ç»“","text":"æ’åºç®—æ³•æ€»ç»“ æ¦‚è¿°å¯æ ¹æ®æ•°æ®ç»“æ„å’Œç®—æ³•åŠ¨æ€å¯è§†åŒ–ç½‘ç«™ï¼Œæ›´åŠ å½¢è±¡åœ°å­¦ä¹ ã€‚ ç›´æ¥æ’å…¥æ’åºç®—æ³•æ€æƒ³æ¯æ¬¡å°†ä¸€ä¸ªå¾…æ’åºçš„è®°å½•æ’å…¥åˆ°å·²æ’åºå¥½çš„åºåˆ—ä¸­ã€‚ (49) 38 65 97 76 13 27 49(38 49) 65 97 76 13 27 49(38 49 65) 97 76 13 27 49(38 49 65 97) 76 13 27 49(38 49 65 76 97) 13 27 49(13 38 49 65 76 97) 27 49(13 27 38 49 65 76 97) 49(13 27 38 49 49 65 76 97) ()è¡¨ç¤ºå·²æ’å¥½åºçš„éƒ¨åˆ† ä»£ç å®ç°123456789101112131415161718//ç›´æ¥æ’å…¥æ’åºtemplate &lt;typename T&gt;class Insertion &#123;public: static void sort(vector&lt;T&gt; &amp;nums);&#125;;template &lt;typename T&gt;void Insertion&lt;T&gt;::sort(vector&lt;T&gt; &amp;nums) &#123; //æ¯æ¬¡é€‰ä¸€ä¸ªæœªæ’åºçš„å…ƒç´  for (int i = 1; i &lt; nums.size(); i++) &#123; //ä»åå¾€å‰ï¼Œä¾æ¬¡æ£€æŸ¥å‰é¢å·²æ’åºå¥½çš„å…ƒç´  for (int j = i-1; j &gt;= 0 &amp;&amp; nums[j] &gt; nums[j+1]; j--) &#123; //ä¸å¾…æ’åºçš„å…ƒç´ å¯¹æ¯”ï¼Œå¦‚æœé€†åºï¼Œåˆ™äº¤æ¢ swap(nums[j], nums[j+1]); &#125; &#125;&#125; æ€§èƒ½åˆ†æ ç©ºé—´å¤æ‚åº¦ï¼š $O(1)$ æ—¶é—´å¤æ‚åº¦ æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼ˆå…¨éƒ¨æœ‰åºï¼‰ï¼š$O(n)$ å…± $n-1$ è¶Ÿï¼Œæ¯è¶Ÿåªéœ€æ¯”å¯¹ä¸€æ¬¡å…³é”®å­—ï¼Œä¸ç”¨ç§»åŠ¨å…ƒç´ ã€‚ æœ€åæ—¶é—´å¤æ‚åº¦ï¼ˆå…¨éƒ¨é€†åºï¼‰ï¼š$O(n^2)$ å…± $n-1$ è¶Ÿï¼Œæ¯è¶Ÿï¼ˆå¦‚ç¬¬ $i$ è¶Ÿï¼‰å¯¹æ¯” $i$ æ¬¡ï¼Œç§»åŠ¨ $i$ æ¬¡ã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$ ç¨³å®šæ€§ ç¨³å®šã€‚æ¯æ¬¡æ’å…¥å…ƒç´ éƒ½æ˜¯ä»å‰å¾€åæ¯”è¾ƒç§»åŠ¨ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ç›¸åŒå…ƒç´ ç›¸å¯¹ä½ç½®å˜åŒ–ã€‚ é€‚ç”¨æ€§ï¼šé¡ºåºè¡¨å’Œé“¾è¡¨ å¸Œå°”æ’åºç®—æ³•æ€æƒ³å¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„ä¸€ç§ã€‚ä¹Ÿç§°ç¼©å°å¢é‡æ’åºï¼Œæ˜¯ç›´æ¥æ’å…¥æ’åºç®—æ³•çš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚ æ¯è½®æŠŠè®°å½•æŒ‰ä¸‹æ ‡çš„ä¸€å®šå¢é‡åˆ†ç»„ $L[i, i+d, i+2d,â€¦,i+kd]$ ï¼Œå¯¹æ¯ç»„ç›´æ¥æ’å…¥æ’åºï¼› é€æ¸å‡å°‘å¢é‡ï¼Œæ¯ç»„åŒ…å«çš„å…³é”®è¯è¶Šæ¥è¶Šå¤šï¼Œå½“å¢é‡å‡è‡³1æ—¶ï¼Œæ•´ä¸ªæ–‡ä»¶æ°è¢«åˆ†æˆä¸€ç»„ï¼Œç®—æ³•ä¾¿ç»ˆæ­¢ã€‚ 49 38 65 13 76 13 27 57 ï¼ˆd = 4ï¼‰49 13 27 13 76 38 65 57 ï¼ˆd = 2ï¼‰27 13 49 13 65 38 76 57 ï¼ˆd = 1ï¼‰13 13 27 38 49 57 65 76 ä»£ç å®ç°123456789101112131415161718192021222324//å¸Œå°”æ’åºtemplate &lt;typename T&gt;class Shell &#123;public: static void sort(vector&lt;T&gt; &amp;nums);&#125;;template &lt;typename T&gt;void Shell&lt;T&gt;::sort(vector&lt;T&gt; &amp;nums) &#123; int N = nums.size(); //å¢é‡dåˆå§‹ä¸ºN/2ï¼Œæ¯æ¬¡å‡ä¸€åŠï¼Œç›´åˆ°ä¸º1 for (int d = N/2; d &gt;= 1; d /= 2) &#123; //å¢é‡ä¸ºdçš„ç›´æ¥æ’å…¥æ’åº //[0,d-1]åœ¨æ‰€å±å­è¡¨ä¸­å·²æ’åºå¥½ï¼Œä»då¼€å§‹ï¼Œé€‰ä¸€ä¸ªæœªæ’åºçš„å…ƒç´  for (int i = d; i &lt; N; i++) &#123; //[..., i-2d, i-d]å·²æ’å¥½åº //ä»åå¾€å‰ï¼Œä¾æ¬¡æ£€æµ‹å‰é¢å·²æ’åºå¥½çš„å…ƒç´  for (int j = i-d; j &gt;= 0 &amp;&amp; nums[j] &gt; nums[j+d]; j -= d) &#123; //ä¸å¾…æ’åºçš„å…ƒç´ å¯¹æ¯”ï¼Œå¦‚æœé€†åºï¼Œåˆ™äº¤æ¢ swap(nums[j], nums[j+d]); &#125; &#125; &#125;&#125; æ€§èƒ½åˆ†æ ç©ºé—´å¤æ‚åº¦ï¼š $O(1)$ æ—¶é—´å¤æ‚åº¦ æœ€åæ—¶é—´å¤æ‚åº¦ $O(n^2)$ æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼ˆå…¨éƒ¨æœ‰åºï¼‰ï¼š$O(n)$ å½“nåœ¨æŸä¸ªç‰¹å®šèŒƒå›´æ—¶ï¼Œå¯è¾¾ $O(n^{1.3})$ ç¨³å®šæ€§ ä¸ç¨³å®šã€‚å¦‚æœä¸¤ç›¸åŒå…ƒç´ åˆ’åˆ†åˆ°ä¸åŒå­è¡¨ï¼Œå¯èƒ½ä¼šæ”¹å˜ç›¸å¯¹ä½ç½®ã€‚ é€‚ç”¨æ€§ï¼šé¡ºåºè¡¨ å†’æ³¡æ’åºç®—æ³•æ€æƒ³ æ¯è¶Ÿä»å‰å¾€åï¼ˆæˆ–ä»åå¾€å‰ï¼‰ä¸¤ä¸¤ç›¸é‚»å…ƒç´ æ¯”è¾ƒï¼Œå¦‚é€†åºï¼Œåˆ™äº¤æ¢ æ¯è¶Ÿå¯å†’æ³¡å‡ºæœ€å¤§çš„å…ƒç´ åˆ°æœ€å (1)49 38 65 97 76 13 27 4938 49 65 97 76 13 27 4938 49 65 97 76 13 27 4938 49 65 97 76 13 27 4938 49 65 76 97 13 27 4938 49 65 76 13 97 27 4938 49 65 76 13 27 97 4938 49 65 76 13 27 49 (97) (2)38 49 65 76 13 27 49 (97)38 49 65 76 13 27 49 (97)â€¦38 49 65 13 27 49 (76 97) â€¦â€¦ (n-1)(13 27 38 49 49 65 76 97) ä»£ç å®ç°1234567891011121314151617181920212223242526//å†’æ³¡æ’åºtemplate &lt;typename T&gt;class Bubble &#123;public: static void sort(vector&lt;T&gt; &amp;nums);&#125;;template &lt;typename T&gt;void Bubble&lt;T&gt;::sort(vector&lt;T&gt; &amp;nums) &#123; //å†’æ³¡N-1è¶Ÿ for (int i = 0; i &lt; nums.size()-1; i++) &#123; bool flag = false; //è¡¨ç¤ºå‘ç”Ÿè¿‡äº¤æ¢ //ç¬¬iè¶Ÿå†’æ³¡èŒƒå›´[0,N-i-1]ï¼Œåiä¸ªå·²ç»æ’åºå¥½ for (int j = 0; j &lt; nums.size()-i-1; j++) &#123; //é€†åºï¼Œåˆ™äº¤æ¢ if (nums[j] &gt; nums[j+1]) &#123; swap(nums[j], nums[j+1]); flag = true; &#125; &#125; //å¦‚è¯¥è¶Ÿæœªå‘ç”Ÿäº¤æ¢ï¼Œåˆ™å·²å…¨éƒ¨æœ‰åºï¼Œç›´æ¥è¿”å› if (!flag) &#123; return; &#125; &#125;&#125; æ€§èƒ½åˆ†æ ç©ºé—´å¤æ‚åº¦ï¼š $O(1)$ æ—¶é—´å¤æ‚åº¦ æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼ˆå…¨éƒ¨æœ‰åºï¼‰ï¼š$O(n)$ åªéœ€å†’æ³¡ä¸€è¶Ÿï¼Œæ¯”è¾ƒ $n$ æ¬¡ï¼Œäº¤æ¢ $0$ æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ æœ€åæ—¶é—´å¤æ‚åº¦ï¼ˆå…¨éƒ¨é€†åºï¼‰ï¼š $O(n^2)$ å…±å†’æ³¡ $n-1$ è¶Ÿ ç¬¬ $i$ è¶Ÿï¼Œæ¯”è¾ƒ $n-i-1$ æ¬¡ï¼Œäº¤æ¢ $n-i-1$ æ¬¡ æ¯”è¾ƒæ¬¡æ•° = äº¤æ¢æ¬¡æ•° = $(n-1)+(n-2)+â€¦+1 =n(n-1)/2$ æ—¶é—´å¤æ‚åº¦ $O(n^2)$ å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š $O(n^2)$ ç¨³å®šæ€§ ç¨³å®šã€‚åªåœ¨ç›¸é‚»é€†åºæ—¶äº¤æ¢ï¼Œä¸æ”¹å˜ç›¸åŒå…ƒç´ çš„ç›¸å¯¹ä½ç½®ã€‚ é€‚ç”¨æ€§ï¼šé¡ºåºè¡¨å’Œé“¾è¡¨ å¿«é€Ÿæ’åºç®—æ³•æ€æƒ³æ¯è¶Ÿæ’åºç¡®å®šä¸€ä¸ªå…ƒç´  $x$ çš„æœ€ç»ˆä½ç½®ï¼Œå°†æ•°æ®åˆ†ä¸º$x$ ä¸¤ä¸ªéƒ¨åˆ†ã€‚å†å¯¹è¿™ä¸¤ä¸ªéƒ¨åˆ†é€’å½’è¿›è¡Œæ’åºã€‚ (1)ï¼šç¡®å®š49çš„ä½ç½®ï¼Œä¸49æ¯”è¾ƒï¼Œå·¦è¾¹éƒ¨åˆ†å°äº49ï¼Œå³è¾¹éƒ¨åˆ†å¤§äº49 49 38 65 97 76 13 27 49 49 38 65 97 76 13 27 49 low high 49 38 65 97 76 13 27 49 low high 49 27 38 65 97 76 13 49 low high 49 27 38 65 97 76 13 49 low high 49 27 38 65 97 76 13 49 low high 49 27 38 97 76 13 65 49 low high 49 27 38 97 76 13 65 49 low high 49 27 38 13 97 76 65 49 low high 49 27 38 13 97 76 65 49 low high 49 27 38 13 76 97 65 49 low high 49 27 38 13 76 97 65 49 low high 49 27 38 13 76 97 65 49 l=h 27 38 13 49 76 97 65 49 &lt;49 l=h &gt;49 å†åˆ†åˆ«å¯¹å·¦å³ä¸¤è¾¹ $[27, 38, 13]$ ã€ $[76, 97, 65, 49]$ è¿›è¡Œé€’å½’æ’åºã€‚ ä»£ç å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//å¿«é€Ÿæ’åºtemplate &lt;typename T&gt;class Quick &#123;public: static void sort(vector&lt;T&gt; &amp;nums);private: static void sort(vector&lt;T&gt; &amp;nums, int low, int high); static int partition(vector&lt;T&gt; &amp;nums, int low, int high);&#125;;//æ’åºå‡½æ•°template &lt;typename T&gt;void Quick&lt;T&gt;::sort(vector&lt;T&gt; &amp;nums) &#123; sort(nums, 0, nums.size()-1);&#125;//å¯¹[low, high]éƒ¨åˆ†æ’åºtemplate &lt;typename T&gt;void Quick&lt;T&gt;::sort(vector&lt;T&gt; &amp;nums, int low, int high) &#123; if (low &gt;= high) &#123; return; //è·³å‡ºé€’å½’ &#125; int pivot_pos = partition(nums, low, high); //åˆ‡åˆ† sort(nums, low, pivot_pos-1); //æ’åºå·¦è¾¹éƒ¨åˆ† sort(nums, pivot_pos+1, high); //æ’åºå³è¾¹éƒ¨åˆ†&#125;//å¿«é€Ÿæ’åºåˆ’åˆ†template &lt;typename T&gt;int Quick&lt;T&gt;::partition(vector&lt;T&gt; &amp;nums, int low, int high) &#123; T pivot = nums[low]; //ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ¢è½´ //lowå’Œhighæ¯”è¾ƒäº¤æ¢ï¼Œç›´åˆ° low &gt;= high while (low &lt; high) &#123; //highå·¦ç§»ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå°äºpivotçš„å‡ºç° while (nums[high] &gt;= pivot &amp;&amp; low &lt; high) &#123; high--; &#125; nums[low] = nums[high]; //å°äºpivotçš„highä¸lowäº¤æ¢ //lowå³ç§»ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå¤§äºpivotçš„å‡ºç° while (nums[low] &lt;= pivot &amp;&amp; low &lt; high) &#123; low++; &#125; nums[high] = nums[low]; //å¤§äºpivotçš„lowä¸highäº¤æ¢ &#125; //pivotå¡«å…¥ä¸­é—´ä½ç½® nums[low] = pivot; return low;&#125; æ€§èƒ½åˆ†æ ç©ºé—´å¤æ‚åº¦ éœ€è¦è°ƒç”¨é€’å½’æ ˆï¼Œç›¸å½“äºåˆ†åˆ«ç”¨nä¸ªæ¢è½´å»ºç«‹ä¸€ä¸ªäºŒå‰æ ‘ï¼Œç©ºé—´å¤æ‚åº¦å³ä¸ºé€’å½’å±‚æ•°ï¼Œä¹Ÿå°±æ˜¯äºŒå‰æ ‘é«˜åº¦ã€‚ æœ€å¥½ç©ºé—´å¤æ‚åº¦ï¼š$O(log_2n)$ æ¢è½´åˆ’åˆ†å‡åŒ€ï¼ŒäºŒå‰æ ‘ä¸ºå®Œå…¨äºŒå‰æ ‘ï¼Œé«˜åº¦ä¸º $log_2n$ æœ€åæ—¶é—´å¤æ‚åº¦ $O(n)$ æ¢è½´åˆ’åˆ†æä¸å‡åŒ€ï¼Œå¦‚æ¯ä¸ªéƒ½åˆ’åˆ†æˆåªæœ‰å¤§äºpivotæˆ–å°äºpivotï¼ŒäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹çš„åº¦éƒ½ä¸º1ï¼Œé«˜åº¦ä¸º $n$ æ—¶é—´å¤æ‚åº¦ æ—¶é—´å¤æ‚åº¦ä¸º $O(n*é€’å½’å±‚æ•°)$ æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼ˆåˆ’åˆ†å‡åŒ€ï¼‰ï¼š$O(nlog_2N)$ æœ€åæ—¶é—´å¤æ‚åº¦ï¼ˆåˆ’åˆ†æä¸å‡åŒ€ï¼‰ï¼š $O(n^2)$ å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š $O(nlog_2N)$ ç¨³å®šæ€§ ä¸ç¨³å®šã€‚äº¤æ¢æ—¶ï¼Œå¯èƒ½æŠŠç›¸å¯¹ä½ç½®æ›´åçš„å…ƒç´ äº¤æ¢åˆ°æ›´å‰çš„ä½ç½®ã€‚ | 49 | 38 | 65 | 16 | 76 | 13 | 57 | 16 | |â€”â€”|â€”â€”|â€”â€”|:â€”-|:â€”-|:â€”-|:â€”-|:â€”â€”â€”â€”â€”| | 49 | | | | | | | | | | 38 | 65 | 16 | 76 | 13 | 27 |16| | low| | | | | | | high | | | | | | | | | 49 | | 16 | 38 | 65 | 16 | 76 | 13 | 27 | | | low| | | | | | | high | é€‚ç”¨æ€§ï¼šé¡ºåºè¡¨ ç®€å•é€‰æ‹©æ’åºç®—æ³•æ€æƒ³æœ€ç®€å•çš„ä¸€ç§æ’åºæ–¹æ³•ã€‚æ¯æ¬¡æ‰¾åˆ°æœ€å°çš„é‚£ä¸ªå…ƒç´ ï¼Œå’Œç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢ã€‚ 49 38 65 97 76 13 27 49(13) 38 65 97 76 49 27 49(13 27) 65 97 76 49 38 49(13 27 38) 97 76 49 65 49(13 27 38 49) 76 97 65 49(13 27 38 49 49) 97 65 76(13 27 38 49 49 65) 97 76(13 27 38 49 49 65 76) 97(13 27 38 49 49 65 76 97) ä»£ç å®ç°12345678910111213141516171819//ç®€å•é€‰æ‹©æ’åºtemplate &lt;typename T&gt;class Selection &#123;public: static void sort(vector&lt;T&gt; &amp;nums);&#125;;template &lt;typename T&gt;void Selection&lt;T&gt;::sort(vector&lt;T&gt; &amp;nums) &#123; for (int i = 0; i &lt; nums.size()-1; i++) &#123; int min_pos = i; for (int j = i; j &lt; nums.size(); j++) &#123; if (nums[j] &lt; nums[min_pos]) &#123; min_pos = j; &#125; &#125; swap(nums[i], nums[min_pos]); &#125;&#125; æ€§èƒ½åˆ†æ ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$ æ— è®ºæ˜¯æœ‰åºã€æ— åºã€ä¹±åºï¼Œéƒ½éœ€è¦ $n-1$ è¶Ÿé€‰å‡ºæœ€å°å€¼ï¼Œç¬¬iè¶Ÿé€‰æœ€å°å€¼éƒ½éœ€è¦å¯¹æ¯” $n-i$ æ¬¡ã€‚å³ $(n-1)+(n-2)+â€¦+1 = n(n-1)/2$ ç¨³å®šæ€§ ä¸ç¨³å®šã€‚äº¤æ¢æ—¶ï¼Œå¯èƒ½æŠŠç›¸å¯¹ä½ç½®æ›´å‰çš„å…ƒç´ æ¢åˆ°åé¢å»ã€‚ 2 2 11 2 21 2 2 é€‚ç”¨æ€§ï¼šé¡ºåºè¡¨å’Œé“¾è¡¨ å †æ’åºç®—æ³•æ€æƒ³å…ˆå»ºç«‹å¤§æ ¹å †/å°æ ¹å †ï¼Œå†åŸºäºå¤§æ ¹å †/å°æ ¹å †è¿›è¡Œæ’åºã€‚ äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨å®Œå…¨äºŒå‰æ ‘å¯ä»¥é¡ºåºå­˜å‚¨ä¸ºåºåˆ—ï¼Œå¦‚ä¸‹é¢åºåˆ—å’Œå®Œå…¨äºŒå‰æ ‘çš„å¯¹åº” t[0] t[1] t[2] t[3] t[4] t[5] t[6] t[7] t[8] t[9] 1 2 3 4 5 6 7 8 9 graph TD A((1)) B((2)) C((3)) D((4)) E((5)) F((6)) G((7)) H((8)) I((9)) A---B; A---C; B---D; B---E; C---F; C---G; D---H; D---I; å¯¹äºå…±æœ‰ $n$ ä¸ªç»“ç‚¹å®Œå…¨äºŒå‰æ ‘ï¼Œåºå·ä¸º $i$ ç»“ç‚¹ $i$ çš„å·¦å­©å­ï¼š $2i$ $i$ çš„å³å­©å­ï¼š $2i+1$ $i$ çš„çˆ¶ç»“ç‚¹ï¼š $\\lfloor i/2 \\rfloor$ $i$ æ‰€åœ¨å±‚æ¬¡ï¼š $\\lfloor log_2(n+1) \\rfloor$ $i$ æ˜¯å¦æœ‰å·¦å­©å­ï¼š $2i \\le n?$ $i$ æ˜¯å¦æœ‰å³å­©å­ï¼š $2i+1 \\le n?$ $i$ æ˜¯å¦æ˜¯å¶å­ç»“ç‚¹ï¼š $i \\ge \\lfloor n/2 \\rfloor?$ å †çš„å®šä¹‰å †åˆ†ä¸ºå¤§æ ¹å †/å°æ ¹å †ï¼Œå³æ›´å¤§çš„ä¸ºæ ¹/æ›´å°çš„ä¸ºæ ¹ å¤§æ ¹å †ï¼šæ ¹ &gt;= å·¦ã€å³ | | 87 | 45 | 78 | 32 | 17 | 65 | 53 | 9 | |â€”-|â€”-|â€”-|â€”-|:â€”|:â€”|:â€”|:â€”|:â€”| &lt;pre class=&quot;mermaid&quot;&gt; graph TD A((87)) B((45)) C((78)) D((32)) E((17)) F((65)) G((53)) H((9)) A---B; A---C; B---D; B---E; C---F; C---G; D---H;&lt;/pre&gt; å°æ ¹å †ï¼šæ ¹ &lt;= å·¦ã€å³ | | 9 | 45 | 17 | 65 | 53 | 32 | 87 | 78 | |â€”-|â€”-|â€”-|â€”-|:â€”|:â€”|:â€”|:â€”|:â€”| &lt;pre class=&quot;mermaid&quot;&gt; graph TD A((9)) B((45)) C((17)) D((65)) E((53)) F((32)) G((87)) H((78)) A---B; A---C; B---D; B---E; C---F; C---G; D---H;&lt;/pre&gt; å †çš„å»ºç«‹ä»¥å¤§æ ¹å †ä¸ºä¾‹ï¼Œ æŠŠæ‰€æœ‰çš„éå¶å­ç»“ç‚¹æ£€æŸ¥ä¸€éï¼Œå¦‚æœä¸æ»¡è¶³å¤§æ ¹å †è¦æ±‚ï¼Œåˆ™è¿›è¡Œè°ƒæ•´ã€‚ åŸºäºå †è¿›è¡Œæ’åºä»£ç å®ç°æ€§èƒ½åˆ†æå½’å¹¶æ’åºç®—æ³•æ€æƒ³ä»£ç å®ç°æ€§èƒ½åˆ†æå‚è€ƒ æ•°æ®ç»“æ„å’Œç®—æ³•åŠ¨æ€å¯è§†åŒ–","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ’åº","slug":"æ’åº","permalink":"https://gy23333.github.io/tags/%E6%8E%92%E5%BA%8F/"}]},{"title":"æ ˆ","slug":"æ ˆ","date":"2023-02-10T13:35:45.000Z","updated":"2024-11-11T03:57:58.131Z","comments":true,"path":"2023/02/10/æ ˆ/","link":"","permalink":"https://gy23333.github.io/2023/02/10/%E6%A0%88/","excerpt":"æ ˆç›¸å…³","text":"æ ˆç›¸å…³ æ ˆçš„å®ç°ç”¨æ•°ç»„å®ç°æ ˆï¼ˆé¡ºåºæ ˆï¼‰1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192//Stack.hpp#ifndef Stack_hpp#define Stack_hpp#include &lt;iostream&gt;using namespace std;//é¡ºåºæ ˆtemplate &lt;typename T&gt;class Stack &#123; T *data; //æˆå‘˜æ•°ç»„ int top; //æ ˆé¡¶æŒ‡é’ˆï¼Œå½“å‰æ ˆé¡¶å…ƒç´ çš„ä½ç½® int size; //æ ˆä¸­å…ƒç´ çš„æœ€å¤§ä¸ªæ•°public: Stack(); ~Stack(); bool is_empty(); //åˆ¤æ–­æ ˆç©º bool is_full(); //åˆ¤æ–­æ ˆæ»¡ void push(const T &amp;elem); //å…¥æ ˆ void pop(); //å‡ºæ ˆ T get_top(); //è®¿é—®æ ˆé¡¶å…ƒç´ &#125;;//æ ˆåˆå§‹åŒ–//åˆå§‹æ ˆç©ºï¼Œæ ˆé¡¶æŒ‡é’ˆæŒ‡å‘-1ï¼Œåˆå§‹ç©ºé—´ä¸º10template &lt;typename T&gt;Stack&lt;T&gt;::Stack() : top(-1), size(10) &#123; data = new T[size]; //ç”³è¯·ä¸€ä¸ªåˆå§‹ä¸º10çš„ç©ºé—´&#125;//é”€æ¯æ ˆtemplate &lt;typename T&gt;Stack&lt;T&gt;::~Stack() &#123; delete [] data; data = nullptr;&#125;//åˆ¤æ–­æ ˆç©ºtemplate &lt;typename T&gt;bool Stack&lt;T&gt;::is_empty() &#123; if (top == -1) &#123; return true; &#125; else &#123; return false; &#125;&#125;//åˆ¤æ–­æ ˆæ»¡template &lt;typename T&gt;bool Stack&lt;T&gt;::is_full() &#123; if (top == size-1) &#123; return true; &#125; else &#123; return false; &#125;&#125;//å…¥æ ˆtemplate &lt;typename T&gt;void Stack&lt;T&gt;::push(const T &amp;elem) &#123; if (is_full()) &#123; throw out_of_range(\"Stack&lt;&gt;::push(): æ ˆæ»¡\"); &#125; else &#123; data[++top] = elem; &#125;&#125;//å‡ºæ ˆtemplate &lt;typename T&gt;void Stack&lt;T&gt;::pop() &#123; if (is_empty()) &#123; throw out_of_range(\"Stack&lt;&gt;::pop(): æ ˆç©º\"); &#125; else &#123; top--; &#125;&#125;//è®¿é—®æ ˆé¡¶å…ƒç´ template &lt;typename T&gt;T Stack&lt;T&gt;::get_top() &#123; if (is_empty()) &#123; throw out_of_range(\"Stack&lt;&gt;::top(): æ ˆç©º\"); &#125; else &#123; return data[top]; &#125;&#125;#endif ç”¨é“¾è¡¨å®ç°æ ˆï¼ˆé“¾æ ˆï¼‰12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788//Stack.hpp#ifndef Stack_hpp#define Stack_hpp#include &lt;iostream&gt;using namespace std;//ç»“ç‚¹template &lt;typename T&gt;struct node &#123; T data; //æ•°æ®åŸŸ node *next; //æŒ‡é’ˆåŸŸ&#125;;//é“¾æ ˆtemplate &lt;typename T&gt;class Stack &#123; node&lt;T&gt; *top; //æ ˆé¡¶æŒ‡é’ˆpublic: Stack(); ~Stack(); bool is_empty(); //åˆ¤æ–­æ ˆç©º void push(const T &amp;elem); //å…¥æ ˆ void pop(); //å‡ºæ ˆ T get_top(); //è®¿é—®æ ˆé¡¶å…ƒç´ &#125;;//æ ˆåˆå§‹åŒ–template &lt;typename T&gt;Stack&lt;T&gt;::Stack() &#123; top = nullptr; //åˆå§‹ä¸ºç©º&#125;//é”€æ¯æ ˆtemplate &lt;typename T&gt;Stack&lt;T&gt;::~Stack() &#123; node&lt;T&gt; *ptr = nullptr; while (!is_empty()) &#123; ptr = top-&gt;next; delete top; top = ptr; &#125;&#125;//åˆ¤æ–­æ ˆç©ºtemplate &lt;typename T&gt;bool Stack&lt;T&gt;::is_empty() &#123; if (top == nullptr) &#123; return true; &#125; else &#123; return false; &#125;&#125;//å…¥æ ˆtemplate &lt;typename T&gt;void Stack&lt;T&gt;::push(const T &amp;elem) &#123; node&lt;T&gt; *ptr = new node&lt;T&gt;; ptr-&gt;data = elem; ptr-&gt;next = top; top = ptr;&#125;//å‡ºæ ˆtemplate &lt;typename T&gt;void Stack&lt;T&gt;::pop() &#123; if (is_empty()) &#123; throw out_of_range(\"Stack&lt;&gt;::pop(): æ ˆç©º\"); &#125; else &#123; node&lt;T&gt; *ptr = top-&gt;next; delete top; top = ptr; &#125;&#125;//è®¿é—®æ ˆé¡¶å…ƒç´ template &lt;typename T&gt;T Stack&lt;T&gt;::get_top() &#123; if (is_empty()) &#123; throw out_of_range(\"Stack&lt;&gt;::top(): æ ˆç©º\"); &#125; else &#123; return top-&gt;data; &#125;&#125;#endif stackï¼ˆæ ˆï¼‰å‡½æ•°æ–¹æ³• ä»£ç  åŠŸèƒ½ s.push(x) å°†xå‹å…¥æ ˆé¡¶ s.top() è¿”å›æ ˆé¡¶çš„å…ƒç´  s.pop() åˆ é™¤æ ˆé¡¶çš„å…ƒç´  s.size() è¿”å›æ ˆä¸­å…ƒç´ çš„ä¸ªæ•° s.empty() æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º,è‹¥ä¸ºç©ºè¿”å›true,å¦åˆ™è¿”å›false","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"https://gy23333.github.io/tags/%E6%A0%88/"}]},{"title":"VSCodeç¯å¢ƒé…ç½®","slug":"VSCodeç¯å¢ƒé…ç½®","date":"2023-01-24T08:26:59.000Z","updated":"2024-11-11T03:57:58.111Z","comments":true,"path":"2023/01/24/VSCodeç¯å¢ƒé…ç½®/","link":"","permalink":"https://gy23333.github.io/2023/01/24/VSCode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","excerpt":"VSCodeä¸Šçš„ä¸€äº›ç¯å¢ƒé…ç½®è®°å½•ã€‚","text":"VSCodeä¸Šçš„ä¸€äº›ç¯å¢ƒé…ç½®è®°å½•ã€‚ C/C++ç¯å¢ƒé…ç½®è¿è¡Œç¯å¢ƒ VSCodeä¸Šå®‰è£…æ’ä»¶C/C++ã€Code Runner é…ç½®Code Runner ç‚¹å‡»Code Runnerçš„è®¾ç½®-&gt;æ‰©å±•è®¾ç½® å»ºè®®å‹¾é€‰Clear Previous Outputã€Ignore Selectionã€Run In Terminalã€Save All Files Before Runã€Save File Before Run å»ºè®®ä¸å‹¾é€‰Preserve Focus è®¾ç½®ä¸­å»ºè®®å‹¾é€‰ Files: Auto Saveçš„afterDelay è®¾ç½®ä¸­å»ºè®®ä¸å‹¾é€‰ C_Cpp: Debug Shortcut è°ƒè¯•ç¯å¢ƒåœ¨éœ€è°ƒè¯•çš„cppæ–‡ä»¶ä¸Š ç”Ÿæˆtasks.jsonæ–‡ä»¶ æ‰“å¼€å‘½ä»¤é¢æ¿command+shift+P æ‰“å¼€é…ç½®ä»»åŠ¡Tasks: Configure Task é€‰æ‹©clang++ ç”Ÿæˆæ´»åŠ¨æ–‡ä»¶ï¼Œå³ç”Ÿæˆtasks.jsonæ–‡ä»¶ ç”Ÿæˆlaunch.jsonæ–‡ä»¶ åˆ‡æ¢åˆ°è¿è¡Œå’Œè°ƒè¯•é¡µé¢ ç‚¹å‡»åˆ›å»º launch.json æ–‡ä»¶ï¼Œå³ç”Ÿæˆlaunch.jsonæ–‡ä»¶ ç¼–è¾‘launch.jsonæ–‡ä»¶ ç‚¹å‡»æ·»åŠ é…ç½® -&gt; C/C++ï¼š(lldb)å¯åŠ¨ï¼Œå¹¶ç¼–è¾‘ä¸‹é¢é…ç½® ä¿®æ”¹&quot;program&quot;: &quot;${fileDirname}/${fileBasenameNoExtension}&quot;, å³ç¨‹åºå¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼šå½“å‰æ‰“å¼€çš„æ–‡ä»¶çš„å®Œæ•´ç›®å½•å / å½“å‰æ‰“å¼€çš„æ–‡ä»¶çš„æ–‡ä»¶å (ä¸åŒ…å«æ–‡ä»¶æ‰©å±•å) ä¿®æ”¹&quot;externalConsole&quot;: true, æ·»åŠ &quot;preLaunchTask&quot;: &quot;C/C++: clang++ ç”Ÿæˆæ´»åŠ¨æ–‡ä»¶&quot; å³è°ƒè¯•ä¼šè¯å¼€å§‹å‰è¦è¿è¡Œçš„ä»»åŠ¡ï¼Œtasks.jsonæ–‡ä»¶çš„labelé…ç½® ç‚¹å‡»è°ƒè¯• å‚è€ƒ Macç”¨Visual Studio Codeç¼–å†™C/C++ è‹¹æœç”µè„‘VS Codeå¿«é€Ÿç¼–å†™C/C++æ•™ç¨‹-å“”å“©å“”å“©","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://gy23333.github.io/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://gy23333.github.io/tags/C-C/"},{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://gy23333.github.io/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"},{"name":"VSCode","slug":"VSCode","permalink":"https://gy23333.github.io/tags/VSCode/"}]},{"title":"æ ˆçš„åº”ç”¨â€”â€”è¡¨è¾¾å¼æ±‚å€¼","slug":"æ ˆçš„åº”ç”¨â€”â€”è¡¨è¾¾å¼æ±‚å€¼","date":"2023-01-17T18:06:05.000Z","updated":"2024-11-11T03:57:58.124Z","comments":true,"path":"2023/01/18/æ ˆçš„åº”ç”¨â€”â€”è¡¨è¾¾å¼æ±‚å€¼/","link":"","permalink":"https://gy23333.github.io/2023/01/18/%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC/","excerpt":"åˆ©ç”¨æ ˆå¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚è§£","text":"åˆ©ç”¨æ ˆå¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚è§£ æè¿°è¾“å…¥ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆç”¨å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ï¼Œæ±‚è¿™ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚ ä¿è¯å­—ç¬¦ä¸²ä¸­çš„æœ‰æ•ˆå­—ç¬¦åŒ…æ‹¬ã€0-9ã€‘ã€+ã€-ã€ *ã€/ ã€(ã€ )ã€[ã€]ã€{ ã€}ï¼Œä¸”è¡¨è¾¾å¼ä¸€å®šåˆæ³•ã€‚ è¾“å…¥æè¿°ï¼š è¾“å…¥ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼ è¾“å‡ºæè¿°ï¼š å¾—åˆ°è®¡ç®—ç»“æœ ç¤ºä¾‹ä¸€ è¾“å…¥ï¼š$3+2{1+2[-4/(8-6)+7]}$è¾“å‡ºï¼š25 ç¤ºä¾‹äºŒ è¾“å…¥ï¼š$5-3+96(6-10-2)$è¾“å‡ºï¼š-322 ä¸­ç¼€è¡¨è¾¾å¼çš„è®¡ç®—å°†ä¸­ç¼€è½¬åç¼€ã€åç¼€è¡¨è¾¾å¼çš„è®¡ç®—ä¸¤ä¸ªæ­¥éª¤åˆå¹¶ã€‚ åˆå§‹åŒ–ä¸¤ä¸ªæ ˆï¼Œæ“ä½œæ•°æ ˆå’Œè¿ç®—ç¬¦æ ˆ ä»å·¦åˆ°å³æ‰«æä¸­ç¼€è¡¨è¾¾å¼ï¼Œ å½“æ‰«æåˆ°æ“ä½œæ•°æ—¶ï¼Œå°†æ“ä½œæ•°å‹å…¥æ“ä½œæ•°æ ˆ å½“æ‰«æåˆ°è¿ç®—ç¬¦æ—¶ï¼Œ å¦‚æœæ˜¯ç•Œé™ç¬¦ï¼Œ é‡åˆ°å·¦æ‹¬å·â€™(â€˜ã€â€™[â€˜ã€â€™{â€˜ï¼Œå‹å…¥è¿ç®—ç¬¦æ ˆ é‡åˆ°å³æ‹¬å·â€™)â€™ã€â€™]â€™ã€â€™}â€™ï¼Œä¾æ¬¡å¼¹å‡ºæ ˆå†…çš„è¿ç®—ç¬¦ï¼Œç›´åˆ°å¼¹å‡ºå·¦æ‹¬å·æ—¶ç»“æŸ å¦‚æœæ˜¯å…¶ä»–è¿ç®—ç¬¦ï¼Œ ä¾æ¬¡å¼¹å‡ºä¼˜å…ˆçº§å¤§äºç­‰äºå½“å‰è¿ç®—ç¬¦çš„æ‰€æœ‰è¿ç®—ç¬¦ï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·æˆ–æ ˆç©º å½“å‰è¿ç®—ç¬¦å…¥æ ˆ æ‰«æå®Œå…¨éƒ¨å­—ç¬¦åï¼Œä¾æ¬¡å°†å‰©ä¸‹çš„è¿ç®—ç¬¦å…¨éƒ¨å¼¹å‡º æ¯å¼¹å‡ºä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå°±è¦å¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°ï¼Œå…ˆå¼¹å‡ºçš„ä¸ºå³æ“ä½œæ•°ï¼Œåå¼¹å‡ºçš„ä¸ºå·¦æ“ä½œæ•°ï¼Œè®¡ç®—$[å·¦æ“ä½œæ•° \\ è¿ç®—ç¬¦\\ å³æ“ä½œæ•°]$ï¼Œå°†ç»“æœå‹å…¥æ“ä½œæ•°æ ˆ ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;stack&gt;using namespace std;//å¼¹å‡ºä¸€ä¸ªè¿ç®—ç¬¦å’Œä¸¤ä¸ªæ“ä½œæ•°ï¼Œè®¡ç®—åçš„ç»“æœå‹å…¥æ“ä½œæ•°æ ˆvoid pop_count_push (stack&lt;int&gt;&amp; v_num, stack&lt;char&gt;&amp; v_sign) &#123; //è¿ç®—ç¬¦å‡ºæ ˆ char sign = v_sign.top(); v_sign.pop(); //æ“ä½œæ•°å‡ºæ ˆï¼Œå…ˆå¼¹å‡ºçš„ä¸ºå³æ“ä½œæ•°ï¼Œåå¼¹å‡ºçš„ä¸ºå·¦æ“ä½œæ•° int num1 = v_num.top(); //å³æ“ä½œæ•° v_num.pop(); int num2 = v_num.top(); //å·¦æ“ä½œæ•° v_num.pop(); //è®¡ç®—ã€å·¦æ“ä½œæ•° è¿ç®—ç¬¦ å³æ“ä½œæ•°ã€‘ int res; switch (sign) &#123; case '+': res = num2 + num1; break; case '-': res = num2 - num1; break; case '*': res = num2 * num1; break; case '/': res = num2 / num1; break; default: break; &#125; //ç»“æœå‹å…¥æ“ä½œæ•°æ ˆ v_num.push(res);&#125;//åˆ¤æ–­è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼Œä¹˜é™¤ä¸º2ï¼ŒåŠ å‡ä¸º1int priority (char c) &#123; if (c == '*' || c == '/') &#123; return 2; &#125; else &#123; return 1; &#125;&#125;//è®¡ç®—ä¸­ç¼€è¡¨è¾¾å¼int count_expression (string str) &#123; stack&lt;int&gt; v_num; //æ“ä½œæ•°æ ˆ stack&lt;char&gt; v_sign; //è¿ç®—ç¬¦æ ˆ //å¦‚æœå¼€å§‹æˆ–å·¦æ‹¬å·åç›´æ¥è·Ÿâ€œ-â€å·ï¼Œåˆ™è¡¥0ï¼ˆå³-4å˜0-4ï¼‰ for (int i = 0; i &lt; str.length(); ++i) &#123; if (i == 0 &amp;&amp; str[i] == '-') &#123; str = \"0\" + str; &#125; else if (str[i] == '-' &amp;&amp; (str[i - 1] == '(' || str[i - 1] == '[' || str[i - 1] == '&#123;')) &#123; str.insert(i, \"0\"); &#125; &#125; //ä»å·¦åˆ°å³æ‰«æä¸­ç¼€è¡¨è¾¾å¼ bool flag = false; //å‰ä¸€ä½ä¸ºç¬¦å·ä½ä¸ºfalseï¼Œä¸ºæ•°ä½ä¸ºtrueï¼ˆç”¨äºè®¡ç®—å¤šä½æ•°ï¼‰ for (char c : str) &#123; //å½“æ‰«æåˆ°æ“ä½œæ•°æ—¶ï¼Œå°†æ“ä½œæ•°å‹å…¥æ“ä½œæ•°æ ˆ if (c &gt;= '0' &amp;&amp; c &lt;= '9') &#123; //å‰ä¸€ä½ä¸ºç¬¦å·ä½ï¼Œåˆ™ç›´æ¥å‹å…¥æœ¬ä½ if (!flag) &#123; flag = true; v_num.push(c - '0'); &#125; //å‰ä¸€ä½ä¸ºæ•°ä½ï¼Œåˆ™å°†ä¸Šä¸€ä¸ªæ•°å‡ºæ ˆï¼Œä¹˜10ï¼Œå†åŠ ä¸Šæœ¬ä½ else &#123; int num = v_num.top() * 10 + (c - '0'); v_num.pop(); v_num.push(num); //æ–°æ•°å…¥æ ˆ &#125; &#125; //å½“æ‰«æåˆ°è¿ç®—ç¬¦æ—¶ else &#123; flag = false; //å½“æ‰«æåˆ°å·¦æ‹¬å·æ—¶ï¼Œå‹å…¥è¿ç®—ç¬¦æ ˆ if (c == '(' || c == '[' || c == '&#123;') &#123; v_sign.push(c); &#125; //å½“æ‰«æåˆ°å³æ‹¬å·æ—¶ï¼Œä¾æ¬¡å¼¹å‡ºæ ˆå†…çš„è¿ç®—ç¬¦ï¼Œç›´åˆ°å¼¹å‡ºå·¦æ‹¬å·æ—¶ç»“æŸ else if (c == ')' || c == ']' || c == '&#125;') &#123; //å½“æ ˆé¡¶ä¸æ˜¯å·¦æ‹¬å·æ—¶ï¼Œç»§ç»­å¼¹å‡ºè¿ç®—ç¬¦è®¡ç®— while (v_sign.top() != '(' &amp;&amp; v_sign.top() != '[' &amp;&amp; v_sign.top() != '&#123;') &#123; pop_count_push(v_num, v_sign); &#125; //å¼¹å‡ºå·¦æ‹¬å· v_sign.pop(); &#125; //å½“æ‰«æåˆ°å…¶ä»–è¿ç®—ç¬¦æ—¶ else &#123; //é‡åˆ°å·¦æ‹¬å·æˆ–æ ˆç©ºå‰ï¼Œä¸€ç›´å¼¹å‡ºä¼˜å…ˆçº§å¤§äºç­‰äºå½“å‰çš„è¿ç®—ç¬¦ while (!v_sign.empty()) &#123; if (v_sign.top() == '(' || v_sign.top() == '[' || v_sign.top() == '&#123;') &#123; break; &#125; //æ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å¤§äºç­‰äºå½“å‰çš„è¿ç®—ç¬¦ï¼Œåˆ™å¼¹å‡ºè¿ç®—ç¬¦è®¡ç®— if (priority(v_sign.top()) &gt;= priority(c)) &#123; pop_count_push(v_num, v_sign); &#125; else &#123; break; //å¦åˆ™ç»“æŸå¼¹å‡º &#125; &#125; //å½“å‰è¿ç®—ç¬¦å…¥æ ˆ v_sign.push(c); &#125; &#125; &#125; //å°†å‰©ä¸‹çš„è¿ç®—ç¬¦å…¨éƒ¨å¼¹å‡º while (!v_sign.empty()) &#123; pop_count_push(v_num, v_sign); &#125; int result = v_num.top(); return result;&#125;int main () &#123; string str; cin &gt;&gt; str; cout &lt;&lt; count_expression(str) &lt;&lt; endl;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"https://gy23333.github.io/tags/%E6%A0%88/"},{"name":"è¡¨è¾¾å¼æ±‚å€¼","slug":"è¡¨è¾¾å¼æ±‚å€¼","permalink":"https://gy23333.github.io/tags/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC/"}]},{"title":"æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç®—æ³•","slug":"æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç®—æ³•","date":"2023-01-13T18:30:43.000Z","updated":"2024-11-11T03:57:58.115Z","comments":true,"path":"2023/01/14/æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç®—æ³•/","link":"","permalink":"https://gy23333.github.io/2023/01/14/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%EF%BC%88DFS%EF%BC%89%E7%AE%97%E6%B3%95/","excerpt":"å›¾çš„æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç±»ä¼¼äºæ ‘çš„å…ˆåºéå†ï¼Œå°½å¯èƒ½â€œæ·±â€åœ°æœç´¢ä¸€ä¸ªå›¾ã€‚","text":"å›¾çš„æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç±»ä¼¼äºæ ‘çš„å…ˆåºéå†ï¼Œå°½å¯èƒ½â€œæ·±â€åœ°æœç´¢ä¸€ä¸ªå›¾ã€‚ DFS ç®—æ³•åŸºæœ¬æ€æƒ³é¦–å…ˆè®¿é—®æŸä¸€èµ·å§‹é¡¶ç‚¹vï¼Œå†ç”±vå‡ºå‘ï¼Œè®¿é—®ä¸vé‚»æ¥ä¸”æœªè®¿é—®è¿‡çš„é¡¶ç‚¹wï¼Œåœ¨ä»¥wä¸ºèµ·å§‹é¡¶ç‚¹å‡ºå‘ï¼Œè®¿é—®ä¸wé‚»æ¥ä¸”æœªè®¿é—®è¿‡çš„é¡¶ç‚¹â€¦â€¦ 1234567891011void DFS (Graph G, int v) &#123; //ä»é¡¶ç‚¹vå‡ºå‘ï¼Œæ·±åº¦ä¼˜å…ˆéå†å›¾G visit(v); //è®¿é—®v visited[v] = true; //æ ‡è®°vå·²è®¿é—® //ä¾æ¬¡å¯¹vçš„æ‰€æœ‰æœªè®¿é—®è¿‡çš„é‚»æ¥é¡¶ç‚¹æ·±åº¦ä¼˜å…ˆéå† for (w = FirstNeighbor(G, v); w &gt;= 0; w = NextNeighbor(G, v, w)) &#123; //éå†é‚»æ¥é¡¶ç‚¹ if (!visited[w]) &#123; //æœªè®¿é—®è¿‡ DFS(G, w); &#125; &#125;&#125; ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œé‡‡ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œä¸”ä»¥å­—æ¯é¡ºåºä¼˜å…ˆï¼Œéå†é¡ºåºå¦‚ä¸‹ï¼š \\begin{aligned} a -> b -> c &-> e \\\\ -> d &-> f \\\\ &-> g \\end{aligned}graph LR a((a)) b((b)) c((c)) d((d)) e((e)) f((f)) g((g)) a --- b & c b --- c & d c --- e d --- f & g æ€§èƒ½åˆ†æ ç©ºé—´å¤æ‚åº¦ DPSåˆ©ç”¨é€’å½’ï¼Œéœ€è¦ä¸€ä¸ªä»¥æ¯ä¸ªé¡¶ç‚¹ä¸ºèµ·ç‚¹çš„DFSå‡½æ•°é€’å½’å·¥ä½œæ ˆï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(|V|)$ ï¼ˆ$|V|$ è¡¨ç¤ºé¡¶ç‚¹çš„ä¸ªæ•°ï¼‰ æ—¶é—´å¤æ‚åº¦ éå†å›¾å®é™…ä¸Šæ˜¯å¯¹æ¯ä¸€ä¸ªé¡¶ç‚¹æŸ¥æ‰¾å…¶é‚»æ¥ç‚¹çš„è¿‡ç¨‹ï¼Œæ—¶é—´å¤æ‚åº¦å–å†³äºå›¾çš„å­˜å‚¨ç»“æ„ã€‚ é‚»æ¥çŸ©é˜µ æŸ¥æ‰¾æ¯ä¸ªé¡¶ç‚¹çš„é‚»æ¥ç‚¹çš„æ—¶é—´ä¸º $O(|V|)$ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ $O(|V^2|)$ é‚»æ¥è¡¨ æŸ¥æ‰¾æ‰€æœ‰é¡¶ç‚¹çš„é‚»æ¥ç‚¹çš„æ—¶é—´ä¸º $O(|E|)$ï¼Œï¼ˆå³æœ‰å¤šå°‘æ¡è¾¹ï¼ŒæŸ¥æ‰¾å¤šå°‘æ¬¡é‚»æ¥ç‚¹ï¼‰ï¼Œè®¿é—®é¡¶ç‚¹æ‰€éœ€æ—¶é—´ä¸º $O(|V|)$ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ $O(|V|+|E|)$ DFS ä¾‹é¢˜è¿·å®«é—®é¢˜æè¿°å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ N*M ï¼Œå¦‚ 5 Ã— 5 æ•°ç»„ä¸‹æ‰€ç¤ºï¼š maze[5][5] = \\begin{pmatrix} 0, 1, 0, 0, 0,\\\\ 0, 1, 1, 1, 0,\\\\ 0, 0, 0, 0, 0,\\\\ 0, 1, 1, 1, 0,\\\\ 0, 0, 0, 1, 0,\\\\ \\end{pmatrix}å®ƒè¡¨ç¤ºä¸€ä¸ªè¿·å®«ï¼Œå…¶ä¸­çš„$1$è¡¨ç¤ºå¢™å£ï¼Œ$0$è¡¨ç¤ºå¯ä»¥èµ°çš„è·¯ï¼Œåªèƒ½æ¨ªç€èµ°æˆ–ç«–ç€èµ°ï¼Œä¸èƒ½æ–œç€èµ°ï¼Œè¦æ±‚ç¼–ç¨‹åºæ‰¾å‡ºä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯çº¿ã€‚å…¥å£ç‚¹ä¸º$[0,0]$ï¼Œæ—¢ç¬¬ä¸€æ ¼æ˜¯å¯ä»¥èµ°çš„è·¯ã€‚ æ•°æ®èŒƒå›´ï¼š$2\\leq n,m \\leq 10$ï¼Œè¾“å…¥çš„å†…å®¹åªåŒ…å« $0ã€1$ è¾“å…¥æè¿°ï¼š è¾“å…¥ä¸¤ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºäºŒç»´æ•°ç»„çš„è¡Œæ•°ï¼Œåˆ—æ•°ã€‚å†è¾“å…¥ç›¸åº”çš„æ•°ç»„ï¼Œå…¶ä¸­çš„1è¡¨ç¤ºå¢™å£ï¼Œ0è¡¨ç¤ºå¯ä»¥èµ°çš„è·¯ã€‚æ•°æ®ä¿è¯æœ‰å”¯ä¸€è§£,ä¸è€ƒè™‘æœ‰å¤šè§£çš„æƒ…å†µï¼Œå³è¿·å®«åªæœ‰ä¸€æ¡é€šé“ã€‚ è¾“å‡ºæè¿°ï¼š å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„æœ€çŸ­è·¯å¾„ ç¤ºä¾‹ä¸€ è¾“å…¥ï¼š5 50 1 0 0 00 1 1 1 00 0 0 0 00 1 1 1 00 0 0 1 0è¾“å‡ºï¼š(0,0)(1,0)(2,0)(2,1)(2,2)(2,3)(2,4)(3,4)(4,4) åˆ†æä»è¿·å®«å·¦ä¸Šè§’çš„èµ·ç‚¹å¼€å§‹ï¼Œå¯¹è¿·å®«è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†ï¼ŒæŠŠ$1$å½“ä½œå·²è®¿é—®è¿‡çš„ç‚¹ï¼Œ$0$å½“ä½œæœªè®¿é—®è¿‡çš„ç‚¹ã€‚å…ˆå°½é‡â€œæ·±â€åœ°éå†æœªè®¿é—®çš„ç‚¹ï¼Œè‹¥å‘¨å›´çš„ç‚¹éƒ½è¢«è®¿é—®è¿‡ï¼Œåˆ™åˆ™è¯æ˜æ­¤è·¯ä¸é€šï¼Œå›æº¯åˆ°ä¸Šä¸€ä¸ªè¿˜æœ‰æœªè®¿é—®çš„é‚»æ¥ç‚¹çš„ç‚¹ï¼Œé‡æ–°å¼€å§‹æ·±åº¦ä¼˜å…ˆéå†ã€‚ å¯¹äºæ·±åº¦ä¼˜å…ˆéå†çš„å½“å‰ç‚¹ï¼Œ å¦‚æœè¯¥ç‚¹æœªè®¿é—®è¿‡ï¼Œï¼ˆå¦‚æœæ˜¯å›æº¯åˆ°è¯¥ç‚¹ï¼Œåˆ™å·²è®¿é—®è¿‡ï¼Œä¸éœ€è¦è¿›è¡Œè¿™ä¸¤æ­¥ï¼‰ å°†è¯¥ç‚¹åŠ å…¥ä¸´æ—¶è·¯å¾„ï¼Œè¯¥ç‚¹æ ‡è®°ä¸ºå·²è®¿é—® å¦‚æœè¯¥ç‚¹ä¸ºç»ˆç‚¹ï¼Œåˆ™å½“å‰è·¯å¾„ä¸ºæœ€ç»ˆè·¯å¾„ å¦‚æœå­˜åœ¨æœªè®¿é—®è¿‡çš„é‚»æ¥ç‚¹ï¼Œåˆ™æŒ‰ï¼ˆä¸‹ã€å³ã€ä¸Šã€å·¦ï¼‰çš„ä¼˜å…ˆé¡ºåºï¼Œè®¿é—®é‚»æ¥ç‚¹ï¼Œå³å¯¹è¯¥é‚»æ¥ç‚¹è¿›è¡Œé€’å½’çš„æ·±åº¦ä¼˜å…ˆéå† å¦‚æœé‚»æ¥ç‚¹éƒ½å·²è®¿é—®ï¼Œåˆ™è¿›è¡Œå›æº¯ é‡æ–°ä¿®æ”¹è¯¥ç‚¹ä¸ºæœªè®¿é—®ï¼Œå°†è¯¥ç‚¹å¼¹å‡ºä¸´æ—¶è·¯å¾„ ï¼ˆåˆ©ç”¨é€’å½’è‡ªåŠ¨å®ç°ï¼‰é€šè¿‡å‡½æ•°æ ˆå›åˆ°ä¸Šä¸€ä¸ªç‚¹çš„éå†è®¿é—®ï¼ŒæŸ¥çœ‹å‰©ä¸‹çš„ä¼˜å…ˆé¡ºåºçš„é‚»æ¥ç‚¹æ˜¯å¦æœªè®¿é—®ï¼Œå¦‚ä¸å­˜åœ¨æœªè®¿é—®çš„ï¼Œåˆ™ç»§ç»­å‘ä¸Šä¸€ä¸ªç‚¹å›æº¯ï¼Œç›´åˆ°å›æº¯åˆ°çš„ç‚¹è¿˜å‰©æœ‰æœªè®¿é—®çš„é‚»æ¥ç‚¹ï¼Œé‡æ–°å¼€å§‹æ·±åº¦éå† ä»£ç å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;vector&lt;pair&lt;int, int&gt;&gt; final_path; //æœ€ç»ˆè·¯å¾„//æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œmazeä¸ºè¿·å®«åœ°å›¾ï¼Œ(n, m)ä¸ºè¿·å®«çŸ©é˜µçš„è¡Œã€åˆ—æ•°ï¼Œ(i, j)ä¸ºå½“å‰è®¿é—®ç‚¹ï¼Œtmp_pathä¸ºå½“å‰è·¯å¾„void DFS (vector&lt;vector&lt;int&gt;&gt; &amp;maze, int n, int m, int i, int j, vector&lt;pair&lt;int, int&gt;&gt; &amp;tmp_path) &#123; tmp_path.push_back(&#123;i, j&#125;); //å°†è¯¥ç‚¹åŠ å…¥ä¸´æ—¶è·¯å¾„ maze[i][j] = 1; //å°†è¯¥ç‚¹æ ‡è®°ä¸ºå·²è®¿é—® if (i == n-1 &amp;&amp; j == m-1) &#123; //å¦‚æœè¯¥ç‚¹ä¸ºç»ˆç‚¹ final_path = tmp_path; //å½“å‰è·¯å¾„ä¸ºæœ€ç»ˆè·¯å¾„ return; &#125; if (i+1 &lt; n &amp;&amp; maze[i+1][j] == 0) &#123; //å¦‚æœ‰ä¸‹é‚»æ¥ç‚¹ä¸”æœªè®¿é—®è¿‡ DFS(maze, n, m, i+1, j, tmp_path); //æ·±åº¦ä¼˜å…ˆéå†ä¸‹é‚»æ¥ç‚¹ &#125; if (j+1 &lt; m &amp;&amp; maze[i][j+1] == 0) &#123; //å¦‚æœ‰å³é‚»æ¥ç‚¹ä¸”æœªè®¿é—®è¿‡ DFS(maze, n, m, i, j+1, tmp_path); //æ·±åº¦ä¼˜å…ˆéå†å³é‚»æ¥ç‚¹ &#125; if (i-1 &gt;= 0 &amp;&amp; maze[i-1][j] == 0) &#123; //å¦‚æœ‰ä¸Šé‚»æ¥ç‚¹ä¸”æœªè®¿é—®è¿‡ DFS(maze, n, m, i-1, j, tmp_path); //æ·±åº¦ä¼˜å…ˆéå†ä¸Šé‚»æ¥ç‚¹ &#125; if (j-1 &gt;= 0 &amp;&amp; maze[i][j-1] == 0) &#123; //å¦‚æœ‰å·¦é‚»æ¥ç‚¹ä¸”æœªè®¿é—®è¿‡ DFS(maze, n, m, i, j-1, tmp_path); //æ·±åº¦ä¼˜å…ˆéå†å·¦é‚»æ¥ç‚¹ &#125; //å¦‚æœé‚»æ¥ç‚¹éƒ½å·²è®¿é—®ï¼Œåˆ™è¿›è¡Œå›æº¯ maze[i][j] = 0; tmp_path.pop_back();&#125;int main () &#123; int n, m; //çŸ©é˜µé•¿å®½ while (cin &gt;&gt; n &gt;&gt; m) &#123; vector&lt;vector&lt;int&gt;&gt; maze(n, vector&lt;int&gt;(m, 0)); //è¿·å®«åœ°å›¾ for (int i = 0 ; i &lt; n; ++i) &#123; for (int j = 0; j &lt; m; ++j) &#123; cin &gt;&gt; maze[i][j]; &#125; &#125; vector&lt;pair&lt;int, int&gt;&gt; tmp_path; DFS(maze, n, m, 0, 0, tmp_path); //æ·±åº¦ä¼˜å…ˆæœç´¢å¾—è¿·å®«è§£ for (pair&lt;int, int&gt; point : final_path) &#123; cout &lt;&lt; \"(\" &lt;&lt; point.first &lt;&lt; \",\" &lt;&lt; point.second &lt;&lt; \")\" &lt;&lt; endl; &#125; &#125; return 0;&#125; æ•°ç‹¬æ¸¸æˆæè¿°ç©å®¶éœ€è¦æ ¹æ®9X9ç›˜é¢ä¸Šçš„å·²çŸ¥æ•°å­—ï¼Œæ¨ç®—å‡ºæ‰€æœ‰å‰©ä½™ç©ºæ ¼çš„æ•°å­—ï¼Œå¹¶ä¸”æ»¡è¶³æ¯ä¸€è¡Œã€æ¯ä¸€åˆ—ã€æ¯ä¸€ä¸ª3X3ç²—çº¿å®«å†…çš„æ•°å­—å‡å«1-9ï¼Œå¹¶ä¸”ä¸é‡å¤ã€‚ ä¾‹å¦‚ï¼š(0ä»£è¡¨ç©ºç¼ºä½) æ•°æ®èŒƒå›´ï¼šè¾“å…¥ä¸€ä¸ª 9*9 çš„çŸ©é˜µ è¾“å…¥æè¿°ï¼š åŒ…å«å·²çŸ¥æ•°å­—çš„9X9ç›˜é¢æ•°ç»„ï¼ˆç©ºç¼ºä½ä»¥æ•°å­—0è¡¨ç¤ºï¼‰ è¾“å‡ºæè¿°ï¼š å®Œæ•´çš„9X9ç›˜é¢æ•°ç»„ ç¤ºä¾‹ä¸€ è¾“å…¥ï¼š0 9 2 4 8 1 7 6 34 1 3 7 6 2 9 8 58 6 7 3 5 9 4 1 26 2 4 1 9 5 3 7 87 5 9 8 4 3 1 2 61 3 8 6 2 7 5 9 42 7 1 5 3 8 6 4 93 8 6 9 1 4 2 5 70 4 5 2 7 6 8 3 1è¾“å‡ºï¼š5 9 2 4 8 1 7 6 34 1 3 7 6 2 9 8 58 6 7 3 5 9 4 1 26 2 4 1 9 5 3 7 87 5 9 8 4 3 1 2 61 3 8 6 2 7 5 9 42 7 1 5 3 8 6 4 93 8 6 9 1 4 2 5 79 4 5 2 7 6 8 3 1 ç¤ºä¾‹äºŒ è¾“å…¥ï¼š0 0 8 7 1 9 2 4 59 0 5 2 3 4 0 8 60 7 4 8 0 6 1 0 37 0 3 0 9 2 0 0 05 0 0 0 0 0 0 0 08 6 1 4 0 3 5 2 94 0 0 0 2 0 0 0 80 0 0 0 0 0 0 7 01 0 7 0 6 8 0 5 0è¾“å‡ºï¼š6 3 8 7 1 9 2 4 59 1 5 2 3 4 7 8 62 7 4 8 5 6 1 9 37 4 3 5 9 2 8 6 15 9 2 6 8 1 4 3 78 6 1 4 7 3 5 2 94 5 6 3 2 7 9 1 83 8 9 1 4 5 6 7 21 2 7 9 6 8 3 5 4 åˆ†ææ·±åº¦ä¼˜å…ˆéå†æ‰€æœ‰çš„ç©ºç¼ºä½ï¼Œå¯¹äºæ¯ä¸ªç©ºç¼ºä½ï¼Œ æ‰¾å‡ºç›®å‰è¯¥ç©ºç¼ºä½æ‰€æœ‰å¯èƒ½çš„å–å€¼ å¦‚æœå­˜åœ¨å¯èƒ½çš„å–å€¼ å°†å¯èƒ½çš„å–å€¼ä¹‹ä¸€å¡«å…¥ å¦‚æœå½“å‰ä¸ºæœ€åä¸€ä¸ªç©ºç¼ºç‚¹ï¼Œä¸”æœ‰å¯èƒ½çš„å–å€¼ï¼Œåˆ™æ±‚å¾—æœ€ç»ˆç»“æœ æ·±åº¦ä¼˜å…ˆæœç´¢ä¸‹ä¸€ä¸ªç©ºç¼ºä½ å¦‚æœä¸å­˜åœ¨å¯èƒ½çš„å–å€¼ è¯¥ä½æ¢å¤æˆç©ºç¼ºä½ å›æº¯å›ä¸Šä¸€ä¸ªç©ºç¼ºä½ï¼Œæ¢ä¸€ä¸ªå¯èƒ½çš„å–å€¼ ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;vector&lt;pair&lt;int, int&gt;&gt; blank; //ç©ºç¼ºä½int final_mp[9][9]; //æœ€ç»ˆçŸ©é˜µbool final_flag = false; //å·²æ±‚å¾—æœ€ç»ˆçŸ©é˜µæ ‡å¿—//æ‰¾åˆ°è¯¥ç‚¹å¯èƒ½çš„å–å€¼vector&lt;int&gt; find_possible_num (int mp[][9], pair&lt;int, int&gt; p) &#123; bool flag[9] = &#123;false&#125;; //ç›¸åº”è¡Œã€åˆ—ã€3X3ç²—çº¿å®«å†…å‡ºç°è¿‡çš„æ•°å­—ä¸ºtrue int row = p.first, col = p.second; //pæ‰€åœ¨è¡Œã€åˆ— //æ£€éªŒæ‰€åœ¨è¡Œ for (int j = 0; j &lt; 9; ++j) &#123; //å¦‚æœä¸æ˜¯ç©ºç¼ºä½ï¼Œä¸”è¯¥æ•°å­—æ²¡æœ‰å‡ºç°è¿‡ if (j != col &amp;&amp; mp[row][j] != 0 &amp;&amp; !flag[mp[row][j] - 1]) &#123; flag[mp[row][j] - 1] = true; &#125; &#125; //æ£€éªŒæ‰€åœ¨åˆ— for (int i = 0; i &lt; 9; ++i) &#123; //å¦‚æœä¸æ˜¯ç©ºç¼ºä½ï¼Œä¸”è¯¥æ•°å­—æ²¡æœ‰å‡ºç°è¿‡ if (i != row &amp;&amp; mp[i][col] != 0 &amp;&amp; !flag[mp[i][col] - 1]) &#123; flag[mp[i][col] - 1] = true; &#125; &#125; //æ£€éªŒæ‰€åœ¨3X3ç²—çº¿å®« for (int i = (row/3)*3; i &lt; (row/3)*3 + 3; ++i) &#123; for (int j = (col/3)*3; j &lt; (col/3)*3 + 3; ++j) &#123; //å¦‚æœä¸æ˜¯ç©ºç¼ºä½ï¼Œä¸”è¯¥æ•°å­—æ²¡æœ‰å‡ºç°è¿‡ if (!(i == row &amp;&amp; j == col) &amp;&amp; mp[i][j] != 0 &amp;&amp; !flag[mp[i][j] - 1]) &#123; flag[mp[i][j] - 1] = true; &#125; &#125; &#125; vector&lt;int&gt; possible_num; for (int i = 0; i &lt; 9; ++i) &#123; if (!flag[i]) &#123; possible_num.push_back(i+1); &#125; &#125; return possible_num;&#125;//æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œmpä¸ºç›®å‰æ•°ç‹¬è¡¨ï¼Œn_blankä¸ºå½“å‰æ±‚çš„ç©ºç¼ºä½åºå·void DFS (int mp[][9], int &amp;n_blank) &#123; vector&lt;int&gt; possible_num = find_possible_num(mp, blank[n_blank]); int row = blank[n_blank].first, col = blank[n_blank].second; //ç©ºç¼ºä½æ‰€åœ¨è¡Œã€åˆ— bool f = false; if (row &gt;= 7 &amp;&amp; !f) &#123; f = true; &#125; //ä¾æ¬¡é€’å½’å¡«å…¥å¯èƒ½çš„å€¼ for (int num : possible_num) &#123; mp[row][col] = num; //å°†å¯èƒ½çš„å€¼å¡«å…¥è¯¥ç©ºç¼ºä½ //å¦‚æœæ˜¯æœ€åä¸€ä¸ªç©ºç¼ºä½ï¼Œç»“æŸé€’å½’éå† if (n_blank == blank.size()-1) &#123; //å°†å½“å‰çŸ©é˜µå¤åˆ¶åˆ°æœ€ç»ˆçŸ©é˜µä¸Š for (int i = 0; i &lt; 9; ++i) &#123; for (int j = 0; j &lt; 9; ++j) &#123; final_mp[i][j] = mp[i][j]; &#125; &#125; final_flag = true; return; &#125; DFS(mp, ++n_blank); //å‘ä¸‹ä¸€ä¸ªç©ºç¼ºä½æ·±åº¦ä¼˜å…ˆæœç´¢ if (final_flag) &#123; //å¦‚å·²æ±‚å¾—æœ€ç»ˆçŸ©é˜µï¼Œåˆ™è·³å‡ºå¾ªç¯ break; &#125; &#125; //å¦‚æœå¯èƒ½çš„å€¼éƒ½ä¸æˆç«‹ï¼Œåˆ™è¿›è¡Œå›æº¯ mp[row][col] = 0; //æ¢å¤ç©ºç¼ºä½ n_blank--; //å›åˆ°ä¸Šä¸€ä¸ªç©ºç¼ºä½&#125;int main () &#123; int mp[9][9]; for (int i = 0; i &lt; 9; ++i) &#123; for (int j = 0; j &lt; 9; ++j) &#123; cin &gt;&gt; mp[i][j]; if (mp[i][j] == 0) &#123; //0è¡¨ç¤ºç©ºç¼ºä½ blank.push_back(&#123;i, j&#125;); //å°†ç©ºç¼ºä½å‹å…¥blankä¸­ &#125; &#125; &#125; int n_blank = 0; //ä»0å·ç©ºç¼ºä½å¼€å§‹æ·±åº¦ä¼˜å…ˆéå† DFS(mp, n_blank); for (int i = 0; i &lt; 9; ++i) &#123; for (int j = 0; j &lt; 9; ++j) &#123; cout &lt;&lt; final_mp[i][j] &lt;&lt; \" \"; &#125; cout &lt;&lt; endl; &#125; return 0;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰","slug":"æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰","permalink":"https://gy23333.github.io/tags/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%EF%BC%88DFS%EF%BC%89/"},{"name":"å›¾","slug":"å›¾","permalink":"https://gy23333.github.io/tags/%E5%9B%BE/"}]},{"title":"åŠ¨æ€è§„åˆ’","slug":"åŠ¨æ€è§„åˆ’","date":"2023-01-08T10:16:25.000Z","updated":"2024-11-11T03:57:58.109Z","comments":true,"path":"2023/01/08/åŠ¨æ€è§„åˆ’/","link":"","permalink":"https://gy23333.github.io/2023/01/08/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/","excerpt":"åŠ¨æ€è§„åˆ’ï¼ˆdynamic programmingï¼‰ç®—æ³•æ˜¯è§£å†³å¤šé˜¶æ®µå†³ç­–è¿‡ç¨‹æœ€ä¼˜åŒ–é—®é¢˜çš„ä¸€ç§å¸¸ç”¨æ–¹æ³•ï¼Œåˆ©ç”¨åŠ¨æ€è§„åˆ’ï¼Œå¯ä»¥è§£å†³å¾ˆå¤šè´ªå©ªç®—æ³•æˆ–åˆ†æ²»ç®—æ´»ä¸èƒ½è§£å†³çš„ã€‚ æœ€æ ¸å¿ƒçš„æ€æƒ³ï¼Œå°±åœ¨äºæ‹†åˆ†å­é—®é¢˜ï¼Œè®°ä½è¿‡å¾€ï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚","text":"åŠ¨æ€è§„åˆ’ï¼ˆdynamic programmingï¼‰ç®—æ³•æ˜¯è§£å†³å¤šé˜¶æ®µå†³ç­–è¿‡ç¨‹æœ€ä¼˜åŒ–é—®é¢˜çš„ä¸€ç§å¸¸ç”¨æ–¹æ³•ï¼Œåˆ©ç”¨åŠ¨æ€è§„åˆ’ï¼Œå¯ä»¥è§£å†³å¾ˆå¤šè´ªå©ªç®—æ³•æˆ–åˆ†æ²»ç®—æ´»ä¸èƒ½è§£å†³çš„ã€‚ æœ€æ ¸å¿ƒçš„æ€æƒ³ï¼Œå°±åœ¨äºæ‹†åˆ†å­é—®é¢˜ï¼Œè®°ä½è¿‡å¾€ï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚ å¼•å…¥ä¸€ä¸ªå…¸å‹çš„åŠ¨æ€è§„åˆ’é—®é¢˜ï¼š æ±‚åºåˆ— nums = [1,5,2,4,3]çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ã€‚ ç›´è§‚å¯ä»¥çœ‹å‡ºæœ€é•¿é€’å¢å­åºåˆ—æœ‰[1,2,4]æˆ–[1,2,3]ï¼Œé•¿åº¦ä¸º3ã€‚ æš´åŠ›æšä¸¾/æš´åŠ›æœç´¢é¦–å…ˆå®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯æš´åŠ›æšä¸¾/æš´åŠ›æœç´¢æ–¹æ³•ã€‚ å…ˆåˆ©ç”¨é€’å½’åˆ†åˆ«è®¡ç®—ä»æ¯ä¸ªä½ç½®å‡ºå‘çš„å­åºåˆ—ï¼Œç„¶åå–å…¶ä¸­é•¿åº¦çš„æœ€å¤§å€¼ã€‚ åºåˆ—nums = [1,5,2,4,3]ï¼Œå¦‚æœä»1å‡ºå‘ï¼Œåˆ°5ã€2ã€4ã€3éƒ½æ˜¯é€’å¢çš„ï¼Œåˆ™å¯å¾—ä¸‹å¼ï¼ˆè®¾f(x)ä¸ºä»xå‡ºå‘çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ï¼‰ f(1) = max\\{f(5),f(2),f(4),f(3)\\}+1ç”±æ­¤å¯é€’å½’æ±‚å¾—ï¼Œä»1å‡ºå‘æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ã€‚ graph TD A((1)) B((5)) C((2)) D((4)) E((3)) F((4)) G((3)) A-->B; A-->C; A-->D; A-->E; C-->F; C-->G; 123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;//è®¡ç®—ä»åºå·iå¼€å§‹çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦int L (vector&lt;int&gt; nums, int i) &#123; if (i == nums.size() - 1) &#123; return 1; &#125; int max_len = 1; for (int j = i+1; j &lt; nums.size(); ++j) &#123; if (nums[j] &gt; nums[i]) &#123; max_len = max(max_len, L(nums, j) + 1); &#125; &#125; return max_len;&#125;//è®¡ç®—åºåˆ—çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦int length_of_LIS (vector&lt;int&gt; nums) &#123; int max_len = 1; for (int i = 0; i &lt; nums.size(); ++i) &#123; max_len = max(max_len, L(nums, i)); &#125; return max_len;&#125;int main () &#123; vector&lt;int&gt; nums = &#123;1,5,2,4,3&#125;; cout &lt;&lt; length_of_LIS(nums);&#125; æ—¶é—´å¤æ‚åº¦ï¼š æ¯ä¸ªå­åºåˆ—éƒ½éœ€è¦éå†ä¸€æ¬¡ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯é€’å¢åºåˆ—ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(2^n)$ï¼Œæ¯ä¸ªå­åºåˆ—è‡³å¤šéå†næ¬¡ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º$O(n*2^n)$ã€‚ æ—¶é—´å¤æ‚åº¦ä¸ºæŒ‡æ•°çº§åˆ«çš„ç®—æ³•ï¼Œä»¥ä¸‹é’ˆå¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œä¼˜åŒ–ã€‚ è®°å¿†åŒ–æœç´¢/å‰ªææš´åŠ›æšä¸¾ä¸­å­˜åœ¨å¤§é‡é‡å¤è®¡ç®—é—®é¢˜ï¼Œå¦‚ä¸‹å›¾ä¸­åœ¨2çš„å­æ ‘ä¸­éå†äº†4ï¼Œåé¢åˆéå†äº†ä¸€æ¬¡4ï¼Œé‡å¤è®¡ç®—äº†ä¸¤æ¬¡ã€‚ æ‰€ä»¥å¯ä»¥ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨è®°å½•å·²è®¡ç®—çš„â€œä»iå¼€å§‹çš„æœ€é•¿å­åºåˆ—é•¿åº¦â€ï¼Œç”¨ç©ºé—´æ¢å–æ—¶é—´ä¸Šçš„ç¼©çŸ­ã€‚ graph TD A((1)) B((5)) C((2)) D((4)) E((3)) F((4)) G((3)) A-->B; A-->C; A-->D; A-->E; C-->F; C-->G; 1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;map&gt;using namespace std;//ç”¨mapè®°å½•å·²è®¡ç®—è¿‡çš„ L(i)map&lt;int, int&gt; memo;//è®¡ç®—ä»åºå·iå¼€å§‹çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦int L (vector&lt;int&gt; nums, int i) &#123; //å¦‚æœmemoä¸­å­˜åœ¨ L(i)ï¼Œåˆ™ç›´æ¥è¿”å›è®°å½•å€¼ if (memo.count(i)) &#123; return memo[i]; &#125; if (i == nums.size() - 1) &#123; return 1; &#125; int max_len = 1; for (int j = i+1; j &lt; nums.size(); ++j) &#123; if (nums[j] &gt; nums[i]) &#123; max_len = max(max_len, L(nums, j) + 1); &#125; &#125; memo[i] = max_len; //æ·»åŠ æ–°è®°å½• return max_len;&#125;//è®¡ç®—åºåˆ—çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦int length_of_LIS (vector&lt;int&gt; nums) &#123; int max_len = 1; for (int i = 0; i &lt; nums.size(); ++i) &#123; max_len = max(max_len, L(nums, i)); &#125; return max_len;&#125;int main () &#123; vector&lt;int&gt; nums = &#123;1,5,2,4,3&#125;; cout &lt;&lt; length_of_LIS(nums);&#125; è¿­ä»£/éé€’å½’çš„å®ç°å°†ä¸Šé¢çš„æ–¹æ³•å½’çº³æˆéé€’å½’çš„å½¢å¼ã€‚ åºåˆ— nums = [1,5,2,4,3] \\begin{aligned} L(0) &= max\\{L(1),L(2),L(3),L(4)\\}+1 \\\\ L(1) &= max\\{\\cancel{L(2)},\\cancel{L(3)},\\cancel{L(4)}\\}+1\\\\ L(2) &= max\\{L(3),L(4)\\}+1\\\\ L(3) &= max\\{\\cancel{L(4)}\\}+1\\\\ L(4) &= 1 \\end{aligned}å¯ä»¥çœ‹å‡ºï¼Œåªè¦ä»åå¾€å‰ä¾æ¬¡è®¡ç®—ï¼Œå°±å¯ä»¥é€šè¿‡è¿­ä»£æ–¹æ³•è®¡ç®—å‡ºæ‰€æœ‰çš„$L(i)$ 12345678910111213141516171819202122232425262728293031#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;//è®¡ç®—åºåˆ—çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦int length_of_LIS (vector&lt;int&gt; nums) &#123; vector&lt;int&gt; L(nums.size(), 1); //ä»å€’æ•°ç¬¬äºŒä¸ªå¼€å§‹ï¼Œä»åå¾€å‰è®¡ç®—L(i) for (int i = L.size() - 2; i &gt;= 0; --i) &#123; for (int j = i+1; j &lt; L.size(); ++j) &#123; if (nums[j] &gt; nums[i]) &#123; L[i] = max(L[i], L[j]+1); &#125; &#125; &#125; //è¿”å›L(i)ä¸­çš„æœ€å¤§å€¼ int max_length = 1; for (int l : L) &#123; if (l &gt; max_length) &#123; max_length = l; &#125; &#125; return max_length;&#125;int main () &#123; vector&lt;int&gt; nums = &#123;1,5,2,4,3&#125;; cout &lt;&lt; length_of_LIS(nums);&#125; æ—¶é—´å¤æ‚åº¦ä¸º$O(n^2)$ï¼Œç›¸æ¯”æš´åŠ›æœç´¢çš„$O(n*2^n)$ï¼Œæ—¶é—´å¤§å¤§é™ä½ã€‚ åŠ¨æ€è§„åˆ’çš„åŸºæœ¬æ€æƒ³å’ŒåŸºæœ¬æ¦‚å¿µåŸºæœ¬æ€æƒ³ å°†å¾…æ±‚è§£çš„é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªå­é—®é¢˜ï¼Œå±‚å±‚åˆ†è§£ï¼Œç›´åˆ°é—®é¢˜å¯ä»¥ç›´æ¥è§£å†³ å¯¹äºé‡å¤å‡ºç°çš„å­é—®é¢˜ï¼Œåªåœ¨ç¬¬ä¸€æ¬¡é‡åˆ°çš„æ—¶å€™è¿›è¡Œæ±‚è§£ï¼Œå¹¶å°†ç»“æœä¿å­˜èµ·æ¥ï¼Œä¸‹æ¬¡é‡åˆ°æ—¶ç›´æ¥å¼•ç”¨ç­”æ¡ˆ åŸºæœ¬æ¦‚å¿µ é˜¶æ®µï¼šæŠŠé—®é¢˜åˆ†ä¸ºå…·æœ‰ä¸€å®šæ¬¡åºçš„è‹¥å¹²é˜¶æ®µï¼Œå³ç¬¬nä¸ªå­é—®é¢˜å°±æ˜¯ç¬¬nä¸ªé˜¶æ®µã€‚ çŠ¶æ€ï¼šæ¯ä¸ªé˜¶æ®µå¼€å§‹æ—¶æ‰€å¤„çš„çŠ¶æ€ï¼Œå³åœ¨æ±‚ç¬¬nä¸ªé˜¶æ®µçš„è§£æ—¶ï¼Œå·²æ±‚å¾—çš„ç¬¬n-1ä¸ªé˜¶æ®µçš„è§£ï¼Œå°±æ˜¯å½“å‰çš„çŠ¶æ€ã€‚ å†³ç­–ï¼šç›®å‰å·²çŸ¥ç¬¬n-1ä¸ªé˜¶æ®µçš„çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡å†³ç­–ï¼Œç¡®å®šä¸‹ä¸€ä¸ªé˜¶æ®µçš„çŠ¶æ€ çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šä»ç¬¬n-1ä¸ªé˜¶æ®µçš„çŠ¶æ€åˆ°ç¬¬nä¸ªé˜¶æ®µçš„çŠ¶æ€çš„æ–¹ç¨‹ åŠ¨æ€è§„åˆ’ä¾‹é¢˜æœ€é•¿å›æ–‡å­ä¸²æ±‚å­—ç¬¦ä¸²ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ï¼Œå›æ–‡å­ä¸²å³å·¦å³å¯¹ç§°çš„ä¸²ï¼Œå¦‚ABBAã€ABCBAã€‚ åˆ†ææ­¥éª¤ åˆ†è§£é—®é¢˜ åˆ¤æ–­æŸå­—ç¬¦ä¸²æ˜¯å¦ä¸ºå›æ–‡ä¸²ï¼Œå¯ä»¥åˆ†è§£ä¸ºä¸¤ä¸ªå­é—®é¢˜ï¼š å»æ‰å¤´å°¾ä¸¤ä¸ªå­—ç¬¦åï¼Œå‰©ä¸‹çš„å­—ç¬¦ä¸²ä¸ºå›æ–‡ä¸² å¤´å°¾ä¸¤ä¸ªå­—ç¬¦ç›¸åŒ å¦‚æœæ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²ä¸ºå›æ–‡ä¸²ã€‚ åˆå§‹åŒ– æ‹†è§£åˆ°æœ€åï¼Œå¦‚æœåªå‰©ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ™ä¸€å®šæ˜¯å›æ–‡ä¸²ï¼›å¦‚æœå‰©ä¸¤ä¸ªå­—ç¬¦ï¼Œä¸¤å­—ç¬¦ç›¸åŒæ˜¯å›æ–‡ä¸²ã€‚ çŠ¶æ€è½¬ç§»æ–¹ç¨‹ è®¾ $dp[i][j]$ è¡¨ç¤ºä»$i$åˆ°$j$çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡ä¸²ã€‚ dp[i][j] =\\left\\{ \\begin{array}{ll} 1 & i=j \\\\ s[i]==s[j]?1:0 & j-i=1 \\\\ s[i]==s[j] \\&\\& dp[i+1][j-1] & j-i>1 \\end{array}\\right. ä»£ç å®ç°é‡‡ç”¨è¿­ä»£çš„å½¢å¼ï¼Œåœ¨è®¡ç®—é•¿ä¸²çš„ $dp[i][j]$ å‰ï¼Œå¿…é¡»è¦å·²çŸ¥ $dp[i+1][j-1]$ ï¼Œå³è¦ä¿è¯å·¦ä¸‹è§’çš„çŠ¶æ€å·²æ±‚ï¼Œæ‰€ä»¥éå†é¡ºåºå¦‚ä¸‹ï¼Œéå†åˆ—ä¼˜å…ˆçš„ä¸Šä¸‰è§’ã€‚ \\begin{pmatrix} 1 & 2 & 4 &7\\\\ * & 3 & 5 &8\\\\ * & * & 6 &9\\\\ * & * & * &10\\\\ \\end{pmatrix}12345678910111213141516171819202122232425262728293031#include &lt;iostream&gt;#include &lt;vector&gt;using namespace std;int length_of_LPS (string str) &#123; vector&lt;vector&lt;bool&gt;&gt; dp(str.length(), vector&lt;bool&gt;(str.length(), false)); int max_length = 0; for (int j = 0; j &lt; dp[0].size(); ++j) &#123; for (int i = 0; i &lt;= j; ++i) &#123; if (i == j) &#123; dp[i][j] = true; &#125; else if (j - i == 1) &#123; dp[i][j] = str[i] == str[j]; &#125; else &#123; dp[i][j] = (str[i] == str[j]) &amp;&amp; dp[i+1][j-1]; &#125; if (dp[i][j] &amp;&amp; j - i + 1 &gt; max_length) &#123; max_length = j - i + 1; &#125; &#125; &#125; return max_length;&#125;int main () &#123; string str; cin &gt;&gt; str; cout &lt;&lt; length_of_LPS(str) &lt;&lt; endl;&#125; æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦è§„å¾‹ pï¼Œå®ç°ä¸€ä¸ªæ”¯æŒ â€˜.â€™ å’Œ â€˜*â€™ çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚ . åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ * åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´  æ‰€è°“åŒ¹é…ï¼Œæ˜¯è¦æ¶µç›–æ•´ä¸ªå­—ç¬¦ä¸² s çš„ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚ ç¤ºä¾‹ä¸€ è¾“å…¥ï¼šs = â€œaaâ€p = â€œa*â€è¾“å‡ºï¼štrue è§£é‡Šï¼šå› ä¸º * ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ â€˜aâ€™ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² â€œaaâ€ å¯è¢«è§†ä¸º â€˜aâ€™ é‡å¤äº†ä¸€æ¬¡ã€‚ ç¤ºä¾‹äºŒ è¾“å…¥ï¼šs = â€œabâ€p = â€œ.*â€è¾“å‡ºï¼štrue è§£é‡Šï¼š.* è¡¨ç¤ºå¯åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªï¼ˆ*ï¼‰ä»»æ„å­—ç¬¦ï¼ˆ.ï¼‰ã€‚ æç¤ºï¼š 1 &lt;= s.length &lt;= 20 1 &lt;= p.length &lt;= 30 s åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ã€‚ p åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ï¼Œä»¥åŠå­—ç¬¦ . å’Œ *ã€‚ ä¿è¯æ¯æ¬¡å‡ºç°å­—ç¬¦ * æ—¶ï¼Œå‰é¢éƒ½åŒ¹é…åˆ°æœ‰æ•ˆçš„å­—ç¬¦ é—®é¢˜åˆ†æå…³é”®åœ¨äºå¤„ç†&#39;*&#39;é—®é¢˜ï¼Œ&#39;*&#39;éœ€è¦æ­é…å‰é¢çš„ä¸€ä¸ªå­—ç¬¦ä½¿ç”¨ã€‚å¦‚ï¼Œ &#39;a*&#39;å¯ä»¥è¡¨ç¤º0ï½Nä¸ª&#39;a&#39;ï¼Œå³&quot;&quot;ã€&quot;a&quot;ã€&quot;aa&quot;ã€&quot;aaa&quot;ç­‰ &#39;.*&#39;å¯ä»¥è¡¨ç¤º0ï½Nä¸ª&#39;.&#39;ï¼Œå³å¯ä»¥è¡¨ç¤ºä»»æ„å­—ç¬¦ä¸² çŠ¶æ€å®šä¹‰å®šä¹‰ $dp[i][j]$ è¡¨ç¤ºsçš„å‰iä¸ªå­—ç¬¦å’Œpçš„å‰jä¸ªå­—ç¬¦æ˜¯å¦åŒ¹é…ã€‚ çŠ¶æ€è½¬ç§» å¦‚ $p[j]$ ä¸ºå°å†™å­—æ¯ $s[0,i]$ å’Œ $p[0,j]$ çš„åŒ¹é…é—®é¢˜ï¼Œå¯ä»¥åˆ†è§£ä¸ºä¸¤ä¸ªå­é—®é¢˜ï¼Œå³ $s[0,i-1]$ å’Œ $p[0,j-1]$ åŒ¹é…ï¼Œä¸” $s[i]$ å’Œ $p[j]$ ç›¸åŒ dp[i][j] = dp[i-1][j-1] \\& s[i]=p[j] å¦‚ $p[j]$ ä¸º&#39;.&#39; åªè¦$s[0,i-1]$ å’Œ $p[0,j-1]$ åŒ¹é…ï¼Œåˆ™$s[0,i]$ å’Œ $p[0,j]$ ä¹Ÿä¸€å®šåŒ¹é… dp[i][j] = dp[i-1][j-1] å¦‚ $p[j]$ ä¸º&#39;*&#39; éœ€è¦ä¸å‰ä¸€ä¸ªå­—ç¬¦ $p[j-1]$ ä¸€èµ·è®¡ç®—ï¼Œå¯å¯¹ $p[j-1]$ åŒ¹é… $k$ æ¬¡ï¼Œå¦‚&quot;a*&quot;ï¼Œ åŒ¹é… $0$ æ¬¡ s = &quot;bc&quot; p = &quot;bca*&quot; &quot;a*&quot;åŒ¹é… $0$ æ¬¡ï¼Œå³&quot;a*&quot;ç›¸å½“äº&quot;&quot;ï¼Œp = &quot;bca*&quot; åŒ–ä¸º &quot;bc&quot; dp[i][j] = dp[i][j-2] åŒ¹é… $1$ æ¬¡ s = &quot;bca&quot; p = &quot;bca*&quot; &quot;a*&quot;åŒ¹é… $1$ æ¬¡ï¼Œå³&quot;a*&quot;ç›¸å½“äº&quot;a&quot; å¦‚åŒ¹é…ï¼Œåˆ™$s[0,i]$ä¸€ä¸ªå­—ç¬¦ä¸ºaï¼Œä¸”$s[0,i]$å»é™¤æ‰ $1$ ä¸ªaåã€$p[0,j]$å»é™¤æ‰ &quot;a*&quot;åï¼ŒæŸ¥çœ‹æ˜¯å¦åŒ¹é… dp[i][j] = dp[i-1][j-2] \\& s[i] = p[j-1] åŒ¹é… $k$ æ¬¡ $s[0,i]$ å’Œ $p[0,j]$ çš„åŒ¹é…é—®é¢˜ï¼Œå¯ä»¥åˆ†è§£ä¸º $s[0,i]$çš„å $k$ ä¸ªæ˜¯å¦éƒ½ä¸ºa $s[0,i]$å»é™¤æ‰ $k$ ä¸ªaåã€$p[0,j]$å»é™¤æ‰ &quot;a*&quot;åï¼ŒæŸ¥çœ‹æ˜¯å¦åŒ¹é… \\begin{aligned} &dp[i][j] = dp[i-k][j-2] \\\\ \\& \\\\ &s[i-k+1] = s[i-k+2] = ... = s[i] = p[j-1] \\end{aligned} å³ $p[j]$ ä¸º&#39;*&#39;æ—¶ï¼Œè½¬ç§»çŸ©é˜µåªè¦åŒ¹é… $0ã€1â€¦k$ æ¬¡æœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™$s[0,i]$ å’Œ $p[0,j]$ åŒ¹é… \\begin{aligned} dp[i][j] = & dp[i][j-2] ï¼ˆåŒ¹é…0æ¬¡ï¼‰ \\\\ or\\ & dp[i-1][j-2] \\& s[i] = p[j-1] ï¼ˆåŒ¹é…1æ¬¡ï¼‰\\\\ ... \\\\ or\\ & dp[i-k][j-2] \\& s[i-k+1,..., i] = p[j-1] ï¼ˆåŒ¹é…kæ¬¡ï¼‰ \\end{aligned} åŒ¹é… $0$ æ¬¡ï¼Œå³ s = &quot;bc&quot; p = &quot;bca*&quot; dp[i][j] = dp[i][j-2] åŒ¹é… $k$ æ¬¡ éœ€è¦æœ‰ä¸€ä¸ªå‰æï¼Œå³ $s[i]$ ç­‰äº $p[j-1]$ s = &quot;bcaa&quot; p = &quot;bca*&quot;ï¼Œå¦‚æœ $s$ å»æ‰ä¸€ä¸ªaä¹ŸåŒ¹é…ï¼Œå³&quot;bca&quot; &quot;bca*&quot;åŒ¹é…ï¼Œåˆ™$s[0,i]$ å’Œ $p[0,j]$ åŒ¹é…ï¼ˆå¦‚ $p[j-1]=â€™.â€™$ ï¼Œä¹Ÿç›¸å½“äº $s[i]=p[j-1]$ æˆç«‹ï¼‰ dp[i][j] = dp[i-1][j] \\& s[i]=p[j-1] æ€»çŠ¶æ€è½¬ç§»çŸ©é˜µ dp[i][j] =\\left\\{ \\begin{array}{ll} dp[i-1][j-1]\\ \\&\\ s[i]=p[j] &p[j]\\in[a,z]\\\\ dp[i-1][j-1] & p[j] = \\ .\\\\ dp[i][j-2]\\ or\\ \\{dp[i-1][j]\\ \\&\\ (s[i]=p[j-1] \\ ||\\ p[j-1]='.' \\}& p[j] = \\ * \\end{array}\\right.åˆå§‹åŒ–$s$ çš„é•¿åº¦ä¸º mï¼Œ$p$ çš„é•¿åº¦ä¸º nï¼Œéœ€è¦è€ƒè™‘ç©ºä¸²çš„åŒ¹é…é—®é¢˜ï¼Œæ‰€ä»¥çŠ¶æ€å¤§å°è®¾ç½®ä¸º$dp[m+1][n+1]$ è¦æ±‚ $dp[i][j]$ éœ€å…ˆæœ‰å·¦ä¸Šè§’çš„ $dp[i-1][j-1]$ ã€$dp[i][j-2]$ ã€$dp[i-1][j]$ ï¼Œæ‰€ä»¥åˆå§‹åŒ–åº”å…ˆæ±‚å‡ºå·¦è¾¹å’Œä¸Šè¾¹ï¼Œå³$dp[â€¦][0]$ ã€$dp[0][â€¦]$ ä¸¤ä¸ªç©ºä¸²å¿…ç„¶åŒ¹é…ï¼Œæ‰€ä»¥ $dp[0][0] = true$ ç©ºä¸²p = &quot;&quot;å’Œä»»æ„éç©ºsä¸åŒ¹é…ï¼Œå³ $dp[1â€¦n][0] = false$ ç©ºä¸²s = &quot;&quot;å’Œå¥‡æ•°é•¿åº¦çš„pä¸å¯èƒ½åŒ¹é…ï¼Œå’Œå¶æ•°é•¿åº¦çš„på¯èƒ½åŒ¹é…ï¼Œå¦‚p = &quot;a*b*c*&quot;ï¼Œæ‰€ä»¥å½“ $p[j] = â€˜*â€™$ æ—¶ï¼Œ$dp[0][j] = dp[0][j-2]$ ä»£ç å®ç°123456789101112131415161718192021222324252627class Solution &#123;public: static bool isMatch(string s, string p) &#123; int n = s.size(), m = p.size(); vector&lt;vector&lt;int&gt;&gt; dp(n+1, vector&lt;int&gt;(m+1, false)); //åˆå§‹åŒ– dp[0][0] = true; //é»˜è®¤å®ç°äº†dp[1...n][0]çš„åˆå§‹åŒ– //dp[0][1...m]çš„åˆå§‹åŒ– for (int j = 2; j &lt;= m &amp;&amp; p[j-1] == '*'; j += 2) &#123; dp[0][j] = true; &#125; for (int i = 1; i &lt;= n; i++) &#123; for (int j = 1; j &lt;= m; j++) &#123; if (s[i-1] == p[j-1] || p[j-1] == '.') &#123; dp[i][j] = dp[i-1][j-1]; &#125; else if (p[j-1] == '*') &#123; dp[i][j] = dp[i][j-2] || ((s[i-1] == p[j-2] || p[j-2] == '.') &amp;&amp; dp[i-1][j]); &#125; &#125; &#125; return dp[n][m]; &#125;&#125;; ç§°ç ç ç°æœ‰nç§ç ç ï¼Œé‡é‡äº’ä¸ç›¸ç­‰ï¼Œåˆ†åˆ«ä¸º m1,m2,m3â€¦mn ï¼Œæ¯ç§ç ç å¯¹åº”çš„æ•°é‡ä¸º x1,x2,x3â€¦xnï¼Œé—®èƒ½ç§°å‡ºå¤šå°‘ç§ä¸åŒçš„é‡é‡ã€‚ï¼ˆæ³¨ï¼šç§°é‡é‡é‡åŒ…æ‹¬ 0ï¼‰ è¾“å…¥æè¿°ï¼š å¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®ï¼š ç¬¬ä¸€è¡Œï¼šn â€”- ç ç çš„ç§æ•°(èŒƒå›´[1,10]) ç¬¬äºŒè¡Œï¼šm1 m2 m3 â€¦ mn â€”- æ¯ç§ç ç çš„é‡é‡(èŒƒå›´[1,2000]) ç¬¬ä¸‰è¡Œï¼šx1 x2 x3 â€¦. xn â€”- æ¯ç§ç ç å¯¹åº”çš„æ•°é‡(èŒƒå›´[1,10]) è¾“å‡ºæè¿°ï¼š åˆ©ç”¨ç»™å®šçš„ç ç å¯ä»¥ç§°å‡ºçš„ä¸åŒçš„é‡é‡æ•° ç¤ºä¾‹ä¸€ è¾“å…¥ï¼š21 22 1è¾“å‡ºï¼š5 ç¤ºä¾‹äºŒ è¾“å…¥ï¼š310 191 1036 6 5è¾“å‡ºï¼š254 ä»£ç å®ç°é€’å½’å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;set&gt;#include &lt;map&gt;using namespace std;map&lt;vector&lt;vector&lt;int&gt;&gt;, set&lt;int&gt;&gt; memo;set&lt;int&gt; different_sum(vector&lt;vector&lt;int&gt;&gt; v) &#123; if (memo.count(v)) &#123; return memo[v]; &#125; set&lt;int&gt; s; int n = 0; for (int i = 0; i &lt; v.size(); ++i) &#123; n += v[i][1]; if (v[i][1] != 0) &#123; break; &#125; &#125; if (n == 0) &#123; s.insert(0); return s; &#125; for (int i = 0; i &lt; v.size(); ++i) &#123; if (v[i][1] != 0) &#123; vector&lt;vector&lt;int&gt;&gt; t = v; t[i][1] -= 1; for (int j : different_sum(t)) &#123; s.insert(j); s.insert(j + v[i][0]); &#125; &#125; &#125; memo[v] = s; return s;&#125;int main () &#123; int n; cin &gt;&gt; n; vector&lt;vector&lt;int&gt;&gt; v(n, vector&lt;int&gt;(2, 0)); for (int i = 0; i &lt; 2*n; ++i) &#123; if (i &lt; n) &#123; cin &gt;&gt; v[i][0]; &#125; else if (i &gt;= n) &#123; cin &gt;&gt; v[i-n][1]; &#125; &#125; cout &lt;&lt; different_sum(v).size() &lt;&lt; endl;&#125; è¿­ä»£æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;set&gt;using namespace std;int main () &#123; int n; cin &gt;&gt; n; vector&lt;vector&lt;int&gt;&gt; v(n, vector&lt;int&gt;(2, 0)); for (int i = 0; i &lt; 2*n; ++i) &#123; if (i &lt; n) &#123; cin &gt;&gt; v[i][0]; &#125; else if (i &gt;= n) &#123; cin &gt;&gt; v[i-n][1]; &#125; &#125; set&lt;int&gt; s; s.insert(0); bool flag = false; for (int i = 0; i &lt; n; ++i) &#123; if (v[i][1] != 0) &#123; flag = true; break; &#125; &#125; while (flag) &#123; for (int i = 0; i &lt; n; ++i) &#123; if (v[i][1] != 0) &#123; set&lt;int&gt; s_copy = s; for (int j : s_copy) &#123; s.insert(j + v[i][0]); &#125; s.insert(v[i][0]); v[i][1] --; &#125; &#125; flag = false; for (int i = 0; i &lt; n; ++i) &#123; if (v[i][1] != 0) &#123; flag = true; break; &#125; &#125; &#125; cout &lt;&lt; s.size() &lt;&lt; endl;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"åŠ¨æ€è§„åˆ’","slug":"åŠ¨æ€è§„åˆ’","permalink":"https://gy23333.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"}]},{"title":"åŒˆç‰™åˆ©ç®—æ³•","slug":"åŒˆç‰™åˆ©ç®—æ³•","date":"2023-01-07T07:13:56.000Z","updated":"2024-11-11T03:57:58.108Z","comments":true,"path":"2023/01/07/åŒˆç‰™åˆ©ç®—æ³•/","link":"","permalink":"https://gy23333.github.io/2023/01/07/%E5%8C%88%E7%89%99%E5%88%A9%E7%AE%97%E6%B3%95/","excerpt":"","text":"","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Makefileæ•™ç¨‹","slug":"Makefileæ•™ç¨‹","date":"2022-01-13T09:27:19.000Z","updated":"2024-11-11T03:57:58.132Z","comments":true,"path":"2022/01/13/Makefileæ•™ç¨‹/","link":"","permalink":"https://gy23333.github.io/2022/01/13/Makefile%E6%95%99%E7%A8%8B/","excerpt":"ä¸€ä»½ç®€å•çš„Makefileä»‹ç»å…¥é—¨ï¼Œå¸®åŠ©åœ¨Linuxç³»ç»Ÿä¸‹ç¼–è¯‘C/C++ã€‚","text":"ä¸€ä»½ç®€å•çš„Makefileä»‹ç»å…¥é—¨ï¼Œå¸®åŠ©åœ¨Linuxç³»ç»Ÿä¸‹ç¼–è¯‘C/C++ã€‚ å¼•å‡ºå¦‚æœæœ‰ä¸€ä¸ªtest.cppæ–‡ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥ 1g++ test.cpp -o test å³å¯å¯¹cppæ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆtestå¯æ‰§è¡Œæ–‡ä»¶ã€‚ å¦‚æ­¤ï¼Œæ¯æ¬¡å¯¹cppæ–‡ä»¶è¿›è¡Œä¿®æ”¹åï¼Œéƒ½è¦é‡æ–°è¾“å…¥è¯¥å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œè¿‡ç¨‹å¤æ‚ä¸”é‡å¤ã€‚ æ‰€ä»¥ï¼Œå¯ä»¥å°†è¿™äº›å‘½ä»¤æ‰“åŒ…æˆmakefileæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—çš„è§„åˆ™æ¥æŒ‡å®šå“ªäº›æ–‡ä»¶éœ€è¦å…ˆç¼–è¯‘ï¼Œå“ªäº›æ–‡ä»¶éœ€è¦åç¼–è¯‘ï¼Œå“ªäº›æ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œç”šè‡³äºè¿›è¡Œæ›´å¤æ‚çš„åŠŸèƒ½æ“ä½œã€‚ åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå‘½åä¸ºMakeflieæˆ–makefile makefile12test: test.cpp g++ test.cpp -o test ç¬¬äºŒè¡Œçš„å¼€å¤´ä¸ºTabé”®ï¼Œå¦‚ä¸ºç©ºæ ¼é”®åˆ™ä¼šå‡ºç°makefile:2: *** missing separator. Stop.çš„æŠ¥é”™ã€‚VSCodeä¸­é»˜è®¤Tabé”®è½¬åŒ–ä¸ºç©ºæ ¼ï¼Œå¦‚éœ€è¾“å…¥Tabé”®ï¼Œå…³é—­è®¾ç½®ä¸­Editor: Insert Spacesé€‰é¡¹ã€‚ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ 1make å³å¯å¯¹test.cppæ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œæ•ˆæœä¸gcc test.cpp -o testç›¸åŒã€‚ Makefileçš„è§„åˆ™Makefileçš„åŸºç¡€æ¡†æ¶12target: prerequisites command targetï¼ˆç›®æ ‡ï¼‰ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªobject fileï¼ˆç›®æ ‡æ–‡ä»¶ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ‰§è¡Œæ–‡ä»¶ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼ˆlabelï¼‰ prerequisitesï¼ˆä¾èµ–ï¼‰ï¼šç”Ÿæˆè¯¥targetæ‰€ä¾èµ–çš„æ–‡ä»¶å’Œtarget commandï¼ˆå‘½ä»¤ï¼‰ï¼šè¯¥targetè¦æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä»»æ„çš„shellå‘½ä»¤ï¼‰ targetè¿™ä¸€ä¸ªæˆ–å¤šä¸ªçš„ç›®æ ‡æ–‡ä»¶ä¾èµ–äºprerequisitesä¸­çš„æ–‡ä»¶ï¼Œå…¶ç”Ÿæˆè§„åˆ™å®šä¹‰åœ¨commandä¸­ã€‚ ä¸€ä¸ªç¤ºä¾‹123456789101112131415161718192021222324edit : main.o kbd.o command.o display.o \\insert.o search.o files.o utils.o cc -o edit main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.omain.o : main.c defs.h cc -c main.ckbd.o : kbd.c defs.h command.h cc -c kbd.ccommand.o : command.c defs.h command.h cc -c command.cdisplay.o : display.c defs.h buffer.h cc -c display.cinsert.o : insert.c defs.h buffer.h cc -c insert.csearch.o : search.c defs.h buffer.h cc -c search.cfiles.o : files.c defs.h buffer.h command.h cc -c files.cutils.o : utils.c defs.h cc -c utils.cclean : rm edit main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o Makefileä¸­ä½¿ç”¨å˜é‡åœ¨makefileä¸­ä½¿ç”¨å˜é‡ç±»ä¼¼äºC/C++ä¸­çš„å®ã€‚ å®šä¹‰ä¸€ä¸ªå˜é‡objects 1objects = main.o kbd.o command.o display.o åˆ™å¯ä»¥åœ¨makefileä¸­ä»¥$(objects)çš„æ–¹å¼æ¥ä½¿ç”¨è¿™ä¸ªå˜é‡ã€‚ 123456789101112131415161718192021222324objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.oedit : $(objects) cc -o edit $(objects)main.o : main.c defs.h cc -c main.ckbd.o : kbd.c defs.h command.h cc -c kbd.ccommand.o : command.c defs.h command.h cc -c command.cdisplay.o : display.c defs.h buffer.h cc -c display.cinsert.o : insert.c defs.h buffer.h cc -c insert.csearch.o : search.c defs.h buffer.h cc -c search.cfiles.o : files.c defs.h buffer.h command.h cc -c files.cutils.o : utils.c defs.h cc -c utils.cclean : rm edit $(objects) éšæ™¦è§„åˆ™makeå¯ä»¥è‡ªåŠ¨è¯†åˆ«å’Œæ¨å€’æŒ‡ä»¤ã€‚åªè¦makeçœ‹åˆ°ä¸€ä¸ª .o æ–‡ä»¶ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨çš„æŠŠ .c æ–‡ä»¶åŠ åœ¨ä¾èµ–å…³ç³»ä¸­ï¼Œå¦‚æœmakeæ‰¾åˆ°ä¸€ä¸ªwhatever.o ï¼Œé‚£ä¹ˆ whatever.c å°±ä¼šæ˜¯ whatever.o çš„ä¾èµ–æ–‡ä»¶ï¼Œ cc -c whatever.c å°±ä¼šè¢«æ¨å¯¼å‡ºæ¥ã€‚ 1234567891011121314151617objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.oedit : $(objects) cc -o edit $(objects)main.o : defs.hkbd.o : defs.h command.hcommand.o : defs.h command.hdisplay.o : defs.h buffer.hinsert.o : defs.h buffer.hsearch.o : defs.h buffer.hfiles.o : defs.h buffer.h command.hutils.o : defs.h.PHONY : cleanclean : -rm edit $(objects) .PHONYè¡¨ç¤ºcleanæ˜¯ä¸ªä¼ªç›®æ ‡æ–‡ä»¶ã€‚ ç”±äºå¾ˆå¤š.oæ–‡ä»¶éƒ½ä¾èµ–ç›¸åŒçš„.hæ–‡ä»¶ï¼Œåœ¨æ­¤ä¹‹ä¸Šï¼Œå¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ã€‚ 123456789101112objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.oedit : $(objects) cc -o edit $(objects)$(objects) : defs.hkbd.o command.o files.o : command.hdisplay.o insert.o search.o files.o : buffer.h.PHONY : cleanclean : -rm edit $(objects) æ¸…ç©ºç›®æ ‡æ–‡ä»¶çš„è§„åˆ™æ¯ä¸ªMakefileä¸­éƒ½åº”è¯¥å†™ä¸€ä¸ªæ¸…ç©ºç›®æ ‡æ–‡ä»¶ï¼ˆ.oå’Œæ‰§è¡Œæ–‡ä»¶ï¼‰çš„è§„åˆ™ï¼Œè¿™ä¸ä»…ä¾¿äºé‡ç¼–è¯‘ï¼Œä¹Ÿå¾ˆåˆ©äºä¿æŒæ–‡ä»¶çš„æ¸…æ´ã€‚ 12clean : rm edit $(objects) æ›´ä¸ºç¨³å¥çš„åšæ³•æ˜¯ï¼š 123.PHONY : cleanclean : -rm edit $(objects) .PHONY è¡¨ç¤ºcleanæ˜¯ä¸€ä¸ªâ€œä¼ªç›®æ ‡â€ã€‚ åœ¨rmå‘½ä»¤å‰é¢åŠ äº†ä¸€ä¸ªå°å‡å·çš„æ„æ€å°±æ˜¯ï¼Œä¹Ÿè®¸æŸäº›æ–‡ä»¶å‡ºç°é—®é¢˜ï¼Œä½†ä¸è¦ç®¡ï¼Œç»§ç»­åšåé¢çš„äº‹ã€‚ Makefileçš„è¿è¡Œè¾“å…¥makeå‘½ä»¤åï¼Œ åœ¨å½“å‰ç›®å½•ä¸‹æ‰¾åå­—å«â€œMakefileâ€æˆ–â€œmakefileâ€çš„æ–‡ä»¶ï¼› æ‰¾æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼ˆtargetï¼‰ï¼Œå¹¶æŠŠè¿™ä¸ªæ–‡ä»¶ä½œä¸ºæœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶ï¼› å¦‚æœæœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–æ˜¯æœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶æ‰€ä¾èµ–çš„åé¢çš„ .o æ–‡ä»¶çš„æ–‡ä»¶ä¿®æ”¹æ—¶é—´è¦æ¯”æœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶æ–°ï¼Œåˆ™æ‰§è¡Œåé¢æ‰€å®šä¹‰çš„å‘½ä»¤æ¥ç”Ÿæˆæœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶ï¼› å¦‚æœæœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶æ‰€ä¾èµ–çš„ .o æ–‡ä»¶ä¹Ÿä¸å­˜åœ¨ï¼Œé‚£ä¹ˆmakeä¼šåœ¨å½“å‰æ–‡ä»¶ä¸­æ‰¾ç›®æ ‡ä¸º .o æ–‡ä»¶çš„ä¾èµ–æ€§ï¼Œå¦‚æœæ‰¾åˆ°åˆ™å†æ ¹æ®é‚£ä¸€ä¸ªè§„åˆ™ç”Ÿæˆ .o æ–‡ä»¶ï¼› makeä¼šç”Ÿæˆ .o æ–‡ä»¶ï¼Œç„¶åå†ç”¨ .o æ–‡ä»¶ç”Ÿæˆmakeçš„æœ€ç»ˆçš„ç›®æ ‡æ–‡ä»¶ã€‚ å¦‚æœtargetä¸ç¬¬ä¸€ä¸ªç›®æ ‡æ–‡ä»¶æ²¡æœ‰ä»»ä½•å…³è”ï¼ˆå¦‚cleanï¼‰ï¼Œåˆ™è¯¥å‘½ä»¤ä¸ä¼šæ‰§è¡Œã€‚å¦‚è¦æ‰§è¡Œcleanï¼Œåˆ™éœ€å¦å¤–è¾“å…¥make cleanå‘½ä»¤ã€‚ å‚è€ƒ Makefileçš„å†™æ³•ï¼ˆbç«™è§†é¢‘æ•™ç¨‹ï¼‰ è·Ÿæˆ‘ä¸€èµ·å†™Makefile","categories":[],"tags":[{"name":"Makefile","slug":"Makefile","permalink":"https://gy23333.github.io/tags/Makefile/"}]},{"title":"é›¾å¤©å›¾åƒç†è§£ç®—æ³•ç ”ç©¶","slug":"é›¾å¤©å›¾åƒç†è§£ç®—æ³•ç ”ç©¶","date":"2021-04-04T13:47:00.000Z","updated":"2024-11-11T03:57:58.121Z","comments":true,"path":"2021/04/04/é›¾å¤©å›¾åƒç†è§£ç®—æ³•ç ”ç©¶/","link":"","permalink":"https://gy23333.github.io/2021/04/04/%E9%9B%BE%E5%A4%A9%E5%9B%BE%E5%83%8F%E7%90%86%E8%A7%A3%E7%AE%97%E6%B3%95%E7%A0%94%E7%A9%B6/","excerpt":"åœ¨è‡ªåŠ¨é©¾é©¶çš„è¿‡ç¨‹ä¸­ï¼Œå›¾åƒè¯­ä¹‰åˆ†å‰²æ˜¯å…¶è§†è§‰ç³»ç»Ÿä¸­å¾ˆé‡è¦çš„ä¸€ç¯ï¼Œç°æœ‰çš„ä¸å°‘ç®—æ³•åœ¨æ™´å¤©æ¡ä»¶ä¸‹å¯¹å›¾åƒè¿›è¡Œå¤„ç†è¡¨ç°è‰¯å¥½ï¼Œä½†æ˜¯ä¸€æ—¦å‡ºç°å¦‚é›¾å¤©ç­‰æ¶åŠ£å¤©æ°”ï¼ŒåŸæœ‰ç³»ç»Ÿå¯¹å›¾åƒçš„å¤„ç†æ•ˆæœå°†å¤§å¤§é™ä½ã€‚ æœ¬è¯¾é¢˜æ—¨åœ¨é€šè¿‡ç®—æ³•é€”å¾„ï¼Œä»¥å›¾åƒå¤åŸä¸ºæ‰‹æ®µï¼Œæå‡å›¾åƒç†è§£ç®—æ³•åœ¨é›¾å¤©æ¡ä»¶ä¸‹çš„æ„ŸçŸ¥èƒ½åŠ›ï¼ŒåŸºäºå¤§æ°”é€€åŒ–ç‰©ç†æ¨¡å‹å¯¹é›¾å¤©å›¾åƒè¿›è¡Œè¯­ä¹‰åˆ†å‰²ã€‚","text":"åœ¨è‡ªåŠ¨é©¾é©¶çš„è¿‡ç¨‹ä¸­ï¼Œå›¾åƒè¯­ä¹‰åˆ†å‰²æ˜¯å…¶è§†è§‰ç³»ç»Ÿä¸­å¾ˆé‡è¦çš„ä¸€ç¯ï¼Œç°æœ‰çš„ä¸å°‘ç®—æ³•åœ¨æ™´å¤©æ¡ä»¶ä¸‹å¯¹å›¾åƒè¿›è¡Œå¤„ç†è¡¨ç°è‰¯å¥½ï¼Œä½†æ˜¯ä¸€æ—¦å‡ºç°å¦‚é›¾å¤©ç­‰æ¶åŠ£å¤©æ°”ï¼ŒåŸæœ‰ç³»ç»Ÿå¯¹å›¾åƒçš„å¤„ç†æ•ˆæœå°†å¤§å¤§é™ä½ã€‚ æœ¬è¯¾é¢˜æ—¨åœ¨é€šè¿‡ç®—æ³•é€”å¾„ï¼Œä»¥å›¾åƒå¤åŸä¸ºæ‰‹æ®µï¼Œæå‡å›¾åƒç†è§£ç®—æ³•åœ¨é›¾å¤©æ¡ä»¶ä¸‹çš„æ„ŸçŸ¥èƒ½åŠ›ï¼ŒåŸºäºå¤§æ°”é€€åŒ–ç‰©ç†æ¨¡å‹å¯¹é›¾å¤©å›¾åƒè¿›è¡Œè¯­ä¹‰åˆ†å‰²ã€‚ æ‘˜è¦æœ¬æ¯•ä¸šè®¾è®¡ç ”ç©¶çš„ä¸»è¦å†…å®¹æ˜¯è‡ªåŠ¨é©¾é©¶ç¯å¢ƒä¸‹é›¾å¤©å›¾åƒçš„è¯­ä¹‰åˆ†å‰²ã€‚ä½œä¸ºè‡ªåŠ¨é©¾é©¶æ±½è½¦è§†è§‰ç³»ç»Ÿä¸­çš„é‡è¦ä¸€ç¯ï¼Œè¯­ä¹‰åˆ†å‰²çš„å‡†ç¡®åº¦ç›´æ¥å½±å“äº†è‡ªåŠ¨é©¾é©¶æ±½è½¦çš„å®‰å…¨æ€§èƒ½ã€‚ç°æœ‰çš„è¯­ä¹‰åˆ†å‰²ç®—æ³•åœ¨æ™´æœ—å¤©æ°”ä¸‹è¡¨ç°è‰¯å¥½ï¼Œä½†æ˜¯åœ¨ä¸€æ—¦é‡åˆ°å¦‚å¤§é›¾ç­‰ä¸è‰¯å¤©æ°”ï¼Œå…¶åˆ†å‰²æ•ˆæœå°±ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚ä¸ºäº†è§£å†³é›¾å¤©å›¾åƒçš„è¯­ä¹‰åˆ†å‰²é—®é¢˜ï¼Œæœ¬æ¬¡å®éªŒåˆ©ç”¨åŸºäºé›¾å¤©æˆåƒç‰©ç†æ¨¡å‹çš„æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œå¯¹é›¾å¤©å›¾åƒè¿›è¡Œå¤åŸï¼Œæ¢å¤å‡ºå»é›¾å›¾åƒï¼Œå†åœ¨å»é›¾å›¾åƒä¸Šè¿›è¡Œè¯­ä¹‰åˆ†å‰²ï¼Œæé«˜é›¾å¤©ç¯å¢ƒä¸‹è¯­ä¹‰åˆ†å‰²çš„å‡†ç¡®åº¦ã€‚ é’ˆå¯¹è‡ªç„¶æ¡ä»¶ä¸‹éš¾ä»¥è·å¾—åŒä¸€åœºæ™¯çš„æ— é›¾/æœ‰é›¾å›¾åƒå¯¹æ•°æ®çš„é—®é¢˜ï¼Œæœ¬æ–‡é€‰æ‹©Cityscapeså®¤å¤–è¡—æ™¯æ™´å¤©å›¾åƒæ¥åˆæˆæœ‰é›¾å›¾åƒã€‚é€šè¿‡åŒç›®è§†å·®æ¢å¤å‡ºåŸå§‹æ·±åº¦æ˜ å°„ï¼Œå†åŸºäºåˆ†å‰²è¿›è¡Œæ·±åº¦çš„è¡¥å…¨ï¼Œä¾ç…§è®¾å®šçš„å¤§æ°”æ•£å°„ç³»æ•°ï¼Œç”±æ·±åº¦å›¾åƒå¾—åˆ°ç›¸åº”çš„ä¼ è¾“ç‡å›¾åƒï¼Œå†æ ¹æ®é›¾å¤©å¤§æ°”é€€åŒ–åŸç†åˆæˆä¸åŒæµ“åº¦ä¸‹çš„æœ‰é›¾å›¾åƒã€‚è¯¥æ–¹æ³•åˆæˆçš„æœ‰é›¾å›¾åƒæ•ˆæœé€¼çœŸï¼Œä¸ºåç»­ç¥ç»ç½‘ç»œçš„è®­ç»ƒæä¾›äº†å¤§é‡çš„æ— é›¾/æœ‰é›¾å›¾åƒå¯¹ã€‚ é’ˆå¯¹è¯­ä¹‰åˆ†å‰²å—åˆ°é›¾å¤©åœºæ™¯å½±å“çš„é—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ä¸ªå…ˆå›¾åƒå¤åŸå†è¯­ä¹‰åˆ†å‰²çš„æ¡†æ¶ã€‚åŸºäºé›¾å¤©å¤§æ°”é€€åŒ–æ¨¡å‹ï¼Œå…ˆå¯¹ä¼ è¾“ç‡è¿›è¡Œä¼°è®¡ï¼Œå†ç”Ÿæˆç›¸åº”çš„å»é›¾å›¾åƒã€‚æœ¬æ–‡æ„å»ºäº†ä¸€ä¸ªæ·±åº¦å·ç§¯ç½‘ç»œä»¥å¢å¤§æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ï¼ŒåŒæ—¶ä¸ºäº†é¿å…ç½‘ç»œåŠ æ·±å¯¼è‡´çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œå¼•å…¥äº†æ®‹å·®æ¨¡å—ã€‚å¯¹ç½‘ç»œçš„å»é›¾æ•ˆæœä»è§†è§‰æŒ‡æ ‡å’Œå®šé‡åŒ–æŒ‡æ ‡ï¼ˆPSNRã€SSIMï¼‰ä¸¤ä¸ªç»´åº¦è¿›è¡Œè¯„ä»·ï¼ŒéªŒè¯äº†è¯¥ç½‘ç»œå»é›¾çš„æœ‰æ•ˆæ€§ã€‚ ä¸ºäº†è¿›ä¸€æ­¥éªŒè¯å›¾åƒå¤åŸå·¥ä½œå¯¹è¯­ä¹‰åˆ†å‰²çš„ä¿ƒè¿›ä½œç”¨ï¼Œæœ¬æ–‡å°†AOD-Netå’Œæœ¬æ–‡ç®—æ³•æ¨¡å‹æ‰€å¾—çš„å»é›¾å›¾åƒåˆ†åˆ«è¾“å…¥è¯­ä¹‰åˆ†å‰²ç½‘ç»œï¼Œä¸æ•°æ®é›†æ ‡ç­¾è¿›è¡Œæ¯”è¾ƒï¼Œå¾—åˆ°åˆ†å‰²çš„å‡†ç¡®åº¦ã€‚å®éªŒè¯æ˜ï¼Œæœ¬æ–‡æå‡ºçš„å»é›¾ç½‘ç»œç›¸æ¯”äºAOD-Netä¸ä»…åœ¨å›¾åƒè´¨é‡è¯„ä»·æŒ‡æ ‡ä¸Šæœ‰ç€æ˜¾è‘—æå‡ï¼Œè¿˜è¿›ä¸€æ­¥æå‡äº†è¯­ä¹‰åˆ†å‰²çš„å‡†ç¡®åº¦ï¼ŒéªŒè¯äº†æœ¬æ–‡ç½‘ç»œå¯¹é›¾å¤©åœºæ™¯è¯­ä¹‰åˆ†å‰²çš„å·¨å¤§ä¿ƒè¿›ä½œç”¨ã€‚ å…³é”®è¯ï¼šé›¾å¤©å›¾åƒçš„åˆæˆï¼›æ·±åº¦å·ç§¯ç½‘ç»œï¼›å•å¹…å›¾åƒå»é›¾ï¼›é›¾å¤©å›¾åƒçš„è¯­ä¹‰åˆ†å‰² åˆæˆé›¾å›¾å‚è€ƒSemantic Foggy Scene Understanding with Synthetic Data é›¾å¤©å›¾åƒé€€åŒ–æ¨¡å‹å…‰çº¿åœ¨å¤§æ°”ä¸­ä¼ æ’­çš„è¿‡ç¨‹ä¸­ä¼šæ¥è§¦åˆ°ç©ºæ°”ä¸­çš„é¢—ç²’ï¼Œå½¢æˆæ•£å°„ï¼Œä½¿å¾—åŸæ–¹å‘ä¸Šçš„å…‰çº¿å¼ºåº¦è¡°å‡ï¼Œèƒ½é‡å‘æ•£åˆ°å…¶ä»–æ–¹å‘ã€‚éšç€é›¾çš„æµ“åº¦çš„å¢å¤§ï¼Œç©ºæ°”ä¸­çš„é¢—ç²’ä¹Ÿå°±æ„ˆåŠ å¯†é›†ï¼Œå…‰çš„æ•£å°„ç¨‹åº¦ä¹Ÿéšä¹‹å¢åŠ ã€‚ é›¾å¤©å›¾åƒé€€åŒ–æ¨¡å‹ä¸­ï¼Œå…‰å­¦ä¼ æ„Ÿå™¨æ¥æ”¶åˆ°çš„å…‰åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€æ˜¯ç›®æ ‡ç‰©ä½“åå°„çš„å…‰ï¼Œåå°„å…‰ä»ç›®æ ‡ç‰©ä½“ä¼ æ’­åˆ°å…‰å­¦ä¼ æ„Ÿå™¨ï¼Œé€”ä¸­ä¼šå—åˆ°ç©ºæ°”é¢—ç²’çš„æ•£å°„ï¼Œå¯¼è‡´å…‰å¼ºå‡å°ï¼›äºŒæ˜¯å‘¨å›´çš„ç¯å¢ƒå…‰ï¼Œä¹Ÿå«å¤§æ°”å…‰ï¼Œç”±å¤§æ°”ä¸­å…¶ä»–å…‰æºæ•£å°„è‡³å…‰å­¦ä¼ æ„Ÿå™¨ã€‚ æ ¹æ®èƒ½é‡å®ˆæ’å®šå¾‹ï¼Œç›®æ ‡ç‰©ä½“åå°„å…‰ä¸­æ•£å°„æ‰çš„æ¯”ä¾‹åº”ç­‰äºå¤§æ°”å…‰æ•£å°„åˆ°å…‰å­¦ä¼ æ„Ÿå™¨çš„æ¯”ä¾‹ï¼Œç”±æ­¤å¯ä»¥å¾—åˆ°ä»¥ä¸‹é›¾æˆåƒæœºç†çš„çº¿æ€§æ¨¡å‹ I(x)=J(x)t(x)+A(1-t(x))å…¶ä¸­ï¼ŒI(x)ä¸ºæœ‰é›¾å›¾åƒï¼ŒJ(x)ä¸ºæ™´å¤©å›¾åƒï¼Œt(x)ä¸ºä¸­é—´ä»‹è´¨é€å°„ç‡ï¼ˆå³ç›®æ ‡ç‰©ä½“åå°„å…‰ä¸­æˆåŠŸåˆ°è¾¾ç›¸æœºï¼Œæ²¡æœ‰è¢«æ•£å°„æ‰çš„å…‰çš„æ¯”ä¾‹ï¼‰ï¼ŒAä¸ºå…¨å±€å¤§æ°”å…‰å¼ºã€‚æœ‰é›¾å›¾åƒI(x)å¯åˆ†ä¸ºè¡°å‡æ¨¡å‹J(x)t(x)å’Œç¯å¢ƒå…‰æ¨¡å‹A(1-t(x))ã€‚ é›¾åˆæˆæ ¹æ®é›¾æˆåƒæœºåˆ¶å…¬å¼ I(x)=R(x)t(x)+L(1-t(x))è¦ä»æ™´å›¾R(x)å¾—åˆ°é›¾å›¾I(x)ï¼Œè¿˜éœ€è¦ä¸¤ä¸ªå‚æ•°â€”â€”ä¸­é—´é€å°„ç‡t(x)å’Œå¤§æ°”å…‰Lã€‚ æ±‚ä¸­é—´é€å°„ç‡t(x)æ•°æ®é›†é€šè¿‡åŒç›®ç›¸æœºå¯¹è¡—é“è¿›è¡Œæ‹æ‘„ï¼Œå†é€šè¿‡åŒç›®åŒ¹é…ç®—æ³•å¯ä»¥å¾—åˆ°ä»¥ä¸‹è¾“å…¥ï¼š æ™´å›¾å·¦é€šé“R æ™´å›¾å³é€šé“Q åŒç›®ç›¸æœºå‚æ•° é¢„ä¼°è§†å·®D æ— è§†å·®å€¼Dçš„æ‰€æœ‰åƒç´ ç‚¹é›†åˆ è®¡ç®—ä¸­é—´é€å°„ç‡t(x)çš„æ­¥éª¤ï¼š é€šè¿‡è§†å·®Dè®¡ç®—å‡ºå¤§è‡´çš„æ·±åº¦å›¾d å»å™ªï¼Œå®Œæˆä¸€ä¸ªä»¥ç±³ä¸ºå•ä½çš„æ·±åº¦å›¾dâ€™ ä»æ·±åº¦å›¾dâ€™å¾—åœºæ™¯è·ç¦»å›¾l","categories":[],"tags":[]},{"title":"Daily English Dictation","slug":"Daily-English-Dictation","date":"2021-01-05T18:18:59.000Z","updated":"2024-11-11T03:57:58.122Z","comments":true,"path":"2021/01/06/Daily-English-Dictation/","link":"","permalink":"https://gy23333.github.io/2021/01/06/Daily-English-Dictation/","excerpt":"å…³äºBç«™Coach Shaneè€å¸ˆçš„æ¯æ—¥è‹±è¯­å¬å†™ Daily English Dictation 1-400çš„å­¦ä¹ è®°å½•ã€‚","text":"å…³äºBç«™Coach Shaneè€å¸ˆçš„æ¯æ—¥è‹±è¯­å¬å†™ Daily English Dictation 1-400çš„å­¦ä¹ è®°å½•ã€‚ D1 Mother Teresa, who received a Nobel Peace Price for her work on behalf of the poor, dies in Calcutta, India â€” She was 87 years old. dies ç”¨ä¸€èˆ¬ç°åœ¨æ—¶è¡¨è¿‡å»å‘ç”Ÿçš„äº‹ï¼Œç»™äººèº«ä¸´å…¶å¢ƒçš„æ„Ÿè§‰ã€‚ D2 Jerry, what time do you have (de yuh ave) ? I have (ave) five oâ€™clock. what time ä¸¤ç›¸åŒéŸ³ï¼Œä¿ç•™ç¬¬äºŒä¸ªï¼Œå³ wha time 7 Hsï¼šhe, her, him, his, have, has, had è¿è¯»æ—¶ï¼Œå»æ‰hå‘éŸ³ï¼Œå³ have(ave) D3 There are three things I have(ave) learned Never to(tâ€™) discuss with people, religion, politics and the Great Pumpkin! Never é‡åº¦ç¬¬ä¸€éŸ³ï¼Œè¡¨ç¤ºå†³å¿ƒ toçš„7ç§å‘éŸ³ï¼što, tah, tuh, tâ€™, dah, duh, dâ€™ å…¶ä¸­è¾ƒä¸ºå¸¸ç”¨çš„æ˜¯ï¼štâ€™, dâ€™ D4 Donâ€™t ever (Don-ever) let(le) somebody tell you you canâ€™t(can) do something(sumpâ€™n). å¼ºéŸ³ï¼šS, N, L å¼±éŸ³ï¼šd, t, th å½“å¼ºéŸ³é‡åˆ°äº†å¼±éŸ³ï¼Œå¼±éŸ³çœç•¥ï¼Œå³ Donâ€™t(Don) canâ€™tåŒæ ·å› ä¸ºå¼ºå¼±éŸ³åŸåˆ™å˜æˆcanï¼Œä½†æ˜¯é‡éŸ³ä¸è¡¨è‚¯å®šçš„canåˆåŒºåˆ«ã€‚è¡¨å¦å®šçš„canâ€™tè¯»ä½œçŸ­ä¿ƒçš„can something(sumpâ€™n) D5 I have come here to(dâ€™) chew bubblegum and(an) kick assâ€¦ and(an) Iâ€™m(ahm) all out of (outta) bubblegum! toçš„7ç§å‘éŸ³ï¼što, tah, tuh, tâ€™, dah, duh, dâ€™ å…¶ä¸­è¾ƒä¸ºå¸¸ç”¨çš„æ˜¯ï¼štâ€™, dâ€™ and(an) å¼ºå¼±éŸ³åŸåˆ™ Iâ€™m(ahm) out of (outta) D6 The secret of life is just(juss) to(tâ€™) live every moment. D7 Another rogue trader has cost a bank billions. D8 German, Rolf Buchholz, is the (ize) man with the most(mos) piercings, heâ€™s got 453! is the (ize) å¼ºå¼±éŸ³åŸåˆ™ with the ç›¸ä¼¼éŸ³ç•™åä¸€ä¸ª 453 -&gt; four hu-nerd fivety three D9 A satellite that was carried to(tâ€™) space aboard the shuttle Discovery twenty(tweny) years age, is about to(tâ€™) fall to(dâ€™) Earth, but noboby knows where the debris(dâ€™-bree) will hit. D10 Itâ€™s a (Iâ€™sa) lofty, probably impossible goal. D11* New York swept the Tampa Bay Rays by identical 4-2 scores in a day-night doubleheader Wednesday. Doubleheader ä¸€å¤©è¿èµ›ä¸¤åœº ä»¥åŒæ ·çš„4æ¯”2çš„æ¯”åˆ†è¿èµ¢ä¸¤åœº D12* Jim Henson, creator of(oâ€™) the Muppets - from Kermit the Frog to Sesame Street, is born in Greenville , MS.","categories":[{"name":"è‹±è¯­","slug":"è‹±è¯­","permalink":"https://gy23333.github.io/categories/%E8%8B%B1%E8%AF%AD/"}],"tags":[{"name":"Coach-Shane","slug":"Coach-Shane","permalink":"https://gy23333.github.io/tags/Coach-Shane/"}]},{"title":"HTMLåŸºç¡€æ•™ç¨‹","slug":"HTMLåŸºç¡€æ•™ç¨‹","date":"2020-07-08T13:53:33.000Z","updated":"2024-11-11T03:57:58.116Z","comments":true,"path":"2020/07/08/HTMLåŸºç¡€æ•™ç¨‹/","link":"","permalink":"https://gy23333.github.io/2020/07/08/HTML%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/","excerpt":"HTMLåŸºç¡€çŸ¥è¯†æ€»ç»“ã€‚","text":"HTMLåŸºç¡€çŸ¥è¯†æ€»ç»“ã€‚ HTMLæ ‡ç­¾åŸºæœ¬æ ‡ç­¾ æ ‡ç­¾ æè¿° æ³¨é‡Š &lt;html&gt; HTML &lt;body&gt; ä¸»ä½“ &lt;h1&gt;ï½&lt;h6&gt; æ ‡é¢˜ ä»ä¸€çº§æ ‡é¢˜åˆ°å…­çº§æ ‡é¢˜ï¼Œç”±å¤§åˆ°å° &lt;p&gt; æ®µè½ æµè§ˆå™¨ä¼šè‡ªåŠ¨åœ°åœ¨æ®µè½çš„å‰åæ·»åŠ ç©ºè¡Œï¼Œå¦‚æœåœ¨ä¸äº§ç”Ÿä¸€ä¸ªæ–°æ®µè½çš„æƒ…å†µä¸‹è¿›è¡Œæ¢è¡Œç”¨&lt;br /&gt; &lt;br /&gt; æ¢è¡Œ &lt;a&gt; é“¾æ¥ ä¾‹&lt;a href=&quot;http://www.w3school.com.cn&quot;&gt;This is a link&lt;/a&gt; &lt;img&gt; å›¾åƒ ä¾‹&lt;img src=&quot;XXXX.jpg&quot; width=&quot;104&quot; height=&quot;142&quot; /&gt; &lt;hr /&gt; æ°´å¹³çº¿ &lt;q&gt; çŸ­å¼•ç”¨ &lt;blockquote&gt; é•¿å¼•ç”¨ &lt;abbr&gt; ç¼©ç•¥è¯ è¡¨æ ¼ æ ‡ç­¾ æè¿° &lt;table&gt; è¡¨æ ¼ &lt;caption&gt; æ ‡é¢˜ &lt;th&gt; è¡¨å¤´ &lt;tr&gt; è¡Œ &lt;td&gt; å•å…ƒ 123456789101112&lt;table border=\"1\"&gt; &lt;th&gt;head1&lt;/th&gt; &lt;th&gt;head2&lt;/th&gt; &lt;tr&gt; &lt;td&gt;row 1, cell 1&lt;/td&gt; &lt;td&gt;row 1, cell 2&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;row 2, cell 1&lt;/td&gt; &lt;td&gt;row 2, cell 2&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; border=&quot;1&quot;åˆ™æ˜¾ç¤ºè¾¹æ¡†ï¼Œborder=&quot;0&quot;åˆ™ä¸æ˜¾ç¤ºè¾¹æ¡†ã€‚ åˆ—è¡¨ æ ‡ç­¾ æè¿° &lt;ol&gt; æœ‰åºåˆ—è¡¨ &lt;ul&gt; æ— åºåˆ—è¡¨ &lt;li&gt; åˆ—è¡¨é¡¹ æ— åºåˆ—è¡¨1234&lt;ul&gt; &lt;li&gt;Coffee&lt;/li&gt; &lt;li&gt;Milk&lt;/li&gt;&lt;/ul&gt; æœ‰åºåˆ—è¡¨1234&lt;ol&gt; &lt;li&gt;Coffee&lt;/li&gt; &lt;li&gt;Tea&lt;/li&gt;&lt;/ol&gt;","categories":[],"tags":[{"name":"HTML","slug":"HTML","permalink":"https://gy23333.github.io/tags/HTML/"}]},{"title":"äººå·¥æ™ºèƒ½æ¦‚è¿°","slug":"äººå·¥æ™ºèƒ½æ¦‚è¿°","date":"2020-07-07T14:35:38.000Z","updated":"2024-11-11T03:57:58.121Z","comments":true,"path":"2020/07/07/äººå·¥æ™ºèƒ½æ¦‚è¿°/","link":"","permalink":"https://gy23333.github.io/2020/07/07/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A6%82%E8%BF%B0/","excerpt":"ã€Šäººå·¥æ™ºèƒ½åŠå…¶åº”ç”¨ã€‹ç¬¬ä¸€ç« ç»ªè®ºç¬”è®°æ€»ç»“ã€‚","text":"ã€Šäººå·¥æ™ºèƒ½åŠå…¶åº”ç”¨ã€‹ç¬¬ä¸€ç« ç»ªè®ºç¬”è®°æ€»ç»“ã€‚ äººå·¥æ™ºèƒ½çš„å®šä¹‰ä¸å‘å±•äººå·¥æ™ºèƒ½çš„å®šä¹‰&emsp;&emsp;äººå·¥æ™ºèƒ½çš„å‡ ç§å®šä¹‰ï¼š æ™ºèƒ½ äººçš„æ™ºèƒ½æ˜¯äººç±»ç†è§£å’Œå­¦ä¹ äº‹ç‰©çš„èƒ½åŠ›ï¼Œæˆ–è€…è¯´ï¼Œæ™ºèƒ½æ˜¯æ€è€ƒå’Œç†è§£çš„èƒ½åŠ›è€Œä¸æ˜¯æœ¬èƒ½åšäº‹çš„èƒ½åŠ›ã€‚ æ™ºèƒ½æ˜¯ä¸€ç§åº”ç”¨çŸ¥è¯†å¤„ç†ç¯å¢ƒçš„èƒ½åŠ›æˆ–ç”±ç›®æ ‡å‡†åˆ™è¡¡é‡çš„æŠ½è±¡æ€è€ƒèƒ½åŠ›ã€‚ æ™ºèƒ½æœºå™¨ ä¸€ç§èƒ½å¤Ÿå‘ˆç°å‡ºäººç±»æ™ºèƒ½è¡Œä¸ºçš„æœºå™¨ï¼Œè€Œè¿™ç§æ™ºèƒ½è¡Œä¸ºæ˜¯äººç±»ç”¨å¤§è„‘æ€è€ƒé—®é¢˜æˆ–åˆ›é€ æ€æƒ³ã€‚ æ˜¯ä¸€ç§èƒ½å¤Ÿåœ¨ä¸ç¡®å®šç¯å¢ƒä¸­æ‰§è¡Œå„ç§æ‹Ÿäººä»»åŠ¡è¾¾åˆ°é¢„æœŸç›®æ ‡çš„æœºå™¨ã€‚ äººå·¥æ™ºèƒ½ï¼ˆå­¦ç§‘ï¼‰","categories":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://gy23333.github.io/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"}],"tags":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://gy23333.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"}]},{"title":"æœ‰åºæœç´¢â€”â€”å…«æ•°ç é—®é¢˜","slug":"æœ‰åºæœç´¢â€”â€”å…«æ•°ç é—®é¢˜","date":"2020-06-13T09:15:22.000Z","updated":"2024-11-11T03:57:58.114Z","comments":true,"path":"2020/06/13/æœ‰åºæœç´¢â€”â€”å…«æ•°ç é—®é¢˜/","link":"","permalink":"https://gy23333.github.io/2020/06/13/%E6%9C%89%E5%BA%8F%E6%90%9C%E7%B4%A2%E2%80%94%E2%80%94%E5%85%AB%E6%95%B0%E7%A0%81%E9%97%AE%E9%A2%98/","excerpt":"æœ‰åºæœç´¢ï¼ˆordered searchï¼‰åˆç§°æœ€ä½³ä¼˜å…ˆæœç´¢ï¼Œè®¾è®¡ä¼°ä»·å‡½æ•°é€‰æ‹©æœ€æœ‰å¸Œæœ›çš„èŠ‚ç‚¹æœ€ä¸ºä¸‹ä¸€ä¸ªè¦æ‰©å±•çš„èŠ‚ç‚¹ã€‚","text":"æœ‰åºæœç´¢ï¼ˆordered searchï¼‰åˆç§°æœ€ä½³ä¼˜å…ˆæœç´¢ï¼Œè®¾è®¡ä¼°ä»·å‡½æ•°é€‰æ‹©æœ€æœ‰å¸Œæœ›çš„èŠ‚ç‚¹æœ€ä¸ºä¸‹ä¸€ä¸ªè¦æ‰©å±•çš„èŠ‚ç‚¹ã€‚ æœ‰åºæœç´¢ç®—æ³• æŠŠèµ·å§‹èŠ‚ç‚¹Sæ”¾åˆ°OPENè¡¨ä¸­ï¼Œè®¡ç®—$f(S)$å¹¶æŠŠå…¶å€¼ä¸èŠ‚ç‚¹$S$è”ç³»èµ·æ¥ã€‚ å¦‚æœOPENæ˜¯ä¸ªç©ºè¡¨ï¼Œåˆ™å¤±è´¥é€€å‡ºï¼Œæ— è§£ã€‚ ä»OPENè¡¨ä¸­é€‰æ‹©ä¸€ä¸ª$f$å€¼æœ€å°çš„èŠ‚ç‚¹$i$ã€‚å¦‚æœæœ‰å‡ ä¸ªèŠ‚ç‚¹åˆæ ¼ï¼Œå½“å…¶ä¸­æœ‰ä¸€ä¸ªä¸ºç›®æ ‡èŠ‚ç‚¹æ—¶ï¼Œåˆ™é€‰æ‹©æ­¤ç›®æ ‡èŠ‚ç‚¹ï¼Œå¦åˆ™å°±é€‰æ‹©å…¶ä¸­ä»»ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºèŠ‚ç‚¹ã€‚ æŠŠèŠ‚ç‚¹$i$ä»OPENè¡¨ä¸­ç§»å‡ºï¼Œå¹¶æŠŠå®ƒæ”¾å…¥ CLOSEDçš„æ‰©å±•èŠ‚ç‚¹è¡¨ä¸­ã€‚ å¦‚æœ$i$æ˜¯ä¸€ä¸ªç›®æ ‡èŠ‚ç‚¹ï¼Œåˆ™æˆåŠŸé€€å‡ºï¼Œæ±‚å¾—ä¸€ä¸ªè§£ã€‚ æ‰©å±•èŠ‚ç‚¹$i$ï¼Œç”Ÿæˆå…¶å…¨éƒ¨åç»§èŠ‚ç‚¹ã€‚å¯¹äº$i$çš„æ¯ä¸€ä¸ªåç»§èŠ‚ç‚¹$j$ï¼š è®¡ç®—$f(j)$ã€‚ å¦‚æœ$j$æ—¢ä¸åœ¨OPENè¡¨ä¸­ï¼Œåˆä¸åœ¨ CLOSEDè¡¨ä¸­ï¼Œåˆ™ç”¨ä¼°ä»·å‡½æ•°$f$æŠŠå®ƒæ·»OPENè¡¨ã€‚ä»$j$åŠ ä¸€æŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹$i$çš„æŒ‡é’ˆï¼Œä»¥ä¾¿ä¸€æ—¦æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹æ—¶è®°ä½ä¸€ä¸ªè§£ç­”è·¯å¾„ã€‚ å¦‚æœ$j$å·²åœ¨OPENè¡¨æˆ– CLOSEDè¡¨ä¸­ï¼Œæ¯”è¾ƒåˆšåˆšå¯¹$j$è®¡ç®—è¿‡çš„$f$å€¼å’Œå‰é¢è®¡ç®—è¿‡çš„è¯¥èŠ‚ç‚¹åœ¨è¡¨ä¸­çš„$f$å€¼ã€‚å¦‚æœæ–°çš„$f$å€¼è¾ƒå°ï¼Œåˆ™ ä»¥æ­¤æ–°å€¼å–ä»£æ—§å€¼ã€‚ ä»$j$æŒ‡å‘$i$ï¼Œè€Œä¸æ˜¯æŒ‡å‘å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚ å¦‚æœèŠ‚ç‚¹$j$åœ¨ CLOSEDè¡¨ä¸­ï¼Œåˆ™æŠŠå®ƒç§»å›OPENè¡¨ è½¬å‘ï¼ˆ2ï¼‰ï¼Œå³GOTOï¼ˆ2ï¼‰ã€‚ &emsp;&emsp;å…¶ä¸­ï¼Œæœ€ä¸ºé‡è¦çš„å°±æ˜¯ä¼°ä»·å‡½æ•°çš„è®¾è®¡ã€‚ å…«æ•°ç é—®é¢˜&emsp;&emsp;å…«æ•°ç é—®é¢˜ç”±8ä¸ªç¼–æœ‰1åˆ°8å¹¶æ”¾åœ¨$3 \\times 3$æ–¹æ ¼æ£‹ç›˜ä¸Šçš„å¯èµ°åŠ¨çš„æ£‹å­ç»„æˆã€‚æ£‹ç›˜ä¸Šæ€»æœ‰ä¸€ä¸ªæ ¼æ˜¯ç©ºçš„ï¼Œä»¥ä¾¿è®©ç©ºæ ¼å‘¨å›´çš„æ£‹å­èµ°è¿›ç©ºæ ¼ï¼Œå³ç§»åŠ¨ç©ºæ ¼ã€‚å°†æ£‹ç›˜çŠ¶æ€ç”±åˆå§‹çŠ¶æ€å˜æ¢æˆç›®æ ‡çŠ¶æ€ã€‚ &emsp;&emsp;æ¯”å¦‚æœ‰ä¸‹é¢å·¦å›¾çš„åˆå§‹çŠ¶æ€è½¬ä¸ºä¸‹é¢å³å›¾çš„ç›®æ ‡çŠ¶æ€ã€‚ \\begin{bmatrix} 2 & 8 & 3 \\\\ 1 & 6 & 4 \\\\ 7 & 0 & 5 \\end{bmatrix} \\quad \\quad -> \\quad \\quad \\begin{bmatrix} 1 & 2 & 3 \\\\ 8 & 0 & 4 \\\\ 7 & 6 & 5 \\end{bmatrix}åˆ©ç”¨æœ‰åºæœç´¢æ±‚è§£å…«æ•°ç  åˆ©ç”¨é€†è½¬æ£‹å­æ•°æ¥åˆ¤æ–­ç›®æ ‡çŠ¶æ€æ˜¯å¦å¯è¾¾ å¦‚åˆå§‹çŠ¶æ€å’Œç›®æ ‡çŠ¶æ€çš„é€†è½¬æ£‹å­æ•°åŒå¥‡å¶ï¼Œåˆ™ç›®æ ‡çŠ¶æ€å¯è¾¾ï¼›å¦åˆ™ï¼Œç›®æ ‡çŠ¶æ€ä¸å¯è¾¾ã€‚ &emsp;&emsp;é€†è½¬æ£‹å­æ•°ï¼šå°†æ£‹ç›˜è½¬ä¸ºä¸€ç»´æ•°ç»„ï¼Œä»è¯¥æ•°ç»„ä¸­å–å‡ºä¸€å¯¹æ•°ï¼Œå¦‚å‰é¢çš„æ•°å¤§äºåé¢çš„æ•°ï¼Œåˆ™ä¸ºä¸€ä¸ªé€†åºã€‚æ£‹ç›˜çš„é€†è½¬æ£‹å­æ•°åˆ™ä¸ºè¯¥æ£‹ç›˜é€†åºçš„æ€»æ•°ã€‚ &emsp;&emsp;å¦‚æ£‹ç›˜ \\begin{bmatrix} 2 & 8 & 3 \\\\ 1 & 6 & 4 \\\\ 7 & 0 & 5\\end{bmatrix}\\quad \\quad -> \\quad \\quad \\begin{bmatrix} 2 & 8 & 3 & 1 & 6 & 4 & 7 & 5 \\end{bmatrix} è¯¥æ£‹ç›˜çš„é€†è½¬æ£‹å­æ•°ä¸º $1+6+1+0+3+2+1+0 = 14$ ä»£å…¥æœ‰åºæœç´¢ç®—æ³• main.m123456789101112131415161718192021222324252627282930313233343536373839404142434445clear;clc;h_select = 2;S = [2,8,3; 1 6 4; 7,0,5]; %èµ·å§‹èŠ‚ç‚¹G = [1,2,3; 8,0,4; 7,6,5]; %ç›®æ ‡èŠ‚ç‚¹reachFlag = true;% éœ€é€†è½¬æ•°ç›®åŒå¥‡å¶æ‰å¯è¾¾if mod(H3(S),2) ~= mod(H3(G),2) disp(\"Fail\"); reachFlag = false;endOPEN = initOPEN(S,G, h_select); %åˆå§‹åŒ–OPENè¡¨CLOSED = &#123;&#125;; %åˆå§‹åŒ–CLOSEDä¸ºç©ºè¡¨while reachFlag % OPENè¡¨ä¸ºç©ºï¼Œåˆ™å¤±è´¥ï¼Œè·³å‡ºå¾ªç¯ if isempty(OPEN) disp(\"Fail\"); break; end % å¯¹OPENè¡¨ä¸­çš„èŠ‚ç‚¹æ’åºç­›å‡ºfæœ€å°èŠ‚ç‚¹Nodeï¼Œå¹¶å°†Nodeä»OPENä¸­åˆ é™¤ [Node, OPEN] = removeMinf(OPEN); % å°†NodeåŠ å…¥CLOSEDè¡¨ CLOSED&#123;1, length(CLOSED)+1&#125; = Node; disp(['ç¬¬',num2str(length(CLOSED)),'æ­¥ï¼Œ ',... 'ç¬¬',num2str(CLOSED&#123;1,length(CLOSED)&#125;.depth),'å±‚ï¼Œ ',... 'æ€»ä»£ä»·',num2str(CLOSED&#123;1,length(CLOSED)&#125;.f)]); disp(CLOSED&#123;1,length(CLOSED)&#125;.state); % å¦‚æœNodeèŠ‚ç‚¹ä¸ºç›®æ ‡ç»“ç‚¹ï¼Œåˆ™æˆåŠŸï¼Œé€€å‡º if isequal(Node.state,G) disp(\"Success\"); break; end % æ‰©å±•èŠ‚ç‚¹ [OPEN, CLOSED] = expand(Node, G, OPEN, CLOSED, h_select);end æ‰©å±•èŠ‚ç‚¹ æ‰©å±•iï¼Œå¾—åç»§èŠ‚ç‚¹jï¼Œè®¡ç®—f(j)ï¼Œæä¾›è¿”å›çš„æŒ‡é’ˆï¼Œåˆ©ç”¨f(j)å¯¹OPENè¡¨é‡æ–°æ’åºï¼Œè°ƒæ•´äº²å­å…³ç³»åŠæŒ‡é’ˆã€‚ expand.m123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263function [OPEN, CLOSED] = expand(Node, G, OPEN, CLOSED, h_select)%expand æ‰©å±•ç»“ç‚¹% Nodeä¸ºå½“å‰èŠ‚ç‚¹ï¼ŒGä¸ºç›®æ ‡èŠ‚ç‚¹ï¼ŒOPENä¸ºOPENè¡¨ï¼ŒCLOSEDä¸ºCLOSEDè¡¨% OPENä¸ºæ‰©å±•åçš„OPENè¡¨ï¼ŒCLOSEDä¸ºæ‰©å±•åçš„CLOSEDè¡¨% ç”Ÿæˆåç»§èŠ‚ç‚¹neighbor_states = [];len = 0;[m,n] = find(Node.state==0); %æ‰¾åˆ°èŠ‚ç‚¹çš„0ä½ç½®[r, c] = size(Node.state);% ç©ºæ ¼å‘å·¦çš„åç»§èŠ‚ç‚¹if n ~= 1 len = len+1; neighbor_states(:,:,len) = moveLeft(Node.state);end% ç©ºæ ¼å‘å³çš„åç»§èŠ‚ç‚¹if n ~= c len = len+1; neighbor_states(:,:,len) = moveRight(Node.state);end% ç©ºæ ¼å‘ä¸Šçš„åç»§èŠ‚ç‚¹if m ~= 1 len = len+1; neighbor_states(:,:,len) = moveUp(Node.state);end% ç©ºæ ¼å‘ä¸‹çš„åç»§èŠ‚ç‚¹if m ~= r len = len+1; neighbor_states(:,:,len) = moveDown(Node.state);end% å¯¹æ¯ä¸ªåç»§èŠ‚ç‚¹for i = 1:size(neighbor_states,3) neighborNode.state = neighbor_states(:,:,i); %èŠ‚ç‚¹çŠ¶æ€ neighborNode.parent = length(CLOSED); %çˆ¶èŠ‚ç‚¹ % è®¡ç®—f neighborNode.depth = Node.depth+1; %èŠ‚ç‚¹æ·±åº¦ switch h_select case 1 %ä¼°è®¡å‡½æ•°1:å–ä¸€æ ¼å±€ä¸ç›®çš„æ ¼å±€ç›¸æ¯”ï¼Œå…¶ä½ç½®ä¸ç¬¦çš„æ£‹å­æ•°ç›®ã€‚ neighborNode.h = H1(neighborNode.state, G); case 2 %ä¼°ä»·å‡½æ•°2ï¼šå„æ£‹å­ç§»åˆ°ç›®çš„ä½ç½®æ‰€éœ€ç§»åŠ¨è·ç¦»çš„æ€»å’Œã€‚ neighborNode.h = H2(neighborNode.state, G); case 3 %ä¼°ä»·å‡½æ•°3ï¼šå¯¹æ¯ä¸€å¯¹é€†è½¬æ£‹å­ä¹˜ä»¥ä¸€ä¸ªå€æ•°ã€‚ neighborNode.h = H3(neighborNode.state); case 4 %ä¼°ä»·å‡½æ•°4ï¼šå°†ä½ç½®ä¸ç¬¦æ£‹å­æ•°ç›®çš„æ€»å’Œä¸3å€æ£‹å­é€†è½¬æ•°ç›®ç›¸åŠ ã€‚ neighborNode.h = H1(neighborNode.state, G) ... + H3(neighborNode.state); case 5 %ä¼°ä»·å‡½æ•°5ï¼šå„æ£‹å­ä¸ç›®çš„ä½ç½®æ¬§å¼è·ç¦»å¹³æ–¹çš„æ€»å’Œã€‚ neighborNode.h = H5(neighborNode.state, G); end neighborNode.f = neighborNode.depth + neighborNode.h; % æ·»åŠ èŠ‚ç‚¹ [OPEN, CLOSED] = addNode(neighborNode, OPEN, CLOSED);endend ä¼°ä»·å‡½æ•° ä¼°ä»·å‡½æ•°1 å–ä¸€æ ¼å±€ä¸ç›®çš„æ ¼å±€ç›¸æ¯”ï¼Œå…¶ä½ç½®ä¸ç¬¦çš„æ£‹å­æ•°ç›®ã€‚ H1.m1234567891011121314151617function wrongNum = H1(N, G)%H1 ä¼°ä»·å‡½æ•°1 è®¡ç®—èŠ‚ç‚¹Nç›¸å¯¹äºç›®æ ‡æ£‹å±€é”™æ”¾çš„æ£‹å­ä¸ªæ•°% Nä¸ºå½“å‰èŠ‚ç‚¹ï¼ŒGä¸ºç›®æ ‡èŠ‚ç‚¹% WrongNumä¸ºé”™æ”¾çš„æ£‹å­ä¸ªæ•°[r, c] = size(N);wrongNum = 0;% è®¡ç®—èŠ‚ç‚¹Nç›¸å¯¹äºç›®æ ‡æ£‹å±€é”™æ”¾çš„æ£‹å­ä¸ªæ•°for i = 1:r for j = 1:c % é”™æ”¾æ£‹å­ä¸”0ä½ä¸ç®—åœ¨é”™æ”¾ä¸ªæ•°å†… if N(i,j) &amp;&amp; N(i,j)~=G(i,j) wrongNum = wrongNum+1; end endendend ä¼°ä»·å‡½æ•°2 å„æ£‹å­ç§»åˆ°ç›®çš„ä½ç½®æ‰€éœ€ç§»åŠ¨è·ç¦»çš„æ€»å’Œã€‚ H2.m1234567891011function h = H2(N, G)%H2 ä¼°ä»·å‡½æ•°2 å„æ£‹å­ç§»åˆ°ç›®çš„ä½ç½®æ‰€éœ€ç§»åŠ¨è·ç¦»çš„æ€»å’Œ% Nä¸ºå½“å‰èŠ‚ç‚¹ï¼ŒGä¸ºç›®æ ‡èŠ‚ç‚¹% hä¸ºæ‰€éœ€ç§»åŠ¨è·ç¦»çš„æ€»å’Œh = 0;for i = 1:8 [a,b] = find(N==i); [c,d] = find(G==i); h = h + abs(c-a) + abs(d-b);endend ä¼°ä»·å‡½æ•°3 å¯¹æ¯ä¸€å¯¹é€†è½¬æ£‹å­ä¹˜ä»¥ä¸€ä¸ªå€æ•°ï¼Œè¿™é‡Œä¸º$\\times 3$ã€‚ H3.m123456789101112131415function h = H3(N)%H3 ä¼°ä»·å‡½æ•°3 å¯¹æ¯ä¸€å¯¹é€†è½¬æ£‹å­ä¹˜ä»¥ä¸€ä¸ªå€æ•°ã€‚% Nä¸ºå½“å‰èŠ‚ç‚¹% hä¸º3å€é€†è½¬æ£‹å­æ•°h = 0;N1 = [N(1,:),N(2,:),N(3,:)];for i = 1:9 for j = i+1:9 if N1(i) &gt; N1(j) &amp;&amp; N1(i)~=0 &amp;&amp; N1(j)~=0 h = h+1; end endendh = h*3;end ä¼°ä»·å‡½æ•°4 å°†ä½ç½®ä¸ç¬¦æ£‹å­æ•°ç›®çš„æ€»å’Œä¸3å€æ£‹å­é€†è½¬æ•°ç›®ç›¸åŠ ã€‚ 12%ä¼°ä»·å‡½æ•°4ï¼šå°†ä½ç½®ä¸ç¬¦æ£‹å­æ•°ç›®çš„æ€»å’Œä¸3å€æ£‹å­é€†è½¬æ•°ç›®ç›¸åŠ ã€‚neighborNode.h = H1(neighborNode.state, G) + H3(neighborNode.state); ä¼°ä»·å‡½æ•°5ï¼ˆè‡ªå·±è®¾è®¡ï¼‰ å„æ£‹å­ä¸ç›®çš„ä½ç½®æ¬§å¼è·ç¦»å¹³æ–¹çš„æ€»å’Œã€‚ H5.m1234567891011function h = H5(N, G)%H5 ä¼°ä»·å‡½æ•°5 æ¬§å¼è·ç¦»çš„å¹³æ–¹çš„æ€»å’Œ% Nä¸ºå½“å‰èŠ‚ç‚¹ï¼ŒGä¸ºç›®æ ‡èŠ‚ç‚¹% hä¸ºæ¬§å¼è·ç¦»çš„å¹³æ–¹çš„æ€»å’Œh = 0;for i = 1:8 [a,b] = find(N==i); [c,d] = find(G==i); h = h + (c-a)^2 + (d-b)^2;endend ä¾‹é¢˜&emsp;&emsp;åˆ©ç”¨æœ‰åºæœç´¢è§£ä¾‹é¢˜ï¼ˆå·¦å›¾ä¸ºåˆå§‹çŠ¶æ€ï¼Œå³å›¾ä¸ºç›®æ ‡çŠ¶æ€ï¼‰ \\begin{bmatrix} 2 & 8 & 3 \\\\ 1 & 6 & 4 \\\\ 7 & 0 & 5 \\end{bmatrix} \\quad \\quad -> \\quad \\quad \\begin{bmatrix} 1 & 2 & 3 \\\\ 8 & 0 & 4 \\\\ 7 & 6 & 5 \\end{bmatrix} ä¼°ä»·å‡½æ•°1 å–ä¸€æ ¼å±€ä¸ç›®çš„æ ¼å±€ç›¸æ¯”ï¼Œå…¶ä½ç½®ä¸ç¬¦çš„æ£‹å­æ•°ç›®ã€‚ åˆ©ç”¨ä¼°ä»·å‡½æ•°1è¿è¡Œï¼Œæœç´¢æˆåŠŸä¸€å…±ç»å†7ä¸ªæ‰©å±•èŠ‚ç‚¹ã€‚ ä¼°ä»·å‡½æ•°2 å„æ£‹å­ç§»åˆ°ç›®çš„ä½ç½®æ‰€éœ€ç§»åŠ¨è·ç¦»çš„æ€»å’Œã€‚ åˆ©ç”¨ä¼°ä»·å‡½æ•°2è¿è¡Œï¼Œæœç´¢æˆåŠŸä¸€å…±ç»å†6ä¸ªæ‰©å±•èŠ‚ç‚¹ã€‚ ä¼°ä»·å‡½æ•°3 å¯¹æ¯ä¸€å¯¹é€†è½¬æ£‹å­ä¹˜ä»¥ä¸€ä¸ªå€æ•°ï¼Œè¿™é‡Œä¸º$\\times 3$ã€‚ åˆ©ç”¨ä¼°ä»·å‡½æ•°3è¿è¡Œï¼Œæœç´¢æˆåŠŸä¸€å…±ç»å†8ä¸ªæ‰©å±•èŠ‚ç‚¹ã€‚ ä¼°ä»·å‡½æ•°4 å°†ä½ç½®ä¸ç¬¦æ£‹å­æ•°ç›®çš„æ€»å’Œä¸3å€æ£‹å­é€†è½¬æ•°ç›®ç›¸åŠ ã€‚ åˆ©ç”¨ä¼°ä»·å‡½æ•°4è¿è¡Œï¼Œæœç´¢æˆåŠŸä¸€å…±ç»å†6ä¸ªæ‰©å±•èŠ‚ç‚¹ã€‚ ä¼°ä»·å‡½æ•°5 å„æ£‹å­ä¸ç›®çš„ä½ç½®æ¬§å¼è·ç¦»å¹³æ–¹çš„æ€»å’Œã€‚ åˆ©ç”¨ä¼°ä»·å‡½æ•°5è¿è¡Œï¼Œæœç´¢æˆåŠŸä¸€å…±ç»å†6ä¸ªæ‰©å±•èŠ‚ç‚¹ã€‚ &emsp;&emsp;å¯¹äºè¯¥å…«æ•°ç ä¾‹é¢˜ï¼Œä¼°ä»·å‡½æ•°2ã€4ã€5æ‰©å±•èŠ‚ç‚¹æœ€å°‘ï¼Œå³ä¼°ä»·å‡½æ•°2ã€4ã€5çš„æœç´¢æ•ˆç‡æœ€é«˜ã€‚ Matlab GUI&emsp;&emsp;ä»mainPage.må¼€å§‹è¿è¡Œï¼Œå¯æ‰“å¼€å…«æ•°ç GUIé¡µé¢ã€‚ï¼ˆå…¶ä¸­åˆå§‹èŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹å¯ç¼–è¾‘ï¼‰","categories":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://gy23333.github.io/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"}],"tags":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://gy23333.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"æœ‰åºæœç´¢","slug":"æœ‰åºæœç´¢","permalink":"https://gy23333.github.io/tags/%E6%9C%89%E5%BA%8F%E6%90%9C%E7%B4%A2/"},{"name":"å…«æ•°ç é—®é¢˜","slug":"å…«æ•°ç é—®é¢˜","permalink":"https://gy23333.github.io/tags/%E5%85%AB%E6%95%B0%E7%A0%81%E9%97%AE%E9%A2%98/"}]},{"title":"é—®é¢˜å½’çº¦â€”â€”æ¢µå¡”é—®é¢˜","slug":"é—®é¢˜å½’çº¦â€”â€”æ¢µå¡”é—®é¢˜","date":"2020-05-11T00:35:33.000Z","updated":"2024-11-11T03:57:58.129Z","comments":true,"path":"2020/05/11/é—®é¢˜å½’çº¦â€”â€”æ¢µå¡”é—®é¢˜/","link":"","permalink":"https://gy23333.github.io/2020/05/11/%E9%97%AE%E9%A2%98%E5%BD%92%E7%BA%A6%E2%80%94%E2%80%94%E6%A2%B5%E5%A1%94%E9%97%AE%E9%A2%98/","excerpt":"é—®é¢˜å½’çº¦ï¼ˆproblem reductionï¼‰æ˜¯ä¸€ç§åŸºäºçŠ¶æ€ç©ºé—´çš„é—®é¢˜æè¿°ä¸æ±‚è§£æ–¹æ³•ã€‚å·²çŸ¥é—®é¢˜çš„æè¿°ï¼Œé€šè¿‡ä¸€ç³»åˆ—å˜æ¢æŠŠæ­¤é—®é¢˜æœ€ç»ˆå˜ä¸ºä¸€ä¸ªæœ¬åŸé—®é¢˜é›†åˆã€‚","text":"é—®é¢˜å½’çº¦ï¼ˆproblem reductionï¼‰æ˜¯ä¸€ç§åŸºäºçŠ¶æ€ç©ºé—´çš„é—®é¢˜æè¿°ä¸æ±‚è§£æ–¹æ³•ã€‚å·²çŸ¥é—®é¢˜çš„æè¿°ï¼Œé€šè¿‡ä¸€ç³»åˆ—å˜æ¢æŠŠæ­¤é—®é¢˜æœ€ç»ˆå˜ä¸ºä¸€ä¸ªæœ¬åŸé—®é¢˜é›†åˆã€‚ æ¢µå¡”é—®é¢˜æè¿°&emsp;&emsp;æœ‰3æ ¹æŸ±å­1ã€2ã€3æŸ±å’ŒNä¸ªä¸åŒå°ºå¯¸çš„åœ†ç›˜ï¼Œåˆå§‹åœ†ç›˜å¥—åœ¨1æŸ±ä¸Šï¼Œç›˜çš„å°ºå¯¸ç”±ä¸‹åˆ°ä¸Šä¾æ¬¡å˜å°ã€‚è¦æ±‚å°†åœ†ç›˜å…¨éƒ¨æ¬åˆ°3æŸ±ï¼Œæ¬è¿è¿‡ç¨‹ä¸­è¦éµå®ˆä¸‹é¢è§„å®šï¼š æ¯æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜ï¼› å¤§ç›˜ä¸èƒ½å åœ¨å°ç›˜ä¸Šé¢ã€‚ æ±‚è§£æ€è·¯&emsp;&emsp;åŸé—®é¢˜å¯ä»¥æ‹†åˆ†æˆä¸‹åˆ—å­é—®é¢˜ã€‚ï¼ˆä»¥4åœ†ç›˜é—®é¢˜ä¸ºä¾‹ï¼Œåœ†ç›˜ä»å°åˆ°å¤§åˆ†åˆ«æ˜¯Aã€Bã€Cã€Dï¼‰ ç§»åŠ¨åœ†ç›˜Aã€Bå’ŒCè‡³æŸ±2ï¼ˆ3åœ†ç›˜é—®é¢˜ï¼‰ ç§»åŠ¨åœ†ç›˜Dåˆ°æŸ±3ï¼ˆå•åœ†ç›˜é—®é¢˜ï¼‰ ç§»åŠ¨åœ†ç›˜Aã€Bå’ŒCè‡³æŸ±3ï¼ˆ3åœ†ç›˜é—®é¢˜ï¼‰ å¦‚æ­¤å°†4åœ†ç›˜é—®é¢˜åŒ–ä¸ºä¸¤ä¸ª3åœ†ç›˜é—®é¢˜å’Œä¸€ä¸ªå•åœ†ç›˜é—®é¢˜ï¼Œè€Œ3åœ†ç›˜é—®é¢˜è¿˜å¯ç»§ç»­åˆ†è§£ï¼Œç›´åˆ°åŒ–ä¸ºå•åœ†ç›˜é—®é¢˜ï¼ˆæœ¬åŸé—®é¢˜ï¼‰çš„é›†åˆã€‚è¿™ä¾¿æ˜¯é—®é¢˜å½’çº¦ã€‚ Matlabä»£ç è°ƒç”¨ä»£ç 1234567891011121314151617clear; %æ¸…é™¤å˜é‡% è®¾ç½®çš„åœ†ç›˜ä¸ªæ•°nn = 4;if n &lt; 1 fprintf('åœ†ç›˜ä¸ªæ•°éœ€ä¸ºæ­£æ•´æ•°ã€‚\\n');else HannoiStep = hannoi(n, 'A', 'B', 'C'); % è§£æ¢µå¡”é—®é¢˜ HannoiStep clear hannoi % æ¸…é™¤hannoiæ–‡ä»¶çš„å˜é‡ if n &lt;= 7 StepAnimation(HannoiStep); % åŠ¨ç”»æ¼”ç¤ºæ­¥éª¤ else fprintf('åœ†ç›˜å¤ªå¤šäº†ï¼Œæ²¡ä½ç½®ç”»ï¼Œåœ†ç›˜æ•°1ï½7å¯ä»¥æ¼”ç¤ºã€‚\\n'); endend æ ¸å¿ƒä»£ç hannoi.m1234567891011121314151617181920212223242526272829303132% nä¸ªåœ†ç›˜ï¼Œè¿”å›æ­¥éª¤çŸ©é˜µfunction HannoiStep = hannoi(n, A, B, C)% åˆ›å»ºæ­¥éª¤çŸ©é˜µpersistent steps;if isempty(steps) steps = ones(1,n);end% å¦‚æœæ˜¯ä¸€ä¸ªåœ†ç›˜ï¼Œç›´æ¥ä»Aç§»åŠ¨åˆ°Cif n == 1 [r, ~] = size(steps); step = steps(r,:); step(1) = C-'A'+1; steps = [steps; step];% fprintf('1 å·ç¢Ÿ : %s ---&gt; %s\\n', A, C); HannoiStep = steps;else % å¦åˆ™ï¼Œå…ˆå°†n-1ä¸ªåœ†ç›˜ä»Aç»è¿‡Cç§»åŠ¨åˆ°B hannoi(n-1, A, C, B); % å°†ç¬¬nä¸ªåœ†ç›˜ä»Aç§»åŠ¨åˆ°C [r, ~] = size(steps); step = steps(r,:); step(n) = C-'A'+1; steps = [steps; step];% fprintf('%d å·ç¢Ÿ : %s ---&gt; %s\\n', n, A, C); % å°†n-1ä¸ªåœ†ç›˜ä»Bç»è¿‡Aç§»åŠ¨åˆ°C hannoi(n-1, B, A, C); HannoiStep = steps;endend åŠ¨ç”»ä»£ç StepAnimation.m123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354function StepAnimation(HannoiStep)[r,~] = size(HannoiStep);for index = 1 : 1 : r step = HannoiStep(index,:); pause_times = 1; DrawFrame(step) pause(pause_times); if index &lt; r clf; % æ¸…é™¤å›¾å½¢ endendendfunction DrawFrame(step)[~,n] = size(step); % nä¸ºåœ†ç›˜æ•°% åˆå§‹é¢œè‰²æ•°ç»„coArray = [ [0 0.4470 0.7410]; [0.8500 0.3250 0.0980]; [0.4660 0.6740 0.1880]; [0.9290 0.6940 0.1250]; [0.3010 0.7450 0.9330]; [0.4940 0.1840 0.5560]; [0.6350 0.0780 0.1840]; ]; % åˆå§‹xåæ ‡æ•°ç»„xArray = linspace(0.5,1.5,n);for i = 1:3 subplot(1,3,i); axis([-1.5,1.5,0,3]); % ç»˜åˆ¶æŸ± line([0 0],[0.5 3],'LineWidth',10,'Color',[0.3 0.3 0.3]); line([-1.5 1.5],[0.5 0.5],'LineWidth',10,'Color',[0.3 0.3 0.3]); % ç»˜åˆ¶åœ†ç›˜ for index = n : -1 : 1 % å¦‚æœè¯¥åœ†ç›˜åœ¨è¿™æ ¹æŸ±ä¸Š if step(index) == i Ynum = 0; for j = n : -1 : index+1 if step(j) == i Ynum = Ynum+1; end end % ç”»åœ†ç›˜ line([-xArray(index) xArray(index)],[0.7+0.3*Ynum... 0.7+0.3*Ynum],'LineWidth',30,'Color',coArray(index,:)); end end axis off;endend è§£ç­”&emsp;&emsp;ä»¥4åœ†ç›˜é—®é¢˜ä¸ºä¾‹ï¼Œè¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯æ±‚è§£ã€‚ ä¸æˆ–å›¾ æ­¥éª¤ HannoiStep =\\begin{bmatrix} 1\\quad 1\\quad 1\\quad 1\\\\ 2\\quad 1\\quad 1\\quad 1\\\\ 2\\quad 3\\quad 1\\quad 1\\\\ 3\\quad 3\\quad 1\\quad 1\\\\ 3\\quad 3\\quad 2\\quad 1\\\\ 1\\quad 3\\quad 2\\quad 1\\\\ 1\\quad 2\\quad 2\\quad 1\\\\ 2\\quad 2\\quad 2\\quad 1\\\\ 2\\quad 2\\quad 2\\quad 3\\\\ 3\\quad 2\\quad 2\\quad 3\\\\ 3\\quad 1\\quad 2\\quad 3\\\\ 1\\quad 1\\quad 2\\quad 3\\\\ 1\\quad 1\\quad 3\\quad 3\\\\ 2\\quad 1\\quad 3\\quad 3\\\\ 2\\quad 3\\quad 3\\quad 3\\\\ 3\\quad 3\\quad 3\\quad 3\\\\ \\end{bmatrix}","categories":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://gy23333.github.io/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"}],"tags":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://gy23333.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"é—®é¢˜å½’çº¦","slug":"é—®é¢˜å½’çº¦","permalink":"https://gy23333.github.io/tags/%E9%97%AE%E9%A2%98%E5%BD%92%E7%BA%A6/"},{"name":"æ¢µå¡”é—®é¢˜","slug":"æ¢µå¡”é—®é¢˜","permalink":"https://gy23333.github.io/tags/%E6%A2%B5%E5%A1%94%E9%97%AE%E9%A2%98/"}]},{"title":"SURFç®—å­","slug":"SURFç®—å­","date":"2020-04-24T08:44:51.000Z","updated":"2024-11-11T03:57:58.115Z","comments":true,"path":"2020/04/24/SURFç®—å­/","link":"","permalink":"https://gy23333.github.io/2020/04/24/SURF%E7%AE%97%E5%AD%90/","excerpt":"&emsp;&emsp;SURF (Speeded Up Robust Features, åŠ é€Ÿç¨³å¥ç‰¹å¾) æ˜¯ä¸€ä¸ªç¨³å¥çš„å›¾åƒè¯†åˆ«å’Œæè¿°ç®—æ³•ï¼Œé¦–å…ˆäº2006å¹´å‘è¡¨åœ¨ECCVå¤§ä¼šä¸Šã€‚è¿™ä¸ªç®—æ³•å¯è¢«ç”¨äºè®¡ç®—æœºè§†è§‰ä»»åŠ¡ï¼Œå¦‚ç‰©ä»¶è¯†åˆ«å’Œ3Dé‡æ„ã€‚ä»–éƒ¨åˆ†çš„çµæ„Ÿæ¥è‡ªäºSIFTç®—æ³•ã€‚SURFæ ‡å‡†çš„ç‰ˆæœ¬æ¯”SIFTè¦å¿«æ•°å€ï¼Œå¹¶ä¸”å…¶ä½œè€…å£°ç§°åœ¨ä¸åŒå›¾åƒå˜æ¢æ–¹é¢æ¯”SIFTæ›´åŠ ç¨³å¥ã€‚","text":"&emsp;&emsp;SURF (Speeded Up Robust Features, åŠ é€Ÿç¨³å¥ç‰¹å¾) æ˜¯ä¸€ä¸ªç¨³å¥çš„å›¾åƒè¯†åˆ«å’Œæè¿°ç®—æ³•ï¼Œé¦–å…ˆäº2006å¹´å‘è¡¨åœ¨ECCVå¤§ä¼šä¸Šã€‚è¿™ä¸ªç®—æ³•å¯è¢«ç”¨äºè®¡ç®—æœºè§†è§‰ä»»åŠ¡ï¼Œå¦‚ç‰©ä»¶è¯†åˆ«å’Œ3Dé‡æ„ã€‚ä»–éƒ¨åˆ†çš„çµæ„Ÿæ¥è‡ªäºSIFTç®—æ³•ã€‚SURFæ ‡å‡†çš„ç‰ˆæœ¬æ¯”SIFTè¦å¿«æ•°å€ï¼Œå¹¶ä¸”å…¶ä½œè€…å£°ç§°åœ¨ä¸åŒå›¾åƒå˜æ¢æ–¹é¢æ¯”SIFTæ›´åŠ ç¨³å¥ã€‚ SURFç®—å­â€”â€”åŸç†ç‰¹å¾ç‚¹æ£€æµ‹åŸºäºHessiançŸ©é˜µçš„ç‰¹å¾ç‚¹æ£€æµ‹&emsp;&emsp;å¯¹äºè¾“å…¥å›¾åƒä¸­çš„ä¸€ç‚¹$X=(x,y)$ï¼Œå…¶HessiançŸ©é˜µå®šä¹‰å¦‚ä¸‹ H(X,\\sigma)= \\begin{bmatrix} L_{xx}(X,\\sigma)&L_{xy}(X,\\sigma)\\\\ L_{xy}(X,\\sigma)&L_{yy}(X,\\sigma) \\end{bmatrix}å…¶ä¸­$\\sigma$ä¸ºHessiançŸ©é˜µçš„å°ºåº¦ï¼Œ$L_{xx}$æ˜¯é«˜æ–¯äºŒé˜¶åå¯¼æ•°$\\frac {\\partial^2}{\\partial x^2}g(\\sigma)$ä¸è¾“å…¥å›¾åƒåœ¨ç‚¹$X$å¤„çš„å·ç§¯ï¼Œå…¶ä½™ç±»ä¼¼ã€‚ &emsp;&emsp;è¡Œåˆ—å¼çš„å€¼$det(H)$å³ä¸ºç‚¹$X$å¤„çš„å“åº” det(H)=L_{xx}L_{yy}-L_{xy}^2åŸºäºBoxæ»¤æ³¢å™¨çš„HessiançŸ©é˜µè¿‘ä¼¼è®¡ç®—&emsp;&emsp;åˆ©ç”¨Boxæ»¤æ³¢å™¨åšHessiançŸ©é˜µè¿‘ä¼¼è®¡ç®—ï¼ŒåŠ å¿«è®¡ç®—é€Ÿåº¦ã€‚ åœ¨LoGç®—å­ä¸­ï¼Œ h(x,y)=e^{-\\frac {x^2+y^2}{2\\sigma^2}} \\triangledown^2h(r)=(\\frac{r^2-\\sigma^2}{\\sigma^4})e^{-\\frac {r^2}{2\\sigma^2}},\\quad r^2=x^2+y^2 &emsp;&emsp;å¯ä»¥ç”¨Boxæ»¤æ³¢å™¨è¿‘ä¼¼è®¡ç®—$\\triangledown^2h(r)$ &emsp;&emsp;å¦‚æ­¤å¯¹é«˜æ–¯äºŒé˜¶å¾®åˆ†æ¨¡æ¿è¿›è¡Œç®€åŒ–ï¼Œä»è€Œé™ä½è®¡ç®—é‡ï¼Œé«˜æ–¯äºŒé˜¶å¯¼æ•°å‡½æ•°çš„ç¦»æ•£åŒ–å’Œæˆªæ–­ä¼šé€ æˆä¸€å®šçš„è¯¯å·®ã€‚ &emsp;&emsp;åˆ©ç”¨ç®€åŒ–åçš„Boxæ»¤æ³¢æ¨¡ç‰ˆå¯¹å›¾åƒè¿›è¡Œå·ç§¯ï¼Œå¾—åˆ°HessiançŸ©é˜µçš„è¿‘ä¼¼è®¡ç®— H(X,N)= \\begin{bmatrix} D_{xx}(X,N)&D_{xy}(X,N)\\\\ D_{xy}(X,N)&D_{yy}(X,N) \\end{bmatrix}å…¶ä¸­ï¼ŒNä¸ºBoxæ»¤æ³¢å™¨çš„å¤§å°ã€‚ &emsp;&emsp;è¡Œåˆ—å¼çš„å€¼$det(H)$å³ä¸ºç‚¹$X$å¤„çš„å“åº”ï¼ˆä½†æ˜¯è¦åŠ ä¸Šæƒé‡ï¼‰ det(H_{approx})=D_{xx}D_{yy}-(wD_{xy})^2,\\quad w \\approx 0.9å…¶ä¸­ï¼Œæƒé‡$w$ä¸ºå¹³è¡¡å› å­ w=\\frac {|L_{xy}(1.2)|_F|D_{yy}(9)|_F}{|L_{yy}(1.2)|_F|D_{xy}(9)|_F}=0.912...\\approx 0.9åŸºäºç§¯åˆ†å›¾çš„Boxæ»¤æ³¢å™¨å¿«é€Ÿè®¡ç®—&emsp;&emsp;åˆ©ç”¨ç§¯åˆ†å›¾å¿«é€Ÿè®¡ç®—Boxå·ç§¯æ»¤æ³¢ã€‚ &emsp;&emsp;ç§¯åˆ†å›¾æ˜¯è¾“å…¥å›¾åƒç»è¿‡åƒç´ é—´çš„ç´¯åŠ è¿ç®—å¾—åˆ°çš„æ–°å›¾åƒã€‚ä»»æ„ä¸€ç‚¹$(x,y)$çš„å€¼æ˜¯ä»è¾“å…¥å›¾åƒçš„å·¦ä¸Šè§’åˆ°è¿™ä¸ªç‚¹æ‰€æ„æˆçš„çŸ©å½¢åŒºåŸŸå†…æ‰€æœ‰ç‚¹çš„ç°åº¦å€¼ä¹‹å’Œã€‚ &emsp;&emsp;æ¯ä¸ªç‚¹çš„ç§¯åˆ†å¯ä»¥ç”¨è¿­ä»£çš„æ–¹å¼è·å¾— II(x,y)=II(x,y-1)+S(x-1,y)+I(x,y) &emsp;&emsp;è®¡ç®—çŸ©é˜µABCDä¸­åƒç´ å’Œåªéœ€è¦ç§¯åˆ†å›¾ä¸­Aã€Bã€Cã€Då››ç‚¹çš„å€¼å’Œ3æ¬¡åŠ æ³•è¿ç®— å°ºåº¦é‡‘å­—å¡”æ„å»º&emsp;&emsp;ä¸€èˆ¬å°ºåº¦é‡‘å­—å¡”é‡‡ç”¨å¯¹å›¾åƒçš„ä¸‹é‡‡æ ·ï¼Œä½¿ç”¨åŒä¸€ä¸ªæ»¤æ³¢å™¨æ»¤æ³¢ã€‚ &emsp;&emsp;åœ¨SURFç®—å­ä¸­ï¼Œç”±äºç§¯åˆ†å›¾å’ŒBoxæ»¤æ³¢çš„è®¡ç®—ä¾¿åˆ©æ€§ï¼Œå›ºå®šå›¾åƒå°ºåº¦ï¼Œä¸Šé‡‡æ ·æ»¤æ³¢å™¨ã€‚ &emsp;&emsp;ä¸SIFTç®—å­ç±»ä¼¼ï¼Œ å°†å°ºåº¦ç©ºé—´åˆ’åˆ†ä¸ºè‹¥å¹²ç»„(Octaves)ï¼Œæ¯ç»„åˆç”±è‹¥å¹²å›ºå®šå±‚ï¼ˆIntervalï¼‰ç»„æˆ æ¯ç»„å°ºåº¦é‡‘å­—å¡”çš„å„å±‚å°ºåº¦æˆç­‰å·®æ•°åˆ— ä¸åŒç»„çš„å°ºåº¦é‡‘å­—å¡”çš„å…¬å·®ç­‰æ¯”å¢é•¿ï¼ˆ$O,S$ä¸ºç»„ç´¢å¼•ã€å±‚ç´¢å¼•ï¼Œä»$0$å¼€å§‹ï¼‰ Filter Size = 3\\times[2^{o+1}\\times (s+1)+1] &emsp;&emsp;ä¸ºäº†ä¿æŒå°ºåº¦ç©ºé—´çš„è¿ç»­æ€§ï¼Œç›¸é‚»ç»„å°ºåº¦é‡‘å­—å¡”æœ‰éƒ¨åˆ†å±‚é‡å ï¼ˆSIFTä¸­åŒæ ·ï¼Œ$S+3$ä¸ªå›¾æ‰èƒ½å¾—åˆ°$S$ä¸ªå°ºåº¦çš„ç‰¹å¾ç‚¹æ£€æµ‹ç»“æœï¼‰ ç‰¹å¾ç‚¹å®šä½ éæå¤§æŠ‘åˆ¶ ä¸SIFTä¸­çš„åšæ³•ç›¸ä¼¼ï¼Œ æ¯ç»„ä¸­é€‰ç›¸é‚»3å±‚Hessianè¡Œåˆ—å¼å›¾åƒï¼Œå¯¹äºä¸­é—´å±‚å›¾åƒä¸­çš„æ¯ä¸ªå¾…æ¯”è¾ƒç‚¹ï¼Œé€‰å–åŒå±‚çš„8ä¸ªç›¸é‚»ç‚¹å’Œä¸Šä¸‹å±‚çš„9ä¸ªç›¸é‚»ç‚¹è¿›è¡Œæ¯”è¾ƒ è‹¥è¯¥ç‚¹å€¼å¤§äºå…¶ä»–26ç‚¹ï¼Œåˆ™ä¸ºç‰¹å¾ç‚¹ å°ºåº¦ç©ºé—´æ’å€¼ ä¸SIFTä¸­çš„åšæ³•ç›¸åŒï¼Œå¾—åˆ°äºšåƒç´ çº§çš„ç‰¹å¾å€¼ï¼Œå‡å°ä¸åŒç»„ç¬¬ä¸€å±‚ä¹‹é—´çš„å·®å¼‚ã€‚ ç‰¹å¾ç‚¹æè¿°ç‰¹å¾ç‚¹ä¸»æ–¹å‘&emsp;&emsp;ä¸ºäº†ä¿è¯ç‰¹å¾æè¿°å­å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œä¸SIFTä¸€æ ·ï¼Œéœ€è¦å¯¹æ¯ä¸ªç‰¹å¾ç‚¹åˆ†é…ä¸€ä¸ªä¸»æ–¹å‘ã€‚ é€‰æ‹©ä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒã€åŠå¾„ä¸º$6s$ï¼ˆ$s$ä¸ºç‰¹å¾ç‚¹çš„å°ºåº¦ï¼‰çš„åœ†å½¢é‚»åŸŸ è®¡ç®—è¯¥åœ†å½¢é‚»åŸŸå†…å„ç‚¹çš„$x$ã€$y$æ–¹å‘Haarå°æ³¢å“åº”ï¼ˆHaarå°æ³¢è¾¹é•¿å–$4s$ï¼‰ è®¡ç®—å›¾åƒçš„Haarå°æ³¢å“åº”ï¼Œå®é™…ä¸Šå°±æ˜¯å¯¹å›¾åƒè¿›è¡Œæ¢¯åº¦è¿ç®—ï¼Œåªä¸è¿‡éœ€è¦åˆ©ç”¨ç§¯åˆ†å›¾ï¼Œæé«˜æ¢¯åº¦è®¡ç®—æ•ˆç‡ã€‚ ç”¨$\\sigma = 2.5s$çš„é«˜æ–¯å‡½æ•°å¯¹å“åº”åŠ æƒ ä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒï¼Œå¼ è§’ä¸º$\\pi /3$çš„æ‰‡å½¢æ»‘åŠ¨çª—å£ï¼Œè®¡ç®—çª—å£å†…çš„Haarå°æ³¢å“åº”å€¼$dx$ã€$dy$çš„ç´¯åŠ  m_w=\\sum\\limits_w dx+\\sum\\limits_w dy\\\\ \\theta_w=\\arctan(\\sum\\limits_w dx/\\sum\\limits_w dy) ç‰¹å¾ç‚¹ä¸»æ–¹å‘ä¸ºæœ€å¤§çš„Haarå“åº”ç´¯åŠ å€¼æ‰€å¯¹åº”çš„æ–¹å‘ \\theta = \\theta_w|max\\{m_w\\} Haarå°æ³¢å“åº”å’Œæè¿°ç¬¦ æ„å»ºä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒã€æ–¹å‘ä¸ºç‰¹å¾ç‚¹ä¸»æ–¹å‘ã€è¾¹é•¿ä¸º$20s$çš„æ­£æ–¹å½¢åŒºåŸŸ å°†åŒºåŸŸåˆ’åˆ†æˆ$4\\times 4$å­å— æ¯ä¸ªå­å—å‡åŒ€é‡‡æ ·$5\\times 5$ä¸ªæ ·æœ¬ç‚¹ è®¡ç®—å„é‡‡æ ·ç‚¹çš„Haarå°æ³¢å“åº”ï¼ˆHaarå°æ³¢è¾¹é•¿ä¸º$2s$ï¼‰ ç”¨ä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒç‚¹ï¼Œ$\\sigma =3.3s$çš„é«˜æ–¯å‡½æ•°å¯¹å“åº”åŠ æƒ åœ¨å„å­å—å†…ç»Ÿè®¡$\\sum dx$ã€$\\sum |dx|$ã€$\\sum dy$ã€$\\sum |dy|$å½¢æˆå­å—ç‰¹å¾å‘é‡ æ¯ä¸ªå­å—ç»Ÿè®¡ä¸€ä¸ªå››ç»´ç‰¹å¾å‘é‡$\\vec v$ \\vec v = (\\sum dx,\\sum |dx|,\\sum dy,\\sum |dy|) å°†$4\\times 4$ä¸ªå­å—çš„ç‰¹å¾å‘é‡$\\vec v$ç›¸è¿ï¼Œå¾—é•¿åº¦ä¸º64çš„ç‰¹å¾å‘é‡ï¼Œå…·æœ‰äº®åº¦ä¸å˜æ€§ å°†ç‰¹å¾å‘é‡å½’ä¸€åŒ–ï¼Œå…·æœ‰å¯¹æ¯”åº¦ä¸å˜æ€§ SURFæè¿°å­å¯¹äºä¸åŒçº¹ç†çš„åŒºåˆ†æ€§ å¿«é€Ÿç´¢å¼•åŒ¹é… åœ¨æ£€æµ‹é˜¶æ®µï¼Œè®°å½•æ‹‰æ™®æ‹‰æ–¯ç®—å­çš„ç¬¦å·ï¼ˆHessiançŸ©é˜µçš„è¿¹çš„ç¬¦å·ï¼‰ åœ¨åŒ¹é…é˜¶æ®µï¼ŒåŒ¹é…æ‹‰æ™®æ‹‰æ–¯ç®—å­ç¬¦å·ç›¸åŒçš„ç‰¹å¾ï¼Œä»è€Œé™ä½è¿ç®—é‡ å‚è€ƒ Paper: SURF: Speeded Up Robust Features SenitCo: å›¾åƒç‰¹å¾ä¹‹SURFç‰¹å¾åŒ¹é…","categories":[{"name":"Computer Vision","slug":"Computer-Vision","permalink":"https://gy23333.github.io/categories/Computer-Vision/"}],"tags":[{"name":"ç‰¹å¾æè¿°","slug":"ç‰¹å¾æè¿°","permalink":"https://gy23333.github.io/tags/%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0/"},{"name":"SURFç®—å­","slug":"SURFç®—å­","permalink":"https://gy23333.github.io/tags/SURF%E7%AE%97%E5%AD%90/"}]},{"title":"SIFTç®—å­","slug":"SIFTç®—å­","date":"2020-04-22T06:56:50.000Z","updated":"2024-11-11T03:57:58.121Z","comments":true,"path":"2020/04/22/SIFTç®—å­/","link":"","permalink":"https://gy23333.github.io/2020/04/22/SIFT%E7%AE%97%E5%AD%90/","excerpt":"&emsp;&emsp;å°ºåº¦ä¸å˜ç‰¹å¾è½¬æ¢(Scale-invariant feature transform æˆ– SIFT)æ˜¯ä¸€ç§æœºå™¨è§†è§‰çš„ç®—æ³•ç”¨æ¥ä¾¦æµ‹ä¸æè¿°å½±åƒä¸­çš„å±€éƒ¨æ€§ç‰¹å¾ï¼Œå®ƒåœ¨ç©ºé—´å°ºåº¦ä¸­å¯»æ‰¾æå€¼ç‚¹ï¼Œå¹¶æå–å‡ºå…¶ä½ç½®ã€å°ºåº¦ã€æ—‹è½¬ä¸å˜æ•°ï¼Œèç‰¹å¾ç‚¹å’Œæè¿°äºä¸€ä½“ã€‚","text":"&emsp;&emsp;å°ºåº¦ä¸å˜ç‰¹å¾è½¬æ¢(Scale-invariant feature transform æˆ– SIFT)æ˜¯ä¸€ç§æœºå™¨è§†è§‰çš„ç®—æ³•ç”¨æ¥ä¾¦æµ‹ä¸æè¿°å½±åƒä¸­çš„å±€éƒ¨æ€§ç‰¹å¾ï¼Œå®ƒåœ¨ç©ºé—´å°ºåº¦ä¸­å¯»æ‰¾æå€¼ç‚¹ï¼Œå¹¶æå–å‡ºå…¶ä½ç½®ã€å°ºåº¦ã€æ—‹è½¬ä¸å˜æ•°ï¼Œèç‰¹å¾ç‚¹å’Œæè¿°äºä¸€ä½“ã€‚ SIFTç®—å­â€”â€”ç®—æ³•å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹&emsp;&emsp;å›¾åƒåœ¨ä¸åŒçš„å°ºåº¦ä¸‹ç”¨é«˜æ–¯æ»¤æ³¢å™¨è¿›è¡Œå·ç§¯ï¼Œç„¶ååˆ©ç”¨è¿ç»­é«˜æ–¯æ¨¡ç³ŠåŒ–å›¾åƒå·®å¼‚æ¥æ‰¾å‡ºå…³é”®ç‚¹ã€‚ é«˜æ–¯é‡‘å­—å¡”æ„å»º&emsp;&emsp;å›¾åƒçš„å°ºåº¦ç©ºé—´è¢«å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•° $L(x,y,\\sigma)$ï¼Œå®ƒæ˜¯ç”±å¯å˜å°ºåº¦é«˜æ–¯å‡½æ•°$G(x,y,\\sigma)$ä¸è¾“å…¥å›¾åƒ$I(x,y)$çš„å·ç§¯äº§ç”Ÿçš„ã€‚ L(x,y,\\sigma)=G(x,y,\\sigma)*I(x,y) G(x,y,\\sigma)=\\frac1{2\\pi \\sigma^2}e^{-\\frac{x^2+y^2}{2\\sigma ^2}}$\\sigma$æ˜¯å°ºåº¦åæ ‡(å°ºåº¦å˜åŒ–å› å­)ï¼Œ$\\sigma$å¤§å°å†³å®šå›¾åƒçš„å¹³æ»‘ç¨‹åº¦ï¼Œ$\\sigma$å€¼è¶Šå¤§å›¾åƒæ¨¡ç³Šå¾—è¶Šä¸¥é‡ã€‚å¤§å°ºåº¦å¯¹åº”å›¾åƒçš„æ¦‚è²Œç‰¹å¾ï¼Œå°å°ºåº¦å¯¹åº”å›¾åƒçš„ç»†èŠ‚ç‰¹å¾ã€‚ä¸€èˆ¬æ ¹æ®$3\\sigma$åŸåˆ™ï¼Œé«˜æ–¯æ ¸çŸ©é˜µçš„å¤§å°è®¾ä¸º$(6\\sigma +1)\\times (6\\sigma +1)$ã€‚ &emsp;&emsp;SIFTç®—å­ä¸­çš„é«˜æ–¯é‡‘å­—å¡”ç”±å¤šä¸ªç»„ï¼ˆOctaveï¼‰ç»„æˆï¼Œè€Œæ¯ä¸ªç»„ï¼ˆOctaveï¼‰ç”±å¤šå±‚ï¼ˆIntervalï¼‰ç»„æˆã€‚ &emsp;&emsp;æ¯ç»„å›¾åƒçš„ç¬¬ä¸€å±‚ç”±ä¸Šä¸€ç»„çš„ç¬¬ä¸€å±‚é«˜æ–¯é‡‘å­—å¡”é™é‡‡æ ·è€Œå¾—ï¼Œæ¯ç»„çš„ä¸‹ä¸€å±‚ç”±ä¸Šä¸€å±‚é«˜æ–¯æ»¤æ³¢è€Œå¾—ã€‚ &emsp;&emsp;å…ˆæŒ‰é«˜æ–¯é‡‘å­—å¡”å°†åŸå›¾åƒåŒ–ä¸ºå¤šç»„ï¼ˆOctaveï¼‰ï¼Œåä¸€ç»„çš„å°ºå¯¸æ˜¯å‰ä¸€ç»„çš„$\\frac 12$ã€‚æ¯ç»„å†ç”±ç¬¬ä¸€å±‚è¿›è¡Œé«˜æ–¯æ»¤æ³¢ï¼ŒåŒç»„çš„å›¾åƒå°ºå¯¸ç›¸åŒã€‚ &emsp;&emsp;åœ¨é™é‡‡æ ·æ—¶ï¼Œé«˜æ–¯é‡‘å­—å¡”ä¸­ä¸€ç»„(Octive)çš„åº•å±‚å›¾åƒæ˜¯ç”±å‰ä¸€ç»„å›¾åƒçš„å€’æ•°ç¬¬3å¼ å›¾åƒéš”ç‚¹é‡‡æ ·å¾—åˆ°ã€‚ &emsp;&emsp;é‡‘å­—å¡”ç»„æ•°ï¼ˆOctaveï¼‰å¯ç”±åŸå§‹å›¾åƒå’Œå¡”é¡¶å›¾åƒçš„å¤§å°ä¹‹æ¯”ç®—å¾—ã€‚Octave = \\log_2 \\frac {min(width_0,height_0)}{min(width,height)}å¼ä¸­ï¼Œ$width_0ã€height_0$åˆ†åˆ«ä¸ºåŸå§‹å›¾åƒçš„å®½é«˜ï¼Œ$widthã€height$ä¸ºå¡”é¡¶å›¾åƒçš„å®½é«˜ã€‚ &emsp;&emsp;æ¯ç»„åˆ†ä¸º$S$ä¸ªå°ºåº¦é—´éš”ï¼ˆåš$S$æ¬¡é«˜æ–¯æ»¤æ³¢ï¼‰ï¼Œç›¸é‚»ä¸¤ä¸ªå°ºåº¦çš„$\\sigma$ä¹‹æ¯”ä¸ºï¼š k=2^{\\frac 1S}åˆ™æ¯ä¸€ç»„åŒ…å«$1$ï¼Œ$2^{\\frac 1S}$ï¼Œ$2^{\\frac 2S}$ï¼Œâ€¦ï¼Œ2ï¼Œä¸€å…±$(S+1)$å¹…å›¾åƒï¼ˆå³$(S+1)$å±‚ï¼‰ã€‚ &emsp;&emsp;å°ºåº¦å‚æ•°$\\sigma$çš„å–å€¼ä¸é‡‘å­—å¡”çš„ç»„æ•°å’Œå±‚æ•°ç›¸å…³ã€‚è®¾ç¬¬ä¸€ç»„ç¬¬ä¸€å±‚çš„å°ºåº¦å‚æ•°å–å€¼ä¸º$\\sigma (0,0) = \\sigma _0$ï¼Œåˆ™ç¬¬$m$ç»„ç¬¬$n$å±‚çš„$\\sigma$å–å€¼ä¸º\\sigma(0,0)=\\sigma_0,\\quad\\sigma(o,s)=2^{o}\\times k^{s}\\times \\sigma_0 = 2^{o}\\times 2^{\\frac sS}\\times \\sigma_0=2^{o+\\frac sS}\\times \\sigma_0 é«˜æ–¯å·®åˆ†é‡‘å­—å¡”ï¼ˆDoGé‡‘å­—å¡”ï¼‰&emsp;&emsp;DoGé‡‘å­—å¡”è®¡ç®—ç®€å•ï¼Œæä¾›äº†LoGç®—å­è‰¯å¥½çš„è¿‘ä¼¼ï¼ŒLoGç®—å­çš„æå€¼ç›¸è¾ƒäºHessianã€Harrisç­‰ç®—å­ï¼Œèƒ½æä¾›æ›´ç¨³å®šçš„å›¾åƒç‰¹å¾ï¼Œä¸”å…·æœ‰å°ºåº¦ä¸å˜æ€§ã€‚ &emsp;&emsp;é«˜æ–¯å·®åˆ†å›¾åƒç”±é«˜æ–¯é‡‘å­—å¡”ä¸­åŒä¸€ç»„(Octave)å†…ç›¸é‚»å±‚(Interval)çš„å›¾åƒä½œå·®å¾—åˆ°ã€‚ D(x,y,\\sigma)=L(x,y,k\\sigma)-L(x,y,\\sigma) &emsp;&emsp;é«˜æ–¯é‡‘å­—å¡”ä¸€çº§$S$ä¸ªå›¾åƒï¼Œå°†å¾—åˆ°DoGé‡‘å­—å¡”ä¸€çº§$(S-1)$ä¸ªå›¾åƒã€‚ ç©ºé—´æå€¼ç‚¹æ£€æµ‹&emsp;&emsp;å¯¹DoGé‡‘å­—å¡”ä¸­çš„æ¯ä¸ªåƒç´ ï¼Œåœ¨ä¸‰ç»´é¢†åŸŸå†…åˆ¤æ–­æ˜¯å¦æ˜¯æå€¼ç‚¹ï¼ˆæœ€å¤§å€¼/æœ€å°å€¼ï¼‰ã€‚å¦‚æœæ˜¯æå€¼ç‚¹ï¼Œåˆ™è¯¥ç‚¹æš‚å®šä¸ºå›¾åƒåœ¨è¯¥å°ºåº¦ä¸‹çš„ä¸€ä¸ªç‰¹å¾ç‚¹ã€‚ ä¸‰ç»´é¢†åŸŸï¼šä¸­é—´æ£€æµ‹ç‚¹ä¸å…¶åŒå°ºåº¦çš„8ä¸ªé‚»åŸŸåƒç´ ç‚¹ä»¥åŠä¸Šä¸‹ç›¸é‚»ä¸¤å±‚å¯¹åº”çš„$9\\times 2$ä¸ªåƒç´ ç‚¹ä¸€å…±$3\\times 9-1=26$ä¸ªç‚¹ä½œæ¯”è¾ƒã€‚ &emsp;&emsp;è¯¥æ­¥çš„æå€¼ç‚¹æ£€æµ‹å¯ä»¥ç¡®å®šæå€¼ç‚¹çš„ä½ç½®ï¼ˆåƒç´ çº§ï¼‰å’Œå°ºåº¦ï¼Œæå€¼ç‚¹çš„å¤§å°åæ˜ äº†æå€¼å¤„çš„å¯¹æ¯”åº¦ï¼ˆåå·®ï¼‰ã€‚ &emsp;&emsp;ä¸ºäº†æ¯ç»„ï¼ˆOctaveï¼‰å¾—åˆ°$S$ä¸ªå°ºåº¦çš„æå€¼ç»“æœï¼Œéœ€è¦DoGé‡‘å­—å¡”æ¯ç»„$S+2$ä¸ªå›¾åƒï¼Œéœ€è¦é«˜æ–¯é‡‘å­—å¡”æ¯ç»„$S+3$ä¸ªå›¾åƒã€‚ å…³é”®ç‚¹å®šä½äºšåƒç´ ï¼ˆå­åƒç´ ï¼‰ç²¾ç¡®å®šä½&emsp;&emsp;åœ¨DoGå°ºåº¦ç©ºé—´æ£€æµ‹åˆ°çš„æå€¼ç‚¹æ˜¯ç¦»æ•£çš„ï¼Œé€šè¿‡ä¸‰å…ƒäºŒæ¬¡å‡½æ•°æ‹Ÿåˆæ¥ç²¾ç¡®ç¡®å®šå…³é”®ç‚¹çš„ä½ç½®å’Œå°ºåº¦ï¼Œè¾¾åˆ°äºšåƒç´ ç²¾åº¦ã€‚ &emsp;&emsp;å°†åŸç‚¹ç§»åˆ°æå€¼ç‚¹å¤„ï¼Œå¹¶å°†é«˜æ–¯å·®åˆ†åœ¨è¯¥æå€¼ç‚¹å¤„å±•å¼€ï¼Œä¿ç•™ä¸€é˜¶é¡¹åŠäºŒé˜¶é¡¹ï¼Œå¾—åˆ°ï¼š D(X)=D+\\frac {\\partial D^T}{\\partial X}+\\frac 12 X^T\\frac {\\partial ^2 D}{\\partial X^2}Xå…¶ä¸­ï¼Œ$X=(x,y,\\sigma )^T$ &emsp;&emsp;ä»¤$Dâ€™(X)=0$ï¼Œå¾—æå€¼ç‚¹çš„åç§»é‡ \\hat X = -(\\frac {\\partial^2 D}{\\partial X^2})^{-1}\\frac {\\partial D}{\\partial X}å¦‚æ­¤å¾—åˆ°äºšåƒç´ ç²¾åº¦çš„æå€¼ç‚¹$\\hat X$ã€‚ &emsp;&emsp;åˆ©ç”¨$\\hat X$å¾—åˆ°æ–°çš„é«˜æ–¯å·®åˆ†å€¼$D(\\hat X)$ D(\\hat X)=D+\\frac 12 \\frac {\\partial D^T}{\\partial X}\\hat Xè®¾ç½®å¯¹æ¯”åº¦é˜ˆå€¼$T$ï¼Œå½“$|D(\\hat X)|&lt;T$æ—¶ï¼Œå»é™¤è¯¥å¯¹æ¯”åº¦ä½çš„ä¸ç¨³å®šæå€¼ç‚¹$\\hat X$ã€‚ å»é™¤è¾¹ç¼˜ç‚¹&emsp;&emsp;ç”±äºDoGç®—å­å¯¹è¾¹ç¼˜ç‚¹å¾ˆæ•æ„Ÿï¼Œåœ¨è¾¹ç¼˜å¤„ä¹Ÿæœ‰å¾ˆå¤§çš„å“åº”å€¼ï¼Œéœ€è¦å‰”é™¤ä¸ç¨³å®šçš„è¾¹ç¼˜å“åº”ç‚¹ã€‚ &emsp;&emsp;åœ¨æå€¼ç‚¹å¤„ï¼Œåˆ©ç”¨$D(X)$è®¡ç®—HessiançŸ©é˜µ H= \\begin{bmatrix} D_{xx}&D_{xy}\\\\ D_{yx}&D_{yy} \\end{bmatrix}&emsp;&emsp;$D(X)$çš„ä¸»æ›²ç‡ä¸$H$çš„ç‰¹å¾å€¼æˆæ­£æ¯”ï¼Œåœ¨è¾¹ç¼˜æ¢¯åº¦æ–¹å‘æ¯”è¾ƒå¤§ï¼Œå¯¹åº”ä¸€ä¸ªå¤§çš„ç‰¹å¾å€¼$\\alpha$ï¼›åœ¨æ²¿ç€è¾¹ç¼˜çš„æ–¹å‘ä¸Šæ¯”è¾ƒå°ï¼Œå¯¹åº”ä¸€ä¸ªå°çš„ç‰¹å¾å€¼$\\beta$ã€‚ï¼ˆä¸¤ä¸ªç‰¹å¾å€¼çš„ä¹‹æ¯”ä¸º$r = \\alpha/\\beta$ï¼‰ ä¸¤ç‰¹å¾å€¼çš„å’Œç­‰äº$H$çš„è¿¹$Tr(H)$ Tr(H)=D_{xx}+D_{yy}=\\alpha + \\betaä¸¤ç‰¹å¾å€¼çš„ç§¯ç­‰äº$H$çš„è¡Œåˆ—å¼$det(H)$ det(H)=D_{xx}D_{yy}-D_{xy}D_{yx}åˆ™æœ‰ \\frac {Tr^2(H)}{det(H)}=\\frac {(\\alpha + \\beta)^2}{\\alpha \\beta}=\\frac {(r+1)^2}{r}å½“ä¸¤ç‰¹å¾å€¼ç›¸ç­‰ï¼Œå³$r=1$æ—¶ï¼Œ$\\frac {(r+1)^2}{r}$æœ€å°ã€‚$r$è¶Šå¤§ï¼Œ$\\frac {(r+1)^2}{r}$è¶Šå¤§ã€‚ &emsp;&emsp;è¾¹ç¼˜ç‚¹å¯¹åº”çš„ç‰¹å¾å€¼ä¹‹æ¯”$r$æ¯”å…¶ä»–çš„ç‚¹å¤§ï¼Œæ‰€ä»¥è®¾ç½®ä¸€ä¸ªå…³äº$r$çš„é˜ˆå€¼$T_r$ï¼Œå½“$\\frac {Tr^2(H)}{det(H)} &gt; \\frac {(T_r+1)^2}{T_r}$æ—¶ï¼Œåˆ¤æ–­è¯¥æå€¼ç‚¹ä¸ºè¾¹ç¼˜ç‚¹ï¼Œå»é™¤è¯¥ç‚¹ã€‚ è·å–å…³é”®ç‚¹ä¸»æ–¹å‘&emsp;&emsp;ä¸ºäº†ä½¿ç‰¹å¾æè¿°å­å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œéœ€è¦åˆ©ç”¨å…³é”®ç‚¹é‚»åŸŸåƒç´ çš„æ¢¯åº¦æ–¹å‘åˆ†å¸ƒç‰¹æ€§ä¸ºæ¯ä¸ªå…³é”®ç‚¹æŒ‡å®šæ–¹å‘å‚æ•°ã€‚ &emsp;&emsp;æ ¹æ®å…³é”®ç‚¹çš„å°ºåº¦ï¼Œåœ¨é«˜æ–¯é‡‘å­—å¡”å¯¹åº”å›¾åƒçš„å…³é”®ç‚¹ä½ç½®å¤„çš„å±€éƒ¨åŒºåŸŸè®¡ç®—æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾ï¼Œè®¡ç®—æ¯ä¸ªç‚¹çš„æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ã€‚ï¼ˆä¸€èˆ¬å–å¤§å°ä¸º$3\\sigma$çš„é¢†åŸŸï¼‰ æ¢¯åº¦å¹…å€¼$m$ï¼š m(x,y)=\\sqrt{[L(x+1,y)-L(x-1,y)]^2+[L(x,y+1)-L(x,y-1)]^2}æ¢¯åº¦æ–¹å‘$\\theta$ï¼š \\theta (x,y)=\\tan^{-1}\\frac {L(x,y+1)-L(x,y-1)}{L(x+1,y)-L(x-1,y)}&emsp;&emsp;å°†$[0\\circ, 360\\circ]$åˆ†ä¸ºå¤šä¸ªæŸ±ï¼Œæ¢¯åº¦å¹…å€¼åŠ åˆ°å¯¹åº”çš„æ¢¯åº¦æ–¹å‘çš„æŸ±ä¸Šï¼Œé€‰å‡ºç›´æ–¹å›¾çš„å³°å€¼ä¸ºè¯¥å…³é”®ç‚¹çš„ä¸»æ–¹å‘ã€‚ å…³é”®ç‚¹æè¿°&emsp;&emsp;åˆ°ä¸Šè¿°æ­¥éª¤å·²ç»è·å¾—äº†å…³é”®ç‚¹çš„ä½ç½®ã€å°ºåº¦ä»¥åŠæ–¹å‘ã€‚å…³é”®ç‚¹çš„æè¿°åˆ©ç”¨å…³é”®ç‚¹åŠå…¶å‘¨å›´åƒç´ ï¼Œè®¡ç®—å—å†…æ¢¯åº¦ç›´æ–¹å›¾ï¼Œç”Ÿæˆç‰¹å¾å‘é‡ï¼Œç”¨äºæè¿°æ¯ä¸ªå…³é”®ç‚¹ã€‚ ç¡®å®šç”¨äºè®¡ç®—å…³é”®ç‚¹æè¿°çš„å±€éƒ¨åŒºåŸŸ&emsp;&emsp;æè¿°å­æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾ç”±å…³é”®ç‚¹æ‰€åœ¨å°ºåº¦çš„æ¨¡ç³Šå›¾åƒè®¡ç®—äº§ç”Ÿï¼Œå±€éƒ¨åŒºåŸŸçš„åŠå¾„$radius$ï¼šï¼ˆ$\\sigma_{oct}$ä¸ºå…³é”®ç‚¹æ‰€åœ¨ç»„çš„ç»„å†…å°ºåº¦ï¼‰ radius = \\frac {3\\sigma_{oct}\\times \\sqrt2 \\times (d+1)}{2},\\quad d = 4&emsp;&emsp;é™¤ä¸Šé¢çš„æ–¹æ³•ä»¥å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨ç›´å¾„$diameter$ï¼šï¼ˆ$\\sigma ä¸ºå…³é”®ç‚¹æ‰€åœ¨å°ºåº¦$ï¼‰ diameter = 6\\sigma +1æ ¹æ®å…³é”®ç‚¹ä¸»æ–¹å‘å˜æ¢åæ ‡ç³»&emsp;&emsp;å°†åæ ‡è½´æ—‹è½¬è‡³å…³é”®ç‚¹ä¸»æ–¹å‘ï¼Œä»¥ç¡®ä¿æ—‹è½¬ä¸å˜æ€§ã€‚æ—‹è½¬åé‡‡æ ·ç‚¹çš„æ–°åæ ‡ä¸º \\begin{bmatrix} x'\\\\ y' \\end{bmatrix} = \\begin{bmatrix} \\cos \\theta&-\\sin \\theta\\\\ \\sin \\theta&\\cos \\theta \\end{bmatrix} \\begin{bmatrix} x\\\\ y \\end{bmatrix} ,\\quad x,y \\in [-radius,radius] è®¡ç®—å…³é”®ç‚¹æè¿°&emsp;&emsp;åœ¨å±€éƒ¨åŒºåŸŸå†…å¯¹æ¯ä¸ªåƒç´ ç‚¹æ±‚å…¶æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ï¼Œç”Ÿæˆæ–¹å‘ç›´æ–¹å›¾ã€‚ &emsp;&emsp;æ¢¯åº¦å¹…å€¼é«˜æ–¯ï¼ˆ$\\sigma$ä¸ºå±€éƒ¨åŒºåŸŸå¤§å°çš„ä¸€åŠï¼‰åŠ æƒï¼šç¦»å…³é”®ç‚¹è¶Šè¿‘ï¼Œå¯¹å…³é”®ç‚¹æè¿°çš„ä½œç”¨è¶Šå¤§ã€‚ &emsp;&emsp;åŸºäºåƒç´ ä½ç½®å’Œæ¢¯åº¦æ–¹å‘çš„ä¸‰çº¿æ€§æ’å€¼ï¼šå°†æ¢¯åº¦æ–¹å‘å’Œä½ç½®åˆ†è§£å†åŠ æƒã€‚é¿å…æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾åœ¨åˆ†å—è¾¹ç•Œå’Œæ¢¯åº¦æ–¹å‘é‡åŒ–çš„è¾¹ç•Œå¤„çš„çªç„¶å˜åŒ–ã€‚ å½’ä¸€åŒ–å…³é”®ç‚¹æè¿°&emsp;&emsp;å‘é‡å½’ä¸€åŒ–ï¼šå…‹æœå…‰ç…§çš„å½±å“ï¼Œä¸»è¦æ˜¯å¢ç›Šçš„å½±å“ã€‚ &emsp;&emsp;æ–¹å‘ç›´æ–¹å›¾æ¯ä¸ªæ–¹å‘ä¸Šæ¢¯åº¦å¹…å€¼é™åˆ¶åœ¨ä¸€å®šé—¨é™å€¼ä»¥ä¸‹ï¼ˆé—¨é™ä¸€èˆ¬å–0.2ï¼Œåƒç´ ç°åº¦å€¼åœ¨0~1èŒƒå›´å†…ï¼‰ï¼šå…‹æœç›¸æœºé¥±å’Œã€å…‰ç…§å¯¹3Dè¡¨é¢ä¸åŒæ–¹ä½å½±å“ä¸åŒç­‰éçº¿æ€§å…‰ç…§æƒ…å½¢ã€‚ SIFTç®—å­â€”â€”åº”ç”¨ å…³é”®ç‚¹åŒ¹é… åœºæ™¯åŒ¹é… å…¨æ™¯æ‹¼æ¥ å›¾åƒæ£€ç´¢ ç¬”è¿¹é‰´å®š å‚è€ƒ Paper: Distinctive Image Features from Scale-Invariant Keypoints å›¾åƒç‰¹å¾ä¹‹SIFTç‰¹å¾åŒ¹é… SIFTç®—æ³•è¯¦è§£ SIFTç‰¹å¾æå–åˆ†æ SIFTç‰¹å¾æå– Siftä¸­å°ºåº¦ç©ºé—´ã€é«˜æ–¯é‡‘å­—å¡”ã€å·®åˆ†é‡‘å­—å¡”ï¼ˆDOGé‡‘å­—å¡”ï¼‰ã€å›¾åƒé‡‘å­—å¡”","categories":[{"name":"Computer Vision","slug":"Computer-Vision","permalink":"https://gy23333.github.io/categories/Computer-Vision/"}],"tags":[{"name":"SIFTç®—å­","slug":"SIFTç®—å­","permalink":"https://gy23333.github.io/tags/SIFT%E7%AE%97%E5%AD%90/"},{"name":"ç‰¹å¾æè¿°","slug":"ç‰¹å¾æè¿°","permalink":"https://gy23333.github.io/tags/%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0/"}]},{"title":"å›¾åƒçš„å‚…ç«‹å¶å˜æ¢","slug":"å›¾åƒçš„å‚…ç«‹å¶å˜æ¢","date":"2020-04-17T02:35:02.000Z","updated":"2024-11-11T03:57:58.131Z","comments":true,"path":"2020/04/17/å›¾åƒçš„å‚…ç«‹å¶å˜æ¢/","link":"","permalink":"https://gy23333.github.io/2020/04/17/%E5%9B%BE%E5%83%8F%E7%9A%84%E5%82%85%E7%AB%8B%E5%8F%B6%E5%8F%98%E6%8D%A2/","excerpt":"&emsp;&emsp;ç©ºåŸŸä¸Šçš„å›¾åƒåˆ©äºäººçœ¼åˆ†æï¼Œä½†æ˜¯å¯¹äºè®¡ç®—æœºæ¥è¯´åˆ†æå›°éš¾ï¼Œæ‰€ä»¥åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ˆæ¯”å¦‚æ»¤æ³¢ï¼‰ï¼Œéœ€è¦åœ¨é¢‘åŸŸå¯¹å›¾åƒè¿›è¡Œå¤„ç†ã€‚å‚…ç«‹å¶å˜æ¢æŠŠä¿¡å·æ‹†åˆ†æˆä¸åŒé¢‘ç‡sinçš„ç»„åˆï¼Œå³å¯å°†ç©ºåŸŸçš„å›¾åƒåŒ–åˆ°é¢‘åŸŸã€‚","text":"&emsp;&emsp;ç©ºåŸŸä¸Šçš„å›¾åƒåˆ©äºäººçœ¼åˆ†æï¼Œä½†æ˜¯å¯¹äºè®¡ç®—æœºæ¥è¯´åˆ†æå›°éš¾ï¼Œæ‰€ä»¥åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ˆæ¯”å¦‚æ»¤æ³¢ï¼‰ï¼Œéœ€è¦åœ¨é¢‘åŸŸå¯¹å›¾åƒè¿›è¡Œå¤„ç†ã€‚å‚…ç«‹å¶å˜æ¢æŠŠä¿¡å·æ‹†åˆ†æˆä¸åŒé¢‘ç‡sinçš„ç»„åˆï¼Œå³å¯å°†ç©ºåŸŸçš„å›¾åƒåŒ–åˆ°é¢‘åŸŸã€‚ å‚…ç«‹å¶å˜æ¢ä¸€ç»´å‚…ç«‹å¶å˜æ¢&emsp;&emsp;ä¸€ç»´å‚…ç«‹å¶å˜æ¢ï¼Œå³ä»»ä½•ä¿¡å·éƒ½å¯ä»¥æ‹†åˆ†æˆ $A\\sin (wx+\\varPhi )$ çš„ç»„åˆã€‚ è¿ç»­çš„å‚…ç«‹å¶å˜æ¢ H(w)=\\int_{-\\infty}^{\\infty}h(x)e^{-jwx}dxç¦»æ•£çš„å‚…ç«‹å¶å˜æ¢ï¼ˆDFTï¼‰ H(k)=\\frac 1N\\sum\\limits_{x=0}^{N-1}h(x)e^{-j\\frac{2\\pi kx}{N}}\\ ,\\quad k= -N/2..N/2å¿«é€Ÿå‚…ç«‹å¶å˜æ¢ï¼ˆFFTï¼‰æ—¶é—´å¤æ‚åº¦ï¼š$N\\log N$ &emsp;&emsp;å¯¹äºæ¯ä¸ªé¢‘ç‡wæ¥è¯´ï¼Œéƒ½æœ‰ä¸€ä¸ª$A\\sin (wx+\\varPhi )$ï¼Œå…¶ä¸­ å¹…å€¼ï¼ˆRä¸ºH(w)çš„å®éƒ¨ï¼ŒIä¸ºH(w)çš„è™šéƒ¨ï¼‰æ„æˆé¢‘è°±å›¾ A=\\pm\\sqrt{R(w)^2+I(w)^2}ç›¸ä½ï¼ˆRä¸ºH(w)çš„å®éƒ¨ï¼ŒIä¸ºH(w)çš„è™šéƒ¨ï¼‰æ„æˆç›¸ä½å›¾ \\varPhi = \\arctan\\frac {I(w)}{R(w)}äºŒç»´å‚…ç«‹å¶å˜æ¢&emsp;&emsp;å›¾åƒçš„å‚…ç«‹å¶å˜æ¢æ˜¯äºŒç»´çš„å‚…ç«‹å¶å˜æ¢ã€‚ äºŒç»´çš„è¿ç»­å‚…ç«‹å¶å˜æ¢ F(u,v)=\\int_{-\\infty}^{\\infty}\\int_{-\\infty}^{\\infty}f(x,y)e^{-j(ux+vy)}dxdyäºŒç»´ç¦»æ•£çš„å‚…ç«‹å¶å˜æ¢ï¼ˆå¯¹äº$M\\times N$çš„å›¾åƒï¼‰ F(u,v)=\\sum\\limits_{x=0}^{M-1}\\sum\\limits_{y=0}^{N-1}f(x,y)e^{-j2\\pi (\\frac{ux}{M}+\\frac{vy}{N})}\\ ,\\quad u = 0,1,2,Â·Â·Â·,M-1\\ , \\quad v = 0,1,2,Â·Â·Â·,N-1&emsp;&emsp;å¦‚æ­¤å›¾åƒä»$(x,y)$çš„ç©ºåŸŸçŸ©é˜µï¼Œå˜æˆäº†$(u,v)$çš„é¢‘åŸŸçŸ©é˜µã€‚ï¼ˆé¢‘åŸŸçŸ©é˜µçš„å¤§å°ä¸åŸç©ºé—´åŸŸçŸ©é˜µå¤§å°ç›¸åŒï¼‰ å¹…å€¼ï¼ˆRä¸ºH(u,v)çš„å®éƒ¨ï¼ŒIä¸ºH(u,v)çš„è™šéƒ¨ï¼‰ A=\\pm\\sqrt{R(u,v)^2+I(u,v)^2}ç›¸ä½ï¼ˆRä¸ºH(u,v)çš„å®éƒ¨ï¼ŒIä¸ºH(u,v)çš„è™šéƒ¨ï¼‰ \\varPhi = \\arctan\\frac {I(u,v)}{R(u,v)} ä¸€ç»´å‚…ç«‹å¶å˜æ¢çš„ä¸‰è§’å‡½æ•°ç³»æ˜¯$sin(wx)$ã€$cos(wx)$ä»¥åŠå¸¸æ•°$1$ï¼ŒäºŒç»´å‚…ç«‹å¶å˜æ¢çš„ä¸‰è§’å‡½æ•°ç³»æ˜¯$sin(ux+vy)$ã€$cos(ux+vy)$å’Œå¸¸æ•°$1$ã€‚ é¢‘è°±å›¾é¢‘è°±å›¾ç”Ÿæˆå›¾åƒé¢‘è°±å›¾ç”ŸæˆMatlabä»£ç å¦‚ä¸‹ 12345678img = imread('Lenna.jpg');img = rgb2gray(img);img = double(img);f1 = fft2(img); % äºŒç»´å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ f2 = fftshift(f1); % FFTé¢‘è°±å¹³ç§»magnitude1 = log(1+abs(f1)); % ï¼ˆæœªä¸­å¿ƒåŒ–ï¼‰é¢‘è°±å¯¹æ•°å˜æ¢ï¼ˆç”±äºå¹…åº¦å€¼èŒƒå›´å¾ˆå¤§ï¼Œæ‰€ä»¥è¦å–å¯¹æ•°å¤„ç†ï¼‰magnitude2 = log(1+abs(f2)); % ï¼ˆä¸­å¿ƒåŒ–ï¼‰imshow(magnitude2,[]),title('é¢‘è°±å›¾'); äºŒç»´å‚…é‡Œå¶å˜æ¢&emsp;&emsp;é¦–å…ˆéœ€å°†å›¾åƒè¿›è¡ŒäºŒç»´å‚…é‡Œå¶å˜æ¢ï¼Œå¾—åˆ°æœªä¸­å¿ƒåŒ–çš„é¢‘è°±å›¾ã€‚æ­¤æ—¶é¢‘è°±å›¾ä¸­é—´åŒºåŸŸæ˜¯é«˜é¢‘ï¼Œè€Œå››ä¸ªè§’åˆ™æ˜¯DCä½é¢‘åˆ†é‡ã€‚ é¢‘è°±çš„ä¸­å¿ƒåŒ–&emsp;&emsp;DFTå…·æœ‰å‘¨æœŸæ€§ï¼Œä¸”é¢‘è°±å›¾å…³äºåŸç‚¹å¯¹ç§°ã€‚ &emsp;&emsp;åœ¨åŸå›¾åƒä¹˜ä»¥ç³»æ•°$(-1)^{x+y}$ï¼Œå†è¿›è¡Œå‚…ç«‹å¶å˜æ¢ï¼Œå¯ä»¥å¾—åˆ°ä¸­å¿ƒåŒ–çš„é¢‘è°±å›¾ï¼ˆä¸­é—´ä½é¢‘ã€å››å‘¨é«˜é¢‘ï¼‰ã€‚ç›¸å½“äºå¯¹æœªä¸­å¿ƒåŒ–çš„é¢‘è°±å›¾çš„å››ä¸ªè±¡é™è¿›è¡Œå¯¹è°ƒï¼š1 &lt;â€”&gt; 3ã€2 &lt;â€”&gt; 4 é¢‘è°±å›¾è¿›è¡Œä¸­å¿ƒåŒ– å¦‚æ­¤å¾—åˆ°æœ€ç»ˆçš„é¢‘è°±å›¾ é¢‘ç‡åˆ†å¸ƒ&emsp;&emsp;ç»è¿‡é¢‘è°±å±…ä¸­åçš„é¢‘è°±ä¸­ï¼Œä¸­é—´æœ€äº®çš„ç‚¹æ˜¯æœ€ä½é¢‘ç‡ï¼Œå±äºç›´æµåˆ†é‡ï¼ˆDCåˆ†é‡ï¼‰ã€‚è¶Šå¾€è¾¹å¤–èµ°ï¼Œé¢‘ç‡è¶Šé«˜ã€‚æ‰€ä»¥ï¼Œé¢‘è°±å›¾ä¸­çš„å››ä¸ªè§’å’ŒX,Yè½´çš„å°½å¤´éƒ½æ˜¯é«˜é¢‘ã€‚ &emsp;&emsp;é¢‘è°±å›¾çš„äº®åº¦è¡¨ç¤ºå¯¹åº”é¢‘ç‡çš„å¹…åº¦çš„å¤§å°ã€‚ å¹³ç§»å’Œæ—‹è½¬ åŸå›¾åƒå¹³ç§»ï¼Œé¢‘è°±å›¾ä¸å˜ï¼› åŸå›¾åƒæ—‹è½¬ï¼Œé¢‘è°±éšç€åŸå›¾åƒæ—‹è½¬ç›¸åŒçš„è§’åº¦ã€‚ Matlabä»£ç  12345678910111213141516171819202122232425Isize = 512;Rwidth = 50;Rlength = 3*Rwidth; Irect = zeros(Isize);Irect(floor((Isize - Rlength)/2) + 1:floor((Isize - Rlength)/2) + Rlength,... (floor(Isize - Rwidth)/2) + 1:floor((Isize - Rwidth)/2) + Rwidth) = 1;Idft = fft2(Irect);subplot(2,3,1),imshow(Irect),title('åŸå›¾');subplot(2,3,4),imshow(log(abs(fftshift(Idft))+1),[]),title('åŸå›¾çš„é¢‘è°±å›¾'); Irect = zeros(Isize);Irect(floor((Isize - Rlength)/2) + 150 + 1:floor((Isize - Rlength)/2) + 150 + Rlength,... (floor(Isize - Rwidth)/2) + 1 + 200:floor((Isize - Rwidth)/2) + Rwidth + 200) = 1;Idft = fft2(Irect);subplot(2,3,2),imshow(Irect),title('å¹³ç§»');subplot(2,3,5),imshow(log(abs(fftshift(Idft))+1),[]),title('å¹³ç§»åçš„é¢‘è°±å›¾');Irect = zeros(Isize);Irect(floor((Isize - Rlength)/2) + 1:floor((Isize - Rlength)/2) + Rlength,... (floor(Isize - Rwidth)/2) + 1:floor((Isize - Rwidth)/2) + Rwidth) = 1;Irot = imrotate(Irect, 45, 'crop', 'bilinear');Idft = fft2(Irot);subplot(2,3,3),imshow(Irot),title('æ—‹è½¬');subplot(2,3,6),imshow(log(abs(fftshift(Idft))+1),[]),title('æ—‹è½¬åçš„é¢‘è°±å›¾'); æ–¹å‘æ€§&emsp;&emsp;åœ¨äºŒç»´å‚…é‡Œå¶å˜æ¢ä¸­ï¼Œç©ºé—´åŸŸä¸­æ¨ªå‘çš„å‘¨æœŸå˜åŒ–ä¼šååº”åœ¨é¢‘è°±å›¾ä¸­çš„Yè½´ä¸Šï¼Œè€Œç©ºé—´åŸŸä¸­çºµå‘çš„å‘¨æœŸå˜åŒ–ä¼šååº”åœ¨é¢‘è°±å›¾ä¸­çš„Xè½´ä¸Šã€‚ç©ºé—´åŸŸä¸­ä¸œå—æ–¹å‘çš„å‘¨æœŸå˜åŒ–ä¼šååº”åœ¨é¢‘è°±å›¾ä¸­çš„ä¸œåŒ—æ–¹å‘ï¼Œåä¹‹äº¦ç„¶ã€‚ Matlabä»£ç  123456789101112131415Isize = 512;Irect = zeros(Isize);Irect(floor(Isize/2)+1:Isize, 1:Isize) = 0.1;Irect(1:floor(Isize/2), 1:Isize) = 1;Idft = fft2(Irect);subplot(2,2,1),imshow(Irect);subplot(2,2,3),imshow(log(abs(fftshift(Idft))+1),[]);Irect = zeros(Isize);Irect(1:Isize, floor(Isize/2)+1:Isize) = 0.1;Irect(1:Isize, 1:floor(Isize/2)) = 1;Idft = fft2(Irect);subplot(2,2,2),imshow(Irect);subplot(2,2,4),imshow(log(abs(fftshift(Idft))+1),[]); å‚è€ƒ å›¾åƒçš„å‚…é‡Œå¶å˜æ¢çš„é¢‘è°±ç‰¹å¾ ä¸€ï¼ˆå‘¨æœŸæ€§ï¼Œèƒ½é‡åˆ†å¸ƒï¼Œfftshiftï¼Œäº¤é”™æ€§ï¼‰ å›¾åƒçš„å‚…é‡Œå¶å˜æ¢çš„é¢‘è°±ç‰¹å¾ ä¸‰ï¼ˆå¹³ç§»ï¼Œæ—‹è½¬ï¼Œç›¸ä½çš„é‡è¦æ€§ï¼‰ WiKi å‚…ç«‹å¶å˜æ¢ äºŒç»´å›¾åƒçš„å‚…ç«‹å¶å˜æ¢","categories":[{"name":"Computer Vision","slug":"Computer-Vision","permalink":"https://gy23333.github.io/categories/Computer-Vision/"}],"tags":[{"name":"å‚…ç«‹å¶å˜æ¢","slug":"å‚…ç«‹å¶å˜æ¢","permalink":"https://gy23333.github.io/tags/%E5%82%85%E7%AB%8B%E5%8F%B6%E5%8F%98%E6%8D%A2/"}]},{"title":"å›¾åƒé‡‘å­—å¡”","slug":"å›¾åƒé‡‘å­—å¡”","date":"2020-04-16T13:26:43.000Z","updated":"2024-11-11T03:57:58.110Z","comments":true,"path":"2020/04/16/å›¾åƒé‡‘å­—å¡”/","link":"","permalink":"https://gy23333.github.io/2020/04/16/%E5%9B%BE%E5%83%8F%E9%87%91%E5%AD%97%E5%A1%94/","excerpt":"&emsp;&emsp;é‡‘å­—å¡”æ˜¯ä¸€ç§å›¾åƒå¤šå°ºåº¦ä¿¡å·è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­ä¿¡å·æˆ–å›¾åƒè¦ç»è¿‡åå¤çš„å¹³æ»‘å’ŒäºŒæ¬¡é‡‡æ ·ã€‚é€šè¿‡å¯¹åŸå§‹å›¾åƒè¿›è¡Œå¤šå°ºåº¦åƒç´ é‡‡æ ·çš„æ–¹å¼ï¼Œç”ŸæˆNä¸ªä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒã€‚æŠŠå…·æœ‰æœ€é«˜çº§åˆ«åˆ†è¾¨ç‡çš„å›¾åƒæ”¾åœ¨åº•éƒ¨ï¼Œä»¥é‡‘å­—å¡”å½¢çŠ¶æ’åˆ—ã€‚","text":"&emsp;&emsp;é‡‘å­—å¡”æ˜¯ä¸€ç§å›¾åƒå¤šå°ºåº¦ä¿¡å·è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­ä¿¡å·æˆ–å›¾åƒè¦ç»è¿‡åå¤çš„å¹³æ»‘å’ŒäºŒæ¬¡é‡‡æ ·ã€‚é€šè¿‡å¯¹åŸå§‹å›¾åƒè¿›è¡Œå¤šå°ºåº¦åƒç´ é‡‡æ ·çš„æ–¹å¼ï¼Œç”ŸæˆNä¸ªä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒã€‚æŠŠå…·æœ‰æœ€é«˜çº§åˆ«åˆ†è¾¨ç‡çš„å›¾åƒæ”¾åœ¨åº•éƒ¨ï¼Œä»¥é‡‘å­—å¡”å½¢çŠ¶æ’åˆ—ã€‚ å¼•å…¥é—®é¢˜ï¼šå‡è®¾è¦è¿›è¡Œäººè„¸è¯†åˆ«ï¼Œä½†æ˜¯äººè„¸ä¸æ‘„åƒå¤´ä¹‹é—´è·ç¦»å¿½è¿œå¿½è¿‘ï¼Œå•ä¸€åˆ†è¾¨ç‡çš„è¯†åˆ«ç®—æ³•æ— æ³•è¯†åˆ«æ‰€æœ‰è·ç¦»ä¸‹çš„äººè„¸ç‰¹å¾ã€‚ &emsp;&emsp;å›¾åƒé‡‘å­—å¡”æ˜¯ä¸€ç§ä»¥å¤šåˆ†è¾¨ç‡æ¥è§£é‡Šå›¾åƒçš„ç»“æ„ï¼Œé€šè¿‡å¯¹åŸå§‹å›¾åƒè¿›è¡Œå¤šå°ºåº¦åƒç´ é‡‡æ ·çš„æ–¹å¼ï¼Œç”ŸæˆNä¸ªä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒã€‚&emsp;&emsp;æŠŠå…·æœ‰æœ€é«˜çº§åˆ«åˆ†è¾¨ç‡çš„å›¾åƒæ”¾åœ¨åº•éƒ¨ï¼Œä»¥é‡‘å­—å¡”å½¢çŠ¶æ’åˆ—ï¼Œå¾€ä¸Šæ˜¯ä¸€ç³»åˆ—åƒç´ ï¼ˆå°ºå¯¸ï¼‰é€æ¸é™ä½çš„å›¾åƒï¼Œä¸€ç›´åˆ°é‡‘å­—å¡”çš„é¡¶éƒ¨åªåŒ…å«ä¸€ä¸ªåƒç´ ç‚¹çš„å›¾åƒï¼Œè¿™å°±æ„æˆäº†ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„å›¾åƒé‡‘å­—å¡”ã€‚ ä¸¤ç§é‡‡æ ·æ–¹å¼ï¼š å‡é‡‡æ ·ï¼šåˆ†è¾¨ç‡é€æ¸å‡é«˜ï¼Œå›¾åƒå˜å¤§ é™é‡‡æ ·ï¼šåˆ†è¾¨ç‡é€æ¸ä¸‹é™ï¼Œå›¾åƒå˜å° é™é‡‡æ ·&emsp;&emsp;é™é‡‡æ ·ä½¿å›¾åƒåˆ†è¾¨ç‡é€æ¸ä¸‹é™çš„åŒæ—¶è¦ä¿è¯ä¸å‡ºç°é”™è¯¯ï¼ˆå¤±çœŸï¼‰ã€‚ å¥ˆå¥æ–¯ç‰¹é‡‡æ ·å®šç†&emsp;&emsp;ä¸ºäº†ä¸å¤±çœŸåœ°æ¢å¤æ¨¡æ‹Ÿä¿¡å·ï¼Œé‡‡æ ·é¢‘ç‡åº”è¯¥å¤§äºæ¨¡æ‹Ÿä¿¡å·é¢‘è°±ä¸­æœ€é«˜é¢‘ç‡çš„2å€ã€‚ F_s \\geq 2F_{max}æ··å  &emsp;&emsp;å¦‚æœä¸èƒ½æ»¡è¶³ä¸Šè¿°é‡‡æ ·æ¡ä»¶ï¼Œé‡‡æ ·åä¿¡å·çš„é¢‘ç‡å°±ä¼šé‡å ï¼Œå³é«˜äºé‡‡æ ·é¢‘ç‡ä¸€åŠçš„é¢‘ç‡æˆåˆ†å°†è¢«é‡å»ºæˆä½äºé‡‡æ ·é¢‘ç‡ä¸€åŠçš„ä¿¡å·ã€‚è¿™ç§é¢‘è°±çš„é‡å å¯¼è‡´çš„å¤±çœŸç§°ä¸ºæ··å ï¼Œè€Œé‡å»ºå‡ºæ¥çš„ä¿¡å·ç§°ä¸ºåŸä¿¡å·çš„æ··å æ›¿èº«ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªä¿¡å·æœ‰åŒæ ·çš„æ ·æœ¬å€¼ã€‚ &emsp;&emsp;ä¸‹å›¾å¯¹æ­£å¼¦ä¿¡å·çš„é‡‡æ ·æœªç¬¦åˆå¥ˆå¥æ–¯ç‰¹é‡‡æ ·å®šç†ï¼Œæ¢å¤æ¨¡æ‹Ÿä¿¡å·æ—¶å¤±çœŸã€‚ &emsp;&emsp;å¦‚æœåŸä¿¡å·ä¸­åŒ…å«çš„æœ€é«˜é¢‘ç‡æˆåˆ†$F_{max} &gt; \\frac{F_s}{2}$ ï¼Œåˆ™åœ¨ç¦»æ•£ä¿¡å·è°±ä¸­ç›¸åº”å‘¨æœŸçš„è°±ä¼šå‡ºç°é‡å ï¼Œæœ€ç»ˆæ¢å¤çš„æ¨¡æ‹Ÿä¿¡å·å¤±çœŸã€‚ &emsp;&emsp;åä¹‹ï¼Œå¦‚æœ$F_{max} &lt; \\frac{F_s}{2}$ ï¼Œå³é‡‡æ ·é¢‘ç‡å¤§äºåˆ†æä¿¡å·ä¸­æœ€é«˜é¢‘è°±æˆåˆ†çš„2å€ï¼Œåˆ™é‡‡æ ·åç¦»æ•£ä¿¡å·é¢‘è°±ä¸­ä¸ä¼šå‡ºç°é¢‘ç‡æ··å ã€‚ &emsp;&emsp;ä¸€ä¸ªé¢‘ç‡æ­£å¥½æ˜¯é‡‡æ ·é¢‘ç‡ä¸€åŠçš„å¼¦æ³¢ä¿¡å·ï¼Œé€šå¸¸ä¼šæ··å æˆå¦ä¸€ç›¸åŒé¢‘ç‡çš„æ³¢å¼¦ä¿¡å·ï¼Œä½†å®ƒçš„ç›¸ä½å’Œå¹…åº¦æ”¹å˜äº†ã€‚ä»¥ä¸‹ä¸¤ç§æªæ–½å¯é¿å…æ··å çš„å‘ç”Ÿï¼š æé«˜é‡‡æ ·é¢‘ç‡ï¼Œä½¿ä¹‹è¾¾åˆ°æœ€é«˜ä¿¡å·é¢‘ç‡çš„ä¸¤å€ä»¥ä¸Šï¼› å¼•å…¥ä½é€šæ»¤æ³¢å™¨ &emsp;&emsp;é«˜æ–¯é‡‘å­—å¡”å³æ˜¯å¼•å…¥äº†é«˜æ–¯æ»¤æ³¢å™¨ä½œä¸ºä½é€šæ»¤æ³¢å™¨ï¼Œä»è€ŒæŠ‘åˆ¶é«˜é¢‘åˆ†é‡ï¼Œé¿å…æ··å å¯¼è‡´é™é‡‡æ ·åçš„å›¾åƒå¤±çœŸã€‚ &emsp;&emsp;ä¸‹å›¾ä¸­ï¼Œä¸Šè¡Œæ˜¯æœªæ»¤æ³¢çš„é‡‡æ ·ï¼Œå¯ä»¥çœ‹å‡ºåæœŸå‡ºç°äº†å¤±çœŸï¼›ä¸‹è¡Œæ˜¯ç»è¿‡é«˜æ–¯æ»¤æ³¢çš„ä¸‹é‡‡æ ·ï¼ŒåæœŸè™½ç„¶æœ‰æ•°æ®æŸå¤±ï¼Œä½†æ˜¯æœªå‘ç”Ÿå¤±çœŸã€‚ é«˜æ–¯é‡‘å­—å¡”&emsp;&emsp;é«˜æ–¯é‡‘å­—å¡”æ˜¯é€šè¿‡é«˜æ–¯å¹³æ»‘å’Œäºšé‡‡æ ·è·å¾—ä¸‹é‡‡æ ·å›¾åƒã€‚ é™é‡‡æ ·&emsp;&emsp;ä¸ºäº†è·å–å±‚çº§ä¸º$G_{i+1}$çš„é‡‘å­—å¡”å›¾åƒï¼Œé‡‡ç”¨å¦‚ä¸‹æ–¹æ³•: å¯¹å›¾åƒ$G_i$è¿›è¡Œé«˜æ–¯å†…æ ¸å·ç§¯ å°†æ‰€æœ‰å¶æ•°è¡Œå’Œåˆ—å»é™¤ å¾—åˆ°çš„å›¾åƒå³ä¸º$G_{i+1}$çš„å›¾åƒï¼Œæ˜¾è€Œæ˜“è§ï¼Œç»“æœå›¾åƒåªæœ‰åŸå›¾åƒç´ ç‚¹æ•°çš„å››åˆ†ä¹‹ä¸€ã€‚é€šè¿‡å¯¹è¾“å…¥å›¾åƒ$G_i$(åŸå§‹å›¾åƒ)ä¸åœè¿­ä»£ä»¥ä¸Šæ­¥éª¤å°±ä¼šå¾—åˆ°æ•´ä¸ªé‡‘å­—å¡”ã€‚åŒæ—¶ï¼Œå‘ä¸‹å–æ ·ä¼šé€æ¸ä¸¢å¤±å›¾åƒçš„ä¿¡æ¯ã€‚ å‡é‡‡æ ·&emsp;&emsp;å¦‚æœæƒ³æ”¾å¤§å›¾åƒï¼Œåˆ™éœ€è¦é€šè¿‡å‘ä¸Šå–æ ·æ“ä½œå¾—åˆ°ï¼Œå…·ä½“åšæ³•å¦‚ä¸‹ï¼š å°†å›¾åƒåœ¨æ¯ä¸ªæ–¹å‘æ‰©å¤§ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œæ–°å¢çš„è¡Œå’Œåˆ—ä»¥0å¡«å…… ä½¿ç”¨å…ˆå‰åŒæ ·çš„å†…æ ¸(ä¹˜ä»¥4)ä¸æ”¾å¤§åçš„å›¾åƒå·ç§¯ï¼Œè·å¾— â€œæ–°å¢åƒç´ â€çš„è¿‘ä¼¼å€¼ ï¼ˆæˆ–è€…ç”¨åŒçº¿æ€§æ’å€¼ï¼šå…ˆè¡Œæ±‚å‡å€¼æ’å…¥ï¼Œå†åˆ—æ±‚å‡å€¼æ’å…¥ï¼‰ å¾—åˆ°çš„å›¾åƒå³ä¸ºæ”¾å¤§åçš„å›¾åƒï¼Œä½†æ˜¯ä¸åŸæ¥çš„å›¾åƒç›¸æ¯”æ¯”è¾ƒæ¨¡ç³Šï¼Œå› ä¸ºåœ¨ç¼©æ”¾çš„è¿‡ç¨‹ä¸­å·²ç»ä¸¢å¤±äº†ä¸€äº›ä¿¡æ¯ï¼Œå¦‚æœæƒ³åœ¨ç¼©å°å’Œæ”¾å¤§æ•´ä¸ªè¿‡ç¨‹ä¸­å‡å°‘ä¿¡æ¯çš„ä¸¢å¤±ï¼Œè¿™äº›æ•°æ®å½¢æˆäº†æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ã€‚ &emsp;&emsp;ä¸‹é¢ä¸¤å›¾åˆ†åˆ«æ˜¯LennaåŸå›¾å’Œç»è¿‡é«˜æ–¯é‡‘å­—å¡”é™é‡‡æ ·å†å‡é‡‡æ ·åçš„å›¾åƒï¼Œå¯ä»¥çœ‹å‡ºå¤„ç†åçš„å›¾åƒä¸¢å¤±äº†éƒ¨åˆ†ä¿¡æ¯ï¼Œæ‰€ä»¥å‡é‡‡æ ·å¹¶ä¸å®Œå…¨æ˜¯é™é‡‡æ ·çš„é€†ã€‚ é«˜æ–¯é‡‘å­—å¡”C++ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940#include \"iostream\"#include \"opencv2/imgproc.hpp\"#include \"opencv2/imgcodecs.hpp\"#include \"opencv2/highgui.hpp\"using namespace std;using namespace cv;int main( int argc, char** argv )&#123; cout &lt;&lt; \"\\n Zoom In-Out demo \\n \" \"------------------ \\n\" \" * [i] -&gt; Zoom in \\n\" \" * [o] -&gt; Zoom out \\n\" \" * [ESC] -&gt; Close program \\n\" &lt;&lt; endl; const char* filename = argc &gt;=2 ? argv[1] : \"/Users/yogo/Downloads/CV/é«˜æ–¯é‡‘å­—å¡”/Gaussian pyramid/Gaussian pyramid/Lenna.png\"; // Loads an image Mat src = imread( samples::findFile( filename ) ); // Check if image is loaded fine if(src.empty())&#123; printf(\" Error opening image\\n\"); printf(\" Program Arguments: [image_name -- default chicky_512.png] \\n\"); return EXIT_FAILURE; &#125; for(;;) &#123; imwrite(\"result3.png\", src); char c; cin &gt;&gt; c; if( c == 27 ) &#123; break; &#125; else if( c == 'i' ) &#123; pyrUp( src, src, Size( src.cols*2, src.rows*2 ) ); printf( \"** Zoom In: Image x 2 \\n\" ); &#125; else if( c == 'o' ) &#123; pyrDown( src, src, Size( src.cols/2, src.rows/2 ) ); printf( \"** Zoom Out: Image / 2 \\n\" ); &#125; &#125; return EXIT_SUCCESS;&#125; ä¸€äº›é—®é¢˜æ»¤æ³¢æ¨¡ç‰ˆå¤§å°é—®é¢˜&emsp;&emsp;æŒ‰é«˜æ–¯åˆ†å¸ƒï¼Œç†è®ºä¸Šéœ€è¦ä¸€ä¸ªæ— é™å¤§çš„å·ç§¯æ ¸ã€‚ä½†å®é™…ä¸Šï¼Œä»…éœ€è¦å–å‡å€¼å‘¨å›´3å€æ ‡å‡†å·®å†…çš„å€¼ï¼ˆé«˜æ–¯æ ¸å•è¾¹å¤§å°ä¸º3Ïƒï¼‰ï¼Œä»¥å¤–éƒ¨åˆ†ç›´æ¥å»æ‰å³å¯ã€‚ &emsp;&emsp;å¦‚æœæ¨¡ç‰ˆå–å¾—å¤ªå°ï¼Œè¾¹ç•Œåå‡ºç°é«˜é¢‘æŒ¯è¡ã€‚ å›¾åƒè¾¹ç¼˜é—®é¢˜&emsp;&emsp;å›¾åƒçš„è¾¹ç¼˜åšå·ç§¯æ—¶ï¼Œéœ€è¦åœ¨è¾¹ç¼˜ç‚¹å‘¨å›´å¡«å……å€¼ã€‚ clip filterï¼ˆblackï¼‰ï¼šå¡«0 wrap aroundï¼šå›¾åƒå‘¨æœŸå‡ºç°ï¼Œå³æŠŠå›¾åƒå¹³ç§»åˆ°è¾¹ç¼˜ copy edgeï¼šè¾¹ç¼˜å¤åˆ¶ reflect across edgeï¼šé•œåƒåè½¬ æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”&emsp;&emsp;æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”æ¯ä¸€å±‚çš„å›¾åƒä¸ºåŒä¸€å±‚é«˜æ–¯é‡‘å­—å¡”çš„å›¾åƒå‡å»ä¸Šä¸€å±‚çš„å›¾åƒè¿›è¡Œä¸Šé‡‡æ ·å¹¶é«˜æ–¯æ¨¡ç³Šçš„ç»“æœã€‚ L_i = G_i-UP(G_{i+1})*g_{5\\times 5} &emsp;&emsp;æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”å³æ˜¯é«˜æ–¯é‡‘å­—å¡”æ¯å±‚ä¸¢æ‰çš„é«˜é¢‘éƒ¨åˆ†ã€‚ å°æ³¢é‡‘å­—å¡”&emsp;&emsp;äºŒç»´ç¦»æ•£å°æ³¢åˆ†è§£å°†äºŒç»´å›¾åƒåˆ†è§£ä¸ºå¤šå°ºåº¦è¡¨è¾¾ï¼Œ åŸå›¾åƒå¯ä»¥ç”±å¤šå°ºåº¦å°æ³¢ç³»æ•°ç²¾ç¡®é‡å»ºã€‚ &emsp;&emsp;é¢‘åŸŸå‘Šè¯‰æˆ‘ä»¬åœºæ™¯é‡Œæœ‰ä»€ä¹ˆä¸œè¥¿ï¼Œç©ºåŸŸå‘Šè¯‰åœ¨ä»€ä¹ˆä½ç½®ã€‚é«˜é¢‘å¾€å¾€å¯¹åº”çš„æ˜¯è¾¹ç¼˜ï¼Œæ‰€ä»¥ç›¸å¯¹äºå›¾åƒçš„ä½é¢‘æˆåˆ†æ¥è¯´ï¼Œå›¾åƒçš„é«˜é¢‘æˆåˆ†çš„ç©ºé—´å®šä½éœ€æ±‚å¾ˆé«˜ï¼Œä¸åº”è¯¥æŸå¤±ç©ºé—´è¡¨è¾¾èƒ½åŠ›ã€‚å¯¹äºä½é¢‘çš„éƒ¨åˆ†åˆ™è¦æ±‚é¢‘åŸŸçš„åˆ†è¾¨èƒ½åŠ›æ›´å¼ºã€‚å³ï¼Œé«˜é¢‘è¦æ±‚ç©ºåŸŸä¸Šçš„é«˜åˆ†è¾¨ç‡ï¼Œä½é¢‘è¦æ±‚é¢‘åŸŸä¸Šçš„é«˜åˆ†è¾¨ç‡ã€‚ &emsp;&emsp;åœ¨å‚…ç«‹å¶å˜æ¢ä¸Šæ— æ³•åšåˆ°å¯¹é«˜ä½é¢‘ä¸åŒçš„åˆ†è¾¨èƒ½åŠ›ï¼Œè€Œå°æ³¢åˆ†è§£å¯ä»¥åšåˆ°ã€‚ å°æ³¢å˜æ¢&emsp;&emsp;å°æ³¢å˜æ¢æ˜¯çº¿æ€§çš„ã€‚ \\vec F = U \\vec få“ˆå°”å˜æ¢&emsp;&emsp;å“ˆå°”å˜æ¢æ˜¯ä¸€ç§æœ€ç®€å•åˆå¯ä»¥ååº”å‡ºæ—¶å˜é¢‘è°±ï¼ˆtime-variant spectrumï¼‰çš„è¡¨ç¤ºæ–¹æ³•ã€‚å…¶è§‚å¿µä¸å‚…é‡Œå¶å˜æ¢ç›¸è¿‘ã€‚å‚…é‡Œå¶å˜æ¢çš„åŸç†æ˜¯åˆ©ç”¨æ­£å¼¦æ³¢ä¸ä½™å¼¦æ³¢æ¥å¯¹ä¿¡å·è¿›è¡Œè°ƒå˜ï¼›è€Œå“ˆå°”å˜æ¢åˆ™æ˜¯åˆ©ç”¨å“ˆå°”å‡½æ•°æ¥å¯¹ä¿¡å·è¿›è¡Œè°ƒå˜ã€‚å“ˆå°”å‡½æ•°ä¹Ÿå«æœ‰æ­£å¼¦å‡½æ•°ç³»å’Œä½™å¼¦å‡½æ•°ç³»æ‰€æ‹¥æœ‰çš„æ­£äº¤æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„å“ˆå°”å‡½æ•°æ˜¯äº’ç›¸æ­£äº¤çš„ï¼Œå…¶å†…ç§¯ä¸ºé›¶ã€‚ &emsp;&emsp;å°†ä¿¡å·åˆ†è§£æˆä½é¢‘å’Œé«˜é¢‘ã€‚ä»¥$N=2$ä¸ºä¾‹ï¼Œç¬¬ä¸€è¡Œæ˜¯åšå‡å€¼ï¼Œåˆ†å‡ºä½é¢‘ï¼›ç¬¬äºŒè¡Œæ˜¯åšå·®å€¼ï¼Œåˆ†å‡ºé«˜é¢‘ã€‚ä½é¢‘éƒ¨åˆ†å¯ä»¥ç»§ç»­åˆ†è§£ã€‚ï¼ˆNå–å†³äºä¿¡å·çš„ç»´æ•°ï¼ŒåŠ æƒéœ€è¦å½’ä¸€åŒ–ï¼‰ N=2\\ ,\\quad U= \\begin{bmatrix} 1&1\\\\ 1&-1 \\end{bmatrix} \\\\ N=4\\ ,\\quad U= \\begin{bmatrix} 1&1&1&1\\\\ 1&1&-1&-1\\\\ 1&-1&0&0\\\\ 0&0&1&-1\\\\ \\end{bmatrix} \\\\ . \\\\ . \\\\ .&emsp;&emsp;ä¸‹é¢$N=8$çš„å°æ³¢ï¼Œå‰2è¡Œä¸ºä½é¢‘éƒ¨åˆ†ï¼ˆç¬¬2è¡Œä¸ºä½é¢‘çš„é«˜é¢‘éƒ¨åˆ†ï¼‰ï¼Œç¬¬3ã€4è¡Œä¸ºæ¬¡é«˜é¢‘éƒ¨åˆ†ï¼Œå4è¡Œä¸ºé«˜é¢‘éƒ¨åˆ†ã€‚ \\begin{bmatrix} \\frac18&\\frac18&\\frac18&\\frac18&\\frac18&\\frac18&\\frac18&\\frac18\\\\ \\frac18&\\frac18&\\frac18&\\frac18&-\\frac18&-\\frac18&-\\frac18&-\\frac18\\\\ \\frac14&\\frac14&-\\frac14&-\\frac14&0&0&0&0\\\\ 0&0&0&0&\\frac14&\\frac14&-\\frac14&-\\frac14\\\\ \\frac12&-\\frac12&0&0&0&0&0&0\\\\ 0&0&\\frac12&-\\frac12&0&0&0&0\\\\ 0&0&0&0&\\frac12&-\\frac12&0&0\\\\ 0&0&0&0&0&0&\\frac12&-\\frac12\\\\ \\end{bmatrix}å“ˆå°”å˜æ¢ç‰¹ç‚¹ï¼š ä¸éœ€è¦ä¹˜æ³•ï¼ˆåªæœ‰ç›¸åŠ æˆ–åŠ å‡ï¼‰ï¼Œå®¹æ˜“å®ç° è¾“å…¥ä¸è¾“å‡ºä¸ªæ•°ç›¸åŒ å¯¹$(64,2,3,61,60,6,7,57)$åšHaarå°æ³¢å˜æ¢\\begin{bmatrix}\\frac18&\\frac18&\\frac18&\\frac18&\\frac18&\\frac18&\\frac18&\\frac18\\\\\\frac18&\\frac18&\\frac18&\\frac18&-\\frac18&-\\frac18&-\\frac18&-\\frac18\\\\\\frac14&\\frac14&-\\frac14&-\\frac14&0&0&0&0\\\\0&0&0&0&\\frac14&\\frac14&-\\frac14&-\\frac14\\\\\\frac12&-\\frac12&0&0&0&0&0&0\\\\0&0&\\frac12&-\\frac12&0&0&0&0\\\\0&0&0&0&\\frac12&-\\frac12&0&0\\\\0&0&0&0&0&0&\\frac12&-\\frac12\\\\\\end{bmatrix}\\begin{bmatrix}64\\\\2\\\\3\\\\61\\\\60\\\\6\\\\7\\\\57\\\\\\end{bmatrix}=\\begin{bmatrix}32.5\\\\0\\\\0.5\\\\0.5\\\\31\\\\-29\\\\27\\\\-25\\\\\\end{bmatrix} å“ˆå°”å˜æ¢+é™é‡‡æ ·ä¾‹å¦‚ï¼šä¸€ä¸ªä¸€ç»´çš„å›¾åƒ$[2,4,6,8,10,12,14,16]$ æ±‚å‡å€¼ï¼ˆä½é¢‘ï¼‰ï¼šç›¸é‚»ä¸¤ä¸ªå–å‡å€¼ï¼Œå¾—$[3,7,11,15]$ã€‚è¿™ä¸ªæ–°çš„å›¾åƒåˆ†è¾¨ç‡å°±æˆäº†åŸæ¥çš„ä¸€åŠ(8/2=4)ã€‚ æ±‚å·®å€¼ï¼ˆé«˜é¢‘ï¼‰ï¼šä¸Šé¢çš„å‡å€¼æˆ‘ä»¬å­˜å‚¨äº†å›¾åƒçš„æ•´ä½“ä¿¡æ¯ã€‚ä½†æ˜¯å¾ˆå¤šç»†èŠ‚ä¿¡æ¯æˆ‘ä»¬ä¸¢æ‰äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åŒæ—¶è¦è®°å½•å›¾åƒçš„ç»†èŠ‚ä¿¡æ¯ï¼Œè¿™æ ·åœ¨é‡æ„æ—¶èƒ½å¤Ÿæ¢å¤å›¾åƒçš„å…¨éƒ¨ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯æ±‚ç¬¬mä¸ªå·®å€¼çš„å…¬å¼ï¼š b_m=\\frac {a_{2m}âˆ’a_{2m+1}}2&emsp;&emsp;ç»è¿‡è®¡ç®—æˆ‘ä»¬å¾—åˆ°äº†ç»“æœ$[-1,-1,-1,-1]$ã€‚è¿™ä¸ªæ–°çš„åˆ†è¾¨ç‡ä¹Ÿæˆäº†åŸæ¥çš„ä¸€åŠ(8/2=4)ã€‚ å“ˆå°”å°æ³¢é‡‘å­—å¡”&emsp;&emsp;å°æ³¢é‡‘å­—å¡”ï¼Œå…ˆå°†å›¾åƒåˆ†ä¸ºé«˜é¢‘å’Œä½é¢‘ï¼Œå…¶ä¸­çš„ä½é¢‘æˆåˆ†ç»§ç»­åˆ†è§£ã€‚ æ¯ä¸€æ­¥åˆ†è§£ï¼šå…ˆæ°´å¹³åˆ†è§£æˆé«˜é¢‘ã€ä½é¢‘ï¼› åœ¨å°†æ°´å¹³æ–¹å‘çš„åˆ†è§£çš„ç»“æœç»§ç»­åˆ†è§£ï¼Œå¾—åˆ°å››å¹…å›¾â€”â€”æ°´å¹³é«˜å‚ç›´é«˜ã€æ°´å¹³é«˜å‚ç›´ä½ã€æ°´å¹³ä½å‚ç›´é«˜ã€æ°´å¹³ä½å‚ç›´ä½ ä¸‹ä¸€æ­¥åˆ†è§£ï¼šå°†æ°´å¹³ä½å‚ç›´ä½çš„å›¾é‡å¤ä¸Šè¿°åˆ†è§£ï¼Œå³å¾—åˆ°å°æ³¢é‡‘å­—å¡”ã€‚ æ¯æ¬¡åˆ†è§£éƒ½æ˜¯é™é‡‡æ ·ï¼Œå¹¶ä¸”å¯ä»¥ç”¨åŸå§‹å›¾åƒå¤§å°ç©ºé—´è¡¨è¾¾å‡ºå…¨éƒ¨å°æ³¢åˆ†è§£ç»“æœã€‚ å°æ³¢çš„ä¼˜ç¼ºç‚¹ å°æ³¢çš„ä¼˜ç‚¹ ä¸æ˜¯è¿‡å®Œå¤‡çš„ï¼Œå³å¯ä»¥ç”¨åŸå§‹å›¾åƒå¤§å°ç©ºé—´è¡¨è¾¾å‡ºå…¨éƒ¨å°æ³¢åˆ†è§£ç»“æœã€‚ é€‚åˆå›¾åƒå‹ç¼©ï¼Œç³»æ•°æ¯”è¾ƒç¨€ç– å¯åˆ†å±‚çš„è¿ç®—ï¼Œæ¯”è¾ƒå¿«é€Ÿ å°æ³¢çš„ç¼ºç‚¹ å­å¸¦ åªåšäº†æ°´å¹³å‚ç›´æ–¹å‘ï¼Œå…¶ä»–æ–¹å‘ä¸ç†æƒ³ ç©ºé—´åˆ†é…ä¸åˆç† ç©ºåŸŸä¸Šå°çš„ç§»åŠ¨ï¼Œä¼šå¯¼è‡´å°æ³¢åˆ†è§£çš„ç³»æ•°äº§ç”Ÿå¤§çš„å·®å¼‚ å¯æ§æ–¹å‘çš„é‡‘å­—å¡”&emsp;&emsp;è®¾è®¡ä¸åŒæ–¹å‘çš„æ»¤æ³¢å™¨ï¼Œå°†å›¾åƒåˆ†è§£æˆä¸åŒçš„æ»¤æ³¢ç»“æœï¼Œè¿™äº›æ»¤æ³¢ç»“æœåˆå¯ä»¥ç»§ç»­æŠ½æ ·åˆ’åˆ†ã€‚ å¯æ§æ–¹å‘çš„é‡‘å­—å¡”çš„ä¼˜ç‚¹ å­å¸¦åˆ’åˆ†æ—¶å¯ä»¥åšæ–¹å‘çš„ç»†åˆ† å­å¸¦çš„ç¨³å®šæ€§å¥½ï¼Œä¸ä¼šäº§ç”Ÿçªå˜ å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©æ»¤æ³¢å™¨ç»„ å¯æ§æ–¹å‘çš„é‡‘å­—å¡”çš„ç¼ºç‚¹ è¿‡å®Œå¤‡ éœ€è¦å„å‘åŒæ€§çš„æ»¤æ³¢å™¨è¿›è¡Œè¡¥å…… å›¾åƒé‡‘å­—å¡”çš„ä½œç”¨ å¤šå°ºåº¦ åœ¨æœ‰ä¸åŒå¤§å°çš„å›¾åƒåˆ†ææ—¶ï¼Œç®—æ³•ä¸å˜ï¼Œé€šè¿‡é‡‘å­—å¡”æ”¹å˜å°ºåº¦ å»å™ª çº¹ç†åˆ†æ ç›®æ ‡è¯†åˆ« å›¾åƒæ‹¼æ¥ å›¾åƒèåˆ å‚è€ƒ å›¾åƒä¸­çš„å„ç§é‡‘å­—å¡” å›¾åƒé‡‘å­—å¡”æ€»ç»“ å›¾åƒé‡‘å­—å¡”çš„ç®—æ³•æ„å»ºå›¾ç¤º é«˜æ–¯é‡‘å­—å¡”ã€æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡” å›¾åƒå¤šåˆ†å°ºåº¦å¤„ç†æŠ€æœ¯ opencv å®˜æ–¹æ–‡æ¡£ WiKiç™¾ç§‘ï¼šé‡‘å­—å¡”ï¼ˆå›¾åƒå¤„ç†ï¼‰) WiKiç™¾ç§‘ï¼šé™é‡‡æ · WiKiç™¾ç§‘ï¼šé‡‡æ ·å®šç† WiKiç™¾ç§‘ï¼šå“ˆå°”å°æ³¢å˜æ¢","categories":[{"name":"Computer Vision","slug":"Computer-Vision","permalink":"https://gy23333.github.io/categories/Computer-Vision/"}],"tags":[{"name":"é«˜æ–¯é‡‘å­—å¡”","slug":"é«˜æ–¯é‡‘å­—å¡”","permalink":"https://gy23333.github.io/tags/%E9%AB%98%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94/"},{"name":"æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”","slug":"æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”","permalink":"https://gy23333.github.io/tags/%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94/"},{"name":"å°æ³¢é‡‘å­—å¡”","slug":"å°æ³¢é‡‘å­—å¡”","permalink":"https://gy23333.github.io/tags/%E5%B0%8F%E6%B3%A2%E9%87%91%E5%AD%97%E5%A1%94/"}]},{"title":"Xcodeè°ƒç”¨Macæ‘„åƒå¤´","slug":"Xcodeè°ƒç”¨Macæ‘„åƒå¤´","date":"2020-03-30T17:04:38.000Z","updated":"2024-11-11T03:57:58.130Z","comments":true,"path":"2020/03/31/Xcodeè°ƒç”¨Macæ‘„åƒå¤´/","link":"","permalink":"https://gy23333.github.io/2020/03/31/Xcode%E8%B0%83%E7%94%A8Mac%E6%91%84%E5%83%8F%E5%A4%B4/","excerpt":"&emsp;&emsp;Xcodeä¸­OpenCV C++è°ƒç”¨Macæ‘„åƒå¤´ã€‚ç”±äºåœ¨macOS 10.14ä¸­åŠ å…¥äº†éšç§ç®¡ç†ï¼Œç›´æ¥è°ƒç”¨æ‘„åƒå¤´ä¼šå‡ºç°æŠ¥é”™1OpenCV: not authorized to capture video (status 0), requesting... OpenCV: camera failed to properly initialize!&emsp;&emsp;æ‰€ä»¥æ¶‰åŠæ‘„åƒå¤´è¿™ç±»éšç§é—®é¢˜çš„é¡¹ç›®å¿…é¡»æ·»åŠ Info.plistï¼Œåœ¨è¿™æ³¨å†Œæ‘„åƒå¤´æƒé™ã€‚","text":"&emsp;&emsp;Xcodeä¸­OpenCV C++è°ƒç”¨Macæ‘„åƒå¤´ã€‚ç”±äºåœ¨macOS 10.14ä¸­åŠ å…¥äº†éšç§ç®¡ç†ï¼Œç›´æ¥è°ƒç”¨æ‘„åƒå¤´ä¼šå‡ºç°æŠ¥é”™1OpenCV: not authorized to capture video (status 0), requesting... OpenCV: camera failed to properly initialize!&emsp;&emsp;æ‰€ä»¥æ¶‰åŠæ‘„åƒå¤´è¿™ç±»éšç§é—®é¢˜çš„é¡¹ç›®å¿…é¡»æ·»åŠ Info.plistï¼Œåœ¨è¿™æ³¨å†Œæ‘„åƒå¤´æƒé™ã€‚ æ³¨å†Œæ‘„åƒå¤´æƒé™&emsp;&emsp;Photo Boothä½œä¸ºMacåŸç”Ÿçš„è°ƒç”¨æ‘„åƒå¤´çš„appï¼Œå¤©ç”Ÿå¸¦æœ‰è®¾ç½®æƒé™çš„Info.plistï¼Œæˆ‘ä»¬åªéœ€è¦å°†Photo Boothçš„Info.plistç¨ä½œä¿®æ”¹ï¼Œä¾¿å¯åº”ç”¨äºæˆ‘ä»¬çš„ç¨‹åºä¸­ã€‚ &emsp;&emsp;å½“ç„¶ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—åœ¨Xcodeé‡Œé…ç½®OpenCVã€‚ 1ã€åœ¨/System/Applications/Photo Booth.appä¸­å³å‡»â€œæ˜¾ç¤ºåŒ…æ–‡ä»¶â€ï¼Œæ‰¾åˆ°å…¶ä¸­çš„/System/Applications/Photo Booth.app/Contents/Info.plistï¼Œå°†è¿™ä¸ªInfo.plistæ‹·è´ç”¨äºä¿®æ”¹ã€‚ 2ã€ä¿®æ”¹Info.plist &emsp;&emsp;å°†åŸæœ¬çš„Info.plistè¿›è¡Œä¸‹åˆ—ä¿®æ”¹ã€‚ 3ã€å°†Info.plistç§»å…¥Xcodeé¡¹ç›®ä¸­ &emsp;&emsp;åœ¨Xcodeé¡¹ç›®çš„Productæ–‡ä»¶ä¸­å³å‡»é‡Œé¢çš„é¡¹ç›®â€œShow In Folderâ€ï¼Œå°†ä¿®æ”¹åçš„Info.plistæ·»åŠ åˆ°è¯¥æ–‡ä»¶å¤¹ä¸­ã€‚ &emsp;&emsp;æ‘„åƒå¤´æ³¨å†Œé…ç½®å®Œæˆã€‚ OpenCV C++ è°ƒç”¨æ‘„åƒå¤´1234567891011121314151617#include &lt;opencv2/opencv.hpp&gt;using namespace cv;using namespace std;int main()&#123; //è¯»å–è§†é¢‘æˆ–æ‘„åƒå¤´ VideoCapture capture(0); while (true)&#123; Mat frame; capture &gt;&gt; frame; imshow(\"è¯»å–è§†é¢‘\", frame); waitKey(30); //å»¶æ—¶30 &#125; return 0;&#125;","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"Xcode","slug":"Xcode","permalink":"https://gy23333.github.io/tags/Xcode/"},{"name":"Mac","slug":"Mac","permalink":"https://gy23333.github.io/tags/Mac/"},{"name":"æ‘„åƒå¤´æƒé™","slug":"æ‘„åƒå¤´æƒé™","permalink":"https://gy23333.github.io/tags/%E6%91%84%E5%83%8F%E5%A4%B4%E6%9D%83%E9%99%90/"}]},{"title":"ã€Šè®¡ç®—æœºç½‘ç»œ-è‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ç¬”è®°","slug":"ã€Šè®¡ç®—æœºç½‘ç»œ-è‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ç¬”è®°","date":"2020-03-16T12:54:15.000Z","updated":"2024-12-25T15:48:02.856Z","comments":true,"path":"2020/03/16/ã€Šè®¡ç®—æœºç½‘ç»œ-è‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ç¬”è®°/","link":"","permalink":"https://gy23333.github.io/2020/03/16/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0/","excerpt":"è®¡ç®—æœºç½‘ç»œè¯¾å ‚ç¬”è®°ï¼Œå‚è€ƒç”¨ä¹¦ã€Šè®¡ç®—æœºç½‘ç»œ-è‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ã€‚","text":"è®¡ç®—æœºç½‘ç»œè¯¾å ‚ç¬”è®°ï¼Œå‚è€ƒç”¨ä¹¦ã€Šè®¡ç®—æœºç½‘ç»œ-è‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ã€‚ è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘è®¡ç®—æœºç½‘ç»œâ€‹ èµ·æºæ˜¯ä¸ºäº†å½¢æˆä¸€ä¸ªè‡ªä¸»ã€è‡ªæ²»ã€äº’è”çš„è®¡ç®—æœºé€šä¿¡ç³»ç»Ÿã€‚ æ„æˆæè¿°â€‹ å› ç‰¹ç½‘ä¹Ÿè¢«ç§°ä¸ºâ€œç½‘ä¸­ç½‘â€ï¼Œæˆ‘ä»¬æ‰€ç”¨çš„ç½‘ç»œéƒ½æ˜¯å¤§ç½‘ä¸­çš„å°ç½‘ï¼ˆå¥—å¨ƒï¼‰ã€‚ æ¥å…¥ç½‘ç»œçš„è®¾å¤‡â€”â€”ç½‘ç»œè¾¹ç¼˜ ä¸»æœºï¼ˆhostï¼‰ = ç«¯ç³»ç»Ÿï¼ˆend systemï¼‰ è¿è¡Œçš„è”ç½‘app é€šä¿¡é“¾è·¯ï¼ˆcommunication linkï¼‰â€”â€”æ¥å…¥ç½‘ åª’ä»‹ï¼šåŒè½´ç”µç¼†ã€é“œçº¿ã€å…‰çº¤ã€æ— çº¿ç”µé¢‘è°± ä¼ è¾“é€Ÿç‡ï¼šå¸¦å®½ bps åˆ†ç»„äº¤æ¢æœºï¼ˆpacket switchï¼‰â€”â€”ç½‘ç»œæ ¸å¿ƒ è·¯ç”±å™¨ï¼ˆrouterï¼‰å’Œ é“¾è·¯å±‚äº¤æ¢æœºï¼ˆlink-layer switchï¼‰ åè®®ï¼šæ§åˆ¶å‘é€ã€æ¥æ”¶ä¿¡æ¯ã€‚æ¯”å¦‚ï¼ŒTCP, IP, HTTPç­‰ç­‰ã€‚æ¯ä¸ªå±‚æ¬¡æœ‰æ¯ä¸ªå±‚æ¬¡çš„åè®®ã€‚ ç½‘ç»œæ ‡å‡† å› ç‰¹ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆIETFï¼‰ï¼š åˆ¶å®šç½‘ç»œæ ‡å‡†çš„ç»„ç»‡ è¯·æ±‚è¯„è®ºï¼ˆRFCï¼‰ï¼šIETFçš„æ ‡å‡†æ–‡æ¡£ æœåŠ¡æè¿° ä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡çš„åŸºç¡€è®¾æ–½ å³ç”¨æˆ·ä½¿ç”¨åº”ç”¨ã€‚ åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ å³ç¼–å†™åº”ç”¨ã€‚ ç½‘ç»œè¾¹ç¼˜ï¼ˆNetwork Edgeï¼‰â€‹ ä¸å› ç‰¹ç½‘ç›¸æ¥çš„è®¡ç®—æœºåŠå…¶ä»–è®¾å¤‡ä½äºå› ç‰¹ç½‘çš„è¾¹ç¼˜ï¼Œç§°ä¸ºç«¯ç³»ç»Ÿã€‚ ç«¯ç³»ç»Ÿ = ä¸»æœºï¼Œå¯ä»¥è¢«åˆ’ä¸ºä¸‹é¢ä¸¤ç§ï¼š å®¢æˆ·ï¼ˆclientï¼‰ æœåŠ¡å™¨ï¼ˆserverï¼‰ï¼šæ¯”å¦‚æœ‰ä¼ä¸šå­˜å‚¨å¤§é‡æ•°æ®çš„å¤§å‹æ•°æ®ä¸­å¿ƒï¼ˆdata centersï¼‰ æ¥å…¥ç½‘ï¼ˆAccess Networksï¼‰â€‹ ç½‘ç»œè¾¹ç¼˜çš„ç«¯ç³»ç»Ÿ é€šè¿‡ æ¥å…¥ç½‘ï¼ˆç‰©ç†é“¾è·¯ï¼‰ è¿æ¥åˆ° è¾¹ç¼˜è·¯ç”±å™¨ï¼ˆç«¯ç³»ç»Ÿåˆ°ä»»ä½•å…¶ä»–è¿œç¨‹ç«¯ç³»ç»Ÿçš„è·¯å¾„ä¸Šçš„ç¬¬ä¸€å°è·¯ç”±å™¨ï¼‰ã€‚ å®¶åº­æ¥å…¥ï¼šDSLã€ç”µç¼†ã€FTTHã€æ‹¨å·å’Œå«æ˜Ÿ æ•°å­—ç”¨æˆ·çº¿ï¼ˆdigital subscriber lineï¼ŒDSLï¼‰ â€‹ åˆ©ç”¨ç”µè¯çº¿è·¯æ¥å…¥ç½‘ç»œã€‚å…¶ä¸­ ADSLæ˜¯éå¯¹ç§°çš„æ•°å­—ç”¨æˆ·çº¿ï¼ŒåŸºæœ¬éƒ½ç”¨ADSLï¼Œå› ä¸ºä¸€èˆ¬ä¸‹è¡Œçš„æ•°æ®é‡éƒ½è¿œå¤§äºä¸Šè¡Œçš„æ•°æ®é‡ï¼Œæ‰€ä»¥è¦è®¾è®¡æˆéå¹³è¡¡çš„é“¾è·¯ã€‚ â€‹ é‡‡ç”¨ç‹¬å çš„é¢‘åˆ†å¤šè·¯å¤ç”¨æ¥ä¼ è¾“ã€‚å› ä¸ºåˆ©ç”¨çš„æ˜¯åŸæœ‰çš„ç”µè¯çº¿è·¯ï¼Œæ‰€ä»¥éœ€è¦å°†DSLä¼ è¾“çš„ç½‘ç»œä¿¡å·ï¼ˆä¸Šè¡Œã€ä¸‹è¡Œï¼‰å’Œç”µè¯ä¿¡å·é€šè¿‡é¢‘åˆ†å¤šè·¯å¤ç”¨æ¥åŒºåˆ†å¼€æ¥ã€‚ é¢‘æ®µ ä¼ è¾“ä¿¡å· 0~4K ç”µè¯è¯­éŸ³çº¿è·¯ 4K~50K ä¸Šè¡Œä¿¡å· 50K~1M ä¸‹è¡Œä¿¡å· ç”µç¼†å› ç‰¹ç½‘æ¥å…¥ï¼ˆcable Internet accessï¼‰ åˆ©ç”¨æœ‰çº¿ç”µè§†ç½‘æ¥å…¥ç½‘ç»œã€‚ç»“æ„ä¸Šï¼Œé€šè¿‡ç²—çš„åŒè½´ç”µç¼†æ¥å…¥ç¤¾åŒºï¼Œå†ç”¨ç»†çš„åŒè½´ç”µç¼†æ¥å…¥æ¯å®¶æ¯æˆ·ã€‚ é‡‡ç”¨å…±äº«çš„é¢‘åˆ†å¤šè·¯å¤ç”¨æ¥ä¼ è¾“ã€‚ æ··åˆå…‰çº¤åŒè½´ç”µç¼†ï¼ˆHFCï¼‰ â€‹ åŒè½´ç”µç¼†å’Œå…‰çº¤èŠ‚ç‚¹ç›¸è¿å†æ¥å…¥è¾¹ç¼˜è·¯ç”±å™¨ã€‚ â€‹ ä¸å¯¹ç§°çš„ç«äº‰å¼åè®®ï¼Œæœ€é«˜å¯è¾¾åˆ°30Mbpsçš„ä¸‹è¡Œé€Ÿç‡å’Œ2Mbpsçš„ä¸Šè¡Œé€Ÿç‡ã€‚ç”±äºé‡‡ç”¨ç«äº‰å¼åè®®ï¼Œåœ¨ç”¨æˆ·å°‘æ—¶ä½¿ç”¨ä½“éªŒä¼˜äºæ™®é€šçš„ç”µç¼†å› ç‰¹ç½‘æ¥å…¥ï¼Œä½†æ˜¯åœ¨ç”¨æˆ·å¤šæ—¶å®¹æ˜“é€ æˆå¡é¡¿ã€‚ ä¼ä¸šï¼ˆå®¶åº­ï¼‰æ¥å…¥ï¼šä»¥å¤ªç½‘å’ŒWiFi ä»¥å¤ªç½‘ï¼šä½¿ç”¨åŒç»é“œçº¿ä¸ä¸€å°ä»¥å¤ªç½‘äº¤æ¢æœºç›¸è¿ï¼Œé€Ÿç‡å¯è¾¾åˆ°100Mbpsã€1Gbpsã€10Gbpsã€‚ WiFiï¼šIEEE802.11æŠ€æœ¯æ— çº¿LANï¼ŒèŒƒå›´åœ¨å‡ åç±³å†…ã€‚ å¹¿ä¹‰æ— çº¿æ¥å…¥ï¼š4Gå’Œ5Gâ€‹ è¯¦è§ç¬¬å…­ç«  ç‰©ç†åª’ä½“ï¼ˆPhysical Mediaï¼‰ å¯¼å¼•å‹åª’ä½“ï¼ˆguided mediaï¼‰ï¼šä¿¡å·åœ¨å›ºä½“åª’ä½“ä¸­ä¼ è¾“ï¼Œæ¯”å¦‚å…‰ç¼†ã€åŒç»é“œçº¿å’ŒåŒè½´ç”µç¼†ã€‚ éå¯¼å¼•å‹åª’ä½“ï¼ˆunguided mediaï¼‰ï¼šç”µæ³¢åœ¨ç©ºæ°”ä¸­ä¼ æ’­ï¼Œæ¯”å¦‚æ— çº¿å±€åŸŸç½‘æˆ–æ•°å­—å«æ˜Ÿé¢‘é“ã€‚ ç½‘ç»œæ ¸å¿ƒï¼ˆNetwork Coreï¼‰â€‹ ç½‘ç»œæ ¸å¿ƒï¼šç”±ç«¯ç³»ç»Ÿçš„åˆ†ç»„äº¤æ¢æœºå’Œé“¾è·¯æ„æˆçš„ç½‘çŠ¶ç½‘ç»œã€‚ä¸‹å›¾æ ‡äº®éƒ¨åˆ†å³ä½¿ç½‘ç»œæ ¸å¿ƒã€‚ â€‹ ä¸€å…±æœ‰ä¸‰ç§äº¤æ¢æ–¹å¼ï¼šæŠ¥æ–‡äº¤æ¢ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰ã€åˆ†ç»„äº¤æ¢å’Œç”µè·¯äº¤æ¢ åˆ†ç»„äº¤æ¢ï¼ˆPacket Switchingï¼‰â€‹ ç«¯ç³»ç»Ÿä¹‹é—´å½¼æ­¤ä¼ è¾“æŠ¥æ–‡ï¼Œåˆ†ç»„äº¤æ¢ä¸­ï¼Œå°†é•¿æŠ¥æ–‡åˆ’åˆ†ä¸ºåˆ†ç»„ï¼Œåˆ†ç»„å†é€šè¿‡é€šä¿¡é“¾è·¯å’Œåˆ†ç»„äº¤æ¢æœºï¼ˆåˆ†ä¸ºè·¯ç”±å™¨å’Œé“¾è·¯å±‚äº¤æ¢æœºï¼‰ä¼ é€ã€‚ å­˜å‚¨è½¬å‘ä¼ è¾“ï¼ˆStore-and-Forward Transmissionï¼‰ â€‹ åˆ†ç»„äº¤æ¢å’ŒæŠ¥æ–‡äº¤æ¢éƒ½é‡‡ç”¨äº†å­˜å‚¨è½¬å‘çš„ä¼ è¾“å½¢å¼ã€‚ä½†åˆ†ç»„äº¤æ¢çš„å­˜å‚¨è½¬å‘ä»¥åˆ†ç»„ä¸ºå•ä½ï¼Œå³äº¤æ¢æœºæ¥æ”¶åˆ°æ•´ä¸ªåˆ†ç»„åæ‰èƒ½è¾“å‡ºè¯¥åˆ†ç»„çš„æ•°æ®ï¼›è€ŒæŠ¥æ–‡äº¤æ¢çš„å­˜å‚¨è½¬å‘å•ä½ä¸ºæŠ¥æ–‡ï¼Œéœ€è¦äº¤æ¢æœºæ¥æ”¶åˆ°æ•´ä¸ªæŠ¥æ–‡åæ‰èƒ½è¾“å‡ºã€‚ â€‹ ä¼ è¾“ç›¸åŒå¤§å°çš„æ•°æ®åŒ…ï¼Œåˆ†ç»„äº¤æ¢æ¯”æŠ¥æ–‡äº¤æ¢æ›´å¿«ã€‚ä¸‹é¢æ˜¯åˆ†ç»„äº¤æ¢ä¼ è¾“3Lå¤§å°çš„æŠ¥æ–‡çš„æ—¶é—´æµï¼ŒæŠ¥æ–‡åˆ†ä¸º3ä¸ªå¤§å°ä¸ºLçš„åˆ†ç»„ï¼Œæ ¹æ®åˆ†ç»„äº¤æ¢åŸç†ï¼Œä¸€å…±è€—è´¹äº† 4L/R æ—¶é—´å®Œæˆä¼ è¾“ï¼ˆå³å­˜å‚¨è½¬å‘æ—¶å»¶ï¼‰ã€‚è€Œå¦‚æœä½¿ç”¨æŠ¥æ–‡ä¼ è¾“åŒæ ·çš„3Lå¤§å°çš„æŠ¥æ–‡åˆ™éœ€è¦è€—è´¹ 6L/R æ—¶é—´ã€‚ æ’é˜Ÿæ—¶å»¶ï¼ˆQueuing Delayï¼‰å’Œåˆ†ç»„ä¸¢å¤±ï¼ˆPacket Lossï¼‰ â€‹ åˆ†ç»„äº¤æ¢æœºæœ‰æœ‰ä¸€ä¸ªè¾“å‡ºç¼“å­˜ï¼ˆoutput bufferï¼‰ï¼Œåˆ†ç»„å¯èƒ½ä¼šåœ¨åˆ†ç»„äº¤æ¢æœºä¸Šæ’é˜Ÿç­‰å¾…è¾“å‡ºï¼Œé€ æˆæ’é˜Ÿæ—¶å»¶ã€‚ â€‹ åˆ†ç»„äº¤æ¢æœºçš„ç¼“å­˜ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥åœ¨è¿‡äºæ‹¥å µæ—¶ä¼šäº§ç”Ÿåˆ†ç»„ä¸¢å¤±ï¼ˆä¸¢åŒ…ï¼‰ã€‚ è½¬å‘è¡¨ï¼ˆForwarding Tableï¼‰å’Œè·¯ç”±é€‰æ‹©åè®®ï¼ˆRouting Protocolï¼‰ è·¯ç”±ï¼šåˆ†ç»„ä¸­åŒ…æ‹¬IPåœ°å€ï¼› è½¬å‘ï¼šè·¯ç”±å™¨ä¸­å°†ç›®çš„åœ°å€æ˜ å°„ä¸ºè¾“å‡ºé“¾è·¯ã€‚ ç”µè·¯äº¤æ¢ï¼ˆCircuit Switchingï¼‰â€‹ ç«¯åˆ°ç«¯è¿æ¥ï¼ˆend- to-end connectionï¼‰ï¼šåœ¨å‘é€æ•°æ®ä¹‹å‰ï¼Œå¿…é¡»å…ˆåœ¨å‘é€å’Œæ¥æ”¶ä¸¤ç«¯å»ºç«‹ç«¯åˆ°ç«¯è¿æ¥ï¼Œå¹¶é¢„ç•™ä¸€éƒ¨åˆ†å¸¦å®½ã€‚è€Œåˆ†ç»„äº¤æ¢ä¸é¢„ç•™ï¼Œæ‰€ä»¥ä¼šé€ æˆæ’é˜Ÿå’Œä¸¢åŒ…ã€‚ é¢‘åˆ†å¤šè·¯å¤ç”¨ï¼ˆFDMï¼‰â€‹ é“¾è·¯ä¸­çš„æ¯æ¡è¿æ¥ä¸“ç”¨ä¸€ä¸ªé¢‘æ®µã€‚ æ—¶åˆ†å¤šè·¯å¤ç”¨ï¼ˆTDMï¼‰â€‹ è¿œè·ç¦»ä¼ è¾“ä¼šæœ‰è¡°å‡ï¼Œæ‰€ä»¥è€ƒè™‘ç”¨æ•°å­—ä¿¡å·è¿›è¡Œä¼ è¾“ã€‚åœ¨æ—¶åŸŸä¸Šå¯¹ä¿¡å·è¿›è¡Œé‡‡æ ·ï¼Œæ¥æ”¶æ—¶å†å°†é‡‡æ ·ä¿¡å·æ¢å¤ã€‚ â€‹ TDMåœ¨æ—¶åŸŸä¸Šè¢«åˆ’åˆ†ä¸ºå›ºå®šçš„å¸§ï¼ˆframeï¼‰ï¼Œæ¯å¸§åˆè¢«åˆ’åˆ†ä¸ºå›ºå®šæ•°é‡çš„æ—¶éš™ï¼ˆslotï¼‰ï¼Œé“¾è·¯ä¸­çš„æ¯æ¡è¿æ¥ä¸“ç”¨ä¸€ä¸ªæ—¶éš™ã€‚ åˆ†ç»„äº¤æ¢ &amp; ç”µè·¯äº¤æ¢â€‹ åˆ†ç»„äº¤æ¢çš„æ€§èƒ½ä¼˜äºç”µè·¯äº¤æ¢ï¼Œé€‚ç”¨äºéšæœºæ•°æ®ï¼Œå¯ä»¥æ»¡è¶³æ›´å¤šç”¨æˆ·ã€‚ â€‹ ç”µè·¯äº¤æ¢éœ€è¦é¢„ç•™å¸¦å®½ï¼Œç›¸å½“äºå›ºå®šäº†é“¾è·¯ç”¨æˆ·çš„æ•°é‡ã€‚è€Œåˆ†ç»„äº¤æ¢ä¸éœ€è¦é¢„ç•™å¸¦å®½ï¼Œç”¨æˆ·ä½¿ç”¨ç½‘ç»œæ˜¯æœ‰ä¸€å®šæ¦‚ç‡çš„ï¼Œåœ¨ä¸€ä¸ªæ—¶åˆ»è¾ƒå¤šäººä½¿ç”¨çš„æ¦‚ç‡å…¶å®ç›¸å¯¹è¾ƒä½ï¼Œæ‰€ä»¥ä¸€æ¡é“¾è·¯å¯ä»¥ç»™æ›´å¤šçš„ç”¨æˆ·ä½¿ç”¨ã€‚ â€‹ ç”µè·¯äº¤æ¢é€‚ç”¨äºç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚è¦ä¿éšœä¼ è¾“æ•°æ®èƒ½åŠ›ã€‚ ç½‘ç»œç»“æ„â€‹ ç½‘ç»œç»“æ„æ˜¯ç½‘ä¸­ä¹‹ç½‘ï¼Œå…·æœ‰å±‚æ¬¡ç»“æ„ã€‚ ISPï¼šISPåˆ†ä¸ºè®¸å¤šå±‚çº§ï¼Œæ¯”å¦‚ç¬¬ä¸€å±‚ISPï¼ˆtier-1 ISPï¼‰ã€åŒºåŸŸISPï¼ˆregional ISPï¼‰ã€æ¥å…¥ISPï¼ˆaccess ISPï¼‰ã€‚ç«¯ç³»ç»Ÿé€šè¿‡æ¥å…¥ISPä¸å› ç‰¹ç½‘ç›¸è¿ï¼Œå…¨çƒçš„ISPé€šè¿‡å„ä¸ªå±‚çº§ç›¸è¿ï¼Œå½¢æˆäº†äº’è”ç½‘çš„äº’è”ã€‚ å› ç‰¹ç½‘äº¤æ¢ç‚¹ï¼ˆInternet Exchange Pointï¼ŒIXPï¼‰ï¼šç”±ç¬¬ä¸‰æ–¹å…¬å¸åˆ›å»ºï¼ŒIXPæ˜¯ä¸€ä¸ªæ±‡åˆç‚¹ï¼Œå¤šä¸ªISPåœ¨æ­¤å¤„å¯¹ç­‰ã€‚ åè®®ï¼ˆProtocolï¼‰â€‹ åè®®å®šä¹‰äº†åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªé€šä¿¡å®ä½“ä¹‹é—´äº¤æ¢çš„æŠ¥æ–‡æ ¼å¼å’Œæ¬¡åºï¼Œä»¥åŠæŠ¥æ–‡å‘é€å’Œ/æˆ–æ¥æ”¶ä¸€æ¡æŠ¥æ–‡æˆ–å…¶ä»–æ—¶é—´æ‰€é‡‡å–çš„åŠ¨ä½œã€‚ â€‹ åè®®ä¸‰å¤§è¦ç´ ï¼š è¯­æ³•ï¼ˆSyntaxï¼‰ï¼šæ¯ä¸€æ®µå†…å®¹ç¬¦åˆä¸€å®šè§„åˆ™çš„æ ¼å¼ï¼Œæ¯”å¦‚ä¸€ä¸ªæŠ¥æ–‡å‰8ä½æ˜¯åŸåœ°å€ï¼Œåå…«ä¸ªæ˜¯ç›®çš„åœ°å€ï¼ˆåªæ˜¯ä¸¾ä¾‹ï¼Œä¸è¦å½“çœŸï¼‰ä¹‹ç±»ã€‚ è¯­ä¹‰ï¼ˆSemanticsï¼‰ï¼šæ¯ä¸€æ®µå†…å®¹éœ€è¦ä»£è¡¨æŸç§æ„ä¹‰ï¼Œæ¯”å¦‚åŸåœ°å€éƒ¨åˆ†çš„äºŒè¿›åˆ¶åˆ°åº•æ˜¯æŒ‡å“ªä¸ªåœ°å€ã€‚ åŒæ­¥ï¼ˆTimingï¼‰ï¼šé€šä¿¡çš„è¿‡ç¨‹ï¼Œå³æ¯ä¸€æ®µä»»åŠ¡çš„æ‰§è¡Œé¡ºåºã€‚ åè®®å±‚æ¬¡ï¼ˆProtocol Layerï¼‰åŠå…¶æœåŠ¡æ¨¡å‹äº”å±‚å› ç‰¹ç½‘åè®®æ ˆâ€‹ å› ç‰¹ç½‘åè®®æ ˆç”±5ä¸ªå±‚æ¬¡ç»„æˆï¼šç‰©ç†å±‚ã€é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚å› ç‰¹ç½‘åè®®æ ˆæ˜¯ä¸€ä¸ªç†æƒ³æ¨¡å‹ã€‚ â€‹ ä¸‹å±‚ä¸ºä¸Šå±‚æä¾›æœåŠ¡ã€‚è¶Šä¸‹é¢çš„å±‚ï¼Œè¶Šé è¿‘ç¡¬ä»¶ï¼›è¶Šä¸Šé¢çš„å±‚ï¼Œè¶Šé è¿‘ç”¨æˆ·ã€‚ å±‚æ¬¡ åŠŸèƒ½ åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰ æ”¯æŒç½‘ç»œåº”ç”¨ï¼Œåº”ç”¨åè®®ä»…ä»…æ˜¯ç½‘ç»œåº”ç”¨çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹åˆ™ä½¿ç”¨åº”ç”¨å±‚åè®®è¿›è¡Œé€šä¿¡ã€‚ ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ è´Ÿè´£ä¸ºä¿¡æºå’Œä¿¡å®¿æä¾›åº”ç”¨ç¨‹åºè¿›ç¨‹é—´çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œè¿™ä¸€å±‚ä¸Šä¸»è¦å®šä¹‰äº†ä¸¤ä¸ªä¼ è¾“åè®®ï¼Œä¼ è¾“æ§åˆ¶åè®®å³TCPå’Œç”¨æˆ·æ•°æ®æŠ¥åè®®UDPã€‚ ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰ è´Ÿè´£å°†æ•°æ®æŠ¥ç‹¬ç«‹åœ°ä»ä¿¡æºå‘é€åˆ°ä¿¡å®¿ï¼Œä¸»è¦è§£å†³è·¯ç”±é€‰æ‹©ã€æ‹¥å¡æ§åˆ¶å’Œç½‘ç»œäº’è”ç­‰é—®é¢˜ã€‚ é“¾è·¯å±‚ï¼ˆLink Layerï¼‰ è´Ÿè´£å°†IPæ•°æ®æŠ¥å°è£…æˆåˆé€‚åœ¨ç‰©ç†ç½‘ç»œä¸Šä¼ è¾“çš„å¸§æ ¼å¼å¹¶ä¼ è¾“ï¼Œæˆ–å°†ä»ç‰©ç†ç½‘ç»œæ¥æ”¶åˆ°çš„å¸§è§£å°ï¼Œå–å‡ºIPæ•°æ®æŠ¥äº¤ç»™ç½‘ç»œå±‚ã€‚ ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰ è´Ÿè´£å°†æ¯”ç‰¹æµåœ¨ç»“ç‚¹é—´ä¼ è¾“ï¼Œå³è´Ÿè´£ç‰©ç†ä¼ è¾“ã€‚è¯¥å±‚çš„åè®®æ—¢ä¸é“¾è·¯æœ‰å…³ä¹Ÿä¸ä¼ è¾“ä»‹è´¨æœ‰å…³ã€‚ OSIæ¨¡å‹â€‹ OSIæ¨¡å‹ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰åˆ¶å®šï¼Œå®é™…å¹¶æ²¡æœ‰åº”ç”¨ï¼Œåªæœ‰ç†è®ºã€‚ â€‹ OSIæ¨¡å‹ç”±7å±‚ç»„æˆï¼šåº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚ã€‚ å°è£…ï¼ˆEncapsulationï¼‰â€‹ åœ¨å‘é€ç«¯ï¼Œ åº”ç”¨å±‚ï¼šå°† åº”ç”¨å±‚æŠ¥æ–‡ï¼ˆapplication-layer messageï¼‰Mä¼ é€ç»™ä¼ è¾“å±‚ï¼› ä¼ è¾“å±‚ï¼šæ¥æ”¶æŠ¥æ–‡Mï¼Œé™„ä¸Šä¼ è¾“å±‚é¦–éƒ¨ä¿¡æ¯Htï¼ˆåŒ…æ‹¬å·®é”™æ£€æµ‹ä½ä¿¡æ¯ç­‰ï¼‰ï¼Œæ„æˆ ä¼ è¾“å±‚æŠ¥æ–‡æ®µï¼ˆtransport-layer segmentï¼‰ï¼Œå°†å…¶ä¼ é€’ç»™ç½‘ç»œå±‚ï¼› ç½‘ç»œå±‚ï¼šæ¥æ”¶ä¼ è¾“å±‚æŠ¥æ–‡æ®µï¼Œé™„ä¸Šç½‘ç»œå±‚é¦–éƒ¨ä¿¡æ¯Hnï¼ˆåŒ…æ‹¬æºå’Œç›®çš„åœ°å€ç­‰ï¼‰ï¼Œæ„æˆ ç½‘ç»œå±‚æ•°æ®æ®µï¼ˆnetwork-layer datagramï¼‰ï¼Œå°†å…¶ä¼ é€’ç»™ç½‘ç»œå±‚ï¼› é“¾è·¯å±‚ï¼šæ¥æ”¶ç½‘ç»œå±‚æ•°æ®æ®µï¼Œé™„ä¸Šé“¾è·¯å±‚é¦–éƒ¨ä¿¡æ¯Hlï¼Œæ„æˆ é“¾è·¯å±‚å¸§ï¼ˆlink-layer frameï¼‰ï¼Œå°†å…¶ä¼ é€’ç»™ç‰©ç†å±‚ï¼› ç‰©ç†å±‚ï¼šè´Ÿè´£æ¯”ç‰¹æµç‰©ç†ä¼ è¾“ã€‚ åœ¨æ¥æ”¶ç«¯ä»¥åæ–¹å‘é‡æ„æŠ¥æ–‡æ®µã€‚ ç‰©ç†å±‚æ¦‚è¿°â€‹ åœ¨ä¸¤ä¸ªç‰©ç†åª’ä½“é—´è¿›è¡Œæ¯”ç‰¹æµä¼ è¾“ï¼Œä¸Šå±‚éƒ½æ˜¯é€»è¾‘é“¾æ¥ï¼Œåªæœ‰ç‰©ç†å±‚æ˜¯å®é™…çš„ç‰©ç†è¿æ¥ã€‚ ç‰©ç†å±‚åŸºæœ¬ç›®æ ‡ ä¿è¯å‘é€ä¿¡å·â€œ0â€å’Œâ€œ1â€çš„æ­£ç¡®æ€§ä»¥åŠå‘é€å’Œæ¥æ”¶çš„ä¸€è‡´æ€§ï¼› æ¯”ç‰¹æµä¼ è¾“çš„æ¨¡å¼ã€é€Ÿåº¦ã€æŒç»­æ—¶é—´å’Œä¿¡å·å¤±çœŸï¼› æ¥å£è®¾è®¡ï¼šå¼•è„šæ•°ç›®ã€åŠŸèƒ½ç­‰ç­‰ï¼› ä¿¡å·ä¼ è¾“çš„ç¨‹åºï¼šå¦‚ä½•å®‰æ’ä¼ è¾“è¿‡ç¨‹å’Œäº‹ä»¶æ¬¡åºã€‚ ç‰©ç†å±‚çš„åŸºæœ¬ç‰¹æ€§ æœºæ¢°ç‰¹æ€§ï¼šæŒ‡æ˜æ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„å½¢çŠ¶å’Œå°ºå¯¸ã€å¼•çº¿æ•°ç›®å’Œæ’åˆ—ã€å›ºå®šå’Œé”å®šè£…ç½®ç­‰ï¼› ç”µæ°”ç‰¹æ€§ï¼šæŒ‡æ˜ä¼ è¾“æ¨¡å¼ã€ç”µå‹èŒƒå›´ã€ç¼–ç ã€é˜»æŠ—åŒ¹é…ã€ä¼ è¾“é€Ÿç‡ä»¥åŠä¼ è¾“è·ç¦»ç­‰ç­‰ï¼› åŠŸèƒ½ç‰¹æ€§ï¼šæŒ‡æ˜å„æ¡ç‰©ç†çº¿è·¯çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³çš„ç”µå‹è¡¨ç¤ºä½•ç§æ„ä¹‰ï¼Œ ç‰©ç†æ¥å£ä¿¡å·çº¿æŒ‰åŠŸèƒ½åˆ†ä¸ºå››ç±»ï¼šæ•°æ®çº¿ã€æ§åˆ¶çº¿ã€å®šæ—¶çº¿å’Œåœ°çº¿ï¼› è§„ç¨‹ç‰¹æ€§ï¼šæŒ‡æ˜å„ç‰©ç†çº¿è·¯å·¥ä½œè§„ç¨‹å’Œæ—¶åºçš„å…³ç³»ï¼Œæ¯”å¦‚å¯¹äºä¸åŒåŠŸèƒ½çš„å„ç§å¯èƒ½äº‹ä»¶çš„å‡ºç°é¡ºåºï¼Œ ä¿¡å·ä¼ è¾“çš„æ¨¡å¼ï¼šå•å·¥ï¼ˆä»…å•å‘é€šè¡Œï¼‰ã€åŠåŒå·¥ï¼ˆåŒæ–¹é€šï¼Œä½†ä¸€ä¸ªæ—¶åˆ»ä»…ä¸€æ–¹é€šï¼‰ã€å…¨åŒå·¥ï¼ˆåŒæ–¹éšæ—¶é€šï¼‰ã€‚ åŸºæœ¬é€šä¿¡åŸç†åŸºæœ¬æ¦‚å¿µ æ•°æ®ï¼ˆdataï¼‰ï¼šå¯¹äºå®¢è§‚äº‹å®æè¿°çš„ç‰©ç†ç¬¦å·ï¼ŒåŒ…æ‹¬æ•°å­—ã€æ–‡æœ¬ã€è¯­è¨€ã€å›¾åƒç­‰ç­‰ï¼› ä¿¡æ¯ï¼ˆinformationï¼‰ï¼šæ•°æ®çš„é›†åˆï¼› ä¿¡å·ï¼ˆsignalï¼‰ï¼šæ•°æ®ä¼ è¾“ä¸­çš„è¡¨ç°å½¢å¼ï¼Œæ¯”å¦‚æ¨¡æ‹Ÿä¿¡å·ã€æ•°å­—ä¿¡å·ï¼› ä¿¡é“ï¼ˆchannelï¼‰ï¼šå¾€å›ºå®šæ–¹å‘ä¼ è¾“ä¿¡æ¯çš„åª’ä»‹ã€‚ æ¨¡æ‹Ÿä¼ è¾“VSæ•°å­—ä¼ è¾“ ä¼ è¾“æ–¹å¼ ä¼˜ç‚¹ ç¼ºç‚¹ æ¨¡æ‹Ÿ å¯¹ä¿¡é“æœ‰é«˜åˆ©ç”¨ç‡ ä¸æŠ—å™ª æ•°å­— ä¿¡å·ä¸æ˜“å¤±çœŸ éœ€è¦æ›´å®½çš„å¸¦å®½ ä¿¡é“ç‰¹æ€§ ç å…ƒï¼ˆSymbolï¼‰ï¼šæ‰¿è½½ä¿¡æ¯é‡çš„åŸºæœ¬ä¿¡å·å•ä½ã€‚ â€‹ ä¸‹é¢æ˜¯é©¬åŸåˆ†çº§æ•° N ä¸æ‰€éœ€bitä½æ•° n çš„å…³ç³»ï¼ˆNä¸ªç¦»æ•£çš„å€¼éœ€è¦nä¸ªbitsï¼‰ n=log_2N æ³¢ç‰¹ç‡ï¼ˆBaud rateï¼‰ï¼šä¼ è¾“ç å…ƒçš„é€Ÿç‡ã€‚ æ¯”ç‰¹ç‡ï¼ˆBit rateï¼‰ï¼šä¼ è¾“æ¯”ç‰¹çš„é€Ÿç‡ã€‚ æ³¢ç‰¹ç‡ä¸æ¯”ç‰¹ç‡çš„å…³ç³» bit\\ rate(b/s)=baud\\ rate*n ä¿¡é“å®¹é‡ï¼ˆChannel capacityï¼‰ï¼šåœ¨ä¸€ä¸ªä¿¡é“ä¸­èƒ½å¤Ÿå¯é åœ°ä¼ é€ä¿¡æ¯æ—¶å¯è¾¾é€Ÿç‡çš„æœ€å°ä¸Šç•Œï¼Œå•ä½ bpsã€‚ é¢‘å¸¦å®½åº¦ï¼ˆFrequency bandwidthï¼‰ï¼šä¿¡é“å…è®¸çš„ä¿¡å·é¢‘ç‡èŒƒå›´ï¼Œå•ä½ Hzã€‚ Frequency\\ bandwidth = maximum\\ bandwidth-minimum\\ bandwidth ä¼ è¾“å»¶è¿Ÿï¼ˆTransmission delayï¼‰ï¼šåŒ…æ‹¬å‘é€åˆ°æ¥å—çš„å¤„ç†äº‹ä»¶ã€ç”µä¿¡å·çš„å“åº”æ—¶é—´ã€ä¸­é—´ä»‹è´¨çš„ä¼ è¾“æ—¶é—´ã€‚ å¥ˆå¥æ–¯ç‰¹å®šç†ï¼ˆNyquistâ€™s Lawï¼‰ å¯¹äºç†æƒ³çš„ä½é€šä¿¡å·ï¼Œåœ¨ä¸€ä¸ªé¢‘å¸¦å®½åº¦ä¸º W çš„ä¿¡é“ï¼Œå…¶ç å…ƒçš„æœ€å¤§ä¼ è¾“é€Ÿç‡ = 2W Baud å¯¹äºç†æƒ³çš„å¸¦é€šä¿¡å·ï¼Œåœ¨ä¸€ä¸ªé¢‘å¸¦å®½åº¦ä¸º W çš„ä¿¡é“ï¼Œå…¶ç å…ƒçš„æœ€å¤§ä¼ è¾“é€Ÿç‡ = W Baud é¦™å†œå®šç†ï¼ˆShannonâ€™s Formulaï¼‰ ä¿¡é“çš„ä¿¡æ¯ä¼ è¾“é€Ÿç‡Cï¼ˆå•ä½ï¼šbpsï¼‰ C=Wlog_2(1+S/N) W - å¸¦å®½ï¼Œå•ä½ Hz S - ä¿¡é“çš„å¹³å‡ä¿¡å·åŠŸç‡ N - ä¿¡é“çš„é«˜æ–¯å™ªå£°åŠŸç‡ S/N - ä¿¡å·åŠŸç‡ä¸å™ªå£°åŠŸç‡ä¹‹æ¯”ï¼ˆä¹Ÿå¯ä»¥å«ä¿¡å™ªæ¯”ï¼‰ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¿¡å™ªæ¯”ä¸ç”¨ $S/N$ è¡¨ç¤ºï¼Œè€Œæ˜¯ $10log_{10}S/N$ ï¼Œå•ä½ä¸ºdBã€‚ æ¨¡æ‹Ÿ/æ•°å­—ä¿¡å·ä¼ è¾“â€‹ æ¨¡æ‹Ÿä¿¡é“åªèƒ½ä¼ è¾“æ¨¡æ‹Ÿä¿¡å·ï¼Œæ•°å­—ä¿¡é“åªèƒ½ä¼ è¾“æ•°å­—ä¿¡å·ã€‚ è°ƒåˆ¶è§£è°ƒå™¨â€‹ æ•°å­—/æ¨¡æ‹Ÿä¿¡å· ç»è¿‡ è°ƒåˆ¶ å˜æˆ æ¨¡æ‹Ÿä¿¡å·ï¼Œå¦‚æ­¤å¯åœ¨ æ¨¡æ‹Ÿä¿¡é“ ä¸Šä¼ è¾“ï¼Œå†ç»è¿‡ è§£è°ƒ å˜æˆ æ•°å­—/æ¨¡æ‹Ÿä¿¡å·ã€‚ ç¼–ç è§£ç å™¨â€‹ æ•°å­—/æ¨¡æ‹Ÿä¿¡å· ç»è¿‡ ç¼–ç  å˜æˆ æ•°å­—ä¿¡å·ï¼Œå¦‚æ­¤å¯åœ¨ æ•°å­—ä¿¡é“ ä¸Šä¼ è¾“ï¼Œå†ç»è¿‡ è§£ç  å˜æˆ æ•°å­—/æ¨¡æ‹Ÿä¿¡å·ã€‚ è°ƒåˆ¶ï¼ˆModulationï¼‰ï¼šæ•°å­—ä¿¡å·åˆ°æ¨¡æ‹Ÿä¿¡å·â€‹ ä»æ•°å­—ä¿¡å·åˆ°æ¨¡æ‹Ÿä¿¡å·çš„è°ƒåˆ¶ä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼š è°ƒå¹…ï¼ˆAmplitude Modulationï¼ŒAMï¼‰ æŠŠæ•°å­—ä¿¡å·è½¬åŒ–æˆä¸åŒå¹…åº¦çš„æ­£å¼¦ä¿¡å·ã€‚ è°ƒé¢‘ï¼ˆFrequency Modulationï¼ŒFMï¼‰ æŠŠæ•°å­—ä¿¡å·è½¬åŒ–æˆä¸åŒé¢‘ç‡çš„æ­£å¼¦ä¿¡å·ã€‚ è°ƒç›¸ï¼ˆPhase Modulationï¼ŒPMï¼‰ æŠŠæ•°å­—ä¿¡å·è½¬åŒ–æˆä¸åŒç›¸ä½çš„æ­£å¼¦ä¿¡å·ã€‚ è„‰ç è°ƒåˆ¶ï¼ˆPulse Code Modulation, PCMï¼‰â€‹ æ¨¡æ‹Ÿä¿¡å·å˜æˆæ•°å­—ä¿¡å·ã€‚ è„‰ç è°ƒåˆ¶æ­¥éª¤ï¼š é‡‡æ ·ï¼ˆSampling systemï¼‰ é‡‡æ ·é¢‘ç‡æ˜¯ä¿¡å·é¢‘ç‡çš„ä¸¤å€ï¼Œåˆ™å¯ä¸å¤±çœŸåœ°æ¢å¤åŸå§‹ä¿¡å·ã€‚ é‡åŒ–ï¼ˆQuantifyï¼‰ å–æ•´é‡‡æ ·ä¿¡å·ã€‚ ç¼–ç ï¼ˆCodingï¼‰ é‡åŒ–åçš„ä¿¡å·ç¼–ç æˆäºŒè¿›åˆ¶ã€‚ æ•°å­—ä¿¡å·ç¼–ç ï¼ˆDigital signal codingï¼‰â€‹ æ•°å­—ä¿¡å·åˆ°æ•°å­—ä¿¡å·ã€‚ ä¸å½’é›¶ç¼–ç ï¼ˆNon-Return-To-Zero, NRZï¼‰â€‹ ä¸»è¦ä»‹ç»ä¸¤ç§ä¸å½’é›¶ç¼–ç ã€‚ Non-Return-To-Zero Level (NRZ-L) Coding â€‹ é«˜ç”µå¹³è¡¨ç¤ºâ€œ1â€ï¼Œä½ç”µå¹³è¡¨ç¤ºâ€œ0â€ã€‚ NRZ-Lçš„ä¼˜ç‚¹ï¼šç®€å•å¥½å®ç° NRZ-Lçš„ç¼ºç‚¹ï¼š éš¾ä»¥åˆ†æ¸…äºŒè¿›åˆ¶ä¸€ä½çš„å¼€å§‹å’Œç»“æŸï¼Œæ‰€ä»¥å¿…é¡»è¦å¸¦åŒæ­¥æ—¶é’Ÿï¼ˆå¤–åŒæ­¥ï¼‰æ¥åŒæ­¥ã€‚å¯ä»¥æŠŠä¸Šå›¾çš„è™šçº¿å½“ä½œæ˜¯åŒæ­¥æ—¶é’Ÿï¼Œå½“æŠŠè™šçº¿å»æ‰æ˜¯ï¼Œç›¸åŒç”µå¹³çš„ä¿¡å·å°±ä¸å¥½åˆ¤æ–­å¼€å§‹å’Œç»“æŸäº†ã€‚ åœ¨ä¼ è¾“å…¨â€œ1â€æˆ–å…¨â€œ0â€ä¿¡å·æ—¶ï¼Œæ­¤æ—¶ä¼ è¾“çš„åªæœ‰ç›´æµåˆ†é‡ï¼ˆå‚…ç«‹å¶åˆ†ä¸å‡ºæ­£å¼¦æˆ–ä½™å¼¦åˆ†é‡ï¼‰ï¼Œè¿™æ ·çº¿è·¯ä¸Šä¼šæœ‰æ¯”è¾ƒå¤§çš„å™ªå£°ã€‚ åå‘ä¸å½’é›¶ç¼–ç ï¼ˆNRZ-Iï¼‰ â€‹ é‡â€œ1â€åå‘ã€‚åªèƒ½è§£å†³NRZ-Lçš„éƒ¨åˆ†é—®é¢˜ï¼ˆå…¨â€œ1â€é—®é¢˜ï¼Œä¸å†æ˜¯ç›´æµï¼‰ å¤–åŒæ­¥ï¼ˆExternal synchronizationï¼‰ â€‹ ç»™ç³»ç»Ÿä¸€ä¸ªåŒæ­¥æ—¶é’Ÿä¿¡å·ï¼Œè®¾ç½®ä¸€ä¸ªå‘¨æœŸçš„å®½åº¦ã€‚ â€‹ å¤–åŒæ­¥æœ‰è¯¸å¤šä¸ä¾¿ï¼Œäºæ˜¯æœ‰äº†è‡ªåŒæ­¥çš„æ›¼åˆ‡æ–¯ç‰¹ç¼–ç ã€‚ æ›¼åˆ‡æ–¯ç‰¹ç¼–ç ï¼ˆManchester encodingï¼‰â€‹ æ¯ä¸ªç¼–ç ç”±ä¸¤æ®µç»„æˆï¼Œâ€œ1â€ï¼šå…ˆé«˜åä½ï¼›â€œ0â€ï¼šå…ˆä½åé«˜ï¼ˆå¯ä»¥åè¿‡æ¥å®šä¹‰ï¼‰ã€‚ æ›¼åˆ‡æ–¯ç‰¹ç¼–ç çš„ä¼˜ç‚¹ï¼ˆè§£å†³äº†ä¸å½’é›¶ç¼–ç çš„é—®é¢˜ï¼‰ï¼š è‡ªåŒæ­¥ï¼Œä¸éœ€è¦åŒæ­¥æ—¶é’Ÿï¼› ç›´æµåˆ†é‡ä¸º0ã€‚ æ›¼åˆ‡æ–¯ç‰¹ç¼–ç çš„ç¼ºç‚¹ï¼š åŸºé¢‘å¢åŠ ï¼šåŸºé¢‘æ˜¯ä¸å½’é›¶ç¼–ç çš„ä¸¤å€ï¼Œä»è€Œæ¯”ç‰¹ç‡å˜æˆäº†ä¸å½’é›¶ç¼–ç çš„ä¸€åŠï¼› äºŒä¹‰æ€§ï¼šç»„åˆæƒ…å†µæœ‰ä¸¤ç§ã€‚ å·®åˆ†æ›¼åˆ‡æ–¯ç‰¹ç¼–ç ï¼ˆDifferential Manchester encodingï¼‰â€‹ è§£å†³æ›¼åˆ‡æ–¯ç‰¹ç¼–ç çš„äºŒä¹‰æ€§ã€‚ â€œ1â€ï¼šè‡ªå·±çš„å‰åŠæ³¢ä¸å‰ä¸€ä¸ªç¼–ç çš„ååŠæ³¢ç›¸åŒï¼› â€œ0â€ï¼šè‡ªå·±çš„å‰åŠæ³¢ä¸å‰ä¸€ä¸ªç¼–ç çš„ååŠæ³¢ç›¸åã€‚ æœ‰ä¸¤ç§ç”»æ³•ï¼Œåˆå§‹ä¸ºé«˜ã€åˆå§‹ä¸ºä½ï¼Œä¸¤ç§ç”»æ³•ç»“æœå¯¹ç§°ã€‚ â€‹ å·®åˆ†æ›¼åˆ‡æ–¯ç‰¹ç¼–ç çš„ä¼˜ç‚¹ï¼š è§£å†³NRZé—®é¢˜ è§£å†³äºŒä¹‰æ€§é—®é¢˜ â€‹ å·®åˆ†æ›¼åˆ‡æ–¯ç‰¹ç¼–ç çš„ç¼ºç‚¹ï¼ˆåŒæ›¼åˆ‡æ–¯ç‰¹ç¼–ç ï¼‰ï¼š åŸºé¢‘ç¿»å€ é«˜é¢‘å™ªå£°å¢åŠ  å—ç¼–ç ï¼ˆBlock encodingï¼‰ å°†åŸä¿¡å·æ¯ m bits åˆ†ä¸ºä¸€å—ï¼› æŠŠ m bits çš„æ¯å—æ˜ å°„æˆ n bits çš„å—ï¼ˆm &lt; nï¼‰ï¼› å°† n bits çš„å—é‡æ–°ç»„åˆèµ·æ¥ã€‚ å¤šè·¯å¤ç”¨ï¼ˆMultiplexingï¼‰é¢‘åˆ†å¤šè·¯å¤ç”¨ï¼ˆFrequency division multiplexingï¼ŒFDMï¼‰â€‹ è§ é¢‘åˆ†å¤šè·¯å¤ç”¨ ã€‚ æ—¶åˆ†å¤šè·¯å¤ç”¨ï¼ˆTime division multiplexingï¼ŒTDMï¼‰â€‹ è§ æ—¶åˆ†å¤šè·¯å¤ç”¨ ã€‚ æ³¢åˆ†å¤šè·¯å¤ç”¨ï¼ˆWavelength division multiplexingï¼ŒWDMï¼‰â€‹ å’ŒFDMåŸç†ç›¸åŒï¼Œä½†ä¸»è¦åœ¨å…‰æ³¢ä¸­é‡‡ç”¨ã€‚ ç åˆ†å¤šè·¯å¤ç”¨ï¼ˆCode division multiplexingï¼ŒCDMï¼‰ä¸¾ä¾‹è¯´æ˜ â€‹ æ¯å°è®¾å¤‡éƒ½ç»™ä¸€ä¸ªä¸åŒå‘é‡çš„ç ç‰‡ï¼Œæ¯”å¦‚æ‰‹æœºAçš„ç ç‰‡ä¸ºAï¼Œæ‰‹æœºBçš„ç ç‰‡ä¸ºBã€‚ä¸åŒè®¾å¤‡çš„ç ç‰‡æ­£äº¤ï¼Œå³ \\begin{cases} A\\times B = 0\\\\ A\\times A = 1 \\end{cases}â€‹ è¦å‘æ‰‹æœºAå‘é€æ•°æ®aï¼Œå‘æ‰‹æœºBå‘é€æ•°æ®bï¼Œåˆ™åœ¨ä¿¡é“ä¸­å‘é€ $a\\times A + b\\times B$ã€‚ â€‹ åœ¨æ‰‹æœºAæ¥æ”¶æ•°æ®æ—¶ï¼Œå°†æ¥æ”¶åˆ°çš„ä¿¡å·ä¹˜Aã€‚ (a\\times A + b\\times B) \\times A = a\\times A\\times A + b\\times B \\times A = aâ€‹ åŒç†æ‰‹æœºBï¼Œå¦‚æ­¤ä¸¤å°è®¾å¤‡åŒæ—¶åˆ©ç”¨ä¸€æ¡ä¿¡é“ä¼ è¾“ï¼Œå¹¶æˆåŠŸåˆ†ç¦»å„è‡ªçš„æ•°æ®ã€‚ å»¶æ—¶ã€ä¸¢åŒ…ã€ååé‡å»¶æ—¶ï¼ˆdelayï¼‰â€‹ ç°å®ä¸­çš„è®¡ç®—æœºç³»ç»Ÿä¸æ˜¯ç†æƒ³ç³»ç»Ÿï¼Œäº‹ä»¶æ˜¯éšæœºçªå‘çš„ï¼Œæ‰€ä»¥ä¸å¯é¿å…çš„å­˜åœ¨å»¶æ—¶ã€‚ â€‹ æ•°æ®åŒ…çš„å»¶æ—¶ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼š d_{nodal} = d_{prop}+d_{queue}+d_{trans}+d_{prop} å¤„ç†æ—¶å»¶ï¼ˆNodal Processing Delayï¼Œ$d_{proc}$ï¼‰ â€‹ è·¯ç”±å™¨æ¥æ”¶åˆ°åˆ†ç»„å¯¹å…¶è¿›è¡Œå¤„ç†çš„æ—¶é—´ï¼ˆæ¯”å¦‚å·®é”™æ£€æµ‹ï¼‰ï¼Œè€—æ—¶å¾ˆçŸ­ï¼Œæ¯«ç§’çº§ã€‚ æ’é˜Ÿæ—¶å»¶ï¼ˆQueuing Delayï¼Œ$d_{queue}$ï¼‰ â€‹ åˆ†ç»„åœ¨é“¾è·¯ä¸Šç­‰å¾…ä¼ è¾“çš„æ—¶é—´ï¼Œå–å†³äºå…ˆæœŸåˆ°è¾¾çš„æ­£åœ¨æ’é˜Ÿç­‰å¾…å‘é“¾è·¯ä¼ è¾“çš„åˆ†ç»„æ•°é‡ã€‚ ä¼ è¾“æ—¶å»¶ï¼ˆTransmission Delayï¼Œ$d_{trans}$ï¼‰ â€‹ å°†åˆ†ç»„çš„æ¯”ç‰¹æµä¼ è¾“åˆ°é“¾è·¯çš„æ—¶é—´ï¼ˆæ¯”å¦‚è¿›è¡Œç¼–ç è½¬æ¢æˆæŸ¥åˆ†æ›¼åˆ‡æ–¯ç‰¹ç¼–ç çš„æ—¶é—´ï¼‰ã€‚ â€‹ å¦‚åˆ†ç»„é•¿åº¦ L ï¼Œä¼ è¾“é€Ÿç‡ R bpsï¼Œåˆ™å…¶ä¼ è¾“æ—¶å»¶ä¸ºï¼š d_{trans}=L/Râ€‹ æ‰€ä»¥ä¼ è¾“æ—¶é—´å–å†³äºåˆ†ç»„é•¿åº¦å’Œä¼ è¾“é€Ÿç‡ã€‚ ä¼ æ’­æ—¶å»¶ï¼ˆPropagation Delayï¼Œ$$ï¼‰ â€‹ ä¿¡å·åœ¨åª’ä½“ä¸Šä¼ æ’­çš„æ—¶é—´ã€‚ â€‹ å¦‚ç‰©ç†é“¾è·¯çš„é•¿åº¦ dï¼Œä¼ æ’­é€Ÿåº¦ s m/secï¼Œåˆ™å…¶ä¼ æ’­æ—¶å»¶ä¸ºï¼š d_{prop}=d/s ä¸¢åŒ…ï¼ˆPacket Lossï¼‰â€‹ æµé‡å¼ºåº¦ï¼ˆtraffic intensityï¼‰ä»£è¡¨äº†è·¯ç”±å™¨ä¸Šæ’é˜Ÿçš„æ‹¥å µç‡ã€‚ traffic\\ intensity = (L\\times a)/Râ€‹ å…¶ä¸­ï¼ŒL â€”â€” åˆ†ç»„é•¿åº¦ï¼ˆbitsï¼‰ï¼› â€‹ R â€”â€” é“¾è·¯å¸¦å®½ï¼ˆbpsï¼‰ï¼› â€‹ a â€”â€” å¹³å‡åˆ†ç»„åˆ°è¾¾é€Ÿç‡ æµé‡å¼ºåº¦æ¥è¿‘0æ—¶ï¼Œå‡ ä¹æ²¡æœ‰åˆ†ç»„åˆ°è¾¾ï¼Œæ’é˜Ÿå»¶æ—¶å¾ˆå°ï¼› æµé‡å¼ºåº¦0ï½1æ—¶ï¼Œå¹³å‡æ’é˜Ÿé•¿åº¦è¶Šæ¥è¶Šé•¿ï¼Œæ’é˜Ÿå»¶æ—¶è¶Šæ¥è¶Šé•¿ï¼› æµé‡å¼ºåº¦æ¥è¿‘1æ—¶ï¼Œå­˜åœ¨åˆ°è¾¾ç‡è¶…è¿‡ä¼ è¾“æ—¶é—´é—´éš”ï¼Œæ‹¥å µã€‚ â€‹ è·¯ç”±å™¨çš„æ’é˜Ÿå®¹é‡æ˜¯æœ‰é™çš„ï¼Œå½“åˆ†ç»„åˆ°è¾¾ä¸€ä¸ªå·²æ»¡çš„é˜Ÿåˆ—æ—¶ï¼Œè·¯ç”±å™¨å°†ä¸¢å¼ƒè¯¥åˆ†ç»„ï¼Œäº§ç”Ÿä¸¢åŒ…ã€‚ ååé‡ï¼ˆThroughputï¼‰â€‹ ä»ä¸»æœºAåˆ°ä¸»æœºBä¼ æ–‡ä»¶ï¼ŒBæ¥æ”¶æ–‡ä»¶çš„é€Ÿç‡ä¸ºç¬æ—¶ååé‡ï¼ˆinstantaneous throughputï¼‰ï¼Œå•ä½bpsï¼›æ‰€æœ‰æ—¶é—´çš„å¹³å‡é€Ÿç‡ä¸ºå¹³å‡ååé‡ï¼ˆaverage throughputï¼‰ã€‚ â€‹ ä¸²è”é“¾è·¯ååé‡å–å†³äºç“¶é¢ˆé“¾è·¯ï¼ˆbottleneck linkï¼‰ã€‚ Throughput = min\\{R_1, R_2,...,R_N\\} åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰ç½‘ç»œåº”ç”¨åŸç† å¯ä»¥åœ¨ä¸åŒç±»å‹ä¸»æœºè¿è¡Œï¼› å¯ä»¥åœ¨ä¸åŒç»ˆç«¯é—´ç›¸äº’é€šè®¯ï¼› åœ¨ç¼–å†™ç½‘ç»œåº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦è€ƒè™‘ç½‘ç»œæ ¸å¿ƒè®¾å¤‡ï¼Œç½‘ç»œæ ¸å¿ƒä¸ä¼šå…è®¸åº”ç”¨ï¼› ç«¯ç³»ç»Ÿä¸Šçš„åº”ç”¨å¯ä»¥å¿«é€Ÿå¼€å‘ï¼Œè€Œä¸”æ˜“äºä¼ æ’­ã€‚ ç½‘ç»œåº”ç”¨ç»“æ„å®¢æˆ·æœº-æœåŠ¡å™¨ä½“ç³»ç»“æ„ï¼ˆClient-server architectureï¼‰â€‹ ä¾‹å¦‚ï¼šHTTPã€IMAPã€FTP æœåŠ¡å™¨ï¼š æ°¸è¿œåœ¨çº¿ï¼› IPåœ°å€æ’å®šï¼› æœåŠ¡å™¨å¾€å¾€åœ¨æ•°æ®ä¸­å¿ƒï¼Œé€šè¿‡å¤šå°æœåŠ¡å™¨è¿›è¡Œæ‰©å±•ã€‚ å®¢æˆ·æœºï¼š å¯ä»¥å’ŒæœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼› å¯èƒ½é—´æ–­æ€§è¿æ¥ç½‘ç»œï¼› å¯èƒ½æ˜¯åŠ¨æ€çš„IPåœ°å€ï¼› å®¢æˆ·æœºä¹‹é—´ä¸ä¼šç›´æ¥é€šä¿¡ï¼› ç‚¹å¯¹ç‚¹ä½“ç³»ç»“æ„ï¼ˆPeer-peer architectureï¼‰ æ²¡æœ‰ä¸€ä¸ªä¸€ç›´åœ¨çº¿çš„æœåŠ¡å™¨ï¼› ä»»æ„ç«¯ç³»ç»Ÿä¹‹é—´ç›´æ¥è¿›è¡Œé€šä¿¡ï¼› æ¯ä¸ªç‚¹ï¼ˆpeerï¼‰å‘å…¶ä»–çš„ç‚¹è¯·æ±‚æœåŠ¡ï¼ŒåŒæ—¶ä½œä¸ºå›æŠ¥ä¹Ÿä¼šæä¾›ç›¸åº”çš„æœåŠ¡ï¼› ä¼˜ç‚¹ï¼šè‡ªæ‰©å±•æ€§ï¼ˆself-scalabilityï¼‰ï¼šæ–°çš„ç‚¹éƒ½ä¼šæä¾›æœåŠ¡å®¹é‡å’Œè´Ÿè·ã€‚ ç¼ºç‚¹ï¼šæ¯ä¸ªç‚¹éƒ½æ˜¯é—´æ–­æ€§è¿æ¥ï¼Œè€Œä¸”IPåœ°å€ä¼šæ”¹å˜ã€‚ ä¾‹å­ï¼šP2Pçš„æ–‡ä»¶åˆ†äº«ã€‚ è¿›ç¨‹é€šä¿¡ï¼ˆProcesses Communicatingï¼‰å®¢æˆ·æœºå’ŒæœåŠ¡å™¨è¿›ç¨‹â€‹ è¿›ç¨‹ï¼ˆProcesseï¼‰ï¼šä¸€å°ä¸»æœºä¸Šè¿è¡Œçš„ç¨‹åºã€‚ åœ¨åŒä¸€å°ä¸»æœºä¸Šï¼Œä¸¤ä¸ªè¿›ç¨‹é€šè¿‡è¿›ç¨‹é—´é€šä¿¡ï¼ˆinter-process communicationï¼‰æ¥è¿›è¡Œé€šä¿¡ã€‚è¿›ç¨‹é—´é€šä¿¡ç”±æ“ä½œç³»ç»Ÿå®šä¹‰ï¼› ä¸åŒä¸»æœºä¹‹é—´ï¼Œè¿›ç¨‹é€šä¿¡åŒè¿‡æŠ¥æ–‡äº¤æ¢ï¼Œ æ¯”å¦‚å¹¶è¡Œè®¡ç®—ä¸­çš„MPå’ŒMPIï¼ŒMPï¼ˆMulti Processingï¼‰åªèƒ½ç”¨äºåŒä¸€å°ä¸»æœºé—´çš„é€šä¿¡ï¼ŒMPIï¼ˆMessage Processing Interfaceï¼‰ä¸»è¦ç”¨äºä¸åŒä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œä¹Ÿé€‚ç”¨äºåŒä¸€å°ä¸»æœºã€‚ â€‹ å®¢æˆ·æœºè¿›ç¨‹ï¼ˆclient processï¼‰ï¼šå‘èµ·é€šä¿¡çš„è¿›ç¨‹ã€‚ â€‹ æœåŠ¡å™¨è¿›ç¨‹ï¼ˆserver processï¼‰ï¼šç­‰å¾…è¿æ¥çš„è¿›ç¨‹ã€‚ P2Påº”ç”¨ä¹Ÿå­˜åœ¨å®¢æˆ·æœºè¿›ç¨‹å’ŒæœåŠ¡å™¨è¿›ç¨‹ã€‚ å¥—æ¥å­—ï¼ˆSocketsï¼‰â€‹ è¿›ç¨‹ä¹‹é—´é€šè¿‡socketæ¥æ¥æ”¶/å‘é€æ¶ˆæ¯ã€‚ socketåœ¨è¿›ç¨‹é€šä¿¡ä¸­çš„ä½œç”¨ç›¸å½“äºä¸€ä¸ªä¿¡å°ï¼š é€šä¿¡çš„ä¿¡æ¯éœ€è¦è£…è¿›socket åº”ç”¨å±‚ä¸‹çš„å„å±‚ä½œä¸ºåŸºç¡€è®¾æ–½ï¼Œå°†ä¿¡ä¼ åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ ä¸¤ä¸ªè¿›ç¨‹é—´çš„é€šè®¯ä¼šæœ‰ä¸¤ä¸ªsocket è¿›ç¨‹å¯»å€ï¼ˆAddressing Processesï¼‰â€‹ å¦‚æœä¸¤ä¸ªä¸»æœºä¹‹é—´çš„è¿›ç¨‹è¿›è¡Œé€šä¿¡ï¼Œå‘é€ç«¯ä¸ä»…è¦çŸ¥é“æ¥æ”¶ç«¯çš„IPåœ°å€è¿˜éœ€è¦çŸ¥é“è¿›ç¨‹ç›¸åº”çš„ç«¯å£å·ã€‚ IPåœ°å€ï¼šIPv4ä¸­32ä½IPï¼Œè´Ÿè´£æ‰¾åˆ°æ¥æ”¶ç«¯ä¸»æœºã€‚ ç«¯å£å·ï¼ˆport numberï¼‰ï¼šæ¯å°ä¸»æœºéƒ½å¯èƒ½è¿è¡Œç€å¤šä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹å¯¹åº”ä¸€ä¸ªç«¯å£å·ã€‚ æ¯”å¦‚ï¼ŒHTTPæœåŠ¡ç«¯å£å·80ã€é‚®ä»¶æœåŠ¡ç«¯å£å·25 åº”ç”¨å±‚åè®®ï¼ˆApplication-Layer Protocolsï¼‰â€‹ ç½‘ç»œåº”ç”¨çš„å¼€å‘å¿…é¡»éµå®ˆç½‘ç»œåè®®ã€‚ åº”ç”¨å±‚åè®®çš„åˆ†ç±»å…¬å¼€ç½‘ç»œåè®® å®šä¹‰åœ¨RFCä¸­ ç»Ÿä¸€æ ‡å‡†ï¼Œæ˜“äºç›¸äº’æ“ä½œ ä¾‹å¦‚ï¼šHTTPã€SMTP ä¸“ç”¨ç½‘ç»œåè®® ä¸€äº›éå…¬å¼€çš„ç½‘ç»œåè®® ä¾‹å¦‚ï¼šSkype åº”ç”¨å±‚åè®®å†…å®¹åº”ç”¨å±‚åè®®å®šä¹‰äº† æ¶ˆæ¯äº¤æ¢çš„ç±»å‹ï¼šæ¯”å¦‚è¯·æ±‚ã€å“åº” æ¶ˆæ¯çš„è¯­æ³•ï¼šæ¶ˆæ¯ä¸­æœ‰å“ªäº›å­—æ®µä»¥åŠè¿™äº›å­—æ®µå¦‚ä½•å®šä¹‰ æ¶ˆæ¯çš„è¯­ä¹‰ï¼šæ¶ˆæ¯å­—æ®µå†…å®¹çš„å«ä¹‰ è§„åˆ™ï¼šè¿›ç¨‹ä»€ä¹ˆæ—¶å€™ã€å¦‚ä½•å‘é€/æ¥æ”¶æ¶ˆæ¯ appå¯¹ä¼ è¾“æœåŠ¡çš„éœ€æ±‚ æ•°æ®å®Œæ•´æ€§ï¼ˆdata integrityï¼‰ â€‹ ä¸€äº›appéœ€è¦100%å¯é çš„æ–‡ä»¶ä¼ è¾“ï¼Œæ¯”å¦‚æ–‡ä»¶ä¼ è¾“ï¼›æœ‰ä¸€äº›è¿è¡Œä¸€éƒ¨åˆ†çš„ä¸¢å¤±ï¼Œæ¯”å¦‚è¯­éŸ³ã€‚ æ—¶æ•ˆæ€§ï¼ˆtimingï¼‰ â€‹ ä¸€äº›appè¦æ±‚è¾ƒå°‘çš„å»¶æ—¶ï¼Œæ¯”å¦‚å¯¹è¯ç›´æ’­ã€‚ ååç‡ï¼ˆthroughputï¼‰ â€‹ ååç‡ï¼Œå³æœ€å°å¸¦å®½ï¼Œä¸€äº›appå­˜åœ¨ä¸€ä¸ªååç‡ä¸‹é™æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œæ¯”å¦‚è§†é¢‘éŸ³é¢‘ç­‰å¤šåª’ä½“ï¼›æœ‰äº›appè¿è¡Œå¼¹æ€§çš„ååç‡ï¼Œæ¯”å¦‚é‚®ä»¶ä¼ è¾“ï¼Œååç‡å°å¯ä»¥æ…¢æ…¢ä¼ è¿‡å»ã€‚ ç½‘ç»œä¼ è¾“åè®®æœåŠ¡â€‹ ä¼ è¾“å±‚æä¾›ä¸ºåº”ç”¨å±‚æä¾›çš„ä¸¤ç§ä¼ è¾“æœåŠ¡ã€‚ TCPâ€‹ ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰ é¢å‘è¿æ¥ï¼ˆconnection-orientedï¼‰ï¼šéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´èƒ½å¤Ÿå»ºç«‹è¿æ¥ å¯é ä¼ è¾“ï¼ˆreliable transportï¼‰ï¼šæ•°æ®å®Œæ•´æ€§é«˜ æµé‡æ§åˆ¶ï¼ˆflow controlï¼‰ï¼šå‘é€æ–¹ä¸èƒ½å‘é€å¤ªå¤šæ•°æ®å¯¼è‡´æ¥æ”¶æ–¹è¿‡è½½ é˜»å¡æ§åˆ¶ï¼ˆcongestion controlï¼‰ï¼šä¸èƒ½æœ‰å¤ªå¤šä¸ªä¸»æœºåŒæ—¶å‘é€å¯¼è‡´ç½‘ç»œè¿‡è½½ ä¸æä¾›çš„æœåŠ¡ï¼šæ—¶æ•ˆæ€§ã€æœ€å°å¸¦å®½ï¼ˆååç‡ï¼‰ã€å®‰å…¨æ€§ UDPâ€‹ UDPæ˜¯ä¸€ç§ä¸æä¾›ä¸å¿…è¦æœåŠ¡çš„è½»é‡ä¼ è¾“åè®®ã€‚ä¼˜ç‚¹æ˜¯é€Ÿåº¦å¿«ã€çµæ´»æ€§å¥½ã€‚ ä¸éœ€è¦å»ºç«‹è¿æ¥ ä¸å¯é çš„æ•°æ®ä¼ è¾“ ä¸æä¾›çš„æœåŠ¡ï¼šåŸºæœ¬éƒ½ä¸æä¾›ï¼Œä¸æä¾›åŒ…æ‹¬å¯é ä¼ è¾“ã€æµé‡æ§åˆ¶ã€é˜»å¡æ§åˆ¶ã€æ—¶æ•ˆæ€§ã€æœ€å°å¸¦å®½ï¼ˆååç‡ï¼‰ã€å®‰å…¨æ€§ ä¸åŒappé€‰æ‹©çš„ç½‘ç»œä¼ è¾“åè®® Webå’ŒHTTPâ€‹ World Wide Web ä¸­çš„ç½‘é¡µç”±è¶…é“¾æ¥ï¼ˆhyperlinkï¼‰è¿æ¥ã€‚ é¡µé¢ç”±å¾ˆå¤šå¯¹è±¡ï¼ˆobjectï¼‰ç»„æˆï¼Œå¯¹è±¡å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­ï¼› å¯¹è±¡æœ‰å¤šç§ç±»å‹ï¼Œå¯ä»¥æ˜¯HTMLæ–‡ä»¶ï¼ŒJPEGå›¾ç‰‡ï¼ŒåŠ¨æ€è„šæœ¬ç­‰ç­‰ï¼› ç½‘é¡µä»¥HTMLæ–‡ä»¶ä¸ºåŸºç¡€ï¼ŒåŒ…æ‹¬äº†è®¸å¤šå‚è€ƒå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥é€šè¿‡URLæ¥å¯»å€ã€‚ä¾‹å¦‚ä¸€å¼ å›¾ç‰‡çš„URLä¸ºwww.someshcool.edu/someDept/pic.gifï¼Œå…¶ä¸­www.someshcool.eduä¸ºä¸»æœºåï¼Œ/someDept/pic.gifä¸ºè·¯å¾„åã€‚ HTTPæ¦‚è¿°â€‹ è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆhypertext transfer protocol, HTTPï¼‰ ç½‘é¡µçš„åº”ç”¨å±‚åè®® åŸºäºå®¢æˆ·æœº-æœåŠ¡å™¨ä½“ç³»ç»“æ„ å®¢æˆ·æœºï¼šè´Ÿè´£è¯·æ±‚ã€æ¥æ”¶å’Œæ˜¾ç¤ºWebå¯¹è±¡ æœåŠ¡å™¨ï¼šWebæœåŠ¡å™¨è´Ÿè´£å‘é€å¯¹è±¡ï¼Œå“åº”å®¢æˆ·æœºè¯·æ±‚ HTTPçš„ä¼ è¾“å±‚ä½¿ç”¨TCP å®¢æˆ·æœºå‘èµ·TCPè¿æ¥ï¼ˆåˆ›å»ºsocketï¼Œç«¯å£å·80ï¼‰ æœåŠ¡å™¨æ¥æ”¶TCPè¿æ¥ åœ¨æµè§ˆå™¨å’Œç½‘é¡µæœåŠ¡å™¨ä¹‹é—´è¿›è¡ŒHTTPä¿¡æ¯çš„äº¤æ¢ TCPè¿æ¥å¯ä»¥æ–­å¼€ HTTPæ˜¯æ— çŠ¶æ€çš„â€‹ &emsp;&emsp;æœåŠ¡å™¨ä¸ä¼šä¿ç•™ä¹‹å‰å®¢æˆ·æœºå‘çš„è¯·æ±‚ä¿¡æ¯ã€‚â€‹ &emsp;&emsp;åè®®è¦ç»´æŒçŠ¶æ€æ˜¯å¾ˆå¤æ‚çš„ï¼šä¿ç•™ä¹‹å‰çš„å†å²è®°å½•å¾ˆæ¶ˆè€—èµ„æºï¼›å¦‚æœå®¢æˆ·æœºæˆ–ç€æœåŠ¡å™¨æœ‰æ­»æœºï¼Œå®ƒä»¬çš„çŠ¶æ€ä¼šä¸ä¸€è‡´ï¼Œè¿˜éœ€è¦é‡æ–°åŒæ­¥ï¼Œè¿™å¾ˆéº»çƒ¦ã€‚ HTTPæ¶ˆæ¯ç±»å‹ï¼šè¯·æ±‚ï¼ˆrequestï¼‰ä¸å“åº”ï¼ˆresponseï¼‰ HTTPè¿æ¥ç±»å‹éæŒä¹…æ€§è¿æ¥ï¼ˆNon-persistent HTTPï¼‰éæŒä¹…æ€§HTTPæ­¥éª¤ TCPè¿æ¥å¼€å¯ é€šè¿‡è¿™ä¸ªTCPè¿æ¥æœ€å¤šä¼ è¾“ä¸€ä¸ªå¯¹è±¡ TCPè¿æ¥å…³é—­ å¦‚æœè¦åŠ è½½å¤šä¸ªå¯¹è±¡æ—¶ï¼Œéœ€è¦å¤šæ¬¡éæŒä¹…æ€§HTTPè¿æ¥ã€‚ éæŒä¹…æ€§HTTPå“åº”æ—¶é—´ RTTï¼šå¾€è¿”æ—¶é—´ï¼ˆRound Trip Timeï¼‰,ä¸€ä¸ªå¾ˆå°çš„æ•°æ®åŒ…ï¼ˆå¤„ç†æ–‡ä»¶çš„æ—¶é—´å¯å¿½ç•¥ï¼‰ä»å®¢æˆ·æœºä¼ åˆ°æœåŠ¡å™¨å†ä¼ å›æ¥çš„æ—¶é—´ã€‚ HTTPå“åº”æ—¶é—´ï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ï¼š 1ä¸ªRTTï¼šå»ºç«‹TCPè¿æ¥çš„æ—¶é—´ 1ä¸ªRTTï¼šHTTPè¯·æ±‚ä»¥åŠæ”¶åˆ°HTTPå“åº”çš„å‰å‡ ä¸ªå­—ç¬¦çš„æ—¶é—´ å¯¹è±¡/æ–‡ä»¶ä¼ è¾“çš„æ—¶é—´ å¯¹ä¸€ä¸ªå¯¹è±¡æ¥è¯´ï¼ŒéæŒä¹…æ€§HTTPå“åº”æ—¶é—´ä¸º Nonpersistent\\ HTTP\\ response\\ time = 2RTT + file\\ transmission\\ time ä¾‹é¢˜ï¼šå¦‚æœä¸€ä¸ªç½‘é¡µåŒ…å«1ä¸ªHTMLå’Œ10ä¸ªå¯¹è±¡ï¼Œåˆ™éæŒä¹…æ€§HTTPå“åº”éœ€è¦å¤šå°‘æ—¶é—´ï¼Ÿ 2RTT \\times (1+10) + total\\ file\\ transmission\\ time éæŒä¹…æ€§HTTPçš„é—®é¢˜ æ¯ä¼ è¾“ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦è€—è´¹ $2RTT$ æ¯å»ºç«‹ä¸€ä¸ªTCPè¿æ¥éƒ½ä¼šå¯¹æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰äº§ç”Ÿè´Ÿè· å¹¶è¡ŒæŠ“å–ï¼šæµè§ˆå™¨å¸¸å¸¸å¼€å¤šä¸ªå¹¶è¡Œçš„TCPè¿æ¥å»æŠ“å–å¯¹è±¡ ä¾‹é¢˜ï¼šä¸€ä¸ªç½‘é¡µåŒ…å«1ä¸ªHTMLå’Œ10å¼ å›¾ç‰‡ï¼Œå…±æœ‰5ä¸ªå¹¶è¡Œçš„TCPè¿æ¥ï¼Œåˆ™éæŒä¹…æ€§HTTPå“åº”éœ€è¦å¤šå°‘ä¸ªRTTï¼Ÿ &emsp;&emsp;é¦–å…ˆä¼ è¾“HTMLéœ€è¦ $2RTT$ çš„æ—¶é—´ï¼Œ5ä¸ªå¹¶è¡Œçš„TCPè¿æ¥ä¼ è¾“10ä¸ªå¯¹è±¡éœ€è¦2ä¸ª $2RTT$ çš„æ—¶é—´ã€‚ RTT\\ in\\ Response\\ Time = 2RTT + 2 \\times 2RTT = 6RTT æŒä¹…æ€§è¿æ¥ï¼ˆPersistent HTTPï¼‰æŒä¹…æ€§HTTPæ­¥éª¤ å¼€å¯TCPè¿æ¥ é€šè¿‡è¿™ä¸€ä¸ªTCPè¿æ¥å¯ä»¥ä¼ å¤šä¸ªå¯¹è±¡ TCPè¿æ¥å…³é—­ æŒä¹…æ€§HTTPç‰¹ç‚¹ï¼ˆHTTP1.1ï¼‰ æœåŠ¡å™¨åœ¨å‘é€å“åº”åä¿æŒè¿æ¥å¼€å¯çŠ¶æ€ åç»­è¿™ä¸ªå®¢æˆ·æœº\\æœåŠ¡å™¨çš„HTTPæ¶ˆæ¯éƒ½é€šè¿‡è¯¥å¼€å¯çš„è¿æ¥å‘é€ ä¸¤ç§å‘é€å¯¹è±¡æ–¹å¼ï¼šHTTP1.1é‡‡ç”¨æµæ°´çš„æ–¹å¼å‘é€ï¼šä¸€æ¬¡æ€§æŠŠå¯¹è±¡å…¨å‘äº†ï¼›å¦ä¸€ç§æ˜¯å®¢æˆ·æœºæ¥æ”¶åˆ°ä¸€ä¸ªå¯¹è±¡åæ¥ç€å‘ä¸‹ä¸€ä¸ªå¯¹è±¡çš„è¯·æ±‚ è‡³å°‘éœ€è¦1ä¸ªRTTå‘å®Œæ‰€æœ‰å¯¹è±¡ DNSâ€‹ &emsp;&emsp;åŸŸåç³»ç»Ÿï¼ˆDomain Name Systemï¼ŒDNSï¼‰é€šè¿‡åˆ†å¸ƒå¼çš„æ•°æ®åº“æ¥å®ç°IPåœ°å€å’ŒåŸŸåçš„æ˜ å°„ã€‚ å±‚çº§ç»“æ„çš„åŸŸåæœåŠ¡å™¨æä¾›åˆ†å¸ƒå¼çš„æ•°æ®åº“ åº”ç”¨å±‚åè®®ï¼šä¸»æœºå’ŒåŸŸåæœåŠ¡å™¨é€šè¿‡é€šä¿¡æ¥å®ç°IPåœ°å€å’ŒåŸŸåçš„è½¬æ¢ DNSä½œä¸ºä¸€ä¸ªç½‘ç»œæ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¦æ”¾åœ¨åº”ç”¨å±‚ï¼Ÿ&emsp;&emsp;ä¸ç½‘ç»œç»“æ„è®¾è®¡ç†å¿µæœ‰å…³ï¼Œç½‘ç»œä¸­ä¸»æœºå¾ˆå¤šæ˜ å°„å¾ˆå¤æ‚ï¼Œå¸Œæœ›å°†å¤æ‚åº¦ç•™åœ¨ç«¯ç³»ç»Ÿä¸­ï¼Œè€Œä¸æ˜¯åœ¨ç½‘ç»œæ ¸å¿ƒã€‚ DNSæœåŠ¡ IPåœ°å€å’ŒåŸŸåçš„è½¬æ¢ ä¸»æœºçš„åˆ«å é‚®ä»¶æœåŠ¡çš„åˆ«å è´Ÿè·åˆ†é…ï¼šæœ‰äº›Webå¯èƒ½æœ‰å¤šä¸ªæœåŠ¡å™¨ï¼Œå³ä¼šæœ‰å¤šä¸ªIPåœ°å€å¯¹åº”ä¸€ä¸ªåŸŸåï¼Œå¯è°ƒæ•´IPåœ°å€çš„é¡ºåºä»¥åˆ†é…è´Ÿè·ã€‚ DNSï¼šåˆ†å¸ƒå¼ã€å±‚çº§çš„æ•°æ®åº“ ä¸ºä»€ä¹ˆè¦é€‰ç”¨åˆ†å¸ƒçš„DNSï¼Œè€Œä¸é‡‡ç”¨é›†ä¸­å¼çš„DNSï¼Ÿå•ç‚¹å¯èƒ½å¤±æ•ˆï¼šä¸€ä¸ªæ•…éšœå°±ggäº†æµé‡é—®é¢˜ï¼šæ‰€æœ‰å®¢æˆ·æœºéƒ½è®¿é—®ä¸€ä¸ªåŸŸåæœåŠ¡å™¨ï¼Œä¼šäº§ç”Ÿå¾ˆå¤§çš„æµé‡è¿œç¨‹çš„é›†ä¸­å¼æ•°æ®åº“ï¼šå®¢æˆ·æœºè¦è®¿é—®å¯èƒ½è¦èŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼ŒRTTä¼šå¾ˆå¤§ï¼Œé€ æˆå¤§æ—¶å»¶ &emsp;&emsp;DNSé‡‡ç”¨ä¸‰å±‚ç»“æ„ ä¸€ä¸ªå®¢æˆ·æœºå¾—åˆ°www.amazon.comçš„IPåœ°å€çš„æ­¥éª¤ï¼š å®¢æˆ·æœºå…ˆæŸ¥è¯¢æ ¹åŸŸåæœåŠ¡å™¨ï¼Œå¾—åˆ°é¡¶çº§åŸŸåæœåŠ¡å™¨.com DNS serverçš„åœ°å€ï¼› å®¢æˆ·æœºæŸ¥è¯¢é¡¶çº§åŸŸåæœåŠ¡å™¨.com DNS serverï¼Œå¾—åˆ°æƒå¨åŸŸåæœåŠ¡å™¨amazon.com DNS serverçš„åœ°å€ï¼› å®¢æˆ·æœºæŸ¥è¯¢æƒå¨åŸŸåæœåŠ¡å™¨amazon.com DNS serverï¼Œå¾—åˆ°www.amazon.comçš„IPåœ°å€ æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆRoot Name Serverï¼‰ å®˜æ–¹çš„æœåŠ¡å™¨ï¼Œæ˜¯è¿æ¥çš„æœ€åçš„æ–¹æ³•ï¼ˆå¦‚æœçŸ¥é“ä¸‹çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€å°±ä¸éœ€è¦å†ä»å¤´å¼€å§‹æŸ¥è¯¢æ ¹åŸŸåæœåŠ¡å™¨ï¼Œä¸ç„¶ä¼šå¯¹æ ¹åŸŸåæœåŠ¡å™¨äº§ç”Ÿå¾ˆå¤§çš„æµé‡è´Ÿè·ï¼‰ å¯¹ç½‘ç»œè¿è¡Œç›¸å½“é‡è¦ï¼Œç¦»å¼€æ ¹åŸŸåæœåŠ¡å™¨ç½‘ç»œæ— æ³•æ­£å¸¸å·¥ä½œ åŸŸåç³»ç»Ÿå®‰å…¨æ‰©å±•ï¼ˆDomain Name System Security Extensionsï¼ŒDNSSECï¼‰ â€”â€” å¯¹DNSæä¾›ç»™DNSå®¢æˆ·ç«¯ï¼ˆè§£æå™¨ï¼‰çš„DNSæ•°æ®æ¥æºè¿›è¡Œè®¤è¯ï¼Œå¹¶éªŒè¯ä¸å­˜åœ¨æ€§å’Œæ ¡éªŒæ•°æ®å®Œæ•´æ€§éªŒè¯ã€‚ ICANNï¼ˆäº’è”ç½‘åç§°ä¸æ•°å­—åœ°å€åˆ†é…æœºæ„ï¼ŒInternet Corporation for Assigned Names and Numbersï¼‰â€”â€” ç®¡ç†æ ¹åŸŸåæœåŠ¡å™¨çš„ç»„ç»‡ ä¸–ç•Œä¸Šç°åœ¨æœ‰13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ï¼Œåˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°ã€‚ é¡¶å±‚åŸŸåæœåŠ¡å™¨ï¼ˆTop-Level Domain Server, TLDï¼‰ å„ç§ç±»å‹çš„TLDï¼Œæ¯”å¦‚.comã€.orgã€netã€.eduç­‰ç­‰ï¼Œå›½å®¶çš„TLDï¼Œæ¯”å¦‚.cnã€.ukç­‰ç­‰ã€‚ Network Solutionsï¼šç®¡ç†.comã€netTLDçš„ç»„ç»‡ Educauseï¼šç®¡ç†.eduçš„ç»„ç»‡ æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆAuthoritative Domain Serverï¼‰ ç»„ç»‡è‡ªå·±çš„DNSæœåŠ¡å™¨ï¼Œç”¨æ¥æä¾›ç»„ç»‡å†…éƒ¨çš„åŸŸååˆ°IPåœ°å€çš„æ˜ å°„ ç”±ç»„ç»‡è‡ªå·±æˆ–è€…æœåŠ¡æä¾›å•†æ¥ç»´æŠ¤ æœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼ˆLocal DNS Name Serverï¼‰ ä¸¥æ ¼æ¥è¯´ä¸å±äºå±‚çº§ç»“æ„ æ¯ä¸ªISPéƒ½ä¼šæœ‰ä¸€ä¸ªæœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼Œä¹Ÿå«åšé»˜è®¤åŸŸåæœåŠ¡å™¨ï¼ˆdefault name serverï¼‰ å½“ä¸»æœºè¦è¿›è¡ŒDNSæŸ¥è¯¢æ—¶ï¼ŒæŸ¥è¯¢ä¼šè¢«ç›´æ¥é€åˆ°æœ¬åœ°çš„DNSæœåŠ¡å™¨ã€‚ ä½œç”¨ï¼š ç¼“å­˜ï¼šå¯ä»¥ç¼“å­˜æœ€è¿‘æ”¶åˆ°çš„åŸŸååˆ°IPåœ°å€çš„æ˜ å°„ï¼ˆç¼“å­˜æœ‰æ—¶æ•ˆï¼Œä¼šè¿‡æœŸï¼‰ ä»£ç†ï¼šå¯ä»¥ä½œä¸ºä»£ç†ï¼Œä»£æ›¿ä¸»æœºåœ¨å±‚çº§ç»“æ„ä¸­è¿›è¡ŒæŸ¥è¯¢ DNSæŸ¥è¯¢æ–¹æ³•è¿­ä»£æŸ¥è¯¢ï¼ˆiterated queryï¼‰&emsp;&emsp;è¢«è”ç³»åˆ°çš„æœåŠ¡å™¨ä¼šå°†åä¸€ä¸ªæœåŠ¡å™¨çš„åå­—åé¦ˆå›æ¥ï¼Œå³â€œæˆ‘ä¸è®¤è¯†è¿™ä¸ªåŸŸåï¼Œä½†æ˜¯ä½ å¯ä»¥å»é—®é‚£å°æœåŠ¡å™¨(=ï¾ŸÏ‰ï¾Ÿ)ï¾‰â€ &emsp;&emsp;ä¸‹é¢çš„è¿­ä»£æŸ¥è¯¢è¿‡ç¨‹ï¼Œåˆ©ç”¨æœ¬åœ°åŸŸåæœåŠ¡å™¨ä½œä¸ºä»£ç†è¿­ä»£æŸ¥è¯¢åŸŸåå¯¹äºçš„IPåœ°å€ã€‚ é€’å½’æŸ¥è¯¢ï¼ˆrecursive queryï¼‰&emsp;&emsp;æŠŠåŸŸåè§£æçš„è´Ÿæ‹…äº¤ç»™äº†è”ç³»åˆ°çš„åŸŸåæœåŠ¡å™¨ï¼Œè¿™ç§æ–¹æ³•å¯¹äºé«˜çº§çš„è´Ÿæ‹…å¢åŠ ï¼Œæ‰€ä»¥ä¸€èˆ¬é‡‡ç”¨è¿­ä»£æŸ¥è¯¢è€Œä¸é‡‡ç”¨é€’å½’æŸ¥è¯¢ã€‚ DNSç¼“å­˜å’Œæ›´æ–° ä¸€æ—¦åŸŸåæœåŠ¡å™¨å­¦ä¹ åˆ°äº†ä¸€ä¸ªæ˜ å°„ï¼Œå®ƒå°±ä¼šç¼“å­˜è¿™ä¸ªæ˜ å°„ã€‚ç¼“å­˜å¾€å¾€åœ¨æœ¬åœ°åŸŸåæœåŠ¡å™¨é‡Œï¼Œè¿™æ ·å¯ä»¥å‡è½»æ ¹åŸŸåæœåŠ¡å™¨çš„å‹åŠ›ã€‚ ç¼“å­˜æœ‰æ•ˆæ—¶é—´TTLï¼Œè¿‡äº†æœ‰æ•ˆæ—¶é—´è¯¥ç¼“å­˜å°±ä¼šè¢«åˆ é™¤ã€‚ æ›´æ–°/é€šçŸ¥æœºåˆ¶ï¼šç”±IETFåˆ¶å®šçš„ RFC2136 æ ‡å‡†ã€‚&emsp;&emsp;å¦‚æœä¸­é€”åŸŸåä¸»æœºæ”¹å˜IPåœ°å€ï¼Œæ•´ä¸ªç½‘ç»œå¯èƒ½éƒ½ä¸çŸ¥é“çœŸæ­£çš„IPåœ°å€ï¼Œç›´åˆ°TTLåˆ°æ—¶ï¼Œæ‰€ä»¥éœ€è¦æ›´æ–°/é€šçŸ¥æœºåˆ¶ã€‚ DNSè®°å½•å’Œæ¶ˆæ¯DNSè®°å½•&emsp;&emsp;DNSçš„åˆ†å¸ƒå¼æ•°æ®åº“é‡Œå­˜å‚¨äº†èµ„æºè®°å½•ï¼ˆresource record, RRï¼‰ RRçš„æ ¼å¼ï¼š(name, value, type, ttl) type = A nameï¼šä¸»æœºå valueï¼šå¯¹åº”çš„IPåœ°å€ type = NS nameï¼šåŸŸï¼ˆå¦‚foo.comï¼‰ valueï¼šå¯¹åº”çš„æƒå¨åŸŸåæœåŠ¡å™¨çš„ä¸»æœºå type = CNAME nameï¼šåˆ«å valueï¼šå¯¹åº”çš„è§„èŒƒä¸»æœºå æ¯”å¦‚ www.ibm.com æ˜¯ servereast.backup2.ibm.com çš„åˆ«åï¼Œè¿™ä¸è´Ÿè·çš„åˆ†é…æœ‰å…³ï¼Œå¯èƒ½æœ‰å¤šä¸ªæœåŠ¡å™¨ã€‚ type = MX nameï¼šé‚®ä»¶æœåŠ¡å™¨åˆ«å valueï¼šå¯¹åº”çš„è§„èŒƒä¸»æœºå DNSæ¶ˆæ¯&emsp;&emsp;DNSæœ‰ä¸¤ç§æ¶ˆæ¯ç±»å‹ï¼šæŸ¥è¯¢ï¼ˆqueryï¼‰å’Œå›ç­”ï¼ˆreplyï¼‰ï¼Œä¸¤ç§æ¶ˆæ¯æ ¼å¼ç›¸åŒã€‚ å‘DNSæ•°æ®åº“æ’å…¥è®°å½•æ¯”å¦‚è¦åˆ›å»ºä¸€ä¸ªnetworkutopia.comçš„ç½‘ç«™ å…ˆåœ¨.comçš„TLDæä¾›å•† Network Solution æ³¨å†Œ networkutopia.com æä¾›ä¿¡æ¯ï¼šåŸŸåã€æƒå¨åŸŸåæœåŠ¡å™¨çš„IPåœ°å€ æä¾›å•†ä¼šå‘.comTLDæœåŠ¡å™¨æ’å…¥ NSã€A çš„RR(networkutopia.com, dns1.networkutopia.com, NS)(dns1.networkutopia.com, 212.212.212.1, A) åœ¨è‡ªå·±çš„æƒå¨åŸŸåæœåŠ¡å™¨ä¸Šè¿›è¡Œé…ç½® æ’å…¥www.networkutopia.comçš„type Aè®°å½• å¦‚æœæ˜¯é‚®ä»¶æœåŠ¡ï¼Œæ’å…¥networkutopia.comçš„type MXè®°å½• DNSæŸ¥è¯¢å·¥å…·&emsp;&emsp;åœ¨å‘½ä»¤è¡Œç”¨nslookupè¿›è¡ŒDNSæŸ¥è¯¢ã€‚ nslookupç›´æ¥æŸ¥è¯¢&emsp;&emsp;æŸ¥è¯¢ä¸€ä¸ªåŸŸåçš„Aè®°å½•ï¼Œå¦‚æœæ²¡æŒ‡å®šdns-serverï¼Œç”¨ç³»ç»Ÿé»˜è®¤çš„dnsæœåŠ¡å™¨ã€‚ 1nslookup domain [dns-server] nslookupæŸ¥è¯¢å…¶ä»–è®°å½• 1nslookup -qt&#x3D;type domain [dns-server] typeå¯ä»¥æ˜¯ä»¥ä¸‹è¿™äº›ç±»å‹ï¼š type ç±»å‹ A åœ°å€è®°å½• AAAA åœ°å€è®°å½• AFSDB Andrewæ–‡ä»¶ç³»ç»Ÿæ•°æ®åº“æœåŠ¡å™¨è®°å½• ATMA ATMåœ°å€è®°å½• CNAME åˆ«åè®°å½• HINFO ç¡¬ä»¶é…ç½®è®°å½•ï¼ŒåŒ…æ‹¬CPUã€æ“ä½œç³»ç»Ÿä¿¡æ¯ ISDN åŸŸåå¯¹åº”çš„ISDNå·ç  MB å­˜æ”¾æŒ‡å®šé‚®ç®±çš„æœåŠ¡å™¨ MG é‚®ä»¶ç»„è®°å½• MINFO é‚®ä»¶ç»„å’Œé‚®ç®±çš„ä¿¡æ¯è®°å½• MR æ”¹åçš„é‚®ç®±è®°å½• MX é‚®ä»¶æœåŠ¡å™¨è®°å½• NS åå­—æœåŠ¡å™¨è®°å½• PTR åå‘è®°å½• RP è´Ÿè´£äººè®°å½• RT è·¯ç”±ç©¿é€è®°å½• SRV TCPæœåŠ¡å™¨ä¿¡æ¯è®°å½• TXT åŸŸåå¯¹åº”çš„æ–‡æœ¬ä¿¡æ¯ X25 åŸŸåå¯¹åº”çš„X.25åœ°å€è®°å½• P2P&emsp;&emsp;ç‚¹å¯¹ç‚¹ä½“ç³»ç»“æ„ï¼ˆPeer-peer architectureï¼‰ P2Pæ¦‚è¿° æ²¡æœ‰ä¸€ä¸ªä¸€ç›´åœ¨çº¿çš„æœåŠ¡å™¨ï¼› ä»»æ„ç«¯ç³»ç»Ÿä¹‹é—´ç›´æ¥è¿›è¡Œé€šä¿¡ï¼› æ¯ä¸ªç‚¹ï¼ˆpeerï¼‰å‘å…¶ä»–çš„ç‚¹è¯·æ±‚æœåŠ¡ï¼ŒåŒæ—¶ä½œä¸ºå›æŠ¥ä¹Ÿä¼šæä¾›ç›¸åº”çš„æœåŠ¡ï¼› ä¼˜ç‚¹ï¼šè‡ªæ‰©å±•æ€§ï¼ˆself-scalabilityï¼‰ï¼šæ–°çš„ç‚¹éƒ½ä¼šæä¾›æœåŠ¡å®¹é‡å’Œè´Ÿè·ã€‚ ç¼ºç‚¹ï¼šæ¯ä¸ªç‚¹éƒ½æ˜¯é—´æ–­æ€§è¿æ¥ï¼Œè€Œä¸”IPåœ°å€ä¼šæ”¹å˜ã€‚ ä¾‹å­ï¼šP2Pçš„æ–‡ä»¶åˆ†äº«ã€‚ æ–‡ä»¶åˆ†å‘ï¼šå®¢æˆ·æœº-æœåŠ¡å™¨ç»“æ„ vs P2P&emsp;&emsp;ä»ä¸€ä¸ªæœåŠ¡å™¨åˆ†å‘å¤§å°ä¸ºFçš„æ–‡ä»¶åˆ°Nä¸ªèŠ‚ç‚¹éœ€è¦å¤šå°‘æ—¶é—´ï¼Ÿï¼ˆæ¯ä¸ªèŠ‚ç‚¹ä¸Šä¼ å’Œä¸‹è½½çš„é€Ÿç‡éƒ½æ˜¯æœ‰é™çš„ï¼Œç½‘ç»œä¸­æœ‰è¶³å¤Ÿçš„å¸¦å®½ï¼‰ å¦‚æœé€‰ç”¨å®¢æˆ·æœº-æœåŠ¡å™¨ç»“æ„ æœåŠ¡å™¨ä¸Šä¼ ï¼šéœ€è¦ä¸Šä¼ è¿™ä»½æ–‡ä»¶ $N$ æ¬¡ï¼Œä¸Šä¼ é€Ÿåº¦ä¸º $u_s$ï¼Œåˆ™éœ€è¦çš„ä¸Šä¼ æ—¶é—´ä¸º $NF/u_s$ å®¢æˆ·æœºä¸‹è½½ï¼šæ¯ä¸ªå®¢æˆ·æœºéƒ½éœ€è¦ä¸‹è½½æ–‡ä»¶ï¼Œ$d_{min}$ æ˜¯å®¢æˆ·æœºæœ€å°ä¸‹è½½é€Ÿåº¦ï¼Œåˆ™å®¢æˆ·æœºä¸‹è½½çš„æœ€å¤§æ—¶é—´ä¸º $F/d{min}$ &emsp;&emsp;å®¢æˆ·æœº-æœåŠ¡å™¨ç»“æ„çš„åˆ†å‘æ—¶é—´ D_{c\\_s} \\geq max\\{NF/u_s, F/d_{min}\\}&emsp;&emsp;æ­¤å¤„çš„Nå¯¼è‡´è€—è´¹çš„æ—¶é—´éšè¦ä¸‹è½½çš„èŠ‚ç‚¹çš„æ•°é‡çº¿æ€§å¢é•¿ï¼Œå½“è¦ä¸‹è½½çš„èŠ‚ç‚¹æ•°ç›®å¤§æ—¶ï¼Œè¦è€—è´¹ç›¸å½“å¤šçš„æ—¶é—´ã€‚ &emsp;&emsp;ä¸éœ€è¦å…ˆä¸Šä¼ å®Œå†ä¸‹è½½ï¼Œå‚è€ƒç¬¬ä¸€ç« /ç½‘ç»œæ ¸å¿ƒ/åˆ†ç»„äº¤æ¢ï¼Œä»¥åˆ†ç»„ä¸ºå•ä½å‘é€ï¼Œå¯ä»¥å¿½ç•¥ä¸Šä¼ åˆ°ä¸‹è½½çš„æ—¶é—´ã€‚ å¦‚æœé€‰ç”¨P2Pç»“æ„ æœåŠ¡å™¨ä¸Šä¼ ï¼šæœåŠ¡å™¨è‡³å°‘è¦ä¸Šä¼ 1æ¬¡æ–‡ä»¶ï¼Œä¸Šä¼ æ—¶é—´ä¸º $F/u_s$ å®¢æˆ·æœºä¸‹è½½ï¼šæ¯ä¸ªå®¢æˆ·æœºéƒ½è¦ä¸‹è½½æ–‡ä»¶ï¼Œå®¢æˆ·æœºæœ€å¤§ä¸‹è½½æ—¶é—´ä¸º$F/d_{min}$ å®¢æˆ·æœºä¸Šä¼ ï¼šæ¯ä¸ªä¸‹è½½äº†æ–‡ä»¶çš„å®¢æˆ·æœºéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œæ­¤æ—¶æ€»ä¸Šä¼ é€Ÿç‡å¯ä»¥è¾¾åˆ°$u_s+\\sum\\limits^{n} u_i$ &emsp;&emsp;P2Pç»“æ„çš„åˆ†å‘æ—¶é—´ D_{P2P} \\geq max\\{F/u_s, F/d_{min}, NF/(u_s+\\sum\\limits^{n} u_i)\\} å®¢æˆ·æœº-æœåŠ¡å™¨ç»“æ„å’ŒP2Påˆ†å‘æ—¶é—´å¯¹æ¯” BitTorrent æ–‡ä»¶åˆ†ä¸ºå¤§å°ä¸º 256Kbçš„å—ï¼ˆchunkï¼‰ æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸Šä¼ å’Œä¸‹è½½çš„æ–‡ä»¶å— è¿½è¸ªå™¨ï¼ˆtrackerï¼‰ï¼šè¿½è¸ªå‚åŠ æ´ªæµçš„èŠ‚ç‚¹ æ´ªæµï¼ˆtorrentï¼‰ï¼šæœ‰ä¸€ç»„èŠ‚ç‚¹ç›¸äº’äº¤æ¢æ–‡ä»¶å— æ–°çš„èŠ‚ç‚¹æƒ³ä¸‹è½½æ–‡ä»¶ï¼Œå…ˆè¯¢é—®è¿½è¸ªå™¨å‚åŠ çš„èŠ‚ç‚¹ï¼Œå†ä»ç›¸è¿‘çš„èŠ‚ç‚¹å¤„ä¸‹è½½æ–‡ä»¶å— èŠ‚ç‚¹åŠ å…¥æ´ªæµï¼š æœ¬èº«æ²¡æœ‰æ–‡ä»¶å—ï¼Œä½†æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ä¼šä»å…¶ä»–èŠ‚ç‚¹è·å–æ–‡ä»¶å— éœ€è¦åœ¨è¿½è¸ªå™¨è¿›è¡Œç™»è®°ï¼Œå¹¶ä¸”ä¸€èˆ¬è¿æ¥ä¸´è¿‘çš„èŠ‚ç‚¹ ä¸‹è½½æ—¶ï¼ŒèŠ‚ç‚¹ä¼šä¸Šä¼ æ–‡ä»¶å—åˆ°å…¶ä»–èŠ‚ç‚¹ èŠ‚ç‚¹å¯ä»¥æ›´æ”¹äº¤æ¢æ–‡ä»¶å—çš„èŠ‚ç‚¹ èŠ‚ç‚¹éšæ—¶ä¼šä¸Šçº¿å’Œä¸‹çº¿ ä¸€æ—¦èŠ‚ç‚¹æœ‰äº†å®Œæ•´çš„æ–‡ä»¶ï¼Œå®ƒå¯ä»¥ç¦»å¼€æˆ–è€…ç•™åœ¨æ´ªæµä¸­ è¯·æ±‚æ–‡ä»¶å— åœ¨ç»™å®šçš„æ—¶é—´ï¼Œä¸åŒçš„èŠ‚ç‚¹æ‹¥æœ‰ä¸åŒçš„æ–‡ä»¶å— ä¸€å®šå‘¨æœŸï¼Œæ–°çš„èŠ‚ç‚¹ä¼šé—®æ¯ä¸ªèŠ‚ç‚¹æœ‰å“ªäº›å— æ–°èŠ‚ç‚¹ä¼šä»å…¶ä»–èŠ‚ç‚¹å¤„ä¸‹è½½ç¼ºå¤±çš„æ–‡ä»¶å—æœ€ç¨€ç¼ºä¼˜å…ˆï¼ˆrarest firstï¼‰ï¼šå¦‚æœæœ‰10ä¸ªèŠ‚ç‚¹éƒ½æœ‰ç¬¬1ã€2å—ï¼Œåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æœ‰ç¬¬3å—ï¼Œåˆ™å…ˆä¸‹è½½ç¬¬3å—ã€‚ å‘é€æ–‡ä»¶å— &emsp;&emsp;å‘é€æ–‡ä»¶å—éµå®ˆä¸€æŠ¥è¿˜ä¸€æŠ¥åŸåˆ™ï¼ˆtit-for-tatï¼‰ èŠ‚ç‚¹ä¼šç»™ç›®å‰ç»™å®ƒå‘é€æ–‡ä»¶å—é€Ÿç‡æœ€é«˜çš„å››ä¸ªèŠ‚ç‚¹å‘é€æ–‡ä»¶å—ï¼Œå…¶ä»–èŠ‚ç‚¹å°±ä¸å‘é€äº†ï¼Œæ¯éš” 10s ä¼šé€‰å‡ºæ–°çš„top4 æ¯éš” 30s ä¼šéšæœºé€‰æ‹©å…¶ä»–èŠ‚ç‚¹å‘é€æ–‡ä»¶å—ï¼Œè¿™æ ·è¿™ä¸ªéšæœºèŠ‚ç‚¹å¯èƒ½å°±ä¼šæˆä¸ºæ–°çš„top4 tit-for-tatåŸåˆ™ï¼šä¸Šä¼ é€Ÿç‡å¿«çš„èŠ‚ç‚¹ç›¸åº”åœ°å¾—åˆ°é«˜ä¸‹è½½é€Ÿç‡çš„å›æŠ¥ã€‚ socketç¼–ç¨‹ &emsp;&emsp;ç›®æ ‡ï¼šå»ºç«‹å®¢æˆ·æœº/æœåŠ¡å™¨çš„åº”ç”¨ä¸­çš„é€šä¿¡è¿ç”¨socket &emsp;&emsp;socketï¼šç›¸å½“äºåº”ç”¨è¿›ç¨‹å’Œç‚¹å¯¹ç‚¹ä¼ è¾“åè®®ä¹‹é—´çš„ä¸€æ‰‡é—¨ &emsp;&emsp;socketç±»å‹ï¼šå¯¹åº”TCPå’ŒUDPæœ‰ä¸¤ç§socket UDPä¸­çš„socketç¼–ç¨‹ UDPï¼šå®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´æ²¡æœ‰è¿æ¥ å‘é€æ•°æ®å‰ä¸éœ€è¦æ¡æ‰‹ å‘é€æ•°æ®åŒ…é™„åŠ IPåœ°å€+ç«¯å£å· æ¥æ”¶æ–¹ä»æ•°æ®åŒ…ä¸­æå–å¤„IPåœ°å€+ç«¯å£å· &emsp;&emsp;UDPæä¾›çš„æ˜¯ä¸€ç§ä¸å¯é çš„æ•°æ®æµä¼ è¾“ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šä¸¢åŒ…ï¼Œæ¥æ”¶çš„æ—¶å€™é¡ºåºä¹Ÿå¯èƒ½è¢«æ‰“ä¹±ã€‚ UDPä¸­çš„socketç¼–ç¨‹ç¤ºä¾‹&emsp;&emsp;è¿™é‡Œjupyter notebookä¸­è¿›è¡Œç¼–ç¨‹ï¼Œå®‰è£…å¥½jupyter notebookåï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œ 1jupyter notebook å³å¯å¯åŠ¨jupyter notebook UDPæœåŠ¡å™¨ä»£ç  UDPServer.ipynb123456789101112from socket import * #å¼•å…¥socketåº“serverPort = 12000 #æœåŠ¡å™¨ç«¯å£å·serverSocket = socket(AF_INET, SOCK_DGRAM) #åˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—serverSocket.bind(('', serverPort)) #ç»™å¥—æ¥å­—ç»‘å®šç«¯å£å·print('The server is ready to receive.')while True: #æœåŠ¡å™¨è¦ä¸€ç›´åœ¨çº¿ç­‰å¾…ï¼Œæ‰€ä»¥ç»™ä¸€ä¸ªæ­»å¾ªç¯ message, clientAddress = serverSocket.recvfrom(2048) #ä»æœåŠ¡å™¨å¥—æ¥å­—ä¸­è¯»å–ä¿¡æ¯ï¼ˆå‘é€çš„æ¶ˆæ¯å’Œå®¢æˆ·æœºIPåœ°å€+ç«¯å£å·ï¼‰ modifiedMessage = message.decode().upper() #å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼ˆæ­¤å¤„æ˜¯æ”¹å¤§å†™ï¼‰ serverSocket.sendto(modifiedMessage.encode(), clientAddress) #å°†å¤„ç†åçš„æ¶ˆæ¯å‘å›ç»™å®¢æˆ·æœº UDPå®¢æˆ·æœºä»£ç  UDPClient.ipynb12345678910111213from socket import * #å¼•å…¥socketåº“serverName = gethostname() #ç”±äºæ²¡å¾—æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¸»æœºç”¨æœ¬æœºæ¥å½“serverPort = 12000 #æœåŠ¡å™¨ç«¯å£å·clientSocket = socket(AF_INET, SOCK_DGRAM) #åˆ›å»ºå®¢æˆ·æœºå¥—æ¥å­—message = input('Input lowercase sentence:') #å¾—åˆ°è¾“å…¥å­—ç¬¦ä¸²clientSocket.sendto(message.encode(),(serverName, serverPort)) #å‘é€æ•°æ®åˆ°ç›¸åº”ä¸»æœºå+ç«¯å£å·çš„æœåŠ¡å™¨è¿›ç¨‹modifiedMessage, serverAddress = clientSocket.recvfrom(2048) #æ¥æ”¶æœåŠ¡å™¨å‘å›çš„æ¶ˆæ¯print(modifiedMessage.decode()) #æ˜¾ç¤ºæ¥æ”¶çš„å­—ç¬¦ä¸²clientSocket.close() #å…³é—­å®¢æˆ·æœºsocket &emsp;&emsp;å…ˆè¿è¡ŒUDPServer.ipynbï¼Œå¯åŠ¨æœåŠ¡å™¨è¿è¡Œã€‚ &emsp;&emsp;å…ˆè¿è¡ŒUDPClient.ipynbï¼Œè¿›è¡Œå®¢æˆ·æœºè®¿é—®ã€‚ TCPä¸­çš„socketç¼–ç¨‹ æœåŠ¡å™¨çš„å…ˆè¡Œå‡†å¤‡ æœåŠ¡å™¨å¿…é¡»å…ˆè¿è¡Œ æœåŠ¡å™¨éœ€è¦åˆ›å»ºsocketæ¥è¿æ¥å®¢æˆ·æœº å®¢æˆ·æœºè¿æ¥æœåŠ¡å™¨ å®¢æˆ·æœºéœ€è¦åˆ›å»ºè‡ªå·±çš„socketï¼Œæ˜ç¡®æœåŠ¡å™¨è¿›ç¨‹çš„IPåœ°å€å’Œç«¯å£å· å®¢æˆ·æœºåˆ›å»ºsocketæ—¶ï¼Œå®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´éœ€å»ºç«‹TCPè¿æ¥ æœåŠ¡å™¨æ¥æ”¶å®¢æˆ·æœºæ¶ˆæ¯ æœåŠ¡å™¨éœ€åˆ›å»ºä¸€ä¸ªæ–°çš„socketï¼Œä¸ºäº†æœåŠ¡å™¨è¿›ç¨‹èƒ½å¤Ÿå’Œå®¢æˆ·æœºè¿›è¡Œé€šä¿¡ è¦è¿è¡ŒæœåŠ¡å™¨ä¸å¤šä¸ªå®¢æˆ·æœºè¿›è¡Œé€šä¿¡ ç”¨æºçš„ç«¯å£å·æ¥åŒºåˆ†ä¸åŒçš„å®¢æˆ·æœº &emsp;&emsp;TCPæä¾›çš„æ˜¯ä¸€ç§å¯é çš„å­—èŠ‚æµï¼ˆbyte-streamï¼‰ä¼ è¾“ï¼ˆpipeï¼‰ã€‚ TCPä¸­çš„socketç¼–ç¨‹ç¤ºä¾‹ TCPæœåŠ¡å™¨ä»£ç  TCPServer.ipynb1234567891011121314151617from socket import * #å¼•å…¥socketåº“serverPort = 12000 #æœåŠ¡å™¨ç«¯å£å·serverSocket = socket(AF_INET, SOCK_STREAM) #åˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—ï¼ˆå‰å°ï¼‰serverSocket.bind(('', serverPort)) #ç»™å¥—æ¥å­—ç»‘å®šç«¯å£å·serverSocket.listen(1)print('The server is ready to receive.')while True: #æœåŠ¡å™¨è¦ä¸€ç›´åœ¨çº¿ç­‰å¾…ï¼Œæ‰€ä»¥ç»™ä¸€ä¸ªæ­»å¾ªç¯ connectionSocket, addr = serverSocket.accept() #å‰å°å¥—æ¥å­—æ¥æ”¶åˆ°è¯·æ±‚åï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¥—æ¥å­—ï¼ˆçª—å£ï¼‰ sentence = connectionSocket.recv(1024).decode() #çª—å£å¥—æ¥å­—è¯»å–ä¿¡æ¯ capitalizedSentence = sentence.upper() #å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼ˆæ­¤å¤„æ˜¯æ”¹å¤§å†™ï¼‰ connectionSocket.send(capitalizedSentence.encode()) #å°†å¤„ç†åçš„ä¿¡æ¯å‘å›ç»™å®¢æˆ·æœº connectionSocket.close() #å…³é—­çª—å£å¥—æ¥å­—ï¼Œå‰å°å¥—æ¥å­—ä¿æŒå¼€æ”¾ TCPå®¢æˆ·æœºä»£ç  TCPClient.ipynb1234567891011121314from socket import * #å¼•å…¥socketåº“serverName = gethostname() #ç”±äºæ²¡å¾—æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¸»æœºç”¨æœ¬æœºæ¥å½“serverPort = 12000 #æœåŠ¡å™¨ç«¯å£å·clientSocket = socket(AF_INET, SOCK_STREAM) #åˆ›å»ºå®¢æˆ·æœºå¥—æ¥å­—(ç±»å‹ä¸ºå­—èŠ‚æµSOCK_STREAM)clientSocket.connect((serverName, serverPort)) #TCPè¿æ¥sentence = input('Input lowercase sentence:') #å¾—åˆ°è¾“å…¥å­—ç¬¦ä¸²clientSocket.send(sentence.encode()) #å‘é€æ•°æ®åˆ°æœåŠ¡å™¨modifiedSentence = clientSocket.recv(1024) #æ¥æ”¶æœåŠ¡å™¨å‘å›çš„æ¶ˆæ¯print('From server:', modifiedSentence.decode()) #æ˜¾ç¤ºæ¥æ”¶çš„å­—ç¬¦ä¸²clientSocket.close() #å…³é—­å®¢æˆ·æœºsocket &emsp;&emsp;å…ˆè¿è¡ŒTCPServer.ipynbï¼Œå¯åŠ¨æœåŠ¡å™¨è¿è¡Œã€‚ &emsp;&emsp;å…ˆè¿è¡ŒTCPClient.ipynbï¼Œè¿›è¡Œå®¢æˆ·æœºè®¿é—®ã€‚ ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ä¼ è¾“å±‚æœåŠ¡ä¼ è¾“å±‚æ¦‚è¿° ä¸ºä¸åŒä¸»æœºä¹‹é—´çš„åº”ç”¨è¿›ç¨‹æä¾›é€šä¿¡çš„æ¡¥æ¢ ç«¯å¯¹ç«¯ï¼šä¼ è¾“å±‚åè®®åœ¨ç«¯ç³»ç»Ÿé—´è¿è¡Œï¼Œä¸éœ€è¦æ¶‰åŠç½‘ç»œæ ¸å¿ƒ å‘é€æ–¹æŠŠåº”ç”¨å±‚æ¥åˆ°çš„æ¶ˆæ¯åˆ†æˆæ®µï¼ˆsegmentï¼‰ï¼Œå†æŠŠè¿™äº›æ®µä¼ è¾“ç»™ç½‘ç»œå±‚ æ¥æ”¶æ–¹æŠŠæ¥æ”¶åˆ°çš„æ®µé‡æ–°æ‹¼è£…æˆæ¶ˆæ¯ï¼Œä¼ è¾“ç»™åº”ç”¨å±‚ ä¼ è¾“å±‚çš„åè®®ï¼šTCPå’ŒUDP ä¼ è¾“å±‚å’Œç½‘ç»œå±‚å¯¹æ¯” ç½‘ç»œå±‚ï¼šä¸»æœºä¹‹é—´çš„é€šä¿¡ ä¼ è¾“å±‚ï¼šè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ ä¼ è¾“å±‚ä¾èµ–äºå¹¶èƒ½å¼ºåŒ–ç½‘ç»œå±‚æœåŠ¡ã€‚ ä¼ è¾“å±‚åè®® TCPï¼šå¯é çš„ï¼Œæœ‰åºçš„ä¼ é€ æ‹¥å¡æ§åˆ¶ æµé‡æ§åˆ¶ éœ€è¦å»ºç«‹è¿æ¥ UDPï¼šä¸å¯é çš„ï¼Œæ— åºçš„ä¼ é€ æä¾›å°½åŠ›è€Œä¸ºäº¤ä»˜æœåŠ¡ äºŒè€…å‡ä¸æä¾›çš„æœåŠ¡ï¼šå»¶æ—¶ä¿éšœã€å¸¦å®½ä¿éšœ å¤šè·¯å¤ç”¨ï¼ˆMultiplexingï¼‰ä¸å¤šè·¯åˆ†ç”¨ï¼ˆDemultiplexingï¼‰ &emsp;&emsp;å¤šè·¯å¤ç”¨å­˜åœ¨äºå‘é€æ–¹ï¼šå‘é€æ–¹éœ€è¦å¤„ç†å¤šä¸ªå¥—æ¥å­—ï¼Œå¹¶ä¸”ç»™å¥—æ¥å­—åŠ ä¸Šä¼ è¾“å±‚çš„å¤´éƒ¨ã€‚ &emsp;&emsp;å¤šè·¯åˆ†ç”¨å­˜åœ¨äºæ¥æ”¶æ–¹ï¼šåˆ©ç”¨å¤´éƒ¨ä¿¡æ¯ï¼Œå°†æ¥æ”¶åˆ°çš„æŠ¥æ–‡æ®µä¼ è¾“ç»™æ­£ç¡®çš„å¥—æ¥å­—ã€‚ å¤šè·¯åˆ†ç”¨å¤šè·¯åˆ†ç”¨å·¥ä½œæµç¨‹ ä¸»æœºæ”¶åˆ°IPæ•°æ®æŠ¥ï¼ˆIP datagramï¼‰ æ¯ä¸ªæ•°æ®æŠ¥æœ‰æºIPåœ°å€å’Œç›®çš„IPåœ°å€ æ¯ä¸ªæ•°æ®æŠ¥æºå¸¦ä¸€ä¸ªä¼ è¾“å±‚æŠ¥æ–‡æ®µï¼ˆsegmentï¼‰ æ¯ä¸ªæŠ¥æ–‡æ®µæœ‰æºå’Œç›®çš„çš„ç«¯å£å· ä¸»æœºåˆ©ç”¨IPåœ°å€å’Œç«¯å£å·æ¥æŠŠæŠ¥æ–‡æ®µä¼ å…¥æ­£ç¡®çš„å¥—æ¥å­— æ— è¿æ¥çš„å¤šè·¯åˆ†ç”¨ï¼ˆConnectionless demultiplexingï¼‰ &emsp;&emsp;å‚è€ƒUDPçš„socketå·¥ä½œæ–¹å¼ï¼Œå¦‚æœæ•°æ®æŠ¥çš„ç›®çš„IPåœ°å€å’Œç«¯å£å·ç›¸åŒï¼Œå®ƒä»¬å°†è¢«ä¼ åˆ°åŒä¸€ä¸ªsocketå½“ä¸­ã€‚ï¼ˆå³ä½¿æ•°æ®æŠ¥çš„æºå¯èƒ½ä¸åŒï¼‰ é¢å‘è¿æ¥çš„å¤šè·¯åˆ†ç”¨ï¼ˆConnection-oriented demuxï¼‰ &emsp;&emsp;å‚è€ƒTCPçš„socketå·¥ä½œæ–¹å¼ æ ‡è®°TCPçš„socketéœ€è¦4å…ƒç»„ï¼šæºIPåœ°å€ã€æºç«¯å£å·ã€ç›®çš„IPåœ°å€ã€ç›®çš„ç«¯å£å· å¤šè·¯åˆ†ç”¨ï¼šæ¥æ”¶æ–¹è¦ç”¨åˆ°ä¸Šé¢4ä¸ªå€¼æ¥ä¼ å…¥ä¸åŒçš„socket æœåŠ¡å™¨çš„ä¸»æœºå¯èƒ½è¦åŒæ—¶æ”¯æŒå¤šä¸ªTCPè¿æ¥ webæœåŠ¡å™¨æœ‰ä¸åŒçš„socketå¯¹åº”æ¯ä¸ªè¿æ¥çš„å®¢æˆ·æœºï¼Œå…¶ä¸­éæŒä¹…æ€§HTTPä¼šç»™æ¯ä¸ªè¯·æ±‚éƒ½å»ºç«‹æ–°çš„socketã€‚ UDPUDPæ¦‚è¿° &emsp;&emsp;UDPï¼ˆUser Datagram Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼Œæ ‡å‡†ä¸ºRFC 768ã€‚ åªæœ‰åŸºæœ¬çš„åŠŸèƒ½ å°½åŠ›è€Œä¸ºçš„æœåŠ¡ï¼ŒUDPå¯èƒ½ä¼šä¸¢åŒ…æˆ–è€…å¤±åº ä¸ç”¨è¿æ¥ï¼šå®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¸éœ€è¦æ¡æ‰‹ï¼Œæ¯ä¸ªUDPæ®µéƒ½æ˜¯ç‹¬ç«‹å¤„ç†çš„ UDPçš„ä¼˜ç‚¹ ä¸éœ€è¦è¿›è¡Œè¿æ¥ï¼Œè¿æ¥å¯èƒ½ä¼šé€ æˆæ—¶å»¶ ç®€å•ï¼šä¸éœ€è¦è€ƒè™‘è¿æ¥çš„çŠ¶æ€ ç›¸å¯¹å°çš„å¤´çš„å¤§å° ä¸éœ€è¦æ‹¥å¡æ§åˆ¶ï¼Œå¯ä»¥å°½å¿«åœ°æŠŠUDPæ®µå‘å‡ºå» UDPçš„åº”ç”¨ æµåª’ä½“çš„appï¼ˆè¿è¡Œä¸€éƒ¨åˆ†æ•°æ®çš„ä¸¢å¤±ï¼Œä½†æ˜¯å¯¹é€Ÿåº¦å¾ˆæ•æ„Ÿï¼‰ DNS SNMP é€šè¿‡UDPè¿›è¡Œå¯é çš„ä¼ è¾“ï¼ˆUDPæœ¬èº«æ˜¯ä¸å¯é çš„ï¼‰ åœ¨åº”ç”¨å±‚å¢åŠ å¯é æ€§ appè¦æœ‰å¯¹åº”çš„é”™è¯¯æ¢å¤æ–¹æ³• UDPæ ¡éªŒå’Œï¼ˆUDP checksumï¼‰ &emsp;&emsp;ä½äºUDPå¤´éƒ¨ï¼Œè´Ÿè´£æ£€æµ‹ä¼ è¾“çš„æ®µæœ‰æ²¡æœ‰å‘ç”Ÿâ€œé”™è¯¯â€ï¼ˆæ¯”å¦‚ä½çš„ç¿»è½¬ï¼‰ å‘é€æ–¹ï¼š æŠŠå‘é€çš„æ®µçš„å†…å®¹åŒ…æ‹¬å¤´éƒ¨åˆ†ï¼Œå½“ä½œä¸€ç»„16-bitçš„æ•´æ•° æ ¡éªŒå’Œï¼šæŠ¥æ–‡æ®µä¸­çš„æ‰€æœ‰16-bitçš„å’Œçš„å–å…³äºâ€œ1â€çš„è¡¥ç  å‘é€æ–¹è¦å°†æ ¡éªŒå’Œæ”¾åˆ°UDPçš„æ ¡éªŒå’Œéƒ¨åˆ† æ¥æ”¶æ–¹ï¼š è®¡ç®—æ¥æ”¶åˆ°çš„æŠ¥æ–‡æ®µçš„æ ¡éªŒå’Œ å°†æ¥æ”¶æ–¹çš„æ ¡éªŒå’Œä¸å‘é€æ–¹çš„æ ¡éªŒå’Œè¿›è¡Œæ¯”è¾ƒï¼Œä¸åŒåˆ™æ£€æµ‹å‡ºé”™è¯¯ï¼Œç›¸åŒåˆ™æ²¡æ£€æµ‹å‡ºé”™è¯¯ &emsp;&emsp;æ ¡éªŒå’Œç›¸åŒåªèƒ½è¯´æ˜¯â€œæ£€éªŒä¸å‡ºé”™è¯¯â€ï¼Œä¸èƒ½ä¿éšœæ²¡æœ‰é”™è¯¯ã€‚æ¯”å¦‚ä¼ è¾“ä¸­å¤šä¸ª16bitå­—å‘ç”Ÿé”™è¯¯ï¼Œä½†æ˜¯å¯èƒ½æ°å·§ç›¸åŠ æ ¡éªŒå’Œä¸å˜ã€‚ ä¾‹é¢˜ï¼šæœ‰ä¸¤ä¸ª16-bitçš„å­—ï¼Œ1110011001100110 å’Œ 1101010101010101ï¼Œæ±‚æ ¡éªŒå’Œã€‚\\begin{split} &1110011001100110\\\\\\\\ +\\ &1101010101010101\\\\\\\\ â€”â€”â€”â€”â€”â€”â€”&â€”â€”â€”â€”â€”â€”â€”â€”â€”\\\\\\\\ wrap\\ around\\quad1&1011101110111011\\quad\\\\\\\\ sum\\quad&1011101110111100\\\\\\\\ checksum\\quad&0100010001000011 \\end{split} &emsp;&emsp;wraparoundå­˜åœ¨æº¢å‡ºï¼Œè¿›ä½çš„éƒ¨åˆ†å›å·ï¼ŒåŠ åˆ°æœ€åä¸€ä½ã€‚ å¯é æ•°æ®ä¼ è¾“åŸç† &emsp;&emsp;å¯é æ•°æ®ä¼ è¾“åŸç†ï¼ˆPrinciples of reliable data transfer, rdtï¼‰ å¯¹åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€é“¾è·¯å±‚éƒ½å¾ˆé‡è¦ &emsp;&emsp; ä¸å¯é ä¿¡é“çš„ç‰¹ç‚¹å†³å®šäº†ä¸å¯é ä¼ è¾“åè®®çš„å¤æ‚åº¦ è°ƒç”¨æ¥å£å‡½æ•°ï¼š æ¥å£å‡½æ•° å‚æ•° ä½œç”¨ rdt_send() data è°ƒç”¨æ•°æ®ä¼ è¾“åè®®çš„å‘é€æ–¹ï¼Œå°†è¦å‘é€çš„æ•°æ®äº¤ä»˜ç»™ä½äºæ¥æ”¶æ–¹çš„è¾ƒé«˜å±‚ udt_send() packet rdtè°ƒç”¨ï¼Œé€šè¿‡ä¸å¯é ä¿¡é“ï¼Œå°†packetä¼ è¾“åˆ°æ¥æ”¶æ–¹ rdt_rcv() packet åœ¨packetåˆ°è¾¾æ¥æ”¶æ–¹ä¿¡é“æ—¶è°ƒç”¨ deliver_data() data rdtè°ƒç”¨ï¼Œä¼ è¾“æ•°æ®åˆ°é«˜å±‚ ä¸ä¸å¯é ä¿¡é“ä¹‹é—´çš„å‡½æ•°è°ƒç”¨éƒ½æ˜¯åŒå‘çš„ï¼Œç”±äºå…¶ä¸å¯é æ€§ï¼Œéœ€è¦è¿›è¡Œç¡®è®¤çš„æ§åˆ¶ä¿¡å·ï¼ˆACKï¼ŒNAKï¼‰ã€‚ rdt1.0ï¼šç»å¯é ä¿¡é“çš„å¯é æ•°æ®ä¼ è¾“rdt1.0æ¦‚è¿° ä¸‹å±‚ä¿¡é“å®Œå…¨å¯é ï¼šrdt1.0ä¸­å‡è®¾ä¸‹å±‚çš„ä¿¡é“æ˜¯ä¸€ä¸ªå®Œå…¨å¯é çš„ä¿¡é“ï¼ˆç†æƒ³æƒ…å†µï¼‰ æ²¡æœ‰bitçš„é”™è¯¯ æ²¡æœ‰åˆ†ç»„ï¼ˆpacketï¼‰ä¸¢å¤± å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰ï¼ˆå­˜åœ¨çŠ¶æ€å’Œæ“ä½œï¼‰ å‘é€æ–¹å‘é€æ•°æ®ç»™ä¸‹å±‚ä¿¡é“ æ¥æ”¶æ–¹æ¥æ”¶ä¸‹å±‚ä¿¡é“ä¼ æ¥çš„æ•°æ® rdt1.0æœ‰é™çŠ¶æ€æœºå‘é€æ–¹&emsp;&emsp;å‘é€æ–¹é¦–å…ˆåœ¨â€œç­‰å¾…ä¸Šçº§è°ƒç”¨â€çš„çŠ¶æ€ï¼Œrdt_send(data)ä¸Šçº§è°ƒç”¨rdtï¼Œä»ä¸Šçº§æ¥æ”¶åˆ°dataï¼Œmake_pkt(data)å°†dataè£…åˆ°packeté‡Œï¼Œå†ç”¨udt_send(packet)å°†packetå‘é€å‡ºå»ï¼Œå®Œæˆåå‘é€æ–¹å†å›åˆ°â€œç­‰å¾…ä¸Šçº§è°ƒç”¨â€çš„çŠ¶æ€ã€‚ï¼ˆå‘é€æ–¹åªæœ‰ä¸€ä¸ªçŠ¶æ€ï¼‰ æ¥æ”¶æ–¹&emsp;&emsp;æ¥æ”¶æ–¹é¦–å…ˆåœ¨â€œç­‰å¾…ä¸‹çº§è°ƒç”¨â€çš„çŠ¶æ€ï¼Œrdt_rcv(packet)ä¸‹çº§è°ƒç”¨rdtï¼Œä»ä¸‹çº§æ¥æ”¶åˆ°packetï¼Œç”¨extract(packet, data)å°†packeté‡æ–°æ¢å¤æˆdataï¼Œæå–å‡ºæ¥çš„dataå†é€šè¿‡deliver_data(data)ä¼ é€ç»™ä¸Šçº§ã€‚å®Œæˆåæ¥æ”¶æ–¹å†å›åˆ°â€œç­‰å¾…ä¸‹çº§è°ƒç”¨â€çš„çŠ¶æ€ã€‚ ä¸‹å±‚ä¿¡é“ä¸å¯èƒ½å®Œå…¨å¯é  =&gt; å¼•å…¥rdt2.0 rdt2.0ï¼šç»å…·æœ‰æ¯”ç‰¹å·®é”™ä¿¡é“çš„æ•°æ®ä¼ è¾“&emsp;&emsp;å¼•å…¥å·®é”™æ£€æµ‹ã€æ§åˆ¶ä¿¡å·å’Œé‡ä¼ æœºåˆ¶ï¼Œè§£å†³ä¸‹å±‚ä¿¡é“ä¸å¯é é—®é¢˜ã€‚ rdt2.0æ¦‚è¿° packetåœ¨ä¸‹å±‚ä¿¡é“ä¼ è¾“ä¸­ä¼šå‡ºç°æ¯”ç‰¹ç¿»è½¬ï¼šå¯ä»¥å¼•å…¥æ ¡éªŒå’Œï¼ˆchecksumï¼‰æ¥æ£€æµ‹æ¯”ç‰¹é”™è¯¯ã€‚ é”™è¯¯æ¢å¤â€”â€”å¦‚æœæ£€éªŒåˆ°é”™è¯¯å¦‚ä½•æ¢å¤ï¼Ÿ ACKsï¼ˆacknowledgementsï¼‰ï¼šæ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹æ”¶åˆ°çš„pktæ˜¯æ­£ç¡®çš„ NAKsï¼ˆnegative acknowledgementsï¼‰ï¼šæ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹æ”¶åˆ°çš„pktæ˜¯é”™è¯¯çš„ å‘é€æ–¹æ”¶åˆ°NAKåˆ™é‡ä¼ é‚£ä¸ªpkt rdt2.0å¼•å…¥çš„æ–°æœºåˆ¶ å·®é”™æ£€æµ‹ï¼šchecksum æ¥æ”¶æ–¹åé¦ˆï¼šæ§åˆ¶ä¿¡å·ï¼ˆcontrol msgï¼‰ï¼Œå³ACKå’ŒNAK é‡ä¼  rdt2.0æ— é™çŠ¶æ€æœºå‘é€æ–¹&emsp;&emsp;rdt2.0çš„å‘é€æ–¹æœ‰2ä¸ªçŠ¶æ€â€”â€”ç­‰å¾…ä¸Šçº§è°ƒç”¨ã€ç­‰å¾…ACKæˆ–NAKã€‚å‘é€æ–¹æœ€åˆå¤„äºâ€œç­‰å¾…ä¸Šçº§è°ƒç”¨â€çš„çŠ¶æ€ï¼Œrdt_send(data)ä¸Šçº§è°ƒç”¨rdtï¼Œä»ä¸Šçº§æ¥æ”¶åˆ°dataï¼Œsndpkt = make_pkt(data, checksum)å°†dataè£…åˆ°packeté‡Œï¼Œå†ç”¨udt_send(sndpkt)å°†packetå‘é€å‡ºå»ã€‚æ­¤æ—¶ï¼Œå‘é€æ–¹å˜ä¸ºâ€œç­‰å¾…ACKæˆ–NAKâ€çš„çŠ¶æ€ã€‚rdt_rcv(rcvpkt)æ¥æ”¶åé¦ˆï¼Œå¦‚æœisNAK(rcvpkt)å³æ¥æ”¶åˆ°NAKï¼Œåˆ™é‡ä¼ udt_send(sndpkt)ï¼Œå¹¶ä¿æŒâ€œç­‰å¾…ACKæˆ–NAKâ€çš„çŠ¶æ€ï¼›å¦‚æœisACK(rcvpkt)å³æ¥æ”¶åˆ°ACKï¼Œåˆ™å›åˆ°â€œç­‰å¾…ä¸Šçº§è°ƒç”¨â€çš„çŠ¶æ€ã€‚ åœç­‰æœºåˆ¶ï¼ˆstop and waitï¼‰&emsp;&emsp;å‘é€æ–¹å‘é€ä¸€ä¸ªpacketï¼Œç„¶åç­‰å¾…æ¥æ”¶æ–¹çš„å“åº”ã€‚ æ¥æ”¶æ–¹&emsp;&emsp;æ¥æ”¶æ–¹è¿˜æ˜¯åªæœ‰ä¸€ä¸ªçŠ¶æ€â€”â€”ç­‰å¾…ä¸‹çº§è°ƒç”¨ã€‚æ¥æ”¶æ–¹é¦–å…ˆåœ¨â€œç­‰å¾…ä¸‹çº§è°ƒç”¨â€çš„çŠ¶æ€ï¼Œrdt_rcv(rcvpkt)æ¥æ”¶æ–¹æ¥æ”¶packetï¼Œå¦‚æœcorrupt(rcvpkt)ï¼Œå³æ£€æµ‹åˆ°é”™è¯¯ï¼Œåˆ™udt_send(NAK)åé¦ˆNAKï¼›å¦‚æœnotcorrupt(rcvpkt)ï¼Œå³æœªæ£€æµ‹åˆ°é”™è¯¯ï¼Œåˆ™extract(packet, data)å°†packeté‡æ–°æ¢å¤æˆdataï¼Œdeliver_data(data)å°†dataä¼ é€ç»™ä¸Šçº§ï¼Œæœ€åudt_send(ACK)åé¦ˆACKã€‚å®Œæˆåæ¥æ”¶æ–¹å†å›åˆ°â€œç­‰å¾…ä¸‹çº§è°ƒç”¨â€çš„çŠ¶æ€ã€‚ æ¥æ”¶æ–¹å¯èƒ½åˆ¤æ–­ACK/NAKä¿¡å·å‡ºé”™ï¼Œå¯¼è‡´å‘é€åˆ†ç»„é‡å¤ =&gt; å¼•å…¥rdt2.1 rdt2.1ï¼šæ¥æ”¶æ–¹åˆ¤æ–­ACK/NAKä¿¡å·å‡ºé”™&emsp;&emsp;å¼•å…¥0/1åºå·å’Œä¸¢å¼ƒåˆ†ç»„ï¼Œè§£å†³æ¥æ”¶æ–¹åˆ¤æ–­ACK/NAKä¿¡å·å‡ºé”™ï¼Œå¯¼è‡´å‘é€åˆ†ç»„é‡å¤é—®é¢˜ã€‚ä½†è¿™ä¹Ÿè®©å‘é€æ–¹å’Œæ¥æ”¶æ–¹æœ‰é™çŠ¶æ€æœºçš„çŠ¶æ€ç¿»å€ã€‚ rdt2.1æœ‰é™çŠ¶æ€æœºå‘é€æ–¹&emsp;&emsp;ç›¸è¾ƒäºrdt2.0ï¼Œrdt2.1åœ¨å‘é€çš„packeté‡ŒåŒ…å«äº†0/1åºå·ï¼ˆsequence numberï¼‰ï¼Œæ‰€ä»¥å‘é€æ–¹æœ‰4ç§çŠ¶æ€â€”â€”ç­‰å¾…ä¸Šçº§è°ƒç”¨ 0ã€ç­‰å¾…ACKæˆ–NAK 0ã€ç­‰å¾…ä¸Šçº§è°ƒç”¨ 1ã€ç­‰å¾…ACKæˆ–NAK 1ã€‚ æ¥æ”¶æ–¹&emsp;&emsp;æ¥æ”¶æ–¹æœ‰2ç§çŠ¶æ€â€”â€”ç­‰å¾…ä¸‹çº§è°ƒç”¨ 0ã€ç­‰å¾…ä¸‹çº§è°ƒç”¨ 1ã€‚åªæœ‰åœ¨æ•°æ®åŒ…ACKä¸”æ”¶åˆ°çš„packetåºå·ä¸ç›®å‰çŠ¶æ€ç­‰å¾…çš„åºå·ç›¸åŒæ—¶ï¼Œæ‰èƒ½å‘ä¸Šä¼ è¾“ã€‚ ä¸ºä»€ä¹ˆæ¥æ”¶æ–¹ç­‰å¾…1çŠ¶æ€æ¥æ”¶åˆ°0çš„packetæ—¶ï¼Œä¸ºä»€ä¹ˆè¦åé¦ˆACKï¼Ÿ&emsp;&emsp;ä¸ºäº†è®©å‘é€æ–¹çš„çŠ¶æ€è½¬ç§»ï¼Œä»â€œç­‰å¾…ACKæˆ–NAK 0â€åˆ°â€œç­‰å¾…ä¸Šçº§è°ƒç”¨ 1â€ã€‚ rdt2.2ï¼šä¸å‘é€NAKçš„åè®®&emsp;&emsp;ç”¨é‡å¤çš„ACKæ›¿ä»£NAKï¼Œè§£å†³ä¿¡å·å†—ä½™é—®é¢˜ã€‚ rdt2.2æ¦‚è¿° åªç”¨ACKï¼Œä¸ç”¨NAKï¼Œå®ç°å’Œrdt2.1ä¸€æ ·çš„åŠŸèƒ½ã€‚ åœ¨æ£€æµ‹åˆ°é”™è¯¯æ—¶ï¼Œä¸å‘é€NAKï¼Œä½†æ˜¯æ¥æ”¶æ–¹è¦å‘é€åˆ¤æ–­ä¸Šä¸€æ¬¡åºå·çš„ACKï¼ˆåŒæ—¶åŒ…æ‹¬åºå·ï¼‰ ç”¨é‡å¤çš„ACKä»£æ›¿NAK rdt2.2æœ‰é™çŠ¶æ€æœºå‘é€æ–¹&emsp;&emsp;å°†rdt2.1ä¸­çš„isNAK(rcvpkt)åˆ¤æ–­æœ¬æ¬¡åé¦ˆæ˜¯NAKï¼Œæ›¿ä»£æˆåˆ¤æ–­ä¸Šæ¬¡åºå·çš„åé¦ˆæ˜¯ACKï¼Œæ¯”å¦‚rdt2.2åœ¨â€œç­‰å¾…ACK 0â€æ—¶ï¼Œå¦‚æœisACK(rcvpkt, 1)ï¼Œåˆ™ç›¸å½“äºæ”¶åˆ°æ¥rdt2.1ä¸­çš„isNAK(rcvpkt)ã€‚å…¶ä½™ä¸å˜ã€‚ æ¥æ”¶æ–¹&emsp;&emsp;æ¥æ”¶æ–¹å¦‚æœæ ¡éªŒå’Œæ£€æµ‹å‡ºé”™ï¼Œåˆ™å‘é€ä¸Šä¸€æ¬¡åºå·çš„ACKï¼›åœ¨æ ¡éªŒå’Œæ£€æµ‹æ­£ç¡®æ—¶ï¼Œå‘é€ACKä¹Ÿéœ€è¦å¸¦ä¸Šæœ¬æ¬¡çš„åºå·ã€‚ rdt3.0ï¼šä¿¡é“å­˜åœ¨é”™è¯¯å’Œä¸¢åŒ…rdt3.0æ¦‚è¿°&emsp;&emsp;å‘é€ç«¯åœ¨ä¸€ä¸ªåˆç†çš„æ—¶é—´å†…ï¼Œç­‰å¾…æ¥æ”¶ACKã€‚ å½“åœ¨ç­‰å¾…æ—¶é—´å†…æ²¡æœ‰æ¥æ”¶ACKæ—¶ï¼Œé‡ä¼  è¶…è¿‡æ—¶é—´å¯èƒ½æœ‰ä¸¤ç§æƒ…å†µï¼šä¸¢åŒ…æˆ–æ—¶å»¶ï¼Œå¦‚æœå‘ç”Ÿæ—¶å»¶å¯èƒ½ä¼šé‡å¤å‘ç”Ÿpktï¼Œæ­¤æ—¶rdt2.1å’Œ2.2ä¸­çš„åºå·å¯ä»¥è§£å†³é—®é¢˜ï¼ŒåŒæ ·çš„å‘ç”ŸACKå¾—å¸¦ä¸Šåºå·ã€‚ éœ€è¦è®¡æ—¶å™¨ rdt3.0æœ‰é™çŠ¶æ€æœº&emsp;&emsp;å‘é€æ–¹ä¼ è¾“å¼€å§‹æ—¶ï¼Œstart_timerå¯åŠ¨è®¡æ—¶å™¨ã€‚å¦‚æœtimeoutä¼ è¾“è¶…æ—¶ï¼Œåˆ™é‡æ–°å¯åŠ¨è®¡æ—¶å™¨ï¼›å¦‚æœåœ¨è§„å®šæ—¶é—´å†…æ¥æ”¶åˆ°åé¦ˆï¼Œåˆ™stop_timerç»“æŸè®¡æ—¶ã€‚ rdt3.0æµç¨‹æ­£å¸¸æµç¨‹ ä¸¢packet ä¸¢ACK è¶…æ—¶ rdt3.0æ€§èƒ½&emsp;&emsp;rdt3.0æ€§èƒ½å¾ˆå·® ä¾‹é¢˜ï¼šä¸€ä¸ª 1Gbpsçš„é“¾è·¯ï¼Œ15msçš„ä¼ æ’­æ—¶å»¶ï¼Œä¼ è¾“8000bitçš„packetï¼Œæ±‚å‘é€æ–¹çš„ä½¿ç”¨æ•ˆç‡ã€‚ä¼ è¾“æ—¶å»¶D_{tran} = \\frac LR = \\frac{8000\\ bits}{10^9\\ bits/sec} = 8 mså‘é€æ–¹ä½¿ç”¨æ•ˆç‡U_{sender} = \\frac{L/R}{RTT+L/R} = \\frac{0.008}{30.008} = 0.00027&emsp;&emsp;å¯è§rdt3.0çš„ä½¿ç”¨æ•ˆç‡å¾ˆä½ã€‚ &emsp;&emsp;rdt3.0ç½‘ç»œåè®®é™åˆ¶äº†ç‰©ç†èµ„æºçš„ä½¿ç”¨ç‡ã€‚ æµæ°´çº¿åè®®&emsp;&emsp;é‡‡ç”¨æµæ°´çº¿çš„æœºåˆ¶ï¼Œä¸è¦ç­‰ä¸€ä¸ªRTTå‘é€å›æ¥å†å‘ä¸‹ä¸€ä¸ªï¼ˆå³ä¸å†é‡‡ç”¨åœç­‰æœºåˆ¶ï¼‰ï¼Œæ¥æé«˜ç‰©ç†èµ„æºçš„ä½¿ç”¨ç‡ã€‚ å›¾ åœç­‰æœºåˆ¶ï¼ˆStop-and-waitï¼‰ å›¾ æµæ°´çº¿æœºåˆ¶ï¼ˆPipelined Operationï¼‰ å›é€€Næ­¥ï¼ˆGo-back-Nï¼ŒGBNï¼‰ å‘é€æ–¹å¯ä»¥æœ‰è‡³å¤šNä¸ªæ²¡æœ‰ACKçš„packetåŒæ—¶åœ¨æµæ°´çº¿ä¸Š æ¥æ”¶æ–¹åªå‘é€ç´¯è®¡ACK å‘é€æ–¹ç»™æœ€æ—©è¿˜æ²¡ACKçš„packetä¸€ä¸ªè®¡æ—¶å™¨ï¼Œå½“è¿™ä¸ªè®¡æ—¶å™¨åˆ°æ—¶æ—¶ï¼Œé‡ä¼ æ‰€æœ‰çš„æœªACKçš„packetã€‚ GBNå‘é€æ–¹ packetå¤´éƒ¨æœ‰k bitçš„åºå·ï¼Œåˆ™å¯ä»¥è¡¨ç¤º $2^k$ ä¸ªåºå·ã€‚ â€œçª—å£â€å¤§å°ä¸ºNï¼Œè¿™ä¸€æ®µæ˜¯å…è®¸çš„æœªACKçš„packet ACK(n)ç´¯è®¡ç¡®è®¤ï¼šACKåœ¨å‘é€çš„æ—¶å€™è¦å¸¦ä¸Šåºå·#nï¼Œå³#nåŠä¹‹å‰çš„packetéƒ½æ”¶åˆ°äº†ã€‚æ¥æ”¶æ–¹å‘é€ACK nï¼Œåˆ™è¯æ˜#nåŠä¹‹å‰çš„packetéƒ½æ”¶åˆ°äº†ã€‚å¦åˆ™æ¥æ”¶æ–¹è¿˜æ˜¯å‘é€ä¹‹å‰çš„ACKï¼ˆé‡å¤ï¼‰ã€‚ è®¡æ—¶å™¨åªç»™æœ€æ—©çš„æœªACKçš„packetä¿ç•™ å¦‚æœtimeoutï¼ˆnï¼‰ï¼Œé‡ä¼ #nä»¥åŠæ¯”#næ›´å¤§çš„æœªACKçš„packet GBNæ¥æ”¶æ–¹ å‘é€çš„ACKæ˜¯é¡ºåºæ¥æ”¶åˆ°çš„packeté‡Œé¢æœ€å¤§çš„åºåˆ—å·# å¯èƒ½ä¼šäº§ç”Ÿé‡å¤çš„ACK åªéœ€è¦è®°ä½æœŸæœ›çš„åºåˆ—å·ï¼ˆexpextedseqnumï¼‰ ä¹±åºåˆ°è¾¾çš„packet ç›´æ¥ä¸¢å¼ƒï¼Œä¸ç¼“å­˜ï¼ˆç¼“å­˜ä¼šé€ æˆæ•°æ®é‡å¤ï¼‰ é‡æ–°å‘é€é¡ºåºæœ€å¤§åºåˆ—å·# GBNæµç¨‹ ä¾‹é¢˜ï¼šé‡‡ç”¨GBNåè®®ï¼Œä¸€ä¸ªå‘é€æ–¹å‘é€äº† #0åˆ°#5 çš„packetï¼Œä½†æ˜¯åªæ”¶åˆ°äº† ACK0 å’Œ ACK2ã€‚é—®å‘é€æ–¹è¦é‡å‘å“ªäº›packetï¼Ÿ&emsp;&emsp;é‡å‘#3ã€#4ã€#5 çš„ packetã€‚&emsp;&emsp;è™½ç„¶æ²¡æœ‰æ”¶åˆ°ACK1ï¼Œä½†æ˜¯æ¥æ”¶æ–¹åªæœ‰åœ¨#nåŠä¹‹å‰çš„packetéƒ½æ”¶åˆ°äº†çš„æ—¶å€™ï¼Œæ‰ä¼šå‘é€ACKnï¼Œå‘é€æ–¹æ¥æ”¶åˆ°ACK nï¼Œåˆ™è¯æ˜æ¥æ”¶æ–¹#nåŠä¹‹å‰çš„packetéƒ½æ”¶åˆ°äº†ã€‚æ‰€ä»¥ACK1åº”è¯¥æ˜¯åœ¨å‘é€è¿‡ç¨‹ä¸­ä¸¢åŒ…äº†ï¼Œä½†æ˜¯å®é™…æ¥æ”¶æ–¹å·²ç»æ”¶åˆ°äº†#1 packetã€‚æ‰€ä»¥é‡å‘#3ã€#4ã€#5 çš„ packetã€‚ é€‰æ‹©é‡ä¼ ï¼ˆSelective Repeatï¼ŒSRï¼‰ æ¥æ”¶æ–¹åˆ†åˆ«ç¡®è®¤æ‰€æœ‰æ­£ç¡®æ”¶åˆ°çš„pkt ç¼“å­˜pktï¼Œæœ€ç»ˆæœ‰åºä¼ ç»™ä¸Šå±‚ å‘é€æ–¹é‡å‘æ²¡ACKçš„pkt å‘é€æ–¹ç»™æ¯ä¸ªè¿˜æ²¡ACKçš„packetéƒ½ç»´æŒä¸€ä¸ªè®¡æ—¶å™¨ å‘é€æ–¹çš„window Nä¸ªè¿ç»­çš„åºå· é™åˆ¶å‘é€å¹¶ä¸”æœªACKçš„pkt SRå‘é€æ–¹ æ”¶åˆ°ä¸Šå±‚æ•°æ® å¦‚æœwindowé‡Œè¿˜æœ‰å¯ç”¨åºåˆ—ï¼Œåˆ™ç»§ç»­å‘é€ timeout(n) é‡å‘pkt nï¼Œé‡å¯timer å¦‚æœACK(n)åœ¨å¯æ¥æ”¶èŒƒå›´å†…$[sendbase, sendbase+N-1]$ å°†pkt næ ‡è®°ä¸ºæ¥æ”¶å®Œæˆ å¦‚æœ n æ˜¯æœ€å°çš„æœªACKçš„pktï¼Œåˆ™å°†windowæ»‘åŠ¨åˆ°ä¸‹ä¸€ä¸ªæœªACKçš„pkt SRæ¥æ”¶æ–¹ å¦‚æœpkt nåœ¨æ¥æ”¶èŒƒå›´å†…$[rcvbase, rcvbase+N-1]$ å‘é€ACK(n) å¦‚æœä¸æ˜¯æŒ‰åºåˆ°è¾¾ï¼Œåˆ™ç¼“å­˜pkt å¦‚æœæ˜¯æŒ‰åºåˆ°è¾¾ï¼Œåˆ™å‘ä¸Šäº¤ä»˜å·²æœ‰çš„æŒ‰åºçš„ç¼“å­˜ï¼Œå¹¶å°†windowæ»‘åŠ¨åˆ°ä¸‹ä¸€ä¸ªæœªæ”¶åˆ°çš„pkt å¦‚æœpkt nåœ¨$[rcvbase-N, rcvbase-1]$å†… å‘é€ACK(n) å…¶ä»–æƒ…å†µå¿½ç•¥ SRæµç¨‹ SRå›°å¢ƒ&emsp;&emsp;æ¯”å¦‚ä¸‹é¢åºåˆ—å·æœ‰ï¼š#0, #1, #2, #3ï¼Œwindowå¤§å°ä¸º3çš„æƒ…å†µã€‚SRä¼šæ— æ³•åˆ†æ¸…aã€bä¸¤ç§æƒ…å†µï¼Œå¯¼è‡´åœ¨bä¸­è¯¯åˆ¤é‡å‘çš„ç¬¬ä¸€è½®çš„pkt0ï¼Œè¢«å½“ä½œåä¸€è½®çš„pkt0å¡«å…¥ã€‚ TCPTCPæ¦‚è®º ç‚¹å¯¹ç‚¹ï¼ˆpoint-to-pointï¼‰ï¼šä¸€ä¸ªå‘é€æ–¹ã€ä¸€ä¸ªæ¥æ”¶æ–¹ å¯é çš„ã€æœ‰åºçš„å­—èŠ‚æµ æ²¡æœ‰æ¶ˆæ¯çš„è¾¹ç•Œ æµæ°´çº¿æœºåˆ¶ çª—å£å¤§å°ç”±æ‹¥å¡å’Œæµé‡æ§åˆ¶ å…¨åŒå·¥ åŒæ—¶åŒå‘æ•°æ®æµ MSSï¼ˆmaximum segment sizeï¼‰ï¼šæœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ é¢å‘è¿æ¥ æ¡æ‰‹ï¼šäº¤æ¢æ§åˆ¶ä¿¡æ¯ï¼Œåˆå§‹åŒ–å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„çŠ¶æ€ æµé‡æ§åˆ¶ TCPæŠ¥æ–‡æ®µç»“æ„ 1ã€ç«¯å£å·ï¼šç”¨æ¥æ ‡è¯†åŒä¸€å°è®¡ç®—æœºçš„ä¸åŒçš„åº”ç”¨è¿›ç¨‹ã€‚ æºç«¯å£ï¼šæºç«¯å£å’ŒIPåœ°å€çš„ä½œç”¨æ˜¯æ ‡è¯†æŠ¥æ–‡çš„è¿”å›åœ°å€ã€‚ ç›®çš„ç«¯å£ï¼šç«¯å£æŒ‡æ˜æ¥æ”¶æ–¹è®¡ç®—æœºä¸Šçš„åº”ç”¨ç¨‹åºæ¥å£ã€‚ &emsp;&emsp;TCPæŠ¥å¤´ä¸­çš„æºç«¯å£å·å’Œç›®çš„ç«¯å£å·åŒIPæ•°æ®æŠ¥ä¸­çš„æºIPä¸ç›®çš„IPå”¯ä¸€ç¡®å®šä¸€æ¡TCPè¿æ¥ã€‚ 2ã€åºå·å’Œç¡®è®¤å·ï¼šæ˜¯TCPå¯é ä¼ è¾“çš„å…³é”®éƒ¨åˆ†ã€‚åºå·æ˜¯æœ¬æŠ¥æ–‡æ®µå‘é€çš„æ•°æ®ç»„çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚åœ¨TCPä¼ é€çš„æµä¸­ï¼Œæ¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªåºå·ã€‚e.g.ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ä¸º300ï¼Œæ­¤æŠ¥æ–‡æ®µæ•°æ®éƒ¨åˆ†å…±æœ‰100å­—èŠ‚ï¼Œåˆ™ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ä¸º400ã€‚æ‰€ä»¥åºå·ç¡®ä¿äº†TCPä¼ è¾“çš„æœ‰åºæ€§ã€‚ç¡®è®¤å·ï¼Œå³ACKï¼ŒæŒ‡æ˜ä¸‹ä¸€ä¸ªæœŸå¾…æ”¶åˆ°çš„å­—èŠ‚åºå·ï¼Œè¡¨æ˜è¯¥åºå·ä¹‹å‰çš„æ‰€æœ‰æ•°æ®å·²ç»æ­£ç¡®æ— è¯¯çš„æ”¶åˆ°ã€‚ç¡®è®¤å·åªæœ‰å½“ACKæ ‡å¿—ä¸º1æ—¶æ‰æœ‰æ•ˆã€‚æ¯”å¦‚å»ºç«‹è¿æ¥æ—¶ï¼ŒSYNæŠ¥æ–‡çš„ACKæ ‡å¿—ä½ä¸º0ã€‚ 3ã€æ•°æ®åç§»ï¼é¦–éƒ¨é•¿åº¦ï¼š4bitsã€‚ç”±äºé¦–éƒ¨å¯èƒ½å«æœ‰å¯é€‰é¡¹å†…å®¹ï¼Œå› æ­¤TCPæŠ¥å¤´çš„é•¿åº¦æ˜¯ä¸ç¡®å®šçš„ï¼ŒæŠ¥å¤´ä¸åŒ…å«ä»»ä½•ä»»é€‰å­—æ®µåˆ™é•¿åº¦ä¸º20å­—èŠ‚ï¼Œ4ä½é¦–éƒ¨é•¿åº¦å­—æ®µæ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ä¸º1111ï¼Œè½¬åŒ–ä¸º10è¿›åˆ¶ä¸º15ï¼Œ15*32/8 = 60ï¼Œæ•…æŠ¥å¤´æœ€å¤§é•¿åº¦ä¸º60å­—èŠ‚ã€‚é¦–éƒ¨é•¿åº¦ä¹Ÿå«æ•°æ®åç§»ï¼Œæ˜¯å› ä¸ºé¦–éƒ¨é•¿åº¦å®é™…ä¸ŠæŒ‡ç¤ºäº†æ•°æ®åŒºåœ¨æŠ¥æ–‡æ®µä¸­çš„èµ·å§‹åç§»å€¼ã€‚ 4ã€ä¿ç•™ï¼šä¸ºå°†æ¥å®šä¹‰æ–°çš„ç”¨é€”ä¿ç•™ï¼Œç°åœ¨ä¸€èˆ¬ç½®0ã€‚ 5ã€æ§åˆ¶ä½ï¼šURG ACK PSH RST SYN FINï¼Œå…±6ä¸ªï¼Œæ¯ä¸€ä¸ªæ ‡å¿—ä½è¡¨ç¤ºä¸€ä¸ªæ§åˆ¶åŠŸèƒ½ã€‚ URGï¼šç´§æ€¥æŒ‡é’ˆæ ‡å¿—ï¼Œä¸º1æ—¶è¡¨ç¤ºç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆï¼Œä¸º0åˆ™å¿½ç•¥ç´§æ€¥æŒ‡é’ˆã€‚ ACKï¼šç¡®è®¤åºå·æ ‡å¿—ï¼Œä¸º1æ—¶è¡¨ç¤ºç¡®è®¤å·æœ‰æ•ˆï¼Œä¸º0è¡¨ç¤ºæŠ¥æ–‡ä¸­ä¸å«ç¡®è®¤ä¿¡æ¯ï¼Œå¿½ç•¥ç¡®è®¤å·å­—æ®µã€‚ PSHï¼špushæ ‡å¿—ï¼Œä¸º1è¡¨ç¤ºæ˜¯å¸¦æœ‰pushæ ‡å¿—çš„æ•°æ®ï¼ŒæŒ‡ç¤ºæ¥æ”¶æ–¹åœ¨æ¥æ”¶åˆ°è¯¥æŠ¥æ–‡æ®µä»¥åï¼Œåº”å°½å¿«å°†è¿™ä¸ªæŠ¥æ–‡æ®µäº¤ç»™åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯åœ¨ç¼“å†²åŒºæ’é˜Ÿã€‚ RSTï¼šé‡ç½®è¿æ¥æ ‡å¿—ï¼Œç”¨äºé‡ç½®ç”±äºä¸»æœºå´©æºƒæˆ–å…¶ä»–åŸå› è€Œå‡ºç°é”™è¯¯çš„è¿æ¥ã€‚æˆ–è€…ç”¨äºæ‹’ç»éæ³•çš„æŠ¥æ–‡æ®µå’Œæ‹’ç»è¿æ¥è¯·æ±‚ã€‚ SYNï¼šåŒæ­¥åºå·ï¼Œç”¨äºå»ºç«‹è¿æ¥è¿‡ç¨‹ï¼Œåœ¨è¿æ¥è¯·æ±‚ä¸­ï¼ŒSYN=1å’ŒACK=0è¡¨ç¤ºè¯¥æ•°æ®æ®µæ²¡æœ‰ä½¿ç”¨æå¸¦çš„ç¡®è®¤åŸŸï¼Œè€Œè¿æ¥åº”ç­”æå¸¦ä¸€ä¸ªç¡®è®¤ï¼Œå³SYN=1å’ŒACK=1ã€‚ FINï¼šfinishæ ‡å¿—ï¼Œç”¨äºé‡Šæ”¾è¿æ¥ï¼Œä¸º1æ—¶è¡¨ç¤ºå‘é€æ–¹å·²ç»æ²¡æœ‰æ•°æ®å‘é€äº†ï¼Œå³å…³é—­æœ¬æ–¹æ•°æ®æµã€‚ 6ã€çª—å£ï¼šæ»‘åŠ¨çª—å£å¤§å°ï¼Œç”¨æ¥å‘ŠçŸ¥å‘é€ç«¯æ¥å—ç«¯çš„ç¼“å­˜å¤§å°ï¼Œä»¥æ­¤æ§åˆ¶å‘é€ç«¯å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œä»è€Œè¾¾åˆ°æµé‡æ§åˆ¶ã€‚çª—å£å¤§å°æ—¶ä¸€ä¸ª16bitå­—æ®µï¼Œå› è€Œçª—å£å¤§å°æœ€å¤§ä¸º65535ã€‚ 7ã€æ ¡éªŒå’Œï¼šå¥‡å¶æ ¡éªŒï¼Œæ­¤æ ¡éªŒå’Œæ˜¯å¯¹æ•´ä¸ªçš„ TCP æŠ¥æ–‡æ®µï¼ŒåŒ…æ‹¬ TCP å¤´éƒ¨å’Œ TCP æ•°æ®ï¼Œä»¥ 16 ä½å­—è¿›è¡Œè®¡ç®—æ‰€å¾—ã€‚ç”±å‘é€ç«¯è®¡ç®—å’Œå­˜å‚¨ï¼Œå¹¶ç”±æ¥æ”¶ç«¯è¿›è¡ŒéªŒè¯ã€‚ 8ã€ç´§æ€¥æŒ‡é’ˆï¼šåªæœ‰å½“ URG æ ‡å¿—ç½® 1 æ—¶ç´§æ€¥æŒ‡é’ˆæ‰æœ‰æ•ˆã€‚ç´§æ€¥æŒ‡é’ˆæ˜¯ä¸€ä¸ªæ­£çš„åç§»é‡ï¼Œå’Œé¡ºåºå·å­—æ®µä¸­çš„å€¼ç›¸åŠ è¡¨ç¤ºç´§æ€¥æ•°æ®æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚ TCP çš„ç´§æ€¥æ–¹å¼æ˜¯å‘é€ç«¯å‘å¦ä¸€ç«¯å‘é€ç´§æ€¥æ•°æ®çš„ä¸€ç§æ–¹å¼ã€‚ 9ã€é€‰é¡¹å’Œå¡«å……ï¼šæœ€å¸¸è§çš„å¯é€‰å­—æ®µæ˜¯æœ€é•¿æŠ¥æ–‡å¤§å°ï¼Œåˆç§°ä¸ºMSSï¼ˆMaximum Segment Sizeï¼‰ï¼Œæ¯ä¸ªè¿æ¥æ–¹é€šå¸¸éƒ½åœ¨é€šä¿¡çš„ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µï¼ˆä¸ºå»ºç«‹è¿æ¥è€Œè®¾ç½®SYNæ ‡å¿—ä¸º1çš„é‚£ä¸ªæ®µï¼‰ä¸­æŒ‡æ˜è¿™ä¸ªé€‰é¡¹ï¼Œå®ƒè¡¨ç¤ºæœ¬ç«¯æ‰€èƒ½æ¥å—çš„æœ€å¤§æŠ¥æ–‡æ®µçš„é•¿åº¦ã€‚é€‰é¡¹é•¿åº¦ä¸ä¸€å®šæ˜¯32ä½çš„æ•´æ•°å€ï¼Œæ‰€ä»¥è¦åŠ å¡«å……ä½ï¼Œå³åœ¨è¿™ä¸ªå­—æ®µä¸­åŠ å…¥é¢å¤–çš„é›¶ï¼Œä»¥ä¿è¯TCPå¤´æ˜¯32çš„æ•´æ•°å€ã€‚ 10ã€æ•°æ®éƒ¨åˆ†ï¼š TCP æŠ¥æ–‡æ®µä¸­çš„æ•°æ®éƒ¨åˆ†æ˜¯å¯é€‰çš„ã€‚åœ¨ä¸€ä¸ªè¿æ¥å»ºç«‹å’Œä¸€ä¸ªè¿æ¥ç»ˆæ­¢æ—¶ï¼ŒåŒæ–¹äº¤æ¢çš„æŠ¥æ–‡æ®µä»…æœ‰ TCP é¦–éƒ¨ã€‚å¦‚æœä¸€æ–¹æ²¡æœ‰æ•°æ®è¦å‘é€ï¼Œä¹Ÿä½¿ç”¨æ²¡æœ‰ä»»ä½•æ•°æ®çš„é¦–éƒ¨æ¥ç¡®è®¤æ”¶åˆ°çš„æ•°æ®ã€‚åœ¨å¤„ç†è¶…æ—¶çš„è®¸å¤šæƒ…å†µä¸­ï¼Œä¹Ÿä¼šå‘é€ä¸å¸¦ä»»ä½•æ•°æ®çš„æŠ¥æ–‡æ®µã€‚ TCPåºå·&emsp;&emsp;æŠ¥æ–‡æ®µï¼ˆsegmentï¼‰çš„åºå·ï¼šå­—èŠ‚æµç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå· ä¾‹é¢˜ï¼šä¸‹é¢æ–‡ä»¶çš„å‰3ä¸ªæŠ¥æ–‡æ®µçš„åºå·åˆ†åˆ«æ˜¯ï¼Ÿ&emsp;&emsp;ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µï¼š0ï¼›ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µï¼š1000ï¼›ç¬¬ä¸‰ä¸ªæŠ¥æ–‡æ®µï¼š2000 TCP ACK TCPæŠ¥æ–‡çš„ACKå¡«å†™ï¼šæœŸæœ›ä»å¦ä¸€æ–¹æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚åºå· ä¸»æœºAæ¥æ”¶åˆ°ä»ä¸»æœºBä¼ æ¥çš„å­—èŠ‚#0ï½535ï¼ŒAä¸‹ä¸€ä¸ªæœŸæœ›æ¥åˆ°çš„å­—èŠ‚#ä¸º536ï¼Œæ‰€ä»¥ä¸»æœºAå‘é€çš„æŠ¥æ–‡æ®µçš„ACKä¸­å¡«536ã€‚ ç´¯è®¡ACKï¼ˆcumulative ACKï¼‰:ä¸GBNç›¸ä¼¼ ä¸»æœºAæ¥æ”¶åˆ°ä»ä¸»æœºBä¼ æ¥çš„å­—èŠ‚ #0ï½535 å’Œ #900ï½1000ï¼ŒAä¸‹ä¸€ä¸ªæœŸæœ›æ¥åˆ°çš„å­—èŠ‚#ä¾æ—§ä¸º536ï¼Œæ‰€ä»¥ä¸»æœºAä¸‹ä¸€ä¸ªå‘é€çš„æŠ¥æ–‡æ®µçš„ACKä¸­å¡«536ã€‚ TCP åºå·å’ŒACKä¼ è¾“ TCPè®¡æ—¶å¦‚ä½•è®¾ç½®TCP timeoutå€¼ï¼Ÿ $time &gt; RTT$ï¼ˆä½†æ˜¯RTTä¼šæ”¹å˜ï¼‰ ä¸èƒ½å¤ªçŸ­ï¼šè¿‡æ—©timeouté€ æˆä¸å¿…è¦çš„é‡ä¼  ä¸èƒ½å¤ªé•¿ï¼šå¯¹ä¸¢åŒ…ååº”å¤ªæ…¢ å¦‚ä½•EstimateRTTï¼ˆä¼°è®¡RTTï¼‰ï¼Ÿ SampleRTTï¼ˆæ ·æœ¬RTTï¼‰ï¼šè®¡ç®—å‘é€segmentåˆ°æ¥æ”¶ACKçš„æ—¶é—´ï¼Œå¿½ç•¥é‡ä¼  SampleRTTå¤šæ¬¡æµ‹é‡å–å¹³å‡ åˆ™EstimateRTTä¸º EstimateRTT = (1-\\alpha )*EstimateRTT + \\alpha *SamleRTT æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ï¼ˆä¸æ˜¯çº¿å½¢çš„ï¼Œå­˜åœ¨è¿­ä»£ä½¿åŸæ¥çš„SamleRTTçš„ç³»æ•°è¶Šæ¥è¶Šå°ï¼Œè¶Šé åçš„è¶Šæ¥è¿‘å½“å‰ç½‘ç»œçŠ¶æ€ï¼‰ EstimateRTTçš„å˜åŒ–é€šå¸¸æ¯”SamleRTTå˜åŒ–æ›´åŠ å¹³æ»‘ ä¸€èˆ¬ï¼Œ$\\alpha = 0.125$ DevRTTï¼ˆåå·®RTTï¼‰ä¸ºï¼ˆä¸€èˆ¬$\\beta = 0.25$ï¼‰ DevRTT = (1-\\beta )*DevRTT + \\beta *|SampleRTT-EstimatedRTT|é‡ä¼ è¶…æ—¶é—´éš™ï¼ˆTimeoutIntervalï¼‰ TimeoutInterval = EstimatedRTT + 4*DevRTTTCPå¯é æ•°æ®ä¼ è¾“ TCPçš„rdtæœåŠ¡æ˜¯å»ºç«‹åœ¨IPçš„ä¸å¯é ä¼ è¾“ä¸Šçš„ æµæ°´æœºåˆ¶ ç´¯è®¡ACK ä¸€ä¸ªtimer é‡ä¼ è§¦å‘æƒ…å†µ è¶…æ—¶ é‡å¤çš„ACK TCPç®€åŒ–&emsp;&emsp;TCPç®€åŒ–ç‰ˆï¼šæ— é‡å¤ACKã€æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶ã€‚ TCP senderTCP sender çš„3ç§äº‹ä»¶ ä»ä¸Šä¸€å±‚æ”¶åˆ°æ•°æ® åˆ†æ®µï¼Œåˆ›å»ºseq#ï¼ˆæŠ¥æ–‡ä¸­å­—èŠ‚æµç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ï¼‰ å¼€å§‹timer åªç»™æœ€æ—©ä¸€ä¸ªæœªACKçš„segment timer ç”¨ TimeoutInterval ä½œä¸ºtimeoutæ—¶é—´ è¶…æ—¶ é‡ä¼ segment é‡å¯timer æ”¶åˆ°ACK å¦‚æœæ”¶åˆ°æœªACKçš„segmentçš„ACK æ›´æ–°è¢«ACKçš„segmentæ ‡è®° ä»æœ€è¿‘çš„ä¸€ä¸ªæœªACKçš„segmentå¼€æ–°çš„timer å›¾ TCP senderç®€åŒ–ç‰ˆ TCPé‡ä¼ æƒ…å†µå›¾ ACKä¸¢åŒ… å›¾ æå‰timeout å›¾ ç´¯è®¡ACK TCP receiver äº‹ä»¶ TCPæ¥æ”¶æ–¹ååº” å…·æœ‰æ‰€æœŸæœ›åºå·çš„æŒ‰åºæŠ¥æ–‡æ®µåˆ°è¾¾ã€‚æ‰€æœ‰åœ¨æœŸæœ›åºå·åŠä»¥å‰çš„æ•°æ®éƒ½å·²ç»è¢«ç¡®è®¤ å»¶è¿Ÿçš„ACKï¼Œå¯¹å¦ä¸€ä¸ªæŒ‰åºæŠ¥æ–‡æ®µçš„åˆ°è¾¾æœ€å¤šç­‰å¾…500msã€‚å¦‚æœä¸‹ä¸€ä¸ªæŒ‰åºæŠ¥æ–‡æ®µåœ¨è¿™ä¸ªæ—¶é—´é—´éš”å†…æ²¡æœ‰åˆ°è¾¾ï¼Œåˆ™å‘é€ä¸€ä¸ªACK å…·æœ‰æ‰€æœŸæœ›åºå·çš„æŒ‰åºæŠ¥æ–‡æ®µåˆ°è¾¾ã€‚å¦ä¸€ä¸ªæŒ‰åºæŠ¥æ–‡æ®µç­‰å¾…ACKä¼ è¾“ ç«‹å³å‘é€å•ä¸ªç´¯è®¡ACKï¼Œä»¥ç¡®è®¤ä¸¤ä¸ªæŒ‰åºæŠ¥æ–‡æ®µ æ¯”æœŸæœ›åºå·å¤§çš„å¤±åºæŠ¥æ–‡æ®µåˆ°è¾¾ã€‚æ£€æµ‹å‡ºé—´éš” ç«‹å³å‘é€å†—ä½™ACKï¼ŒæŒ‡ç¤ºä¸‹ä¸€ä¸ªæœŸå¾…å­—èŠ‚çš„åºå·ï¼ˆå…¶ä¸ºé—´éš”çš„ä½ç«¯çš„åºå·ï¼‰ èƒ½éƒ¨åˆ†æˆ–å®Œå…¨å¡«å……æ¥æ”¶æ•°æ®é—´éš”çš„æŠ¥æ–‡æ®µåˆ°è¾¾ å€˜è‹¥è¯¥æŠ¥æ–‡æ®µèµ·å§‹äºé—´éš”çš„ä½ç«¯ï¼Œåˆ™ç«‹å³å‘é€ACK TCPå¿«é€Ÿé‡ä¼  timeoutæ—¶é—´é•¿ï¼Œé€ æˆé•¿æ—¶å»¶ é€šè¿‡é‡å¤çš„ACKæ£€æµ‹ä¸¢åŒ… å‘é€æ–¹ä¼šå‘é€å¾ˆå¤šä¸ªsegment å¦‚æœæœ‰segmentä¸¢å¤±ï¼Œåˆ™å¯èƒ½ä¼šæ”¶åˆ°å¾ˆå¤šä¸ªé‡å¤çš„ACK TCPå¿«é€Ÿé‡ä¼ æœºåˆ¶ï¼š &emsp;&emsp;å¦‚æœå‘é€æ–¹æ”¶åˆ°å¯¹åŒä¸€æ•°æ®æ”¶åˆ°3ä¸ªé‡å¤çš„ACKï¼ˆå®é™…æ”¶åˆ°4æ¬¡è¯¥ACKï¼‰ï¼Œåˆ™è®¤ä¸ºæ­¤æ—¶æœªACKçš„segmentä¸¢å¤±ï¼Œä¸éœ€å†ç­‰å¾…timeoutï¼Œé‡å‘æœªACKçš„æœ€å°seq# æµé‡æ§åˆ¶&emsp;&emsp;æ¥æ”¶æ–¹è¦æ§åˆ¶å‘é€æ–¹ï¼Œä½¿å‘é€æ–¹ä¸ä¼šå‘é€å¾—å¤ªå¿«å¯¼è‡´æ¥æ”¶æ–¹çš„ç¼“å­˜ï¼ˆbufferï¼‰æº¢å‡ºã€‚ æ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹free bufferå¤§å°ï¼ŒåŒ…å«åœ¨TCPæŠ¥æ–‡çš„rwndï¼ˆreceive windowä¸­ï¼‰ RcvBuffer socketè®¾å®šå¤§å°ï¼ˆä¸€èˆ¬ï¼Œ4096ï¼‰ ä¸€äº›æ“ä½œç³»ç»Ÿä¹Ÿå¯ä»¥è‡ªåŠ¨è°ƒèŠ‚RcvBuffer å›¾ æ¥æ”¶æ–¹ç¼“å­˜ senderé€šè¿‡rwndæ¥é™åˆ¶unacked segmentçš„æ•°é‡ ä¿éšœreceiveçš„bufferä¸ä¼šæº¢å‡º &emsp;&emsp;å¦‚æœsenderæ¥æ”¶åˆ°$rwnd=0$ï¼Œæ­¤æ—¶æ²¡æœ‰å‰©ä½™bufferï¼Œå†å‘é€æ•°æ®ä¼šé€ æˆreceiver bufferæº¢å‡ºï¼Œä½†æ˜¯æœ‰è¦é˜²æ­¢é”ä½ã€‚&emsp;&emsp;æ‰€ä»¥senderå‘receiverå‘é€ä¸€ä¸ª1 byte dataçš„æŠ¥æ–‡ï¼Œä»¥æ›´æ–°rwndã€‚ è¿æ¥ç®¡ç†TCPå»ºç«‹è¿æ¥ï¼š3æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ä¹‹å‰ï¼Œå…ˆæ¡æ‰‹ åŒæ–¹åŒæ„å»ºç«‹è¿æ¥ åŒæ„è¿æ¥çš„å‚æ•° &emsp;&emsp;ä¸ºä»€ä¹ˆä¸¤æ¬¡æ¡æ‰‹è¡Œä¸é€šï¼Ÿå„ç§delayæ¶ˆæ¯ä¸¢å¤±å¯¼è‡´é‡ä¼ æ¶ˆæ¯ä¹±åº å›¾ TCP3æ¬¡æ¡æ‰‹&emsp;&emsp; TCPå…³é—­è¿æ¥ï¼š4æ¬¡æŒ¥æ‰‹ clientã€serverä¸¤è¾¹éƒ½å¯å…³é—­è¿æ¥ å‘é€TCP segmentçš„ FIN bit = 1 ç”¨ACKå›åº”FINï¼ˆACKå¯ä»¥å’ŒFINä¸€èµ·å‘ï¼‰ åŒæ—¶æ”¶åˆ°FINä¹Ÿå¯ä»¥å¤„ç†ï¼ˆåŒå·¥ï¼‰ å›¾ TCPå…³é—­è¿æ¥ å›¾ TCPåŒæ–¹çŠ¶æ€å¾ªç¯ æ‹¥å¡æ§åˆ¶åŸç†æ‹¥å¡ï¼š éæ­£å¼å®šä¹‰ï¼šå¤ªå¤šçš„æºå‘é€æ•°æ®å¤ªå¤šå¤ªå¿«ï¼Œå¯¼è‡´ç½‘ç»œæ— æ³•å¤„ç† å’Œæµé‡æ§åˆ¶ä¸åŒï¼ˆæµé‡æ§åˆ¶c-sä¸€å¯¹ä¸€ï¼‰ äº§ç”Ÿä¸¢åŒ…ã€å»¶æ—¶ ç½‘ç»œå‰åçš„é—®é¢˜ åœºæ™¯ä¸€ï¼š2ä¸ªSender, å’Œ1ä¸ªæ— é™bufferçš„Router 2ä¸ªsenderï¼Œ2ä¸ªreceiver 1ä¸ªrouterå¸¦æ— é™buffer è¾“å‡ºé“¾è·¯çš„å®¹é‡ï¼šR æ²¡æœ‰é‡ä¼ ï¼ˆæ— é™bufferä¸ä¼šä¸¢åŒ…ï¼‰ å›¾ è¾“å…¥é€Ÿç‡-è¾“å‡ºé€Ÿç‡ å›¾ è¾“å…¥é€Ÿç‡-æ—¶å»¶ åœºæ™¯äºŒï¼š2ä¸ªSender, å’Œ1ä¸ªæœ‰é™bufferçš„Router ä¸€ä¸ªrouterã€æœ‰é™buffer é‡ä¼ timeoutçš„packet $\\lambda _{in}$ â€”â€” æºæ•°æ® $\\lambda _{in}â€™$ â€”â€” æºæ•°æ®+é‡ä¼  \\lambda _{in}' \\geq \\lambda _{in} æ­£å¸¸ç†æƒ³æƒ…å†µä¸‹ï¼Œ\\lambda _{in}' \\geq \\lambda _{in} = \\lambda _{out} æƒ…å†µä¸€ï¼ˆç†æƒ³ï¼‰ï¼šsenderåªåœ¨routerçš„bufferæœ‰ç©ºæ—¶æ‰å‘é€ æƒ…å†µäºŒï¼šçŸ¥é“ä¸¢åŒ…ï¼Œå½“routerçš„bufferæ»¡äº†ï¼Œpacketä¸¢å¤±ã€‚senderåªæœ‰åœ¨çŸ¥é“ä¸¢åŒ…æ—¶æ‰é‡ä¼ ã€‚ æƒ…å†µä¸‰ï¼šé‡å¤packet åœ¨routerçš„bufferæ»¡æ—¶ï¼Œpacketå¯ä»¥ä¸¢åŒ… æå‰timeoutï¼Œä¼šå¯¼è‡´å‘é€ä¸¤ä¸ªç›¸åŒçš„packet æ‹¥å¡ä»£ä»· æ’é˜Ÿå»¶æ—¶ ä¸¢åŒ…å¯¼è‡´é‡ä¼  æå‰timeoutå¯¼è‡´éå¿…è¦çš„é‡ä¼ ï¼Œpkté‡å¤ï¼Œé™ä½ååé‡ å½“ä¸€ä¸ªpacketè¢«ä¸¢å¼ƒï¼Œå…¶ä¸Šæ¸¸æä¾›ç»™è¿™ä¸ªpacketçš„ä¼ è¾“å®¹é‡éƒ½æµªè´¹äº† TCPæ‹¥å¡æ§åˆ¶æ¦‚è¿°&emsp;&emsp;senderé€æ¸å¢åŠ å‘é€é€Ÿç‡ï¼ˆwindow sizeï¼‰ï¼Œä»è€Œæ¢æŸ¥å¯ç”¨bandwidthï¼Œç›´åˆ°ä¸¢åŒ… åŠ æ€§å¢ï¼ˆadditive increaseï¼‰ï¼šcwndæ¯æ¬¡æ¯ä¸ªRTTå¢åŠ  1 MSS ç›´åˆ°æ£€æµ‹åˆ°ä¸¢åŒ…ï¼ˆMSS æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼‰ ä¹˜æ€§å‡ï¼ˆmultiplicative decreaseï¼‰ï¼šå¦‚æœå‘ç”Ÿä¸¢åŒ…ï¼Œcwndå‡åŠ senderä¼ è¾“é™åˆ¶ LastByteSent - LastByteAcked \\leq cwnd cwndæ˜¯åŠ¨æ€çš„éšç€ç½‘ç»œæ‹¥å¡ç¨‹åº¦å˜åŒ–çš„å‡½æ•° ç»“åˆä¹‹å‰çš„rwndï¼Œå®é™…çš„çª—å£å¤§å°ä¸º $min{ rwnd, cwnd }$ TCPå‘é€é€Ÿç‡ï¼ˆTCP sending rateï¼‰ &emsp;&emsp;å‘é€cwnd bytesï¼Œç­‰å¾…1ä¸ªRTTæ¥æ”¶ACKï¼Œç„¶åå†å‘é€åç»­çš„bytesã€‚ rate \\approx \\frac{cwnd}{RTT}\\ bytes/secTCPæ…¢å¯åŠ¨ï¼ˆTCP slow startï¼‰ è¿æ¥å¼€å§‹æ—¶ï¼Œå…ˆæŒ‡æ•°çº§å¢é•¿å‘é€é€Ÿç‡ï¼Œç›´åˆ°å‡ºç°ä¸¢åŒ… åˆå§‹ï¼Œ$cwnd = 1\\ MSS$ æ¯ç»è¿‡ä¸€ä¸ªRTTï¼Œç¿»å€cwndï¼ˆå®é™…ä¸Šï¼Œæ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œcwnd+1ï¼‰ å½“å‡ºç°ä¸¢åŒ…æ—¶ï¼Œ timeoutæƒ…å†µ cwndé‡æ–°è®¾ä¸º 1MSS é‡æ–°å¼€å§‹æ…¢å¯åŠ¨ï¼Œç›´åˆ°åˆ°è¾¾ä¸€ä¸ªthreshold 3ä¸ªé‡å¤çš„ACKæƒ…å†µï¼ˆTCP RENOç‰ˆæœ¬ï¼‰ é‡å¤çš„ACKæ—¢ç„¶èƒ½æ”¶åˆ°ï¼Œé‚£ä¹ˆç½‘ç»œè¿˜æ˜¯æœ‰ä¸€å®šçš„ä¼ è¾“èƒ½åŠ›ï¼Œä¸éœ€è¦åƒtimeoutä¸€æ ·é‡å¼€ã€‚ cwndå‡åŠï¼ˆä¹˜æ€§å‡ï¼‰ TCP Tahoeç‰ˆæœ¬ä¸­ï¼Œtimeoutå’Œ3ä¸ªé‡å¤çš„ACKéƒ½å°†cwndè®¾ä¸º 1MSS ä» slow start åˆ° CA çš„è½¬æ¢&emsp;&emsp;å½“cwndè¾¾åˆ°ä¸Šæ¬¡timeoutæ—¶çš„1/2ï¼ˆå³sstreshï¼‰æ—¶ï¼Œä»æŒ‡æ•°çº§å¢é•¿å˜æˆçº¿å½¢å¢é•¿ã€‚ sstresh â€”â€” å‡ºç°ä¸¢åŒ…æ—¶ï¼Œå°†sstreshè®¾ç½®ä¸ºæ­¤æ—¶cwndçš„1/2 å›¾ TCP Tahoe/Renoä¸‹cwndçš„å˜åŒ–å›¾ã€æ³¨ï¼šä¸­é—´æœ‰ä¸€æ¬¡3æ¬¡ACKçš„ä¸¢åŒ…ã€‘ TCPæ‹¥å¡æ§åˆ¶FSM TCPååé‡ avg TCP throughputï¼ˆTCPå¹³å‡ååé‡ï¼‰ç”±window size å’Œ RTT å†³å®šï¼ˆå¿½ç•¥slow startï¼Œå‡è®¾ä¸€ç›´ç”±dataåœ¨å‘é€ï¼‰ Wï¼šä¸¢åŒ…æ—¶çš„ window sizeï¼Œavg window size ä¸º $3/4W$ï¼Œåˆ™TCPå¹³å‡ååé‡ä¸º avg\\ TCP\\ throughput = \\frac34 \\frac{W}{RTT}\\ bytes/sec é«˜é€ŸTCP&emsp;&emsp;å‡è®¾ä¸€æ¡å…·æœ‰ 1500byte æŠ¥æ–‡æ®µå’Œ 100ms RTT çš„TCPè¿æ¥ï¼Œç”¨æ­¤è¿æ¥ä»¥ 10Gps å‘é€æ•°æ®ã€‚æ­¤æ—¶å¹³å‡æ‹¥å¡çª—å£é•¿åº¦ä¸º 83.333 ä¸ªæŠ¥æ–‡æ®µã€‚TCPè¿æ¥çš„ååé‡å…¬å¼ï¼ˆå•ä½ bytes/secï¼‰ï¼š TCP\\ throughput = \\frac{1.22MSS}{RTT\\sqrt{L}}10Gpsçš„ååé‡ï¼ŒæŠ¥æ–‡æ®µä¸¢å¤±æ¦‚ç‡ä¸º $2\\times 10^{-10}$ TCPå…¬å¹³æ€§ç›®æ ‡ï¼šKæ¡TCPè¿æ¥ï¼Œç»è¿‡R bpsçš„ç“¶é¢ˆï¼Œæ¯æ¡TCPè¿æ¥åˆ† R/Kbpsï¼Œåˆ™å…¬å¹³ã€‚ &emsp;&emsp;ä»¥ä¸¤æ¡TCPè¿æ¥ä¸ºä¾‹ï¼Œä»Aå‡ºå‘ï¼Œç»è¿‡åŠ æ€§å¢ã€ä¹˜æ€§å‡ï¼Œä¼šé€æ¸è¶‹å‘å…¬å¹³çº¿ã€‚æ‰€ä»¥TCPå¯ä»¥å®ç°å…¬å¹³æ€§ã€‚ Explicit Congestion Notificationï¼ˆECNï¼‰ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶ ToS fieldï¼ˆIP datagramå¤´éƒ¨çš„ 2 bitsï¼‰å¯ä»¥è¢«ç½‘ç»œè·¯ç”±æ ‡è®°ï¼Œä»¥æ˜¾ç¤ºæ‹¥å¡ ToS fieldä¼šè¢«é€åˆ°receiverçš„ä¸»æœº receiveråœ¨å‘é€ç»™senderçš„ACKä¸­åµŒå…¥ECEï¼Œæ¥é€šçŸ¥senderæœ‰æ‹¥å¡ ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰æ¦‚è¿° åœ¨å‘é€å’Œæ¥æ”¶çš„ä¸»æœºä¹‹é—´ä¼ é€packet è·¯ç”±å™¨ï¼ˆrouterï¼‰è¦æ£€éªŒé€šè¿‡çš„IPæ•°æ®æŠ¥ï¼ˆIP datagramï¼‰çš„å¤´éƒ¨ ç½‘ç»œå±‚åŠŸèƒ½ è·¯ç”±ï¼ˆRoutingï¼‰ï¼šå†³å®špacketä»æºåˆ°ç›®çš„è·¯å¾„ è½¬å‘ï¼ˆForwardingï¼‰ï¼šå°†packetä»routeçš„è¾“å…¥ç«¯å£åˆ°åˆé€‚çš„è¾“å‡ºç«¯å£ è¿æ¥å»ºç«‹ï¼ˆConnection setupï¼‰ï¼šä¸€äº›ç½‘ç»œç»“æ„è¦æ±‚æ•°æ®ä¼ è¾“å‰å…ˆå»ºç«‹è·¯ç”±è·¯å¾„ ç½‘ç»œå±‚æœåŠ¡ ç¡®ä¿äº¤ä»˜ï¼ˆGuaranteed deliveryï¼‰ å…·æœ‰æ—¶å»¶ä¸Šç•Œçš„ç¡®ä¿äº¤ä»˜ï¼ˆGuaranteed delivery with bounded delayï¼‰ æœ‰åºåˆ†ç»„äº¤ä»˜ï¼ˆIn-order packet deliveryï¼‰ ç¡®ä¿æœ€å°å¸¦å®½ï¼ˆGuaranteed minimal bandwidthï¼‰ å®‰å…¨æ€§æœåŠ¡ï¼ˆSecurityï¼‰ &emsp;&emsp;ç½‘ç»œå±‚æä¾›å°½åŠ›è€Œä¸ºçš„æœåŠ¡ï¼ˆbest-effort serviceï¼‰ã€‚ è™šç”µè·¯å’Œæ•°æ®æŠ¥ç½‘ç»œï¼ˆVirtual circuit and datagram networksï¼‰ æ•°æ®æŠ¥ç½‘ç»œæ˜¯æ— è¿æ¥çš„æœåŠ¡ è™šç”µè·¯æ˜¯é¢å‘è¿æ¥çš„æœåŠ¡ ç«¯åˆ°ç«¯çš„æœåŠ¡ã€è¿è¡Œåœ¨ç½‘ç»œæ ¸å¿ƒ è™šç”µè·¯ï¼ˆVirtual circuitï¼ŒVCï¼‰ å‘¼å«å»ºç«‹ -&gt; æ•°æ®ä¼ è¾“ -&gt; å‘¼å«æ‹†é™¤ æ¯ä¸ªpacketæºå¸¦VCå· è·¯å¾„ä¸Šçš„æ¯ä¸ªrouterä¼šç»™æ¯ä¸ªç»è¿‡çš„VCç»´æŠ¤è¿æ¥çŠ¶æ€ é“¾è·¯ã€è·¯ç”±èµ„æºï¼ˆå¸¦å®½ã€ç¼“å­˜ï¼‰éƒ½ä¼šåˆ†é…åˆ°VC VCç»„æˆï¼š ä»æºåˆ°ç›®çš„çš„è·¯å¾„ VCå·ï¼šè·¯å¾„ä¸Šæ¯ä¸ªé“¾è·¯éƒ½æœ‰ä¸€ä¸ªå·ç ï¼ˆå¯ä»¥å˜åŒ–ï¼‰ è½¬å‘è¡¨ è·¯ç”±ç»´æŒè¿æ¥çŠ¶æ€çš„ä¿¡æ¯ã€‚ ä¿¡ä»¤åè®®(signaling protocol) VCé‡‡ç”¨ä¿¡ä»¤åè®®(signaling protocol) ç”¨æ¥å»ºç«‹ã€ç»´æŠ¤ã€æ‹†é™¤VC ç”¨åœ¨ATMã€frame-relayã€X.25 VCåœ¨Internetä¸­æ²¡æœ‰ä½¿ç”¨ æ•°æ®æŠ¥ç½‘ç»œï¼ˆDatagram networksï¼‰ æ— è¿æ¥ è·¯ç”±æ²¡æœ‰ç«¯åˆ°ç«¯çš„è¿æ¥çŠ¶æ€ packeté€šè¿‡ç›®çš„ä¸»æœºIDæ¥è·¯ç”±ï¼ŒåŒä¸€ä¸ªæºåˆ°ç›®çš„çš„packetå¯èƒ½èµ°ä¸åŒçš„è·¯å¾„ã€‚ è½¬å‘è¡¨å­˜å‚¨åœ°å€èŒƒå›´å¯¹åº”çš„é“¾è·¯æ¥å£ï¼Œæ¯”å¦‚ Destination Address Range Link Interface 11001000 00010111 00010000 00000000 ï½ 11001000 00010111 00010111 11111111 0 11001000 00010111 00011000 00000000 ï½ 11001000 00010111 00011000 11111111 1 11001000 00010111 00011001 00000000 ï½ 11001000 00010111 00011111 11111111 2 Otherwise 3 æœ€é•¿å‰ç¼€åŒ¹é… &emsp;&emsp;é€‰æ‹© Link Interface éµå¾ªæœ€é•¿å‰ç¼€åŒ¹é…åŸåˆ™ã€‚ ä¾‹é¢˜ï¼šä¸‹é¢è½¬å‘è¡¨ ç›®çš„åœ°å€11001000 00010111 00010110 10100001 å’Œ 11001000 00010111 00011000 10101010 åˆ†åˆ«å¯¹åº”çš„Link Interfaceä¸ºï¼Ÿ 11001000 00010111 00010110 10100001 -&gt; 0 11001000 00010111 00011000 10101010 -&gt; 1ï¼ˆä¸1å’Œ2éƒ½åŒ¹é…ï¼Œä½†æ˜¯ä¸1åŒ¹é…æ›´é•¿ï¼‰ è™šç”µè·¯å’Œæ•°æ®æŠ¥ç½‘ç»œé€‰æ‹©Internetï¼šç½‘ç»œæ ¸å¿ƒç®€å•ï¼Œå¤æ‚åº¦åœ¨ç½‘ç»œè¾¹ç¼˜ è®¡ç®—æœºæ•°æ®äº¤æ¢ï¼šå¼¹æ€§æœåŠ¡ï¼Œæ²¡æœ‰ä¸¥æ ¼æ—¶é—´è¦æ±‚ é“¾è·¯ç±»å‹å¤šï¼šæœ‰ä¸åŒç‰¹æ€§ï¼Œä¸èƒ½ç»Ÿä¸€æœåŠ¡ â€œæ™ºèƒ½â€ç«¯ç³»ç»Ÿ ATMï¼šå¤æ‚åº¦åœ¨ç½‘ç»œæ ¸å¿ƒ ç”µè¯æ¼”å˜è€Œæ¥ äººä¹‹é—´çš„äº¤æµï¼šä¸¥æ ¼çš„æ—¶é—´é™åˆ¶ã€å¯é æ€§ã€ç¡®å®šçš„æœåŠ¡ä¿éšœ â€œç¬¨æ‹™â€ç«¯ç³»ç»Ÿ è·¯ç”±å™¨å·¥ä½œåŸç†è·¯ç”±å™¨ç»“æ„ è¾“å…¥ç«¯å£ï¼ˆInput portï¼‰ äº¤æ¢ç»“æ„ï¼ˆSwitch fabricï¼‰ è¾“å‡ºç«¯å£ï¼ˆOutput portï¼‰ è·¯ç”±é€‰æ‹©å¤„ç†å™¨ï¼ˆRouting processorï¼‰ ä¸ŠåŠéƒ¨åˆ†ä¸ºæ§åˆ¶é¢æ¿ï¼šè½¯ä»¶ã€æ¯«ç§’çº§ ä¸‹åŠéƒ¨åˆ†ä¸ºæ•°æ®é¢æ¿ï¼šç¡¬ä»¶ã€çº³ç§’çº§ è¾“å…¥ç«¯å£ï¼ˆInput portï¼‰ çº¿è·¯ç«¯æ¥ï¼ˆline terminationï¼‰ï¼šç‰©ç†å±‚åŠŸèƒ½ï¼Œç”¨æ¥æ¯”ç‰¹çš„æ¥æ”¶ æ•°æ®é“¾è·¯å¤„ç†ï¼ˆåè®®ï¼Œæ‹†å°ï¼‰ï¼ˆdata link processing (protocol, decapsulation)ï¼‰ï¼šæ•°æ®é“¾è·¯å±‚åŠŸèƒ½ï¼Œæ¯”å¦‚ä»¥å¤ªç½‘ æŸ¥æ‰¾ã€è½¬å‘ã€æ’é˜Ÿï¼ˆlookup, forwarding, queueingï¼‰ åˆ†æ•£äº¤æ¢ï¼šç»™å‡ºæ•°æ®æŠ¥ç›®çš„åœ°ï¼Œç„¶åæ ¹æ®è½¬å‘è¡¨æŸ¥æ‰¾è¾“å‡ºç«¯å£ ç›®æ ‡ï¼šå¸Œæœ›åœ¨â€œline speedâ€ä¸Šå®Œæˆè¾“å…¥ç«¯å£çš„å¤„ç† æ’é˜Ÿï¼šæ•°æ®æŠ¥åˆ°è¾¾é€Ÿåº¦å¤§äºè½¬å‘é€Ÿåº¦ äº¤æ¢ç»“æ„ï¼ˆSwitch fabricï¼‰&emsp;&emsp;ä¸‰ç§äº¤æ¢ç»“æ„ï¼šå…±äº«å†…å­˜ã€å…±äº«æ€»çº¿ã€äº¤å‰å¼€å…³çŸ©é˜µ å…±äº«å†…å­˜ï¼ˆSwitching via memoryï¼‰ åˆä»£è·¯ç”±å¸¸é‡‡ç”¨å…±äº«å†…å­˜ pktåœ¨memoryå¤åˆ¶ é€Ÿåº¦è¢«å†…å­˜å¸¦å®½é™åˆ¶ï¼Œæ¯ä¸ªdatagraméƒ½è¦ç»è¿‡2ä¸ªbus Cisco Catalyst 8500 å…±äº«æ€»çº¿ï¼ˆSwitching via a busï¼‰ datagramé€šè¿‡å…±äº«çš„busä»è¾“å…¥ç«¯å£åˆ°è¾“å‡ºç«¯å£ æ€»çº¿å†²çªï¼ˆbus contentionï¼‰ï¼šäº¤æ¢é€Ÿåº¦è¢«æ€»çº¿å¸¦å®½é™åˆ¶ Cisco 5600 äº¤å‰å¼€å…³çŸ©é˜µï¼ˆSwitching via an interconnection networkï¼‰ å®¢æœæ€»çº¿å¸¦å®½çš„é™åˆ¶ çºµæ¨ªå¼äº¤æ¢æœºæ˜¯ä¸€ç§ç”±2Næ¡æ€»çº¿ç»„æˆçš„äº’è”ç½‘ç»œï¼Œè¿æ¥Nä¸ªè¾“å…¥ç«¯å£å’ŒNä¸ªè¾“å‡ºç«¯å£ å¯å¹¶è¡Œè½¬å‘å¤šä¸ªåˆ†ç»„ï¼Œä½†å¦‚æœåŒè¾“å…¥è¾“å‡ºç«¯å£ï¼Œè¿˜æ˜¯å¿…é¡»ç­‰å¾…å‰ä¸€ä¸ªå‘é€äº†å†å‘ä¸‹ä¸€ä¸ª Cisco 12000 è¾“å‡ºç«¯å£ï¼ˆOutput portï¼‰ æ’é˜Ÿï¼ˆç¼“å­˜ç®¡ç†ï¼‰ï¼ˆQueueing(datagram buffer)ï¼‰ ç¼“å­˜ï¼šå½“æ•°æ®æŠ¥åˆ°è¾¾å¿«äºä¼ è¾“é€Ÿç‡ï¼Œå¦‚æœç¼“å­˜ä¸å¤Ÿä¼šå¯¼è‡´ä¸¢åŒ… è°ƒåº¦æ–¹æ³•ï¼šä»æ’é˜Ÿä¸­é€‰æ‹©æ•°æ®æŠ¥è¿›è¡Œä¼ è¾“ï¼Œä¾‹å¦‚æŒ‰æ—¶é—´é¡ºåºã€æŒ‰ä¼˜å…ˆçº§é¡ºåº æ•°æ®é“¾è·¯å¤„ç†ï¼ˆåè®®ï¼Œå°è£…ï¼‰ï¼ˆData link processing(protocol, encapsulation)ï¼‰ çº¿è·¯ç«¯æ¥ï¼ˆLine terminationï¼‰ æ’é˜Ÿè¾“å…¥ç«¯å£æ’é˜Ÿ å½“fabricæ¯”input portæ…¢æ—¶ï¼Œå‘ç”Ÿæ’é˜Ÿ bufferæ»¡æ—¶ï¼Œå‡ºç°æ’é˜Ÿå»¶æ—¶å’Œä¸¢åŒ… é˜Ÿé¦–é˜»å¡ï¼ˆHead-of-the-Line blockingï¼ŒHOLï¼‰ï¼šé˜Ÿé¦–çš„datagramä¼šé˜»å¡æ’åœ¨å®ƒåé¢çš„datagramè¾“å…¥ è¾“å‡ºç«¯å£æ’é˜Ÿ å½“switchåˆ°è¾¾æ¯”output lineå¿«ï¼Œå‘ç”Ÿæ’é˜Ÿ bufferæ»¡æ—¶ï¼Œå‡ºç°æ’é˜Ÿå»¶æ—¶å’Œä¸¢åŒ… è·¯ç”±ç®—æ³•ï¼ˆRouting algorithmsï¼‰æ¦‚è¿°è·¯ç”±åè®® ç›®æ ‡ï¼šä»æºåˆ°ç›®çš„æ‰¾åˆ°ä¸€æ¡æœ€å¥½çš„è·¯å¾„ ä¸€èˆ¬ï¼Œæœ€å¥½è·¯å¾„æ˜¯æœ€å°ä»£ä»·è·¯å¾„ ä½†ä¹Ÿå¯ä»¥æœ‰å…¶ä»–å®šä¹‰ è·¯ç”± -&gt; èŠ‚ç‚¹ ç‰©ç†é“¾è·¯ -&gt; è¾¹ é“¾è·¯ä»£ä»·ï¼šå¯ä»¥æ˜¯å»¶æ—¶ã€èŠ±è´¹æˆ–æ‹¥å¡ç­‰çº§ç­‰ç­‰ è·¯ç”±å›¾è¡¨ç¤ºï¼š G = (N,E) è·¯ç”±å™¨é›†åˆï¼š$N = {u,v,w,x,y,z}$ é“¾è·¯é›†åˆï¼š$E = {(u,v),(u,x),(v,x),(v,w),(x,w),(x,y),(w,y),(w,z),(y,z)}$ è·¯å¾„costï¼š$cost\\ of\\ path\\ (x1,x_2,x_3,â€¦,x_p)=c(x_1,x_2)+c(x_2,x_3)+â€¦+c(x{p-1},x_p)$ è·¯ç”±ç®—æ³•ï¼šæ‰¾åˆ°costæœ€å°è·¯å¾„ è·¯ç”±ç®—æ³•åˆ†ç±» å…¨å±€/åˆ†æ•£ä¿¡æ¯ å…¨å±€ï¼šçŸ¥é“æ‰€æœ‰è·¯ç”±ä¿¡æ¯ åˆ†æ•£ï¼šåªçŸ¥é“é‚»å±…è·¯ç”±çš„ä¿¡æ¯ï¼Œéœ€è¦è¿›è¡Œè¿­ä»£æŸ¥è¯¢ é™æ€/åŠ¨æ€ é™æ€ï¼šéœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œè·¯ç”±å˜åŒ–æ…¢ åŠ¨æ€ï¼šè·¯ç”±å˜åŒ–å¿«ï¼Œå‘¨æœŸæ›´æ–° LSç®—æ³•ï¼šè·¯ç”±é€‰æ‹©ç®—æ³•ï¼ˆLink state alorithmï¼‰Dijkstraç®—æ³• åŸºäºå…¨å±€ä¿¡æ¯çš„ç®—æ³• è®¡ç®—ä»æºåˆ°æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€å°cost è¿­ä»£ï¼šç»è¿‡kæ¬¡è¿­ä»£å¯çŸ¥åˆ°kä¸ªç›®çš„çš„è·¯å¾„cost ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼šG={V,E} åˆå§‹æ—¶ä»¤ S={V0},T=V-S={å…¶ä½™é¡¶ç‚¹}ï¼ŒTä¸­é¡¶ç‚¹å¯¹åº”çš„è·ç¦»å€¼è‹¥å­˜åœ¨ï¼Œd(V0,Vi)ä¸ºå¼§ä¸Šçš„æƒå€¼è‹¥ä¸å­˜åœ¨ï¼Œd(V0,Vi)ä¸ºâˆ ä»Tä¸­é€‰å–ä¸€ä¸ªä¸Sä¸­é¡¶ç‚¹æœ‰å…³è”è¾¹ä¸”æƒå€¼æœ€å°çš„é¡¶ç‚¹Wï¼ŒåŠ å…¥åˆ°Sä¸­ å¯¹å…¶ä½™Tä¸­é¡¶ç‚¹çš„è·ç¦»å€¼è¿›è¡Œä¿®æ”¹ï¼šè‹¥åŠ è¿›Wä½œä¸­é—´é¡¶ç‚¹ï¼Œä»V0åˆ°Viçš„è·ç¦»å€¼ç¼©çŸ­ï¼Œåˆ™ä¿®æ”¹æ­¤è·ç¦»å€¼é‡å¤ä¸Šè¿°æ­¥éª¤2ã€3ï¼Œç›´åˆ°Sä¸­åŒ…å«å³™æ‰€æœ‰é¡¶ç‚¹ï¼Œå³W=Viä¸ºæ­¢ $c(x,y)$ï¼šxåˆ°yçš„costï¼Œå¦‚æœxï¼Œyä¸æ˜¯é‚»å±…ï¼Œåˆ™ä¸º$c(x,y) = \\infty $ $D(v)$ï¼šä»æºåˆ°ç›®çš„vçš„è·¯å¾„çš„cost $p(v)$ï¼šä»æºåˆ°ç›®çš„vçš„è·¯å¾„çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ $Nâ€™$ï¼šæœ€å°costè·¯å¾„çš„èŠ‚ç‚¹é›† ç®—æ³•å¤æ‚åº¦ å‡å¦‚æœ‰nä¸ªèŠ‚ç‚¹ï¼Œ ä¸€èˆ¬çš„Dijkstraç®—æ³•éœ€è¦ $n(n+1)/2$ï¼Œå³$O(n^2)$ é€šè¿‡ç®—æ³•ä¼˜åŒ–ï¼Œå¯å°†å¤æ‚åº¦é™ä¸º$O(n\\log n)$ &emsp;&emsp;Dijkstraç®—æ³•å­˜åœ¨æŒ¯è¡é—®é¢˜ã€‚ å¹¿æ’­è·¯ç”±ï¼ˆBroadcast routingï¼‰&emsp;&emsp;é€šè¿‡å¹¿æ’­è·¯ç”±å¾—åˆ°è·¯ç”±çš„å®æ—¶æƒ…å†µã€‚å®Œæˆå¹¿æ’­é€šä¿¡çš„æœ€ç›´æ¥æ–¹å¼æ˜¯ç”±å‘é€èŠ‚ç‚¹å‘æ¯ä¸ªç›®çš„åœ°åˆ†åˆ«å‘é€åˆ†ç»„çš„æ‹·è´ã€‚ æ´ªæ³›ï¼ˆFloodingï¼‰ï¼šä»æºå‘é€pktåˆ°æ‰€æœ‰å…¶ä»–çš„èŠ‚ç‚¹ &emsp;&emsp;æ— é™åˆ¶æ´ªæ³›ä¼šå¼•èµ·å¹¿æ’­é£æš´ï¼ˆBroadcast stormï¼‰ï¼Œå¯¼è‡´å¹¿æ’­è·¯ç”±è€—å…‰äº†æ‰€æœ‰çš„æµé‡ã€‚ å—æ§æ´ªæ³›ï¼ˆControlled floodingï¼‰ï¼šè§£å†³å¹¿æ’­é£æš´é—®é¢˜ åºå·æ§åˆ¶æ´ªæ³›ï¼ˆSequence-number-controlled floodingï¼‰ &emsp;&emsp;æºèŠ‚ç‚¹å°†å…¶åœ°å€(æˆ–å…¶ä»–çš„å”¯ä¸€æ ‡è¯†ç¬¦)ä»¥åŠå¹¿æ’­åºå·æ”¾äººå¹¿æ’­åˆ†ç»„ï¼Œå†å‘å®ƒçš„æ‰€æœ‰é‚»å±…å‘é€è¯¥åˆ†ç»„ã€‚æ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤å®ƒå·²ç»æ”¶åˆ°çš„ã€å¤åˆ¶çš„å’Œè½¬å‘çš„æºåœ°å€å’Œæ¯ä¸ªå¹¿æ’­åˆ†ç»„çš„åºå·åˆ—è¡¨ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶åˆ°ä¸€ä¸ªå¹¿æ’­åˆ†ç»„æ—¶ï¼Œå®ƒé¦–å…ˆæ£€æŸ¥è¯¥åˆ†ç»„æ˜¯å¦åœ¨è¯¥åˆ—è¡¨ä¸­ã€‚å¦‚æœåœ¨ï¼Œä¸¢å¼ƒè¯¥åˆ†ç»„;å¦‚æœä¸åœ¨ï¼Œå¤åˆ¶è¯¥åˆ†ç»„å¹¶å‘è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…è½¬å‘ã€‚ åå‘è·¯å¾„å¹¿æ’­(Reverse Path Broadcastingï¼ŒRPB) RPB çš„åŸºæœ¬æ€æƒ³æ˜¯å½“ä¸€å°è·¯ç”±å™¨æ¥æ”¶åˆ°å…·æœ‰ç»™å®šæºåœ°å€çš„å¹¿æ’­åˆ†ç»„æ—¶ï¼Œ ä»…å½“è¯¥åˆ†ç»„åˆ°è¾¾çš„é“¾è·¯æ­£å¥½æ˜¯ä½äºå®ƒè‡ªå·±åˆ°å…¶æºçš„æœ€çŸ­å•æ’­è·¯å¾„ä¸Šï¼Œå®ƒæ‰å‘å…¶æ‰€æœ‰å‡ºé“¾è·¯ (é™¤äº†å®ƒæ¥æ”¶åˆ†ç»„çš„é‚£ä¸ª)ä¼ è¾“åˆ†ç»„ã€‚å¦åˆ™ï¼Œè¯¥è·¯ç”±å™¨ä¸¢å¼ƒå…¥åˆ†ç»„ã€‚ ç”Ÿæˆæ ‘å¹¿æ’­ï¼ˆSpanning-tree broadcastï¼‰ï¼šæ¶ˆé™¤äº†å†—ä½™å¹¿æ’­pktï¼Œè€Œä¸”èƒ½å¤Ÿè¢«ä»»ä½•èŠ‚ç‚¹ç”¨äºå¼€å§‹å¹¿æ’­åˆ†ç»„ åœ¨ç”Ÿæˆæ ‘ä¸Šå¹¿æ’­pktï¼Œè¿™æ ·å°±ä¸å†ä¼šæœ‰åœˆäº† LSç®—æ³•LSç®—æ³• = å¹¿æ’­è·¯ç”± + Dijkstraç®—æ³• å¹¿æ’­è·¯ç”±ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦å¹¿æ’­é“¾æ¥çŠ¶æ€pktç»™æ¯ä¸ªå…¶ä»–èŠ‚ç‚¹ï¼Œä»è€Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è·å¾—ç›¸åŒå®Œæ•´çš„ç½‘ç»œä¿¡æ¯ Dijkstraç®—æ³•ï¼šè®¡ç®—æºåˆ°æ¯ä¸ªèŠ‚ç‚¹çš„æœ€å°costè·¯å¾„ å¦‚æœæœ‰link costå˜åŒ–ï¼Œåˆ™é‡æ–°è¿›è¡Œä¸Šè¿°æ“ä½œ DVç®—æ³•ï¼šè·ç¦»å‘é‡ç®—æ³•ï¼ˆDistance vector algorithmï¼‰&emsp;&emsp;DVç®—æ³•ä¸ºåŸºäºåˆ†æ•£ä¿¡æ¯ã€åŠ¨æ€çš„è·¯ç”±ç®—æ³•ã€‚ Bellman-Fordå…¬å¼&emsp;&emsp;å®šä¹‰ $d_x(y)$ ï¼šä»xåˆ°yçš„æœ€å°costè·¯å¾„çš„cost Bellman-Fordæ–¹ç¨‹ï¼š$d_x(y)$è¿›è¡Œåˆ†è§£ d_x(y) = min_v\\{c(x,v)+d_v(y)\\}ä¾‹é¢˜ï¼šé€šè¿‡$d_v(z)$ã€$d_w(z)$ã€$d_x(z)$è®¡ç®—$d_u(z)$ã€‚ d_u(z) = min\\{c(u,v)+d_v(z), c(u,w)+d_w(z), c(u,x)+d_x(z)\\} = min(2+5,1+3,5+3) = 4 $D_x(y)$ä¸ºä¼°ç®—çš„$d_x(y)$ å¯¹äºèŠ‚ç‚¹x çŸ¥é“é‚»å±…èŠ‚ç‚¹vçš„ $c(x,v)$ ç»´æŒé‚»å±…çš„è·ç¦»å‘é‡ $D_v = [D_v(y):y\\in N]$ DVç®—æ³• æ¯ä¸ªèŠ‚ç‚¹å®šæœŸå‘é€å®ƒçš„ DV estimate ç»™é‚»å±… å½“ä¸€ä¸ªèŠ‚ç‚¹xæ”¶åˆ°é‚»å±…å‘æ¥çš„æ–°çš„ DV estimate æ—¶ï¼Œå®ƒä¼šæ ¹æ® B-Få…¬å¼ æ›´æ–°è‡ªå·±çš„ DV estimate å¤šæ¬¡æ›´æ–°åï¼ŒDV estimate ä¼šæ”¶æ•›äºçœŸå®çš„æœ€å°cost $d_x(y)$ è¿­ä»£ã€å¼‚æ­¥ï¼šæ¯ä¸ªæœ¬åœ°è¿­ä»£äº§ç”Ÿäºï¼š æœ¬åœ°é“¾æ¥costæ”¹å˜ é‚»å±…å‘æ¥æ–°çš„ DV estimate åˆ†å¸ƒï¼š æ¯ä¸ªèŠ‚ç‚¹åªä¼šåœ¨å®ƒçš„DVæ”¹å˜çš„æ—¶å€™æ‰ä¼šé€šçŸ¥é‚»å±… é‚»å±…å¦‚æœæ”¹å˜å†é€šçŸ¥é‚»å±… å¥½äº‹ä¼ å¾—å¿«ï¼Œåäº‹ä¼ å¾—æ…¢ â€œå¥½äº‹â€ï¼ˆcostå˜å°ï¼‰ï¼šæ›´æ–°å®Œæˆå¿« â€œåäº‹â€ï¼ˆcostå˜å¤§ï¼‰ï¼šæ›´æ–°å®Œæˆæ…¢ï¼Œé€ æˆæ— é™é—®é¢˜ å¦‚ä½•è§£å†³æ— é™é—®é¢˜ï¼Ÿ &emsp;&emsp;å¦‚æœè¦èŠ‚ç‚¹æœ€å°costè·¯ç”±è¦ç»•è·¯ï¼ˆå³ä¸æ˜¯é‚»å±…ï¼‰ï¼Œåˆ™æ ‡ä¸º$\\infty $ LSç®—æ³•å’ŒDVç®—æ³•å¯¹æ¯” LS DV ä¿¡æ¯å¤æ‚åº¦ï¼ˆMessage complexityï¼‰ $O(nE)$ï¼ˆnä¸ªèŠ‚ç‚¹ï¼ŒEæ¡é“¾è·¯ï¼‰ åªåœ¨é‚»å±…ä¹‹é—´äº¤æ¢ æ”¶æ•›é€Ÿåº¦ï¼ˆSpeed of convergenceï¼‰ $O(n^2)$ï¼Œå¯ä¼˜åŒ–åˆ°$O(n\\log n)$ é€Ÿåº¦ä¼šå˜åŒ– å¼ºå¥æ€§ï¼ˆRobustnessï¼‰ æœ‰ä¸€å®šå¼ºå¥æ€§ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è‡ªå·±çš„è¡¨ å¼ºå¥æ€§ä½ï¼ŒèŠ‚ç‚¹ä¾èµ–äºé‚»å±… å±‚æ¬¡è·¯ç”±ï¼ˆHierarchical Routingï¼‰ä¹‹å‰è®¨è®ºçš„è·¯ç”±éƒ½æ˜¯ç†æƒ³åŒ–çš„ï¼šæ‰€æœ‰è·¯ç”±å™¨éƒ½ç›¸åŒï¼Œç½‘ç»œæ˜¯â€œæ‰å¹³â€çš„ã€‚è€Œå®é™…ï¼Œå¹¶ä¸å­˜åœ¨è¿™æ ·çš„ç†æƒ³è·¯ç”±ã€‚ å¤§è§„æ¨¡ æ— æ³•å­˜å‚¨æ‰€æœ‰ç›®çš„çš„è½¬å‘è¡¨ è·¯ç”±äº¤æ¢æµé‡å¤§ï¼Œå¯¼è‡´æ·¹æ²¡é“¾è·¯ ç®¡ç†è‡ªæ²» å› ç‰¹ç½‘æ˜¯ç½‘ä¸­ç½‘ æ¯ä¸ªç½‘ç»œç®¡ç†éƒ½å¸Œæœ›æ§åˆ¶æ‰€åœ¨ç½‘ç»œçš„è·¯ç”± &emsp;&emsp;èšé›†è·¯ç”±æˆè‡ªæ²»ç³»ç»Ÿï¼ˆautonomous systemï¼ŒASï¼‰ ASå†…çš„è·¯ç”±ï¼ˆintra_AS routingï¼‰ åœ¨ä¸€ä¸ªASé—´çš„è·¯ç”± åœ¨ä¸€ä¸ªASçš„æ‰€æœ‰è·¯ç”±å™¨è¿è¡ŒåŒä¸€ä¸ªåŒºåŸŸå†…åè®® ä¸åŒASçš„è·¯ç”±å™¨è¿è¡Œä¸åŒåŒºåŸŸçš„åè®® ç½‘ç®¡è·¯ç”±å™¨ï¼šä½äºASè¾¹ç¼˜ï¼Œä¸å…¶ä»–ASçš„è·¯ç”±å™¨æœ‰é“¾æ¥ ASé—´çš„è·¯ç”±ï¼ˆinter_AS routingï¼‰ åœ¨ä¸åŒASé—´çš„è·¯ç”± ç½‘ç®¡å‚ä¸åŒºåŸŸé—´çš„è·¯ç”± ASåˆ†ç±» Stub ASï¼šæœ«ç«¯ASï¼Œç”¨äºå°ä¼ä¸š Multihomed ASï¼šå¤šå‡ºå£ASï¼Œç”¨äºå¤§ä¼ä¸šï¼Œå¤–éƒ¨ä¸èƒ½é€šè¿‡å®ƒä¼ è¾“ Transit ASï¼šä¸­è½¬ASï¼Œç½‘ç»œæä¾›å•†ï¼Œç”¨äºä¼ è¾“ å› ç‰¹ç½‘ä¸­çš„è·¯ç”±é€‰æ‹©&emsp;&emsp;å†…éƒ¨ç½‘å…³åè®®ï¼ˆInterior Gateway Protocolsï¼ŒIGPï¼‰æ˜¯ASå†…çš„è·¯ç”±ã€‚ å¸¸ç”¨çš„IGPæœ‰ï¼š RIPï¼šè·¯ç”±ä¿¡æ¯åè®®ï¼ŒRouting Information Protocol OSPFï¼šå¼€æ”¾æœ€çŸ­è·¯å¾„ï¼ŒOpen Shortest Path First IGRPï¼šInterior Gateway Routing Protocol RIPï¼šè·¯ç”±ä¿¡æ¯åè®®ï¼ˆRouting Information Protocolï¼‰ DVç®—æ³• costï¼šè·³æ•° &emsp;&emsp;æœ€å¤§15è·³ï¼Œ16è·³è§†ä¸º$\\infty $ã€‚è®¾ç½®æœ€å¤§è·³æ•°ä»¥é˜²æ­¢æ— ç©·è®¡æ•°é—®é¢˜ï¼Œä½†è¿™ä¹Ÿé™åˆ¶äº†åªèƒ½ç”¨äºå°ç½‘ç»œï¼Œå¤§ç½‘ç»œå¾ˆå®¹æ˜“è¶…æœ€å¤§è·³æ•°ã€‚ æ¯30sé€šè¿‡å‘é€é€šå‘Šçš„æ–¹å¼æ›´æ–°DVï¼Œé€šå‘Šæœ€å¤šè·¯ç”±åˆ°25ä¸ªç›®çš„ å¦‚æœè¶…è¿‡180sæ¯æ”¶åˆ°é€šå‘Šï¼Œåˆ™è¿™ä¸ªé‚»å±…/é“¾è·¯å®£å‘Šæ­»äº¡ é€šè¿‡è¯¥é‚»å±…çš„è·¯ç”±å¤±æ•ˆ å‘é€æ–°é€šå‘Šç»™é‚»å±… å¦‚æœé‚»å±…çš„è½¬å‘è¡¨å˜åŒ–ï¼Œå®ƒä¹Ÿä¼šå‘é€æ–°çš„é€šå‘Š é“¾æ¥å¤±è´¥çš„ä¿¡æ¯ä¼šå¿«é€Ÿè¿­ä»£å®Œæˆ é‡‡ç”¨æ¯’æ€§é€†è½¬é˜²æ­¢å¾ªç¯ å°†16è·³è®¾ç½®ä¸º$\\infty $ RIPè¿è¡Œåœ¨åº”ç”¨å±‚ï¼ˆè·¯ç”±å™¨å®é™…å¯èƒ½å­˜åœ¨åº”ç”¨å±‚ï¼Œåªæ˜¯ä¸å¯¹ç”¨æˆ·å¼€æ”¾ï¼‰ é€šå‘Šç”¨ UDP pkt å‘¨æœŸæ€§å‘é€ OSPFï¼šå¼€æ”¾æœ€çŸ­è·¯å¾„ï¼ˆOpen Shortest Path Firstï¼‰OSPFæ¦‚è¿° å¯¹å…¬ä¼—å¼€æ”¾ ä½¿ç”¨LSç®—æ³• éœ€è¦å‘é€LS pkt æ¯ä¸ªèŠ‚ç‚¹é‡‡ç”¨æ‹“æ‰‘ç»“æ„ è·¯ç”±é‡‡ç”¨ Dijkstra ç®—æ³• OSPFé€šå‘Šæ¯ä¸ªé‚»å±…è·¯ç”±å™¨æºå¸¦ä¸€ä¸ªæ¡ç›® é€šå‘Šé€šè¿‡æ´ªæ³›æ•£å¸ƒåˆ°æ•´ä¸ªAS OSPFæ¶ˆæ¯ç›´æ¥åˆ†è£…åœ¨IPæ•°æ®æŠ¥ä¸Š OSPFä¼˜ç‚¹ å®‰å…¨ï¼šæ‰€æœ‰OSPFæ¶ˆæ¯éƒ½è¦è®¤è¯ï¼Œé˜²æ­¢æ¶æ„ä¾µå…¥ å¤šæ¡ç›¸åŒcostçš„è·¯å¾„ï¼šå½“åˆ°è¾¾æŸç›®çš„çš„å¤šæ¡è·¯å¾„å…·æœ‰ç›¸åŒçš„costæ—¶ï¼ŒOSPFå…è®¸ä½¿ç”¨å¤šæ¡è·¯å¾„ã€‚å³å¯ä»¥åˆ†æµã€‚ æ¯æ¡é“¾è·¯ï¼Œç»™ä¸åŒçš„æ•°æ®ç±»å‹ä¸åŒçš„coståº¦é‡ å¯¹å•æ’­å’Œå¤šæ’­ï¼ˆMOSPFï¼‰è·¯ç”±çš„æ”¯æŒï¼šå¯¹å•æ’­è¿›è¡Œæ‰©å±•ï¼Œä»¥ä¾¿æä¾›ç»™å¤šæ’­ä½¿ç”¨ åœ¨å¤§åŸŸä¸­ç”¨åˆ†å±‚OSPF åˆ†å±‚OSPF ä¸¤å±‚ç»“æ„ï¼šå±€éƒ¨åŒºåŸŸï¼ˆlocal areaï¼‰å’Œ ä¸»å¹²ï¼ˆbackboneï¼‰ LSé€šå‘Šåªåœ¨åŒºåŸŸå†… æ¯ä¸ªèŠ‚ç‚¹çŸ¥é“è¯¥åŒºåŸŸçš„æ‹“æ‰‘ç»“æ„ï¼Œå¯¹äºå…¶ä»–åŒºåŸŸåªçŸ¥é“åˆ°é‚£ä¸ªåŒºåŸŸçš„æ–¹å‘ï¼ˆæœ€çŸ­è·¯å¾„ï¼‰ åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨ï¼ˆarea border routerï¼‰ï¼šè´Ÿè´£ä¸ºæµå‘è¯¥åŒºåŸŸä»¥å¤–çš„åˆ†ç»„æä¾›è·¯ç”±é€‰æ‹©ã€‚æ±‡æ‹¢è¯¥åŒºåŸŸçš„èŠ‚ç‚¹è·ç¦»ä¿¡æ¯ï¼Œé€šå‘Šç»™å…¶ä»–çš„åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨ ä¸»å¹²è·¯ç”±å™¨ï¼ˆbackbone routerï¼‰ï¼šåœ¨ä¸»å¹²å†…è¿è¡ŒOSPFè·¯ç”± ç½‘å…³è·¯ç”±å™¨ï¼ˆboundary routerï¼‰ï¼šä¸å…¶ä»–ASè¿æ¥ IGRPï¼ˆInterior Gateway Routing Protocolï¼‰ æœ€åˆæ˜¯CISCOç§æœ‰çš„ï¼Œåæ¥å¼€æ”¾äº†ï¼ŒRIPçš„åç»§è€… DVç®—æ³• costï¼šæ—¶å»¶ã€å¸¦å®½ã€å¯é æ€§ã€è´Ÿè·ç­‰ç­‰ åˆ©ç”¨TCPæ¥äº¤æ¢è·¯ç”±æ›´æ–° åˆ©ç”¨æ‰©æ•£æ›´æ–°ç®—æ³•ï¼ˆDiffusing Update Algorithm,DUALï¼‰æ¥é˜²æ­¢å¾ªç¯ BGPï¼šè¾¹ç•Œç½‘ç®¡åè®®ï¼ˆBorder Gateway Protocolï¼‰BGPæ¦‚è¿°é‡‡ç”¨ Path Vector protocol ä¸DVåè®®ç›¸ä¼¼ æ¯ä¸ªè¾¹ç•Œç½‘å…³å‘é‚»å±…ï¼ˆå¯¹ç­‰æ–¹ï¼‰å¹¿æ’­åˆ°è¾¾ç›®çš„åœ°çš„æ•´ä¸ªè·¯å¾„ï¼ˆå³ ASçš„åºåˆ—ï¼‰ eBGPï¼šå¤–éƒ¨BGPï¼Œè·¨è¶Šä¸¤ä¸ªASå¯¹è¯ã€‚ä»ç›¸é‚»çš„ASè·å–å­ç½‘å¯è¾¾æ€§ä¿¡æ¯ã€‚ iBGPï¼šå†…éƒ¨BGPï¼ŒåŒä¸€ä¸ªASä¸­çš„ä¸¤å°è·¯ç”±å™¨ä¹‹é—´çš„BGPå¯¹è¯ã€‚å°†å¯è¾¾æ€§ä¿¡æ¯ä¼ æ’­åˆ°æ‰€æœ‰å†…éƒ¨ASè·¯ç”±å™¨ã€‚ BGPä¼šè¯ï¼šä¸¤BGPè·¯ç”±å™¨é€šè¿‡åŠæ°¸ä¹…çš„TCPè¿æ¥æ¥äº¤æ¢æ¶ˆæ¯ å°†è·¯å¾„é€šå‘Šåˆ°ä¸åŒçš„ç›®æ ‡ç½‘ç»œå‰ç¼€ï¼ˆBGPæ˜¯â€œè·¯å¾„å‘é‡â€åè®®ï¼‰ å¦‚æœä¸€ä¸ªASå‘å¦ä¸€ä¸ªASé€šå‘Šäº†æŸä¸ªè·¯ç”±å™¨ï¼Œåˆ™æ‰¿è¯ºäº†å¯ä»¥è·¯ç”±åˆ°è¯¥è·¯ç”±å™¨ è·¯å¾„å±æ€§å’ŒBGPè·¯ç”± é€šå‘Šå‰ç¼€ï¼ˆadvertised prefixï¼‰åŒ…æ‹¬BGPå±æ€§ prefix + attributes = â€œrouteâ€ ä¸¤ä¸ªé‡è¦attributes AS-PATHï¼šè·¯å¾„ä¸­çš„ASçš„åˆ—è¡¨ NEXT-HOPï¼šä»¥AS-PATHå¼€å¤´çš„è·¯ç”±å™¨æ¥å£çš„IPåœ°å€ åŸºäºpolicyçš„è·¯ç”± ç½‘å…³æ¥æ”¶è·¯ç”±å¹¿å‘Šä½¿ç”¨å¯¼å…¥policyæ¥å—/æ‹’ç»è·¯å¾„ï¼ˆä¾‹å¦‚ï¼Œä»ä¸é€šè¿‡AS Yè·¯ç”±ï¼‰ AS policyè¿˜ç¡®å®šæ˜¯å¦å‘å…¶ä»–ç›¸é‚»ASé€šå‘Šè·¯å¾„ BGPæ¶ˆæ¯ ä½¿ç”¨TCPäº¤æ¢BGPæ¶ˆæ¯ BGPæ¶ˆæ¯ï¼š OPENï¼šæ‰“å¼€TCPè¿æ¥ï¼Œè®¤è¯sender UPDATEï¼šé€šå‘Šæ–°è·¯å¾„ï¼ˆåˆ é™¤æ—§è·¯å¾„ï¼‰ KEEP ALIVEï¼šåœ¨æ²¡æœ‰UPDATEçš„æƒ…å†µä¸‹ï¼Œä¿æŒè¿æ¥æ´»è·ƒï¼›ACK OPENè¯·æ±‚ NOTIFICATIONï¼šæŠ¥å‘Šä»¥å‰çš„msgä¸­çš„é”™è¯¯ï¼›ä¹Ÿç”¨äºå…³é—­è¿æ¥ BGPè·¯ç”±é€‰æ‹©&emsp;&emsp;è·¯ç”±å™¨å¯èƒ½çŸ¥é“åˆ°è¾¾åŒä¸€ä¸ªå‰ç¼€çš„å¤šæ¡è·¯ç”±ã€‚BGPä»¥ä¸‹ä¼˜å…ˆçº§é€‰æ‹©è·¯ç”±ï¼š æœ¬åœ°åå¥½å€¼ï¼šç”±æ”¿ç­–å†³å®š æœ€çŸ­ AS-PATHï¼šé€šè¿‡çš„ASæœ€å°‘ æœ€è¿‘ NEXT-HOP è·¯ç”±å™¨ï¼šæœ€è¿‘çš„ä¸‹ä¸€è·³è·¯ç”±å™¨ å…¶ä»–æ ‡å‡† å‡è®¾ï¼šç½‘å…³X å°†å…¶è·¯å¾„å‘é€åˆ° ç½‘å…³W W å¯ä»¥é€‰æ‹©/ä¸é€‰ Xæ‰€æä¾›çš„è·¯å¾„ æ ¹æ®costï¼Œpolicyï¼ˆeg.ä¸é€šè¿‡ç«äº‰å¯¹æ‰‹çš„ASè¿›è¡Œè·¯ç”±ï¼‰ï¼Œé˜²æ­¢ç¯è·¯ çš„åŸå› é€‰æ‹©/ä¸é€‰ å¦‚æœWé€‰æ‹©Xé€šå‘Šçš„è·¯å¾„ Path(W,Z) = W,Path(X,Z) Xå¯ä»¥é€šè¿‡advertisementæ¥æ§åˆ¶ä¼ å…¥æµé‡ï¼š eg.ä¸å¸Œæœ›å°†æµé‡è·¯ç”±åˆ°Z -&gt; ä¸é€šå‘Šä»»ä½•è·¯ç”±åˆ°Z BGPè·¯ç”±ç­–ç•¥ A,B,Cæ˜¯ISPï¼ˆç½‘ç»œæœåŠ¡æä¾›å•†ï¼‰ W,X,Yæ˜¯å®¢æˆ· Xæ˜¯ Multihomed ASï¼Œè¿æ¥äº†ä¸¤ä¸ªISPï¼Œä¹Ÿå¯ä»¥ç§°ä¸º dual-homedï¼Œä¸€èˆ¬æ˜¯å¤§å‹å…¬å¸ã€‚Xå¯ä»¥ä¸å…è®¸ B -&gt; X -&gt; C è¿™æ¡è·¯ç”±ï¼Œåˆ™Xä¸é€šå‘ŠBæœ‰è·¯ç”±åˆ°C A é€šå‘Š B è·¯å¾„ AW B é€šå‘Š X è·¯å¾„ BAW æ˜¯å¦ B é€šå‘Š C è·¯å¾„ BAW ï¼Ÿ ä¸ä¼šï¼ŒCä¸æ˜¯Bçš„å®¢æˆ·ï¼ŒBå¸Œæœ›å¼ºè¿«Cèµ°AWï¼ŒBåªæƒ³ä»å®¢æˆ·å‘é€/æ¥æ”¶è·¯ç”± Inra-/Inter-AS çš„åŒºåˆ«è§„æ¨¡ï¼šåˆ†å±‚å¯ä»¥èŠ‚çœè¡¨æ ¼å¤§å°ï¼Œå‡å°æ›´æ–°çš„æµé‡ã€‚ Intra-AS Inter-AS Policy ä¸€ä¸ªç®¡ç†å‘˜ï¼Œä¸éœ€è¦policyå†³ç­– ç®¡ç†å‘˜æƒ³è¦æ§åˆ¶è·¯ç”±ï¼Œéœ€è¦æœ‰policy æ€§èƒ½ å…³æ³¨æ€§èƒ½ æ¯”èµ·æ€§èƒ½æ›´å…³æ³¨policy IPï¼šInternet ProtocolIPv4æ•°æ®æŠ¥ç»“æ„ ç‰ˆæœ¬ï¼ˆVersion, 4bitï¼‰å¯¹äºIPv4ï¼Œå­—æ®µçš„å€¼æ˜¯4ã€‚ é¦–éƒ¨é•¿åº¦ï¼ˆHeader Lengthï¼Œ IHL, 4bitï¼‰é¦–éƒ¨é•¿åº¦è¯´æ˜é¦–éƒ¨æœ‰å¤šå°‘32ä½å­—ï¼ˆ4å­—èŠ‚ï¼‰ã€‚ä¸€èˆ¬ä¸º5ï¼Œç›¸å½“äº5*4=20å­—èŠ‚ã€‚ æœåŠ¡ç±»åˆ«ï¼ˆType Of Serviceï¼Œ8bitï¼‰ æŠ¥æ–‡é•¿åº¦ï¼ˆLength, 16bitï¼‰IPé¦–éƒ¨+æ•°æ®éƒ¨åˆ†çš„æ€»é•¿åº¦ æ ‡è¯†ï¼ˆIdentification, 16bitï¼‰ç”¨äºåœ¨IPå±‚å¯¹æ•°æ®æŠ¥è¿›è¡Œåˆ†ç‰‡çš„æ—¶å€™ï¼Œæ ‡è¯†æ•°æ®åŒ…ã€‚ æ ‡å¿— ï¼ˆFlags, 3bitï¼‰è¿™ä¸ª3ä½å­—æ®µç”¨äºæ§åˆ¶å’Œè¯†åˆ«åˆ†ç‰‡ï¼Œå®ƒä»¬æ˜¯ï¼š ä½0ï¼šä¿ç•™ï¼Œå¿…é¡»ä¸º0ï¼› ä½1ï¼šç¦æ­¢åˆ†ç‰‡ï¼ˆDonâ€™t Fragmentï¼ŒDFï¼‰ï¼Œå½“DF=0æ—¶æ‰å…è®¸åˆ†ç‰‡ï¼› ä½2ï¼šæ›´å¤šåˆ†ç‰‡ï¼ˆMore Fragmentï¼ŒMFï¼‰ï¼ŒMF=1ä»£è¡¨åé¢è¿˜æœ‰åˆ†ç‰‡ï¼ŒMF=0 ä»£è¡¨å·²ç»æ˜¯æœ€åä¸€ä¸ªåˆ†ç‰‡ã€‚å¦‚æœDFæ ‡å¿—è¢«è®¾ç½®ä¸º1ï¼Œä½†è·¯ç”±è¦æ±‚å¿…é¡»åˆ†ç‰‡æŠ¥æ–‡ï¼Œæ­¤æŠ¥æ–‡ä¼šè¢«ä¸¢å¼ƒã€‚è¿™ä¸ªæ ‡å¿—å¯è¢«ç”¨äºå‘å¾€æ²¡æœ‰èƒ½åŠ›ç»„è£…åˆ†ç‰‡çš„ä¸»æœºã€‚å½“ä¸€ä¸ªæŠ¥æ–‡è¢«åˆ†ç‰‡ï¼Œé™¤äº†æœ€åä¸€ç‰‡å¤–çš„æ‰€æœ‰åˆ†ç‰‡éƒ½è®¾ç½®MFä¸º1ã€‚æœ€åä¸€ä¸ªç‰‡æ®µå…·æœ‰éé›¶ç‰‡æ®µåç§»å­—æ®µï¼Œå°†å…¶ä¸æœªåˆ†ç‰‡æ•°æ®åŒ…åŒºåˆ†å¼€ï¼Œæœªåˆ†ç‰‡çš„åç§»å­—æ®µä¸º0ã€‚ åˆ†ç‰‡åç§» ï¼ˆFragment Offset, 13bitï¼‰è¿™ä¸ª13ä½å­—æ®µæŒ‡æ˜äº†æ¯ä¸ªåˆ†ç‰‡ç›¸å¯¹äºåŸå§‹æŠ¥æ–‡å¼€å¤´çš„åç§»é‡ï¼Œä»¥8å­—èŠ‚ä½œå•ä½ã€‚ å­˜æ´»æ—¶é—´ï¼ˆTime To Liveï¼ŒTTL, 8bitï¼‰æœ¬æ•°æ®æŠ¥çš„TTL. åè®® ï¼ˆProtocol, 8bitï¼‰1â€”-icmp, 2â€”-igmp, 6â€”-tcp, 17â€”-udp, 89â€”-ospf é¦–éƒ¨æ£€éªŒå’Œ ï¼ˆHeader Checksumï¼Œ 16bitï¼‰IPé¦–éƒ¨çš„æ ¡éªŒå’Œ æºIPåœ°å€ï¼ˆSource IP, 32bitï¼‰ ç›®çš„IPåœ°å€ï¼ˆDestination IP, 32bitï¼‰ IPv4æ•°æ®æŠ¥åˆ†ç‰‡ ç½‘ç»œé“¾è·¯æœ‰MTUï¼ˆæœ€å¤§ä¼ é€å•å…ƒï¼‰â€” æœ€å¤§å¯ä¼ è¾“çš„é“¾è·¯çš„å¸§ ä¸åŒçš„é“¾è·¯ç±»å‹æœ‰ä¸åŒçš„MTU å¦‚æœIPæ•°æ®æŠ¥ &gt; MTU ï¼Œåˆ™åˆ†ç‰‡ï¼Œåˆ°ç›®çš„åœ°åå†é‡ç»„ IPå¤´éƒ¨å­—æ®µç”¨æ¥æ ‡è®° IPæ•°æ®æŠ¥åˆ†ç‰‡ç¤ºä¾‹ æœ¬æ¥è¦å‘é€ 4000 byte çš„æ•°æ®æŠ¥ï¼ˆheadéƒ¨åˆ† + dataéƒ¨åˆ†ï¼‰ é“¾è·¯çš„ MTU = 1500 bytes éœ€è¦å°†æ•°æ®åˆ†ä¸º3ç‰‡æ¥å‘é€ lengthï¼šç‰‡é•¿åº¦ï¼ŒåŒ…æ‹¬äº† 20 bytes IPé¦–éƒ¨éƒ¨åˆ†ï¼Œæœ€å¤§ä¸ºMTU lengthä¸º1500çš„æ•°æ®æŠ¥ï¼Œå®é™…åŒ…å« $1500-20=1480\\ bytes$ çš„dataéƒ¨åˆ† æœ€åä¸€ç‰‡çš„lengthä¸º $(4000-20) - 1480\\times 2 + 20 = 1040$ fragflagï¼š3 bits ç¬¬äºŒä¸ªbitä¸º DFï¼ˆDonâ€™t Flagï¼‰ï¼šä¸º0åˆ™è¯¥æ•°æ®æŠ¥åˆ†ç‰‡ï¼Œä¸º1åˆ™ä¸åˆ†ç‰‡ ç¬¬ä¸‰ä¸ªbitä¸º MFï¼šä¸º0åˆ™åé¢æ²¡æœ‰ç‰‡äº†ï¼Œä¸º1åˆ™åé¢è¿˜æœ‰ç‰‡ å‰ä¸¤ç‰‡ä¸º 1ï¼ˆ001ï¼‰ï¼Œè¡¨ç¤ºè¯¥IPæ•°æ®æŠ¥åˆ†ç‰‡ï¼Œä¸”åé¢è¿˜æœ‰ç‰‡ æœ€åä¸€ç‰‡ä¸º 0ï¼ˆ000ï¼‰ï¼Œè¡¨ç¤ºè¯¥IPæ•°æ®æŠ¥åˆ†ç‰‡ï¼Œåé¢æ²¡ç‰‡ï¼ˆå³æœ€åä¸€ç‰‡ï¼‰ offsetï¼šdataéƒ¨åˆ†åç§»é‡ï¼Œä»¥ 8 bytes ä¸ºå•ä½ï¼Œåªè®¡ç®—dataéƒ¨åˆ† ç¬¬ä¸€ç‰‡çš„offsetä¸º 0 ç¬¬äºŒç‰‡çš„offsetä¸º $1480\\ bytes/8\\ bytes = 185$ IPv4ç¼–å€æ¦‚è¿° IPåœ°å€ï¼š32ä½ã€ä¸»æœºå’Œè·¯ç”±å™¨æ¥å£çš„ID æ¥å£ï¼ˆinterfaceï¼‰ï¼šä¸»æœº/è·¯ç”±å™¨ å’Œ ç‰©ç†é“¾æ¥ ä¹‹é—´çš„è¿æ¥ è·¯ç”±å™¨ä¸€èˆ¬æœ‰å¤šä¸ªæ¥å£ ä¸»æœºä¸€èˆ¬æœ‰1åˆ°2ä¸ªæ¥å£ æ¯ä¸ªæ¥å£éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„IPåœ°å€ æ¥å£è¿æ¥æ–¹å¼ é€šè¿‡è·¯ç”±å™¨è¿æ¥ æœ‰çº¿ä»¥å¤ªç½‘é€šè¿‡ä»¥å¤ªç½‘äº¤æ¢æœºè¿æ¥ æ— çº¿ç½‘ç»œé€šè¿‡WiFiåŸºç«™è¿æ¥ å­ç½‘ï¼ˆSubnetï¼‰IPåœ°å€ ç½‘ç»œéƒ¨åˆ† â€”â€” é«˜ä½ ä¸»æœºéƒ¨åˆ† â€”â€” ä½ä½ å­ç½‘ å­ç½‘éƒ¨åˆ†ç›¸åŒ å¯ä»¥ä¸é€šè¿‡è·¯ç”±å™¨åˆ°è¾¾å½¼æ­¤ &emsp;&emsp;æŠŠè·¯ç”±å™¨å»æ‰ï¼Œå‰©ä¸‹çš„æ¯ä¸ªåŒºåŸŸéƒ½æ˜¯ä¸€ä¸ªå­ç½‘ã€‚ &emsp;&emsp;ä¸Šå›¾ä¸­æœ‰6ä¸ªå­ç½‘ã€‚ åˆ†ç±»ç¼–åˆ¶ï¼ˆClassful Addressingï¼‰ Aç±» ç½‘ç»œéƒ¨åˆ†å‰1ä½ â€”â€” 0 ç½‘ç»œéƒ¨åˆ† 8 bitsï¼Œä¸»æœºéƒ¨åˆ† 24 bits IPåœ°å€èŒƒå›´ï¼š1.0.0.0 ï½ 127.255.255.255 Bç±» ç½‘ç»œéƒ¨åˆ†å‰2ä½ â€”â€” 10 ç½‘ç»œéƒ¨åˆ† 16 bitsï¼Œä¸»æœºéƒ¨åˆ† 16 bits IPåœ°å€èŒƒå›´ï¼š128.0.0.0 ï½ 191.255.255.255 Cç±» ç½‘ç»œéƒ¨åˆ†å‰3ä½ â€”â€” 110 ç½‘ç»œéƒ¨åˆ† 24 bitsï¼Œä¸»æœºéƒ¨åˆ† 8 bits IPåœ°å€èŒƒå›´ï¼š192.0.0.0 ï½ 223.255.255.255 Dç±» å‰4ä½ â€”â€” 1110 ç”¨äºå¤šæ’­åœ°å€ Eç±» å‰4ä½ â€”â€” 1111 è¢«ç•™ä½œå°†æ¥ä½¿ç”¨ å­ç½‘æ©ç ï¼ˆsubnet maskï¼‰ IPåœ°å€é‡‡ç”¨ç‚¹åˆ†åè¿›åˆ¶ï¼šä¾‹å¦‚ 192.32.216.9 åˆ†ç±»ç¼–åˆ¶å¯¼è‡´äº†åœ°å€èµ„æºçš„æµªè´¹ å­ç½‘å’Œå­ç½‘æ©ç ï¼šå¯ä»¥å‡å°åœ°å€èµ„æºçš„æµªè´¹ &emsp;&emsp;200.23.16.64/27ä¸­çš„27ä¸º ç½‘ç»œéƒ¨åˆ†+å­ç½‘éƒ¨åˆ† çš„ä½æ•° å­ç½‘æ©ç  ç½‘ç»œéƒ¨åˆ†+å­ç½‘éƒ¨åˆ† ç½®1 ä¸»æœºéƒ¨åˆ† ç½®0 å­ç½‘çš„ç½‘ç»œID ç½‘ç»œéƒ¨åˆ†+å­ç½‘éƒ¨åˆ† ä¸å˜ ä¸»æœºéƒ¨åˆ† ç½®0 CIDRï¼šæ— ç±»çš„åŸŸé—´è·¯ç”±ï¼ˆClassless InterDomain Routingï¼‰ IPåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ† â€”â€” å­ç½‘éƒ¨åˆ† + ä¸»æœºéƒ¨åˆ† å­ç½‘éƒ¨åˆ†å¯ä»¥æ˜¯ä»»æ„é•¿åº¦ åœ°å€æ ¼å¼ï¼ša.b.c.d / xï¼Œå…¶ä¸­xæ˜¯å­ç½‘éƒ¨åˆ†ä½æ•° ç½‘ç»œéƒ¨åˆ†ç§°ä¸ºå‰ç¼€ï¼ˆprefixï¼‰ å¦‚ä½•è·å–IPåœ°å€ä¸»æœºå¦‚ä½•è·å–IPåœ°å€ä¸»æœºè·å–IPåœ°å€ï¼š ç¡¬ç¼–ç ï¼šè‡ªå·±è®¾ç½®é™æ€çš„IPè®¾ç½® DHCPï¼šåŠ¨æ€ä¸»æœºé…ç½®ï¼ˆDynamic Host Configuration Protocolï¼‰&emsp;&emsp;å½“ä¸»æœºè¿æ¥ç½‘ç»œæ—¶ï¼Œå…è®¸ä¸»æœºä»ç½‘ç»œæœåŠ¡å™¨åŠ¨æ€è·å–IPåœ°å€ã€‚ DHCP å³æ’å³ç”¨ å¯ä»¥æ›´æ–°IP åœ°å€é‡ç”¨ï¼šä¸»æœºçš„IPåªæœ‰åœ¨ä¸Šçº¿æ—¶æ‰å›ºå®šï¼Œä¸‹çº¿å³é‡Šæ”¾ æ”¯æŒç§»åŠ¨ç”¨æˆ· &emsp;&emsp;å½“ä¸€å°ä¸»æœºåŠ å…¥ç½‘ç»œæ—¶ï¼Œä»å­ç½‘ä¸­çš„DHCPæœåŠ¡å™¨è·å–IPåœ°å€ã€‚ ç½‘ç»œå¦‚ä½•è·å–IPåœ°å€&emsp;&emsp;ä»ISPå¤„è·å–åˆ†é…çš„IPåœ°å€ã€‚ ISPå¦‚ä½•è·å–IPåœ°å€&emsp;&emsp;ISPä»ICANNç»„ç»‡è·å–IPåœ°å€ ICANNï¼šInternet Corporation for Assigned Names and Numbers åˆ†é…åœ°å€ ç®¡ç†DNS åˆ†é…åŸŸåã€è§£å†³äº‰è®® NATï¼šç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNetwork Address Translationï¼‰ ä»è¿™ä¸ªæœ¬åœ°ç½‘ç»œå‡ºå»çš„æŠ¥æ–‡éƒ½æœ‰ç€ï¼šç›¸åŒçš„æºIP+ä¸åŒçš„ç«¯å£å· å¯¹äºå¤–ç•Œç½‘ç»œæ¥è¯´ï¼Œè¿™ä¸ªæœ¬åœ°ç½‘ç»œéƒ½æ˜¯ä¸€ä¸ªIP æœ¬åœ°ç½‘ç»œæœ‰å†…éƒ¨åœ°å€ï¼Œæ”¹å˜è¯¥å†…éƒ¨åœ°å€ä¸éœ€è¦é€šçŸ¥å¤–éƒ¨ç½‘ç»œ æ”¹å˜ISPä¸éœ€è¦æ”¹å˜æœ¬åœ°ç½‘ç»œçš„å†…éƒ¨åœ°å€ å†…éƒ¨åœ°å€åœ¨å¤–éƒ¨ä¸å¯è§ï¼ˆä¿éšœå®‰å…¨æ€§ï¼‰ å®ç°æ–¹å¼ å‘é€å‡ºå»çš„æŠ¥æ–‡ï¼šï¼ˆæºIP(å†…éƒ¨çš„IP)ï¼Œç«¯å£å·ï¼‰â€”&gt; ï¼ˆNAT IP(NATç»Ÿä¸€çš„IP)ï¼Œæ–°ç«¯å£å·ï¼‰ å¤–éƒ¨å‘æ¥çš„æŠ¥æ–‡çš„ç›®çš„åœ°å€å¡«å†™ï¼šï¼ˆNAT IP(NATç»Ÿä¸€çš„IP)ï¼Œæ–°ç«¯å£å·ï¼‰ NATè½¬æ¢è¡¨ï¼šè®°ä½ï¼ˆæºIP(å†…éƒ¨çš„IP)ï¼Œç«¯å£å·ï¼‰&lt;â€”&gt; ï¼ˆNAT IP(NATç»Ÿä¸€çš„IP)ï¼Œæ–°ç«¯å£å·ï¼‰çš„è½¬æ¢å¯¹ æ”¶åˆ°çš„æŠ¥æ–‡ï¼šæ ¹æ®NATè½¬æ¢è¡¨ï¼Œï¼ˆNAT IP(NATç»Ÿä¸€çš„IP)ï¼Œæ–°ç«¯å£å·ï¼‰â€”&gt; ï¼ˆæºIP(å†…éƒ¨çš„IP)ï¼Œç«¯å£å·ï¼‰ å¤–éƒ¨ä¸çŸ¥é“å†…éƒ¨çš„æƒ…å†µï¼Œæ‰€ä»¥å¤–éƒ¨ä¸èƒ½å‘èµ·é€šä¿¡ é¢„ç•™ç»™å†…éƒ¨çš„IPåœ°å€ï¼š 10.0.0.0~10.255.255.255ï¼ˆAç±»ï¼‰ 176.16.0.0~172.31.255.255ï¼ˆBç±»ï¼‰ 192.168.0.0~192.168.255.255ï¼ˆCç±»ï¼‰ å¯ä»¥æœ‰16bitçš„ä¸»æœºåœ°å€ä½ï¼ˆ10.0.0.0~10.255.255.255ï¼‰ï¼Œä¸€ä¸ªNATæ”¯æŒå†…éƒ¨60000+çš„è¿æ¥ NATå­˜åœ¨äº‰è®® è·¯ç”±å™¨æœ¬æ¥æ˜¯åœ¨ç¬¬3å±‚ï¼Œä½†NATä¿®æ”¹äº†ç«¯å£å·ï¼Œè€Œç«¯å£å·åŒ…å«åœ¨TCP/UDPçš„æ®µç»“æ„é‡Œï¼Œå³æ”¹äº†ç¬¬4å±‚çš„å†…å®¹ è¿åäº†ç«¯åˆ°ç«¯ æ‰€ä»¥ç”¨IPv6æ¥è§£å†³åœ°å€çŸ­ç¼º ICMPï¼šå› ç‰¹ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼ˆInternet Control Message Protocolï¼‰ICMP ä¸»æœºã€è·¯ç”±å™¨ã€ç½‘å…³æ¥äº¤æµç½‘ç»œå±‚ä¿¡æ¯ æŠ¥é”™ï¼šåˆ°è¾¾ä¸äº†ä¸»æœºã€ç½‘ç»œã€ç«¯å£ã€åè®®ç­‰ç­‰ ç”¨äºæ¢æµ‹ï¼šecho request/replyï¼ˆä½¿ç”¨pingï¼‰ IPçš„ä¸€éƒ¨åˆ†ï¼Œä½†ä½“ç³»ç»“æ„åœ¨IPä¹‹ä¸Šï¼šICMPæ¶ˆæ¯æ­è½½åœ¨IPæ•°æ®æŠ¥ä¸Š ICMPæ¶ˆæ¯ï¼štypeï¼Œcodeï¼Œå¼•å‘é”™è¯¯çš„IPæ•°æ®æŠ¥é¦–éƒ¨å’Œå‰8ä¸ªå­—èŠ‚ Type Code description æè¿° 0 0 echo reply (ping) echoå“åº” (è¢«ç¨‹åºpingä½¿ç”¨ï¼‰ 3 0 dest. network unreachable ç›®æ ‡ç½‘ç»œä¸å¯è¾¾ 3 1 dest host unreachable ç›®æ ‡ä¸»æœºä¸å¯è¾¾ 3 2 dest protocol unreachable ç›®æ ‡åè®®ä¸å¯è¾¾ 3 3 dest port unreachable ç›®æ ‡ç«¯å£ä¸å¯è¾¾ 3 6 dest network unknown æœªçŸ¥çš„ç›®æ ‡ç½‘ç»œ 3 7 dest host unknown æœªçŸ¥çš„ç›®æ ‡ä¸»æœº 4 0 source quench (congestion control - not used) æºç«¯å…³é—­ï¼ˆæ‹¥å¡æ§åˆ¶ï¼‰ 8 0 echo request (ping) Echoè¯·æ±‚ 9 0 route advertisement è·¯ç”±é€šå‘Š 10 0 router discovery è·¯ç”±å™¨çš„å‘ç°/é€‰æ‹©/è¯·æ±‚ 11 0 TTL expired TTL è¶…æ—¶ 12 0 bad IP header IP æŠ¥é¦–éƒ¨å‚æ•°é”™è¯¯ ICMPæ˜¯ç®¡æ§åˆ¶çš„IPçš„â€œå…„å¼Ÿâ€ ICMPè¢«IPä½¿ç”¨ï¼ŒåŒæ—¶ä½œä¸ºç½‘ç»œå±‚åè®®ä½¿ç”¨IP pingã€tracerouteã€path MTU discovery éƒ½ä½¿ç”¨åˆ°äº†ICMP pingï¼šä½¿ç”¨ ICMP Echo request/repley msgs path MTU discovery å‘é€ä¸€ä¸ªå¤§çš„IPæ•°æ®æŠ¥ï¼Œè¯¥æ•°æ®æŠ¥çš„ donâ€™t fragment ç½® 1ï¼ˆå³ä¸åˆ†ç‰‡ï¼‰ å‡å°æ•°æ®æŠ¥å¤§å°ï¼Œç›´è‡³æˆåŠŸï¼ˆæˆåŠŸæ ‡å¿—ï¼šæ²¡æœ‰æ¥æ”¶åˆ°è¿”å›çš„ICMPæ¶ˆæ¯ï¼‰ Traceroute&emsp;&emsp;Tracerouteç¨‹åºï¼šè·Ÿè¸ªä»ä¸€å°ä¸»æœºåˆ°å…¶ä»–ä¸»æœºä¹‹é—´çš„è·¯ç”±ï¼Œç”¨ICMPæŠ¥æ–‡å®ç°ã€‚ æºå‘é€ä¸€ç³»åˆ— UDPæŠ¥æ–‡æ®µ åˆ°ç›®çš„ ç¬¬ä¸€ä¸ªæ•°æ®æŠ¥ TTL=1ï¼Œç¬¬äºŒä¸ªæ•°æ®æŠ¥ TTL=2ï¼Œä»¥æ­¤ç±»æ¨ ä½¿ç”¨ä¸å¸¸è§çš„ç«¯å£å· å½“ç¬¬nä¸ªæ•°æ®æŠ¥åˆ°è¾¾ç¬¬nå°ä¸»æœºæ—¶ è¿™ä¸ªç¬¬nä¸ªæ•°æ®æŠ¥TTLåˆšå¥½è¿‡æœŸ è·¯ç”±å™¨ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ è·¯ç”±å™¨å‘é€ä¸€ä¸ªICMPå‘Šè­¦æŠ¥æ–‡ï¼ˆtype 11ï¼Œcode 0ï¼‰ç»™æº è¯¥ICMPå‘Šè­¦æŠ¥æ–‡åŒ…æ‹¬ç¬¬nå°è·¯ç”±å™¨åå­—åŠå…¶IP å½“è¯¥ICMPæŠ¥æ–‡è¿”å›åˆ°æºä¸»æœºï¼Œæºä¸»æœºè®¡ç®—RTTï¼ˆå¾€è¿”æ—¶å»¶ï¼‰ï¼Œå¾—åˆ°ç¬¬nå°è·¯ç”±å™¨åå­—åŠå…¶IP æ ‡å‡†çš„Tracerouteç¨‹åºç”¨ç›¸åŒçš„TTLå‘é€3ä¸ªä¸€ç»„çš„åˆ†ç»„ï¼Œè¾“å‡ºå¯¹æ¯ä¸ªTTLæä¾›3ä¸ªç»“æœ åœæ­¢æ¡ä»¶æ­¥éª¤ UDPæ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœº ç›®çš„ä¸»æœºè¿”å› ICMPç«¯å£ä¸å¯åˆ°è¾¾æŠ¥æ–‡ï¼ˆtype 3ï¼Œcode 3ï¼‰ æºä¸»æœºæ¥æ”¶åˆ°è¯¥ICMPæŠ¥æ–‡ï¼Œåˆ™åœæ­¢ åœ¨Macä¸Šå¯åœ¨appâ€œç³»ç»Ÿä¿¡æ¯â€ä¸­çš„çª—å£-&gt;ç½‘ç»œå®ç”¨å·¥å…·ä¸­ä½¿ç”¨Pingã€Tracerouteç­‰å·¥å…·ã€‚ IPv6 åŠ¨æœº åˆåŠ¨æœºï¼šè§£å†³32ä½IPåœ°å€ç©ºé—´åˆ†é…å®Œçš„é—®é¢˜ æ›´å¿«å¤„ç†/è½¬å‘çš„å¤´éƒ¨æ ¼å¼ å¤´éƒ¨æ”¯æŒQoS IPv6æ•°æ®æŠ¥æ ¼å¼ å›ºå®šé•¿åº¦çš„å¤´éƒ¨ï¼š40 byte ï¼ˆIPv4å¤´éƒ¨é•¿åº¦ä¸å›ºå®šï¼‰ ä¸å…è®¸åˆ†ç‰‡ IPv6æ•°æ®æŠ¥ç»“æ„ ç‰ˆæœ¬ï¼ˆVersion, 4 bitï¼‰å¯¹äºIPv6ï¼Œå­—æ®µçš„å€¼æ˜¯6ï¼ˆ0110ï¼‰ã€‚ æµé‡ç±»å‹ï¼ˆTraffic classï¼Œ8 bitï¼‰ ç”¨æ¥æ ‡è¯†å¯¹åº”IPv6çš„é€šä¿¡æµç±»åˆ«ï¼Œç±»ä¼¼äºIPv4ä¸­çš„ToSã€‚ æµæ ‡ç­¾ï¼ˆFlow labelï¼Œ20 bitï¼‰ ç”¨æ¥æ ‡è®°æŠ¥æ–‡çš„æ•°æ®æµç±»å‹ï¼Œä»¥ä¾¿åœ¨ç½‘ç»œå±‚åŒºåˆ†ä¸åŒçš„æŠ¥æ–‡ã€‚ æœ‰æ•ˆè½½è·é•¿åº¦ï¼ˆPayload lengthï¼Œ16 bitï¼‰ ç»™å‡ºäº†IPv6æ•°æ®æŠ¥ä¸­è·Ÿåœ¨å®šé•¿çš„40 byteæ•°æ®æŠ¥å¤´éƒ¨åé¢çš„å­—èŠ‚æ•°é‡ã€‚ ä¸‹ä¸€ä¸ªå¤´éƒ¨ï¼ˆNext Headerï¼Œ8 bitï¼‰ è¯¥å­—æ®µæ ‡è¯†æ•°æ®æŠ¥ä¸­çš„å†…å®¹ï¼ˆæ•°æ®å­—æ®µï¼‰éœ€è¦äº¤ä»˜ç»™å“ªä¸ªåè®®ï¼ˆå¦‚TCPæˆ–UDPï¼‰ã€‚æ— æ‰©å±•çš„å¤´éƒ¨ï¼ŒNext HeaderæŒ‡å‘TCP/UDPï¼›æœ‰æ‰©å±•çš„å¤´éƒ¨ï¼ŒNext HeaderæŒ‡å‘çš„ä¸‹ä¸€ä¸ªå¤´éƒ¨æ¯”å¦‚è·¯ç”±é€‰æ‹©ã€‚ä¸IPv4å¤´éƒ¨ åè®®ï¼ˆProtocolï¼‰å­—æ®µç›¸åŒã€‚ è·³æ®µæ•°é™åˆ¶ï¼ˆHop limitï¼Œ8 bitï¼‰ ç”Ÿå­˜æ—¶é—´ï¼Œç›¸å½“äºIPv4ä¸­çš„TTLã€‚è½¬å‘æ•°æ®æŠ¥çš„æ¯å°è·¯ç”±å™¨è®²å¯¹è¯¥å­—æ®µå†…å®¹ -1ï¼Œå¦‚æœè·³è½¬é™åˆ¶è®¡æ•°åˆ°0æ—¶ï¼Œåˆ™ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ æºIPåœ°å€ï¼ˆSource Addressï¼Œ128 bitï¼‰ ç›®çš„IPåœ°å€ï¼ˆDestination Addressï¼Œ128 bitï¼‰ æ•°æ®ï¼ˆDataï¼‰ IPv6ç›¸è¾ƒäºIPv4çš„éƒ¨åˆ†æ”¹å˜ å»é™¤Checksumï¼šåŠ å¿«äº†è½¬å‘é€Ÿåº¦ Optionsï¼šä¾æ—§å…è®¸å¯é€‰é¡¹ï¼Œä½†æ˜¯ä¸æ”¾åœ¨å¤´éƒ¨ï¼Œè€Œæ˜¯æ”¾åœ¨ Next Header æŒ‡å‡ºçš„ä½ç½®ä¸Š ICMPv6ï¼šICMPçš„IPv6ç‰ˆæœ¬ å¢åŠ æ–°çš„ typeï¼šæ¯”å¦‚â€œPacket Too Bigâ€ åŒ…å«å¤šæ’­ç»„ç®¡ç† IPv6åœ°å€ ä¸‰ç§ç±»å‹ï¼šå•æ’­ï¼ˆunicastï¼‰ã€å¤šæ’­ï¼ˆmulticastï¼‰ã€ä»»æ„æ’­ï¼ˆanycastï¼‰ å†’å·åˆ’åˆ†çš„åå…­è¿›åˆ¶ï¼ˆ128 bitï¼‰ eg. 68E6:8C64:FFFF:FFFF:0:1180:960A:FFFF 0çš„å‹ç¼© ç”¨åŒå†’å·::è¡¨ç¤ºä¸€ç»„0æˆ–å¤šç»„è¿ç»­çš„0ï¼Œä½†åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ FF05:0:0:0:0:0:0:B3 = FF05::B3 0:0:0:0:0:0:128.10.2.1 = ::128.10.2.1ï¼ˆIPv4å’ŒIPv6å…¼å®¹çš„IPï¼‰ 12AB:0:0:CD30:0:0:0:0 = 12AB::CD30:0:0:0:0 = 12AB:0:0:CD30::ï¼ˆå¦‚æœå‡ºç°ä¸¤ä¸ªå¤šä¸ª0ï¼Œéšæ„å‹ä¸€ä¸ªéƒ½è¡Œï¼‰ å•æ’­ï¼ˆUnicast addressï¼‰å•æ’­çš„åœ°å€æ ¼å¼ï¼ˆä¸€å…± 128 bitï¼‰ï¼š å…¨çƒè·¯ç”±å‰ç¼€ï¼ˆGlobal routing prefixï¼Œ48 bitï¼‰ å‰3ä½ä¸º001ï¼Œåˆ†é…ç»™å…¬å¸å’Œç»„ç»‡ã€‚ å­ç½‘IDï¼ˆSubnet IDï¼Œ16 bitï¼‰ å¦‚æœæ˜¯å°å…¬å¸ï¼Œåªéœ€è¦1ä¸ªå­ç½‘çš„è¯ï¼Œå…¨è®¾ä¸º0 æ¥å£IDï¼ˆInterface IDï¼Œ64 bitï¼‰ åŸºäº EUI-64 IPv4åˆ°IPv6çš„è¿ç§» ç°åœ¨çš„ç½‘ç»œæ—¢æœ‰IPv4ï¼Œä¹Ÿæœ‰IPv6ã€‚ä¸–ç•Œä¸Šçš„æ‰€æœ‰ç½‘ä»IPv4åˆ°IPv6éœ€è¦å¾ˆé•¿çš„è½¬æ¢æ—¶é—´ã€‚ ä¸¤ç§IPv4åˆ°IPv6çš„è¿ç§» åŒæ ˆï¼ˆDual Stackï¼‰ï¼šä¸€äº›è·¯ç”±å™¨å¯ä»¥å…¼å®¹IPv4å’ŒIPv6 éš§é“ï¼ˆTunnelingï¼‰ï¼šå½“IPv6ç©¿è¿‡IPv4çš„è·¯ç”±å™¨ä¸Šæ—¶ï¼Œå°†IPv6ä½œä¸ºè½½è·æ‰¿è½½åœ¨IPv4ä¸Š åŒæ ˆï¼ˆDual Stackï¼‰ æ—©æœŸçš„è®¾è®¡ ä¸€äº›è·¯ç”±å™¨æœ‰åŒæ ˆï¼ˆIPv4 &amp; IPv6ï¼‰ï¼Œå¯ä»¥ç¿»è¯‘è¿™ä¸¤ç§æ ¼å¼ éš§é“ï¼ˆTunnelingï¼‰&emsp;&emsp;å½“IPv6ç©¿è¿‡IPv4çš„è·¯ç”±å™¨ä¸Šæ—¶ï¼Œå°†IPv6ä½œä¸ºè½½è·æ‰¿è½½åœ¨IPv4ä¸Šã€‚å°±æ˜¯åƒä¸€ä¸ªè¿æ¥ä¸¤ä¸ªIPv6è·¯ç”±å™¨çš„IPv4éš§é“ é“¾è·¯å±‚ï¼ˆLink Layerï¼‰æ¦‚è¿°ä¿è¯å¸§æµçš„é€æ˜ä¼ è¾“ é“¾è·¯å±‚æœåŠ¡ï¼š æˆå¸§ï¼ˆFramingï¼‰ã€æ¥å…¥é“¾è·¯ï¼ˆlink accessï¼‰ å°†æ¥è‡ªä¸Šçº§çš„æ•°æ®æŠ¥åˆ†è£…æˆå¸§ï¼ŒåŠ ä¸Šheaderã€trailer å®Œæˆå…±äº«åª’ä½“çš„ä¿¡é“è¿æ¥ ç‰©ç†åœ°å€ï¼Œç”¨æ¥ indentify æº/ç›®çš„ï¼Œåœ¨å¸§å¤´ä¸­ å¯é äº¤ä»˜ï¼ˆReliable deliveryï¼‰ å¯é æ•°æ®ä¼ è¾“åè®®ï¼ˆrdtï¼‰ åœ¨å¯é çš„ä¼ è¾“æƒ…å†µä¸‹å¾ˆå°‘åº”ç”¨ï¼Œä¸€èˆ¬åº”ç”¨åœ¨é«˜é”™è¯¯æ¦‚ç‡çš„é“¾è·¯ä¼ è¾“ä¸­ æµé‡æ§åˆ¶ï¼ˆFlow Controlï¼‰ åè°ƒå‘é€æ–¹å’Œæ¥æ”¶æ–¹ å·®é”™æ£€æµ‹ï¼ˆError Detectionï¼‰ å·®é”™çº æ­£ï¼ˆError Correctionï¼‰ æˆå¸§ï¼ˆFramingï¼‰&emsp;&emsp;ä¸»è¦è€ƒè™‘å¸§çš„ç•Œå®šï¼Œå³å¦‚ä½•å°†å‰ä¸€å¸§å’Œåä¸€å¸§åˆ†å¼€ã€‚ å­—ç¬¦è®¡æ•°æ³•ï¼ˆCharacter count methodï¼‰&emsp;&emsp;åœ¨æ¯å¸§çš„å‰é¢æ·»åŠ  Counting headerï¼ˆæœ¬å¸§é•¿åº¦ï¼‰ åŸºäºå­—ç¬¦çš„é¦–å°¾ç•Œå®šæ³•ï¼ˆFirst and tail bound method based on characterï¼‰&emsp;&emsp;è®¾å®šä¸¤ä¸ªASCIIâ€”â€”SOHã€EOTï¼ŒSOHä¸ºæ ‡æ³¨å¼€å§‹çš„å­—ç¬¦ï¼ŒEOTä¸ºæ ‡æ³¨ç»“å°¾çš„å­—ç¬¦ã€‚ &emsp;&emsp;å¦‚æœä¸­é—´çš„æ•°æ®éƒ¨åˆ†ä¹Ÿæœ‰SOHæˆ–EOTï¼Œåˆ™åŠ å…¥è½¬ä¹‰å­—ç¬¦ EOT æ ‡è¯†ã€‚ç±»ä¼¼äºCè¯­è¨€ä¸­çš„\\çš„ä½œç”¨ã€‚ åŸºäºbitçš„é¦–å°¾ç•Œå®šæ³•ï¼ˆFirst and tail bound method based on bitï¼‰&emsp;&emsp;ä¸åŸºäºå­—ç¬¦çš„é¦–å°¾ç•Œå®šæ³•çš„æ€è·¯ç›¸ä¼¼ï¼Œä½†å¼€å§‹å’Œç»“æŸçš„æ ‡å¿—ä¸º01111110 &emsp;&emsp;ä¸ºé˜²æ­¢ä¸­é—´çš„æ•°æ®éƒ¨åˆ†ä¹Ÿæœ‰01111110å¯¼è‡´æå‰ç»“æŸ å‘é€æ–¹ï¼šæ¯5ä¸ª1åæ’å…¥ä¸€ä¸ª0 æ¥æ”¶æ–¹ï¼šæ¯5ä¸ª1ååˆ é™¤ä¸€ä¸ª0 ç‰©ç†å±‚è¿é€†ç æ³•ï¼ˆPysical layer coding violation methodï¼‰æ¯”å¦‚åœ¨æ›¼åˆ‡æ–¯ç‰¹ç¼–ç ä¸­ï¼Œå¦‚æœ é«˜ä½è¡¨ç¤º1 ä½é«˜è¡¨ç¤º0 é‚£ä¹ˆ ä½ä½/é«˜é«˜ å°±å¯ä»¥ç”¨æ¥è¡¨ç¤ºå¼€å§‹å’Œç»“æŸ &emsp;&emsp;è¿é€†ç åªèƒ½åº”ç”¨åœ¨ç‰©ç†å±‚ï¼Œå› ä¸ºè¿é€†ç æ— æ³•å‚¨å­˜ã€‚ å·®é”™æ£€æµ‹ï¼ˆError Detectionï¼‰&emsp;&emsp;é€šè¿‡å¢åŠ å†—ä½™ä½ï¼ˆEDCï¼‰æ¥æ£€æµ‹å·®é”™ã€‚ &emsp;&emsp;å·®é”™æ£€æµ‹ä¸æ˜¯100%å¯é çš„ã€‚ å¯èƒ½ä¼šæ¼æ‰ä¸€äº›é”™è¯¯ï¼Œä½†æ˜¯æ¦‚ç‡å¾ˆå° æ›´å¤§çš„EDCæ£€é”™èƒ½åŠ›æ›´å¼º å¥‡å¶æ ¡éªŒï¼ˆParity Checkingï¼‰ å•ä¸ªå¥‡å¶æ ¡éªŒä½ï¼ˆSingle Bit Parityï¼‰ &emsp;&emsp;åˆ†ä¸ºå¥‡æ ¡éªŒå’Œå¶æ ¡éªŒï¼ŒEDCé•¿åº¦ä¸º1 bitã€‚ å¦‚å‘é€ä¸€ä¸ªé•¿ä¸º$d$ bit çš„ä¿¡æ¯æ—¶ï¼ŒåŠ EDCä¸€å…±$d+1$ bitã€‚ å¶æ ¡éªŒä¸­ï¼Œåˆ™EDCéœ€ä½¿è¿™$d+1$ bit ä¸­æœ‰å¶æ•°ä¸ª1ï¼ˆå³å¦‚æœå‘é€çš„ä¿¡æ¯æœ‰å¶æ•°ä¸ª1ï¼Œåˆ™EDCä¸º0ï¼›å¥‡æ•°ä¸ª1ï¼Œåˆ™EDCä¸º1ï¼‰ å¥‡æ ¡éªŒä¸­ï¼Œåˆ™EDCéœ€ä½¿è¿™$d+1$ bit ä¸­æœ‰å¥‡æ•°ä¸ª1ï¼ˆå³å¦‚æœå‘é€çš„ä¿¡æ¯æœ‰å¶æ•°ä¸ª1ï¼Œåˆ™EDCä¸º1ï¼›å¥‡æ•°ä¸ª1ï¼Œåˆ™EDCä¸º0ï¼‰ &emsp;&emsp;ä¸‹å›¾é‡‡ç”¨å¶æ ¡éªŒï¼Œä¿¡æ¯Dä¸­å…±æœ‰9ä¸ª1ï¼Œæ‰€ä»¥å¶æ ¡éªŒä½ä¸º1ã€‚ &emsp;&emsp;å¥‡å¶æ ¡éªŒåªèƒ½æ£€æµ‹å‡ºå¥‡æ•°ä¸ªé”™è¯¯çš„æƒ…å†µã€‚ä½†ç”±äºç°åœ¨ä¼ è¾“çš„å‡†ç¡®ç‡å¾ˆé«˜ï¼Œå°±ç®—å‡ºé”™ï¼Œå¤§æ¦‚ç‡ä¹Ÿå°±å‡º 1 bit çš„é”™è¯¯ï¼Œæ‰€ä»¥ä½¿ç”¨ç®€å•çš„å¥‡å¶æ ¡éªŒä¹Ÿèƒ½æ£€æµ‹å‡ºå¤§éƒ¨åˆ†é”™è¯¯ã€‚ äºŒç»´å¥‡å¶æ ¡éªŒï¼ˆtwo-dimensional parityï¼‰ &emsp;&emsp;å°†$D$ä¸­çš„$d$ bit åˆ’åˆ†æˆ$i$è¡Œã€$j$åˆ—ï¼Œè®¡ç®—æ¯è¡Œå’Œæ¯åˆ—çš„å¥‡å¶æ ¡éªŒå€¼ï¼Œäº§ç”Ÿ$i+j+1$ä¸ªå¥‡å¶æ¯”ç‰¹ï¼Œå³ECDé•¿åº¦ä¸º$i+j+1$ bitã€‚ &emsp;&emsp;äºŒç»´å¥‡å¶æ ¡éªŒä¸ä»…å¯ä»¥æ£€æµ‹é”™è¯¯ï¼Œè¿˜å¯ä»¥åˆ©ç”¨å¥‡å¶æ ¡éªŒå·®é”™çš„è¡Œå’Œåˆ—çš„ç´¢å¼•æ‰¾å‡ºé”™è¯¯çš„æ¯”ç‰¹ä½ï¼Œè¿›è¡Œçº é”™ã€‚ CRCæ ¡éªŒï¼ˆCyclic Redundancy Checkï¼‰&emsp;&emsp;CRCï¼ˆCyclic Redundancy Checkï¼‰ï¼Œå¾ªç¯å†—ä½™æ£€æµ‹ã€‚ æ€è·¯ï¼šå‘é€ä¿¡æ¯$D$ï¼Œè®¾ç½®ä¸€ä¸ªç”Ÿæˆå¤šé¡¹å¼ï¼Œåˆ©ç”¨å†—ä½™ä½$R$ï¼Œå°†$D+R$å‡‘æˆç”Ÿæˆå¤šé¡¹å¼çš„æ•´æ•°å€ï¼Œåœ¨æ¥æ”¶æ–¹å¦‚æœæ— æ³•æ•´é™¤ï¼Œåˆ™å‡ºå·®é”™ã€‚ ç”Ÿæˆå¤šé¡¹å¼$G$å’ŒCRCæ¯”ç‰¹ä½æ•° &emsp;&emsp;è®¾ç½®ä¸€ä¸ª$r+1$ bit çš„ç”Ÿæˆå¤šé¡¹å¼ï¼Œå…ˆå°†ç”Ÿæˆå¤šé¡¹å¼$G(x)$åŒ–ä¸ºäºŒè¿›åˆ¶æ•°$G$ï¼Œæœ€é«˜ä½å¿…é¡»ä¸º$1$ã€‚ &emsp;&emsp;æ¯”å¦‚ä¸‹é¢ï¼Œä¸‰æ¬¡é¡¹å’Œå¸¸æ•°é¡¹ç³»æ•°ä¸º$1$ï¼Œåˆ™äºŒè¿›åˆ¶æ•°$G$çš„ç¬¬å››ä½å’Œç¬¬ä¸€ä½ä¸º$1$ G(x)=x^3+1\\ ,\\quad G=1001&emsp;&emsp;ç”Ÿæˆå¤šé¡¹å¼$G$ä¸º$r+1$ bitï¼Œåˆ™CRCå†—ä½™ä½ä¸º$r$ bitã€‚å¦‚æ­¤æ‰èƒ½ä¿è¯èƒ½æŠŠ$D+R$å‡‘æˆ$G$çš„æ•´æ•°ã€‚ è®¡ç®—CRCå†—ä½™ä½$R$ &emsp;&emsp;å¢åŠ $R$çš„ç›®çš„æ˜¯å®ç°ï¼š D\\times 2^r \\oplus R = nGå…ˆå°†ä¿¡æ¯$D$ä¹˜ä»¥$2^r$ï¼Œå³å·¦ç§»$r$ bitï¼Œåé¢è¡¥0ã€‚å†å°†ç§»ä½åçš„$D\\times 2^r$é™¤$G$ï¼Œä½†æ˜¯ä¸­é—´æ­¥éª¤ä¸ç”¨å‡ï¼Œè€Œç”¨å¼‚æˆ–ã€‚æ¯”å¦‚ 1001-1101=0100&emsp;&emsp;ä¿¡æ¯$D$ä¸º101110ï¼Œç”Ÿæˆå¤šé¡¹å¼$G(x)=x^3+1$ã€‚æ­¤æ—¶$r=3$ï¼Œå…ˆåœ¨$D$åè¡¥$3$ä¸ª0ï¼Œå¾—101110000ï¼Œå†é™¤ä»¥$G=1001$ å¾—åˆ°çš„ä½™æ•°011åˆ™ä¸ºCRCå†—ä½™ä½$R$ã€‚ &emsp;&emsp;å‘é€æ–¹å‘é€ä¿¡æ¯$D$å’Œå†—ä½™ä½$R$çš„æ‹¼æ¥ï¼Œå³101110011ã€‚ æ¥æ”¶æ–¹æ£€é”™ &emsp;&emsp;æ¥æ”¶æ–¹æ”¶åˆ°å‘é€æ–¹å‘æ¥çš„101110011åï¼Œå°†å…¶é™¤ä»¥ç”Ÿæˆå¤šé¡¹å¼$G$ 1001ã€‚å¦‚æœæ•´é™¤åˆ™æœªæ£€æµ‹åˆ°å·®é”™ï¼Œå¦åˆ™æ£€æµ‹åˆ°å·®é”™ã€‚ å¤šè·¯è®¿é—®é“¾è·¯å’Œåè®®ï¼ˆMultiple Access Links and Protocolsï¼‰é“¾è·¯çš„ä¸¤ç§ç±»å‹ï¼š ç‚¹å¯¹ç‚¹é“¾è·¯ï¼ˆpoint-to-point linkï¼‰ &emsp;&emsp;ç”±é“¾è·¯ä¸€ç«¯çš„å•ä¸ªå‘é€æ–¹å’Œé“¾è·¯å¦ä¸€ç«¯çš„å•ä¸ªæ¥æ”¶æ–¹ç»„æˆã€‚ å¹¿æ’­é“¾è·¯ï¼ˆbroadcast linkï¼‰ &emsp;&emsp;å¤šä¸ªå‘é€æ–¹å’Œæ¥æ”¶æ–¹ï¼Œå•ä¸€çš„ã€å…±äº«çš„ä¿¡é“ã€‚ &emsp;&emsp;å¤šè·¯è®¿é—®åè®®ï¼ˆMultiple access protocolï¼‰ï¼Œè§„èŒƒç»“ç‚¹åœ¨å…±äº«çš„å¹¿æ’­ä¿¡é“ä¸Šçš„ä¼ è¾“è¡Œä¸ºã€‚ å¤šè·¯è®¿é—®åè®®åˆ†ç±»ï¼š ä¿¡é“åˆ’åˆ†åè®®ï¼ˆchannel partitioning protocolï¼‰ é™æ€ å°†ä¿¡é“å¹³åˆ†ç»™å„èŠ‚ç‚¹ ä¼˜ç‚¹ï¼šå…¬å¹³ã€ç›¸äº’ä¸å¹²æ‰° ç¼ºç‚¹ï¼šé—²ç½®å æœ‰å¸¦å®½ éšæœºæ¥å…¥åè®®ï¼ˆrandom access protocolï¼‰ åŠ¨æ€ ç‹¬å ä¿¡é“ å…è®¸å†²çªï¼Œå¹¶èƒ½ä»å†²çªä¸­æ¢å¤ è½®æµåè®®ï¼ˆtaking-turns protocolï¼‰ ä¸Šä¸¤ç§çš„ç»“åˆ ç´§å¯†åè°ƒå…±äº«è®¿é—®ä»¥é¿å…å†²çª å¤šè·¯è®¿é—®åè®®çš„ç›®æ ‡ï¼šé«˜æ•ˆã€å…¬å¹³ã€ç®€å•ã€åˆ†å¸ƒå¼ ä¿¡é“åˆ’åˆ†åè®®ï¼ˆChannel Partitioning protocolsï¼‰æ—¶åˆ†å¤šè·¯å¤ç”¨ï¼ˆTDMAï¼‰&emsp;&emsp;TDMå°†æ—¶é—´åˆ’åˆ†ä¸ºæ—¶é—´å¸§ï¼ˆframeï¼‰ï¼Œå¹¶è¿›ä¸€æ­¥åˆ’åˆ†æ¯ä¸ªæ—¶é—´å¸§ä¸º$N$ä¸ªæ—¶éš™ï¼ˆslotï¼‰ï¼Œé“¾è·¯ä¸­çš„æ¯æ¡è¿æ¥ä¸“ç”¨ä¸€ä¸ªæ—¶éš™ã€‚ &emsp;&emsp;è¯¦è§ æ—¶åˆ†å¤šè·¯å¤ç”¨ï¼ˆTDMï¼‰ã€‚ é¢‘åˆ†å¤šè·¯å¤ç”¨ï¼ˆFDMAï¼‰&emsp;&emsp;é“¾è·¯ä¸­çš„æ¯æ¡è¿æ¥ä¸“ç”¨ä¸€ä¸ªé¢‘æ®µã€‚ &emsp;&emsp;è¯¦è§ æ—¶åˆ†å¤šè·¯å¤ç”¨ï¼ˆFDMï¼‰ ã€‚ ç åˆ†å¤šå€ï¼ˆCDMAï¼‰ &emsp;&emsp;è¯¦è§ ç åˆ†å¤šè·¯å¤ç”¨ï¼ˆCode division multiplexingï¼ŒCDMï¼‰) ã€‚ éšæœºæ¥å…¥åè®®ï¼ˆRandom Access protocolsï¼‰ ç»“ç‚¹ä¼ è¾“pktæ—¶ï¼Œå æœ‰ä¿¡é“å…¨éƒ¨å¸¦å®½ï¼Œç»“ç‚¹é—´æ— ä¼˜å…ˆçº§ å­˜åœ¨å¤šä¸ªä¼ è¾“ç»“ç‚¹ =&gt; ç¢°æ’ éšæœºæ¥å…¥åè®®æ˜ç¡®äº†ï¼š å¦‚ä½•æ£€æµ‹ç¢°æ’ å¦‚ä½•ä»ç¢°æ’ä¸­æ¢å¤ å¸¸ç”¨çš„éšæœºæ¥å…¥åè®® ALOHA Slotted ALOHA CSMA å’Œ CSMA/CD çº¯ALOHAï¼ˆPure ALOHAï¼‰ éæ—¶éš™ã€ç®€å•ã€å®Œå…¨åˆ†æ•£ æœ€æ—©çš„ALOHAï¼Œç›®å‰å·²ç»ä¸å†ä½¿ç”¨ å¸§é•¿ä¸€å®š =&gt; å¸§ä¼ è¾“æ—¶é—´ä¸€å®š å½“ä¸€å¸§é¦–æ¬¡åˆ°è¾¾ï¼ˆä»ç½‘ç»œå±‚ä¼ ä¸‹æ¥ï¼‰ï¼Œç»“ç‚¹ç«‹å³å°†è¯¥å¸§å®Œæ•´ä¼ è¾“è¿›å¹¿æ’­ä¿¡é“ å¦‚æœå‘é€ç¢°æ’ï¼Œåˆ™è¯¥ç»“ç‚¹ æœ‰$p$çš„æ¦‚ç‡ï¼Œå°†ç«‹å³ä»¥é‡ä¼ è¯¥å¸§ æœ‰$1-p$çš„æ¦‚ç‡ï¼Œç­‰å¾…ä¸€ä¸ªå¸§ä¼ è¾“æ—¶é—´ï¼Œå†ä»¥$p$çš„æ¦‚ç‡åˆ¤æ–­æ˜¯å¦é‡ä¼  &emsp;&emsp;å‡è®¾ä¸€å¸§åœ¨$t_0$å¤„å¼€å§‹ä¼ è¾“ï¼Œåˆ™åœ¨$[t_0-1,t_0+1]$ï¼Œå…¶ä»–ç»“ç‚¹å¦‚æœ‰ä¼ è¾“ï¼Œå‘ç”Ÿç¢°æ’ï¼Œåˆ™æ˜“æŸæ—¶é—´åŒºé•¿åº¦ä¸º$2\\tau$ï¼ˆ$tau$ä¸ºä¸€å¸§çš„ä¼ è¾“æ—¶é—´ï¼‰ã€‚ &emsp;&emsp;ä¸€ä¸ªç»“ç‚¹å‘é€æˆåŠŸï¼Œåˆ™éœ€è¦æœ¬ç»“ç‚¹å‘é€ã€å…¶ä»–ç»“ç‚¹åœ¨$[t_0-1,t_0]$å’Œ$[t_0,t_0+1]$ä¸å‘é€ã€‚ä¸€ä¸ªç»™å®šç»“ç‚¹æˆåŠŸä¼ é€çš„æ¦‚ç‡ä¸º \\begin{split} P(success\\ by\\ given\\ node)=&P(node\\ transmits)\\times\\\\ & P(no\\ other\\ node\\ transmits\\ in\\ [t_0-1,t_0])\\times\\\\ & P(no\\ other\\ node\\ transmits\\ in\\ [t_0,t_0+1])\\\\ =&p\\times (1-p)^{N-1}\\times (1-p)^{N-1}\\\\ =&p\\times (1-p)^{2(N-1)} \\end{split}åˆ™æœ‰$N$ä¸ªç»“ç‚¹ï¼Œä»»æ„ä¸€ä¸ªç»“ç‚¹æˆåŠŸä¼ é€çš„æ¦‚ç‡ä¸º S=Np(1-p)^{2(N-1)}å¦‚æ­¤ï¼Œæ±‚å¾—çº¯ALOHAçš„æœ€å¤§æ•ˆç‡ä¸º$1/(2e)\\approx 0.18$ï¼ˆæ”¹å˜$p$ï¼Œä½¿$S$æœ€å¤§åŒ–ï¼‰ã€‚ æ—¶éš™ALOHAï¼ˆSlotted ALOHAï¼‰ æ—¶é—´è¢«åˆ’åˆ†æˆé•¿åº¦ç›¸ç­‰çš„æ—¶éš™ï¼ˆslotï¼‰ ç»“ç‚¹åªåœ¨æ—¶éš™èµ·ç‚¹å¼€å§‹ä¼ è¾“å¸§ å¦‚æœç¢°æ’ï¼Œåœ¨ä¸‹ä¸€æ—¶éš™çš„å¼€å§‹ä»¥$p$çš„æ¦‚ç‡é‡ä¼ ï¼Œç›´è‡³æˆåŠŸã€‚ &emsp;&emsp;å‡è®¾ä¸€å¸§åœ¨$t_0$å¤„å¼€å§‹ä¼ è¾“ï¼Œåˆ™åœ¨æœ¬æ—¶éš™ä¸­ï¼Œå…¶ä»–ç»“ç‚¹å¦‚æœ‰ä¼ è¾“ï¼Œå‘ç”Ÿç¢°æ’ï¼Œåˆ™æ˜“æŸæ—¶é—´åŒºé•¿åº¦ä¸º$\\tau$ï¼ˆ$\\tau$ä¸ºä¸€å¸§çš„ä¼ è¾“æ—¶é—´ï¼‰ã€‚ &emsp;&emsp;ä¸€ä¸ªç»™å®šç»“ç‚¹æˆåŠŸä¼ é€çš„æ¦‚ç‡ä¸º S=p(1-p)^{N-1}&emsp;&emsp;å¦‚æœæœ‰$N$ä¸ªæ´»è·ƒç»“ç‚¹ï¼Œä»»æ„ä¸€ä¸ªç»“ç‚¹æˆåŠŸä¼ é€çš„æ¦‚ç‡ä¸º S=Np(1-p)^{N-1}å¦‚æ­¤ï¼Œæ±‚å¾—æ—¶éš™ALOHAçš„æœ€å¤§æ•ˆç‡ä¸º$1/e\\approx 0.37$ï¼ˆæ”¹å˜$p$ï¼Œä½¿$S$æœ€å¤§åŒ–ï¼‰ã€‚å³åœ¨æœ‰å¤§é‡ç»“ç‚¹æœ‰å¸§è¦ä¼ è¾“æ—¶ï¼Œæœ€å¤š$37%$çš„æ—¶éš™åšæœ‰ç”¨çš„å·¥ä½œï¼Œä¿¡é“ä¼ è¾“é€Ÿç‡ä¸æ˜¯$R$ bpsï¼Œè€Œæ˜¯$0.37R$ bpsã€‚ &emsp;&emsp;æ—¶éš™ALOHAçš„æœ€å¤§æ•ˆç‡æ˜¯çº¯ALOHAçš„ä¸¤å€ã€‚ CSMAï¼šè½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®&emsp;&emsp;è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®ï¼ˆCSMAï¼ŒCarrier Sense Multiple Accessï¼‰ï¼Œä¸€ä¸ªç»“ç‚¹åœ¨ä¼ è¾“å‰å…ˆä¾¦å¬ä¿¡é“ã€‚ å¦‚æœä¾¦å¬åˆ°ä¿¡é“ç©ºé—²ï¼Œåˆ™ä¼ è¾“å¸§ å¦‚æœä¾¦å¬åˆ°ä¿¡é“æ­£å¿™ï¼Œåˆ™æ¨è¿Ÿä¼ è¾“ã€‚å†ä¼ è¾“æ–¹å¼åˆ†ä¸ºåšæŒå‹å’ŒéåšæŒå‹ï¼š åšæŒå‹CSMAï¼ˆPersisitent CSMAï¼‰ï¼šä¸€ç›´åšæŒç›‘å¬ï¼Œç›´åˆ°ä¿¡é“ç©ºé—²æ—¶ï¼Œç«‹å³ä»¥æ¦‚ç‡$p$é‡è¯•ï¼ˆå¯èƒ½å¯¼è‡´ä¸ç¨³å®šï¼‰ã€‚å…¶ä¸­1-åšæŒå‹CSMAçš„$p=1$ï¼Œå³ç«‹å³é‡è¯•ã€‚ éåšæŒå‹CSMAï¼ˆNon-Persisitent CSMAï¼‰ï¼šä¸å†ç›‘å¬ï¼Œç­‰å¾…ä¸€ä¸ªéšæœºçš„æ—¶é—´ä¹‹åå†è¿›è¡Œç›‘å¬ã€‚ CSMAä¾æ—§ä¼šå‘ç”Ÿç¢°æ’ &emsp;&emsp;åªè¦å…±äº«ä¿¡é“ï¼Œé‚£ä¹ˆç¢°æ’å°±æ˜¯ä¸å¯é¿å…çš„ï¼Œå³ä½¿CSMAæœ‰ä¾¦å¬ã€‚ &emsp;&emsp;æ¯”å¦‚ä¸‹å›¾ä¸­ï¼ŒBç»“ç‚¹åœ¨$t_0$æ—¶ä¼ è¾“å¸§ï¼Œä½†æ˜¯å¸§çš„ä¼ è¾“æ˜¯éœ€è¦ä¸€å®šæ—¶é—´çš„ï¼Œè¿™å°±å¯¼è‡´åœ¨$t_1$æ—¶ï¼ŒDç»“ç‚¹ä¾¦å¬åˆ¤æ–­ä¿¡é“ç©ºé—²ï¼Œä¼ è¾“å¸§ã€‚ä¸¤ä¿¡å·å‘ç”Ÿç¢°æ’ã€‚ &emsp;&emsp;å¦‚æ­¤ï¼Œæ•´ä¸ªå¸§ä¼ è¾“æ—¶é—´è¢«æµªè´¹äº†ã€‚å¯ä»¥çœ‹å‡ºï¼Œå¹¿æ’­ä¿¡é“çš„ç«¯åˆ°ç«¯ä¿¡é“ä¼ æ’­æ—¶å»¶ï¼ˆdistance and propagation delayï¼‰ï¼ˆä¿¡å·ä»ä¸€ä¸ªç»“ç‚¹åˆ°å¦ä¸€ä¸ªç»“ç‚¹çš„ä¼ æ’­æ—¶é—´ï¼‰åœ¨å†³å®šæ€§èƒ½ä¸Šèµ·å…³é”®ä½œç”¨ã€‚ CSMA/CDï¼šå…·æœ‰ç¢°æ’æ£€æµ‹çš„è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—® ç¢°æ’è¦åœ¨çŸ­æ—¶é—´å†…æ£€æµ‹å‡ºæ¥ï¼ˆæœ€å¥½åœ¨ä¸€ä¸ªäº‰ç”¨æœŸå†…ï¼‰ ä¸€æ—¦æ£€æµ‹åˆ°ç¢°æ’ç«‹å³åœæ­¢ä¼ è¾“ï¼Œä»¥å‡å°‘ä¿¡é“çš„æµªè´¹ é‡‡æ ·åšæŒå‹æˆ–éåšæŒå‹é‡ä¼  ç¢°æ’æ£€æµ‹ æœ‰çº¿ç½‘ç»œæ£€æµ‹ç¢°æ’æ¯”è¾ƒç®€å•ï¼šå¦‚é˜ˆå€¼æ³•ã€è¿‡é›¶æ³•ç­‰ç­‰ æ— çº¿ç½‘ç»œæ£€æµ‹ç¢°æ’æ¯”è¾ƒå›°éš¾ &emsp;&emsp;å¦‚ä¸‹å›¾ï¼Œå½“Bç»“ç‚¹å’ŒDç»“ç‚¹æ£€æµ‹åˆ°ç¢°æ’æ—¶ï¼Œç«‹å³åœæ­¢ç»§ç»­å‘é€ã€‚ äº‰ç”¨æœŸï¼šä»¥å¤ªç½‘çš„ç«¯åˆ°ç«¯å¾€è¿”æ—¶é—´$2\\tau$ &emsp;&emsp;Aç»“ç‚¹ç»™Bç»“ç‚¹å‘é€å¸§æµï¼Œæœ€åæƒ…å†µå°±æ˜¯åœ¨å³å°†å‘é€åˆ°Bç»“ç‚¹æ—¶ï¼Œå‘ç”Ÿç¢°æ’ï¼Œè¿”å›ç¢°æ’ä¿¡æ¯ï¼Œæœ€å¤§ç”¨æ—¶å³ä¸º$2\\tau$ã€‚ æœ€çŸ­å¸§ï¼šæœ€çŸ­å¸§é•¿åº¦ä¸º$2\\tau R$ï¼ˆ$R$ä¸ºä¿¡é“é€Ÿç‡ï¼‰ &emsp;&emsp;å’Œä¸Šè¿°åŒæ ·çš„æœ€åæƒ…å†µä¸­ï¼Œä»Aç»“ç‚¹å‘é€å¸§ï¼Œåˆ°ç¢°æ’ä¿¡å·è¿”å›åˆ°Aç»“ç‚¹èŠ±è´¹$2\\tau$çš„æ—¶é—´ï¼Œåœ¨æ­¤æœŸé—´Aç»“ç‚¹ä¸èƒ½åœæ­¢å¸§çš„å‘é€ï¼Œæ‰€ä»¥æœ€çŸ­å¸§çš„é•¿åº¦ä¸º$2\\tau R$ã€‚ &emsp;&emsp;å¦‚æ­¤å¯ä»¥æœ€å¤§åˆ©ç”¨ç½‘ç»œæ•ˆç‡ï¼Œè€Œä¸”ä¸ä¼šäº§ç”ŸäºŒä¹‰å‹ã€‚å¦‚æœå‘é€å®Œäº†è¿™ä¸ªå¸§ï¼Œæ²¡æœ‰å‘ç”Ÿç¢°æ’ï¼Œåˆ™å‘ç”ŸæˆåŠŸã€‚ CSMA/CD æ•ˆç‡ &emsp;&emsp;CSMA/CD æ•ˆç‡ï¼šå½“æœ‰å¤§é‡çš„æ´»è·ƒç»“ç‚¹ï¼Œä¸”æ¯ä¸ªç»“ç‚¹æœ‰å¤§é‡çš„å¸§è¦å‘é€æ—¶ï¼Œå¸§åœ¨ä¿¡é“ä¸­æ— ç¢°æ’åœ°ä¼ è¾“çš„é‚£éƒ¨åˆ†æ—¶é—´åœ¨é•¿æœŸè¿è¡Œæ—¶é—´ä¸­æ‰€å çš„ä»½é¢ã€‚ efficiency = \\frac 1{1+t_{prop}/t_{trans}}å…¶ä¸­ï¼Œ$t_{prop}$ä¸ºä¸¤ç»“ç‚¹ä¹‹é—´çš„æœ€å¤§ä¼ æ’­æ—¶é—´ï¼› &emsp;&emsp;&emsp;$t_{trans}$ä¸ºä¼ è¾“ä¸€ä¸ªæœ€å¤§é•¿åº¦çš„å¸§çš„æ—¶é—´ã€‚ æ•ˆç‡è¶‹è¿‘1ï¼Œåˆ™éœ€ $t_{prop}$ -&gt; 0 æˆ–ï¼Œ$t_{trans}$ -&gt; $\\infty$ &emsp;&emsp;CSMA/CD æ¯” ALOHA ç®€å•ã€ä¾¿å®œã€åˆ†å¸ƒå¼ã€‚ è½®æµåè®®ï¼ˆTaking-Turns protocolï¼‰è½®è¯¢åè®®ï¼ˆPolling protocolï¼‰ æœ‰ä¸€ä¸ªä¸»ç»“ç‚¹ ä¸»ç»“ç‚¹ä»¥å¾ªç¯çš„æ–¹å¼è½®è¯¢æ¯ä¸ªç»“ç‚¹ ä¸»ç»“ç‚¹å…ˆå‘ä¸€ä¸ªç»“ç‚¹å‘é€æŠ¥æ–‡ï¼Œå‘Šè¯‰èƒ½å¤Ÿä¼ è¾“çš„å¸§çš„æœ€å¤šçš„æ•°é‡ï¼Œè¿™ä¸ªç»“ç‚¹ä¼ è¾“å®Œå¸§åï¼Œä¸»æœºç‚¹å†å‘ç»™ä¸‹ä¸€ä¸ªç»“ç‚¹æŠ¥æ–‡ï¼Œå¾ªç¯è½®è¯¢ã€‚ ç¼ºç‚¹ï¼š ä¸»ç»“ç‚¹éœ€å…ˆç»™ç»“ç‚¹å‘é€æŠ¥æ–‡ï¼Œå¢åŠ å¼€é”€ è½®è¯¢æ—¶å»¶ï¼Œä¸åŠæ—¶ å¦‚æœä¸»ç»“ç‚¹å‡ºæ•…éšœï¼Œåˆ™æ•´ä¸ªç½‘ç»œæ— æ³•å·¥ä½œ ä»¤ç‰Œä¼ é€’åè®®ï¼ˆToken-Passing protocolï¼‰ ä»¤ç‰Œï¼ˆtokenï¼‰åœ¨ç»“ç‚¹ä¹‹é—´ä»¥æŸç§å›ºå®šæ¬¡åºè¿›è¡Œäº¤æ¢ ç»“ç‚¹åªæœ‰åœ¨æ‹¿åˆ°ä»¤ç‰Œæ—¶ï¼Œæ‰èƒ½å‘é€å¸§ å—æ§çš„ï¼Œä¸ä¼šå‘ç”Ÿç¢°æ’ ç¼ºç‚¹ï¼š ä»¤ç‰Œå¼€é”€ æ—¶å»¶ ä»¤ç‰Œç¯ä¼šæ•…éšœ å±€åŸŸç½‘æŠ€æœ¯å±€åŸŸç½‘æ¨¡å‹&emsp;&emsp;å±€åŸŸç½‘æ¨¡å‹ä¸­ï¼Œæ•°æ®é“¾è·¯å±‚åˆ†ä¸ºLLCå­å±‚å’ŒMACå­å±‚ã€‚ é€»è¾‘é“¾è·¯æ§åˆ¶å±‚ï¼ˆLogical Link Controlï¼ŒLLCï¼‰ï¼šä¸ºä¸Šå±‚ï¼ˆç½‘ç»œå±‚ï¼‰æä¾›è¿æ¥ç¯å¢ƒ åª’ä½“æ¥å…¥å±‚ï¼ˆMedia Access Controlï¼ŒMACï¼‰ï¼šä¸ºä¸‹å±‚ï¼ˆç‰©ç†å±‚ï¼‰æä¾›åª’ä½“æ¥å…¥ å±€åŸŸç½‘åœ°å€å’ŒARPMAC åœ°å€ å¯ä»¥å«MAC åœ°å€ã€LANåœ°å€ã€ç‰©ç†åœ°å€ ç”¨äºä»ä¸€ä¸ªæ¥å£åˆ°å¦ä¸€ä¸ªç‰©ç†è¿æ¥çš„æ¥å£ï¼ˆåŒä¸€ç½‘ç»œï¼‰è·å–æ•°æ®æŠ¥ MACåœ°å€é•¿åº¦ï¼š$48$ bit / $6$ byte ä¸ç¡¬ä»¶æœ‰å…³ï¼Œä¸€ä¸ªç½‘å¡ï¼ˆé€‚é…å™¨ï¼‰å¯¹åº”ä¸€ä¸ªMACåœ°å€ ä¾‹å¦‚ï¼š1A-2F-BB-76-09-AD ä¸å±€åŸŸç½‘ç›¸è¿çš„æ¯ä¸ªæ¥å£éƒ½æœ‰å”¯ä¸€çš„MACåœ°å€ MACåœ°å€ç”±IEEEåˆ†é… IEEEç»™å…¬å¸å›ºå®šMACåœ°å€çš„å‰$24$ bitï¼Œå$24$ bitç”±å…¬å¸ä¿è¯æ¯ä¸ªé€‚é…å™¨MACåœ°å€çš„å”¯ä¸€æ€§ IPåœ°å€å’ŒMACåœ°å€çš„å…³ç³»ï¼šIPåœ°å€å°±åƒæ˜¯ä¸€ä¸ªé‚®ä»¶åœ°å€ï¼Œè§£å†³åœ¨å“ªä¸Šç½‘çš„é—®é¢˜ï¼›MACåœ°å€åƒèº«ä»½è¯ï¼Œè§£å†³è°åœ¨ä¸Šç½‘çš„é—®é¢˜ IPåœ°å€å±‚æ¬¡ç»“æ„ï¼Œä¸»æœºç§»åŠ¨ï¼Œä¸»æœºçš„IPåœ°å€ä¹Ÿæ”¹å˜ MACåœ°å€æ‰å¹³å¯»å€ç»“æ„ï¼Œä¸ä¼šå› ä¸ºä½ç½®æ”¹å˜MACåœ°å€ ARPï¼šåœ°å€è§£æåè®®&emsp;&emsp;ARPï¼ˆAddress Resolution Protocolï¼‰ï¼Œåœ°å€è§£æåè®® å±€åŸŸç½‘ä¸­çš„æ¯ä¸ªIPç»“ç‚¹ï¼ˆä¸»æœºã€è·¯ç”±å™¨ï¼‰éƒ½æœ‰ARPè¡¨ ARPè¡¨ï¼šå±€åŸŸç½‘ç»“ç‚¹çš„IPåœ°å€å’ŒMACåœ°å€çš„å¯¹åº”å…³ç³» æ¯è¡Œçš„ç»“æ„ï¼š&lt;IP address; MAC address; TTL&gt; TTLï¼šå­˜æ´»æ—¶é—´ï¼Œè¿‡TTLçš„æ—¶é—´è¦ä¸¢å¼ƒè¿™ä¸€è¡Œæ•°æ® åŒä¸€å­ç½‘å†…çš„åœ°å€è§£æ&emsp;&emsp;Aæƒ³è¦å‘é€æ•°æ®æŠ¥ç»™Bï¼Œä½†æ˜¯Bçš„MACåœ°å€æ²¡æœ‰è®°å½•åœ¨Açš„ARPè¡¨ä¸­ã€‚ Aå‘é€ä¸€ä¸ªå¹¿æ’­å¸§â€”â€”æŸ¥è¯¢ARPåˆ†ç»„ï¼ŒåŒ…å«Bçš„IPåœ°å€ ç›®çš„MACåœ°å€ï¼šFF-FF-FF-FF-FF-FF æ‰€æœ‰ç»“ç‚¹éƒ½ä¼šæ”¶åˆ°è¯¥ARPæŸ¥è¯¢åˆ†ç»„ Bæ¥æ”¶åˆ°ARPåˆ†ç»„ï¼Œç»™Aå›å¤Bçš„MACåœ°å€ ç»™Açš„MACåœ°å€å•æ’­å¸§â€”â€”å“åº”APRåˆ†ç»„ Aåœ¨ARPè¡¨ä¸­ç¼“å­˜IPåˆ°MACåœ°å€å¯¹ï¼Œç›´è‡³è¶…æ—¶TTL &emsp;&emsp;ARPå³æ’å³ç”¨ï¼šARPè¡¨è‡ªåŠ¨å»ºç«‹ï¼Œä¸éœ€è¦ç³»ç»Ÿç®¡ç†å‘˜æ¥é…ç½® ä¸åŒå­ç½‘çš„åœ°å€è§£æ&emsp;&emsp;ä¸åŒå­ç½‘çš„Aå’ŒBé€šè¿‡è·¯ç”±å™¨Rå‘é€æ•°æ®æŠ¥ï¼ŒAåªçŸ¥é“Bçš„IPåœ°å€ï¼Œä¸çŸ¥é“Bçš„MACåœ°å€ Aåˆ›å»ºIPæŠ¥æ–‡ï¼ˆIPåœ°å€åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­ä¸æ”¹å˜ï¼‰ æºIPåœ°å€ï¼šAçš„IP ç›®çš„IPåœ°å€ï¼šBçš„IP Aåˆ›å»ºæ•°æ®å¸§ï¼Œåœ¨IPæŠ¥æ–‡çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸ŠMACåœ°å€ æºMACåœ°å€ï¼šAçš„MAC ç›®çš„MACåœ°å€ï¼šè·¯ç”±å™¨Rå·¦ç«¯çš„MACï¼ˆè·¯ç”±å™¨Rå·¦ç«¯ä¸Aåœ¨ä¸€ä¸ªå­ç½‘ä¸­ï¼‰ å¸§ä»Aä¼ åˆ°è·¯ç”±å™¨R è·¯ç”±å™¨Ræ¥æ”¶å¸§ï¼Œå¹¶ä»è·¯ç”±å™¨Rçš„æ•°æ®é“¾è·¯å±‚ä¼ åˆ°ç½‘ç»œå±‚ï¼Œä»æ•°æ®å¸§æ‹†æˆIPæ•°æ®æŠ¥ è·¯ç”±å™¨Råœ¨IPæŠ¥æ–‡çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šæ–°çš„MACåœ°å€æ®µï¼Œä¼ åˆ°æ•°æ®é“¾è·¯å±‚ æºMACåœ°å€ï¼šè·¯ç”±å™¨Rå³ç«¯çš„MACï¼ˆè·¯ç”±å™¨Rå³ç«¯ä¸Båœ¨ä¸€ä¸ªå­ç½‘ä¸­ï¼‰ ç›®çš„MACåœ°å€ï¼šBçš„MAC å¸§ä»è·¯ç”±å™¨Rä¼ åˆ°Bï¼ŒBæ¥æ”¶åˆ°æ•°æ® ä»¥å¤ªç½‘ï¼ˆEnternetï¼‰ä»¥å¤ªç½‘ç‰©ç†æ‹“æ‰‘ æ€»çº¿å‹ &emsp;&emsp;æ—©æœŸæµè¡Œï¼Œæ‰€æœ‰çš„ç»“ç‚¹å…±ç”¨ä¸€æ¡æ€»çº¿ã€‚ æ˜Ÿå‹ &emsp;&emsp;ä»¥å¤ªç½‘ç°åœ¨ä½¿ç”¨çš„æ‹“æ‰‘ç»“æ„ï¼Œä¸­é—´æ˜¯äº¤æ¢æœºï¼Œæ‰€æœ‰ç»“ç‚¹å’Œäº¤æ¢æœºçš„è¿æ¥æ˜¯å”¯ä¸€çš„ï¼Œä¸ä¼šå‘ç”Ÿå†²çªã€‚ ä»¥å¤ªç½‘å¸§ç»“æ„ å‰å¯¼ç ï¼ˆPreambleï¼Œ7 byteï¼‰ 7 bytes çš„æ–¹æ³¢10101010ï¼Œç”¨äºâ€œå”¤é†’â€æ¥æ”¶é€‚é…å™¨ï¼Œå¹¶å°†å®ƒä»¬çš„æ—¶é’Ÿä¸å‘é€æ–¹çš„æ—¶é’ŸåŒæ­¥ã€‚ å¸§å¼€å§‹ç¬¦ï¼ˆStart of Frame Delimiter(SFD)ï¼Œ1 byteï¼‰ 10101011ï¼Œç”¨æ¥è­¦å‘Šæ¥æ”¶é€‚é…å™¨ï¼Œè¦å¼€å§‹äº†ã€‚ ç›®çš„MACåœ°å€ï¼ˆDestination addressï¼Œ6 byteï¼‰ ç›®çš„é€‚é…å™¨çš„MACåœ°å€ã€‚ æºMACåœ°å€ï¼ˆSource addressï¼Œ6 byteï¼‰ æºé€‚é…å™¨çš„MACåœ°å€ã€‚ ç±»å‹ï¼ˆTypeï¼Œ2 byteï¼‰ ä¸Šå±‚çš„åè®®ã€‚æ¯”å¦‚ï¼ŒIPåè®®å¯¹åº”0X0800ã€‚ æ•°æ®ï¼ˆDataï¼Œ46~1500 byteï¼‰ IPæ•°æ®æŠ¥ã€‚ æœ€å°é•¿åº¦â€”â€”46 byte ç”±$2\\tau R$å†³å®šã€‚IEEE 802.3ä¸­ï¼Œ$2\\tau$ä¸º$51.2\\mu s$ï¼Œ$R=10Mbps$ï¼Œç”±æ­¤å¾—åˆ°æœ€å°å¸§é•¿åº¦$64\\ bytes$ã€‚å†å‡å»$18\\ bytes$çš„å…¶ä»–éƒ¨åˆ†ï¼Œå¾—åˆ°æœ€å°æ•°æ®çš„é•¿åº¦$46\\ bytes$ã€‚ è¯¦è§CSMA-Cä¸­çš„æœ€çŸ­å¸§ã€‚ å°äºæœ€å°é•¿åº¦å¾—è¡¥å……åˆ°46 byteã€‚ æœ€å¤§é•¿åº¦â€”â€”1500 byte è¶…è¿‡æœ€å¤§é•¿åº¦å¾—åˆ†ç‰‡ã€‚ å¸§æ ¡éªŒåºåˆ—ï¼ˆFCSï¼Œ4 byteï¼‰ é”™è¯¯æ£€æµ‹æœºåˆ¶ï¼Œæ¯”å¦‚CRCã€‚ ä»¥å¤ªç½‘æŠ€æœ¯ æ— è¿æ¥ï¼šä¸éœ€è¦æ¡æ‰‹ ä¸å¯é ï¼šä¸éœ€è¦å‘é€ackæˆ–nack ä»¥å¤ªç½‘MACåè®®ï¼šéæ—¶éš™ã€1-åšæŒã€äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿çš„CSMA/CD äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿CSMA/CDç®—æ³•1234567891011121314A: //Aäº‹ä»¶sense channel, if idle //å¦‚æœä¾¦å¬ä¿¡é“ç©ºé—²then &#123; transmit and monitor the channel; //ä¼ è¾“å¹¶ç›‘å¬ä¿¡é“ï¼ˆç›‘å¬æ˜¯å¦æœ‰å…¶ä»–ç«™ç‚¹åœ¨ä¼ è¾“ï¼‰ if detect another transmission //å¦‚æœç›‘å¬åˆ°å…¶ä»–ç«™ç‚¹åœ¨ä¼ è¾“ then &#123; abort and send jam signal; //åœæ­¢å¹¶å‘é€jamä¿¡å·ï¼ˆå°†å†²çªä¿¡å·å‘é€ç»™å…¶ä»–ç«™ç‚¹ï¼‰ update # collisions; //æ›´æ–°å†²çªæ¬¡æ•°ï¼ˆå†²çªæ¬¡æ•°+1ï¼‰ delay as required by exponential backoff algorithm; //è°ƒç”¨äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•æ¥å»¶æ—¶ goto A //é‡æ–°æ‰§è¡ŒAäº‹ä»¶ &#125; else &#123;done with the frame; set collisions to zero&#125; //å¦‚æœåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­æ²¡ç›‘å¬åˆ°å…¶ä»–ç«™ç‚¹åœ¨ä¼ è¾“ï¼Œåˆ™å®Œæˆå¸§çš„ä¼ è¾“ï¼Œå¹¶å°†å†²çªæ¬¡æ•°æ¸…é›¶&#125;else &#123;wait until ongoing transmission is over and goto A&#125; //å¦‚æœä¾¦å¬ä¿¡é“åœ¨å¿™ï¼Œåˆ™ç»§ç»­ä¾¦å¬ï¼Œç›´è‡³ä¿¡é“ç©ºé—²ï¼Œå†å‘é€ï¼ˆ1-åšæŒï¼‰ï¼›å¦‚æœæ˜¯éåšæŒï¼Œåˆ™ç­‰å¾…ä¸€ä¸ªéšæœºçš„æ—¶é—´ä¹‹åå†è¿›è¡Œç›‘å¬ Jam Signalï¼šé•¿$48\\ bits$ï¼Œä¿è¯æ¯ä¸ªå…¶ä»–çš„å‘é€æ–¹æ„è¯†åˆ°å†²çª äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•ï¼ˆBinary Exponential Backoff Algorithmï¼‰&emsp;&emsp;ä¸€æ—¦æ£€æµ‹åˆ°å†²çªï¼Œä¸ºé™ä½å†å†²çªçš„æ¦‚ç‡ï¼Œéœ€è¦ç­‰å¾…ä¸€ä¸ªéšæœºæ—¶é—´ï¼ŒäºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•å³è§£å†³æ—¶å»¶æ—¶é—´çš„é—®é¢˜ã€‚ &emsp;&emsp;æ—¶å»¶çš„æ—¶é—´ä¸ºç«¯åˆ°ç«¯çš„å¾€è¿”æ—¶é—´$2\\tau$çš„æ•´æ•°å€ï¼Œå³$2\\tau \\times n$ï¼ˆ$n$ä¸ºæ•´æ•°ï¼‰ã€‚$k$ä¸ºå†²çªæ¬¡æ•°collisionsã€‚ åˆå§‹çš„å†²çªæ¬¡æ•°$k=0$ï¼› æ¯å†²çªä¸€æ¬¡ï¼Œåˆ™$k=k+1$ï¼› å¦‚æœ$k&lt;10$ï¼Œ$n$ä»$[0, 2^k)$ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªæ•´æ•°ï¼ˆæ³¨æ„âš ï¸ï¼šå³è¾¹ä¸ºå¼€åŒºé—´ï¼‰ï¼Œåˆ™å»¶æ—¶$2\\tau \\times n$çš„æ—¶é—´ï¼› å¦‚æœ$k\\geq 10$ï¼Œåˆ™$n$ä»${0,1,2,3,â€¦,1023}$ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªï¼Œå»¶æ—¶$2\\tau \\times n$çš„æ—¶é—´ã€‚ï¼ˆ$k$åœ¨$10$ä¹‹åå°±ä¸å†å¢åŠ æ—¶å»¶çš„é€‰æ‹©èŒƒå›´ï¼Œé˜²æ­¢å»¶æ—¶è¿‡é•¿ï¼‰ 802.3ä»¥å¤ªç½‘æ ‡å‡†ä¸åŒçš„ä»¥å¤ªç½‘æ ‡å‡†æœ‰ï¼š ç›¸åŒçš„MACåè®®å’Œå¸§æ ¼å¼ ä¸åŒçš„é€Ÿåº¦ï¼š$2/ Mbps$ã€$10\\ Mbps$ã€$100\\ Mbps$ç­‰ç­‰ ä¸åŒçš„ç‰©ç†å±‚åª’ä½“ï¼šå…‰çº¤ã€é“œçº¿ &emsp;&emsp;ä¸‹å›¾ä¸º$100\\ Mbps$ä»¥å¤ªç½‘æ ‡å‡†ï¼Œå…¶ä¸­100ä»£è¡¨$100\\ Mbpsï¼ŒTXã€T2ã€T4ä»£è¡¨åª’ä½“ä¸ºä¸åŒçš„é“œçº¿ï¼ŒFXã€SXã€BXä»£è¡¨åª’ä½“ä¸ºä¸åŒçš„å…‰çº¤ã€‚ äº¤æ¢æœºï¼ˆSwitchï¼‰é›†çº¿å™¨ï¼ˆHubï¼‰ ç‰©ç†å±‚è®¾å¤‡ï¼šç›¸å½“äºå·¥ä½œåœ¨bit å±‚çš„ä¼ è¯ç­’ï¼Œå°†æ¥æ”¶åˆ°çš„bitä»ä¸€ä¸ªæ¥å£ä¼ åˆ°å…¶ä»–çš„æ‰€æœ‰æ¥å£ å±‚çº§ç»“æ„ æ¯ä¸ªè¿æ¥çš„LANç§°ä¸ºLANç½‘æ®µ é›†çº¿å™¨ä¸ä¼šéš”ç¦»å†²çªåŸŸ é›†çº¿å™¨çš„ä¼˜ç‚¹ ç®€å•ä¾¿å®œ å¦‚æœä¸€ä¸ªé›†çº¿å™¨å‘ç”Ÿæ•…éšœï¼Œåˆ™å±€åŸŸç½‘çš„å…¶ä»–éƒ¨åˆ†å°†ç»§ç»­è¿è¡Œ æ‰©å±•èŠ‚ç‚¹å¯¹ä¹‹é—´çš„æœ€å¤§è·ç¦»ï¼ˆæ¯ä¸ªé›†çº¿å™¨100mï¼‰ é›†çº¿å™¨çš„ç¼ºç‚¹ æœªéš”ç¦»å†²çªåŸŸï¼Œå¯¼è‡´æœ€å¤§ååé‡æ²¡æœ‰å¢åŠ ï¼ˆå¤šå±‚ååé‡ä¸å•æ®µååé‡ç›¸åŒï¼‰ å•ç‹¬çš„LANé™åˆ¶å¯¹ç›¸åŒå†²çªåŸŸä¸­çš„ç»“ç‚¹æ•°ä»¥åŠå…è®¸çš„æ€»åœ°ç†è¦†ç›–èŒƒå›´è¿›è¡Œäº†é™åˆ¶ æ— æ³•è¿æ¥ä¸åŒçš„ä»¥å¤ªç½‘ç±»å‹ï¼ˆä¾‹å¦‚10BaseTå’Œ100baseTï¼‰ ç”±äºä¸Šè¿°ç¼ºé™·ï¼Œå¦‚ä»Šå¤§éƒ¨åˆ†é›†çº¿å™¨å·²è¢«äº¤æ¢æœºå–ä»£ ä»¥å¤ªç½‘äº¤æ¢æœºæ¦‚è¿° äº¤æ¢æœºï¼Œä¹Ÿå¯ä»¥å«ç½‘æ¡¥ é“¾è·¯å±‚è®¾å¤‡ å­˜å‚¨ã€è½¬å‘ä»¥å¤ªç½‘å¸§ æ£€æŸ¥ä¼ å…¥çš„å¸§çš„MACåœ°å€ï¼Œæœ‰é€‰æ‹©åœ°å°†å¸§è½¬å‘åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä¼ å‡ºé“¾è·¯ï¼Œä½¿ç”¨CSMA / CDè®¿é—®æ®µ æ”¶åˆ°çš„å¸§ä¸å‘é€çš„ç»“ç‚¹åœ¨åŒä¸€ç½‘æ®µï¼Œåˆ™ä¸¢å¼ƒè¯¥å¸§ æ”¶åˆ°çš„å¸§çš„ç›®çš„MACåœ°å€åœ¨è½¬å‘è¡¨é‡Œï¼Œä¸”ä¸å‘é€çš„ç»“ç‚¹ä¸åœ¨åŒä¸€ç½‘æ®µï¼Œåˆ™å‘ç›®çš„åœ°å€æ‰€å¯¹åº”ç«¯å£è½¬å‘è¯¥å¸§ æ”¶åˆ°çš„å¸§çš„ç›®çš„MACåœ°å€ä¸åœ¨è½¬å‘è¡¨é‡Œï¼Œåˆ™æ³›æ´ª é€æ˜ï¼šä¸»æœºä¸çŸ¥é“äº¤æ¢æœºçš„å­˜åœ¨ å³æ’å³ç”¨ï¼Œè‡ªå­¦ä¹ ï¼ˆä¸éœ€è¦é…ç½®äº¤æ¢æœºï¼‰ ä¸»æœºæœ‰ä¸“ç”¨çš„ã€ç›´æ¥çš„åˆ°äº¤æ¢æœºçš„è¿æ¥ äº¤æ¢æœºç¼“å­˜pkt æ¯ä¸ªè¾“å…¥é“¾è·¯éƒ½ä½¿ç”¨ä»¥å¤ªç½‘åè®®ï¼Œä½†æ˜¯æ²¡æœ‰å†²çª å…¨åŒå·¥ æ¯ä¸ªé“¾è·¯éƒ½æ˜¯è‡ªå·±çš„å†²çªåŸŸ Aè‡³Aâ€™å’ŒBè‡³Bâ€™å¯ä»¥åŒæ—¶ä¼ è¾“è€Œä¸ä¼šå‘ç”Ÿå†²çª äº¤æ¢æœºè‡ªå­¦ä¹  æ¯ä¸ªäº¤æ¢æœºéƒ½æœ‰ä¸€å¼ äº¤æ¢è¡¨ä½œä¸ºè½¬å‘è¡¨ï¼Œäº¤æ¢è¡¨çš„æ¯è¡Œæ•°æ®ä¸º&lt;MAC address, interface, TTL&gt;ï¼Œå³MACåœ°å€ã€é€šå‘è¯¥MACåœ°å€çš„æ¥å£ã€å­˜æ´»æ—¶é—´ã€‚ äº¤æ¢æœºè¡¨åˆå§‹ä¸ºç©º äº¤æ¢æœºæ¯æ¥æ”¶åˆ°ä¸€ä¸ªå¸§ï¼Œå°±è®°å½•ä¸€æ¡æ•°æ®ï¼ˆå‘é€ç»“ç‚¹çš„æ•°æ®ï¼‰ è¿‡äº†TTLï¼Œåˆ™åˆ æ‰è¯¥æ¡æ•°æ® äº¤æ¢æœºè½¬å‘ä¸è¿‡æ»¤123456789when frame received at switch: //äº¤æ¢æœºæ¥æ”¶åˆ°å¸§ 1. record incoming link, MAC address of sending host //åœ¨äº¤æ¢è¡¨ä¸­è®°å½•å‘é€æ–¹çš„ä¼ å…¥æ¥å£ã€MACåœ°å€ 2. index switch table using MAC destination address //åœ¨äº¤æ¢è¡¨ä¸­æŸ¥æ‰¾ç›®çš„MACåœ°å€ 3. if entry found for destination //å¦‚æœåœ¨äº¤æ¢è¡¨æ‰¾åˆ°äº†è¯¥ç›®çš„MACåœ°å€ then &#123; if destination on segment from which frame arrived then drop frame //å¦‚æœç›®çš„ä¸å‘é€æ–¹åœ¨åŒä¸€ç½‘æ®µï¼Œåˆ™ä¸¢å¼ƒè¯¥å¸§ else forward frame on interface indicated by entry //å¦‚æœä¸åœ¨åŒä¸€ç½‘æ®µï¼Œåˆ™è½¬å‘å¸§åˆ°ç›¸åº”æ¥å£ &#125; else flood //å¦‚æœåœ¨äº¤æ¢è¡¨æ‰¾åˆ°ä¸åˆ°è¯¥ç›®çš„MACåœ°å€ï¼Œåˆ™æ³›æ´ªï¼ˆè½¬å‘åˆ°é™¤å‘é€æ–¹æ‰€åœ¨æ¥å£ä»¥å¤–çš„æ‰€æœ‰æ¥å£ï¼‰ äº¤æ¢æœº vs è·¯ç”±å™¨ è·¯ç”±å™¨ äº¤æ¢æœº å­˜å‚¨è½¬å‘ æœ‰ æœ‰ æ‰€åœ¨å±‚ ç½‘ç»œå±‚è®¾å¤‡ï¼ˆæ£€æŸ¥ç½‘ç»œå±‚å¤´éƒ¨ï¼‰ é“¾è·¯å±‚è®¾å¤‡ï¼ˆæ£€æŸ¥é“¾è·¯å±‚å¤´éƒ¨ï¼‰ è½¬å‘è¡¨ ä½¿ç”¨è·¯ç”±ç®—æ³•ï¼ŒIPåœ°å€ ä½¿ç”¨æ³›æ´ªï¼Œè‡ªå­¦ä¹ ï¼ŒMACåœ°å€ VLANï¼šè™šæ‹Ÿå±€åŸŸç½‘&emsp;&emsp;äº¤æ¢æœºä»¥å¤ªç½‘å­˜åœ¨ç¼ºç‚¹ï¼šç¼ºä¹å¹¿æ’­éš”ç¦»ï¼Œå¯¼è‡´æ˜“äº§ç”Ÿå¹¿æ’­é£æš´ã€‚ &emsp;&emsp;ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œé‡‡ç”¨è™šæ‹Ÿå±€åŸŸç½‘VLANã€‚ &emsp;&emsp;VLANï¼šåœ¨å•ä¸ªLANå†…ï¼Œå°†æ”¯æŒVLANåŠŸèƒ½çš„äº¤æ¢æœºé…ç½®ä¸ºå¤šä¸ªè™šæ‹ŸLANã€‚ åŸºäºç«¯å£çš„VLAN&emsp;&emsp;å°†å•ä¸ªLANåŸºäºç«¯å£åˆ’åˆ†ä¸ºå¤šä¸ªVLANã€‚ æµé‡éš”ç¦»ï¼šå¸§åªèƒ½åœ¨æœ¬VLANå†…å¾€è¿”ï¼ˆVLANç›¸å½“äºä¸€ä¸ªçœŸå®çš„å±€åŸŸç½‘ï¼Œå°†åŠŸèƒ½é™åˆ¶åœ¨é“¾è·¯å±‚ï¼Œåªèƒ½ä¼ å¸§ï¼‰ VLANä¹‹é—´çš„è½¬å‘ï¼šé€šè¿‡è·¯ç”±å®Œæˆï¼ˆå°±åƒä½¿ç”¨å•ç‹¬çš„äº¤æ¢æœºä¸€æ ·ï¼‰ åŠ¨æ€æˆå‘˜èµ„æ ¼ï¼šç«¯å£å¯ä»¥åœ¨VLANä¹‹é—´åŠ¨æ€åˆ†é… è·¨å¤šä¸ªäº¤æ¢æœºçš„VLAN æœ€æ—©é‡‡ç”¨å®ä½“çº¿ç›¸è¿ï¼Œåé‡‡ç”¨ä¸­ç»§ç«¯å£ã€‚ ä¸­ç»§ç«¯å£ï¼ˆtrunk portï¼‰ï¼šä¹Ÿå¯ä»¥å«å…±äº«ç«¯å£ï¼Œåœ¨å¤šä¸ªç‰©ç†äº¤æ¢æœºä¸Šå®šä¹‰çš„VLANä¹‹é—´ä¼ é€å¸§ã€‚ ä¸‹å›¾ä¸­ï¼Œaä¸ºå®ä½“çº¿ç›¸è¿ï¼Œbä¸ºä¸­ç»§ç«¯å£è¿ã€‚ 802.1qï¼šåŸ802.1å¸§æœªå¸¦æœ‰VLANæ ‡è¯†ï¼Œæ‰€ä»¥802.1qåè®®ä¸ºä¸­ç»§ç«¯å£ä¹‹é—´è½¬å‘çš„å¸§æ·»åŠ /åˆ é™¤äº†å…¶ä»–æŠ¥å¤´å­—æ®µ å¢åŠ äº†$4\\ byte$ å‰$2\\ byte$ä¸ºåè®®æ ‡è¯† å$2\\ byte$ä¸­ï¼Œå‰$12\\ bit$ä¸ºVLANçš„IDï¼Œå$3\\ bit$ä¸ºä¼˜å…ˆçº§ ç”±äºä½æ•°æ”¹å˜ï¼ŒCRCéœ€é‡ç®—","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}]},{"title":"MATLABå­¦ä¹ æ‰‹å†Œ","slug":"MATLABå­¦ä¹ æ‰‹å†Œ","date":"2020-03-05T06:53:37.000Z","updated":"2024-11-11T03:57:58.119Z","comments":true,"path":"2020/03/05/MATLABå­¦ä¹ æ‰‹å†Œ/","link":"","permalink":"https://gy23333.github.io/2020/03/05/MATLAB%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C/","excerpt":"â€‹ MATLABæ˜¯MATrix LABoratoryï¼ˆçŸ©é˜µå®éªŒå®¤ï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€æ¬¾ç”±ç¾å›½The MathWorkså…¬å¸å‡ºå“çš„å•†ä¸šæ•°å­¦è½¯ä»¶ã€‚MATLABæ˜¯ä¸€ç§ç”¨äºç®—æ³•å¼€å‘ã€æ•°æ®å¯è§†åŒ–ã€æ•°æ®åˆ†æä»¥åŠæ•°å€¼è®¡ç®—çš„é«˜çº§æŠ€æœ¯è®¡ç®—è¯­è¨€å’Œäº¤äº’å¼ç¯å¢ƒã€‚é™¤äº†çŸ©é˜µè¿ç®—ã€ç»˜åˆ¶å‡½æ•°/æ•°æ®å›¾åƒç­‰å¸¸ç”¨åŠŸèƒ½å¤–ï¼ŒMATLABè¿˜å¯ä»¥ç”¨æ¥åˆ›å»ºç”¨æˆ·ç•Œé¢åŠä¸è°ƒç”¨å…¶å®ƒè¯­è¨€ï¼ˆåŒ…æ‹¬Cã€C++ã€Javaã€Pythonå’ŒFORTRANï¼‰ç¼–å†™çš„ç¨‹åºã€‚ä¸‹é¢æ˜¯å¯¹MATLABå®˜æ–¹ä¸­æ–‡æ–‡æ¡£çš„å­¦ä¹ æ€»ç»“ã€‚","text":"â€‹ MATLABæ˜¯MATrix LABoratoryï¼ˆçŸ©é˜µå®éªŒå®¤ï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€æ¬¾ç”±ç¾å›½The MathWorkså…¬å¸å‡ºå“çš„å•†ä¸šæ•°å­¦è½¯ä»¶ã€‚MATLABæ˜¯ä¸€ç§ç”¨äºç®—æ³•å¼€å‘ã€æ•°æ®å¯è§†åŒ–ã€æ•°æ®åˆ†æä»¥åŠæ•°å€¼è®¡ç®—çš„é«˜çº§æŠ€æœ¯è®¡ç®—è¯­è¨€å’Œäº¤äº’å¼ç¯å¢ƒã€‚é™¤äº†çŸ©é˜µè¿ç®—ã€ç»˜åˆ¶å‡½æ•°/æ•°æ®å›¾åƒç­‰å¸¸ç”¨åŠŸèƒ½å¤–ï¼ŒMATLABè¿˜å¯ä»¥ç”¨æ¥åˆ›å»ºç”¨æˆ·ç•Œé¢åŠä¸è°ƒç”¨å…¶å®ƒè¯­è¨€ï¼ˆåŒ…æ‹¬Cã€C++ã€Javaã€Pythonå’ŒFORTRANï¼‰ç¼–å†™çš„ç¨‹åºã€‚ä¸‹é¢æ˜¯å¯¹MATLABå®˜æ–¹ä¸­æ–‡æ–‡æ¡£çš„å­¦ä¹ æ€»ç»“ã€‚ å…¥é—¨çŸ©é˜µå’Œæ•°ç»„â€‹ æ‰€æœ‰ MATLAB å˜é‡éƒ½æ˜¯å¤šç»´æ•°ç»„ï¼Œä¸æ•°æ®ç±»å‹æ— å…³ã€‚çŸ©é˜µæ˜¯æŒ‡é€šå¸¸ç”¨æ¥è¿›è¡Œçº¿æ€§ä»£æ•°è¿ç®—çš„äºŒç»´æ•°ç»„ã€‚ æ•°ç»„åˆ›å»ºä¸€èˆ¬æ•°ç»„çš„åˆ›å»º åœ¨æ¯è¡Œä¸­ï¼Œç”¨ , æˆ–è€… ç©ºæ ¼æ¥åˆ†éš”æ¯ä¸ªå…ƒç´ ï¼› 1a = [1 2 3 4] ç”¨ ; æ¥åˆ†éš”æ¯è¡Œï¼Œå½¢æˆçŸ©é˜µï¼› 1a = [1 2 3; 4 5 6; 7 8 9] å‡½æ•°åˆ›å»ºçŸ©é˜µones å‡½æ•° æ ¼å¼ï¼šones(è¡Œæ•°, åˆ—æ•°) åŠŸèƒ½ï¼šåˆ›å»ºç”±1æ„æˆçš„è¡Œæ•°â¨‰åˆ—æ•°çš„çŸ©é˜µ 1ones(2,3) zeros å‡½æ•° æ ¼å¼ï¼šzeros(è¡Œæ•°, åˆ—æ•°) åŠŸèƒ½ï¼šåˆ›å»ºç”±0æ„æˆçš„è¡Œæ•°â¨‰åˆ—æ•°çš„çŸ©é˜µ 1zeros(2,3) çŸ©é˜µå’Œæ•°ç»„è¿ç®—â€‹ MATLAB å…è®¸ä½¿ç”¨å•ä¸€çš„ç®—æœ¯è¿ç®—ç¬¦æˆ–å‡½æ•°æ¥å¤„ç†çŸ©é˜µä¸­çš„æ‰€æœ‰å€¼ã€‚ â€‹ æ¯”å¦‚ sin(a) å³å¯å°†açŸ©é˜µä¸­çš„æ‰€æœ‰å€¼å¸¦å…¥ sinå‡½æ•°ã€‚ å‘½ä»¤ åŠŸèƒ½ a&#39; çŸ©é˜µè½¬ç½® inv(a) çŸ©é˜µæ±‚é€† a*b çŸ©é˜µçš„ä¹˜æ³• a.*b çŸ©é˜µå…ƒç´ çº§ä¹˜æ³• çŸ©é˜µä¸²è” [a, a] æ°´å¹³ä¸²è” [a; a] å‚ç›´ä¸²è” æ•°ç»„ç´¢å¼•æ³¨æ„ï¼šMATLABä¸­æ•°ç»„çš„å¼€å§‹ä¸‹æ ‡ä¸º 1ã€‚ å‘½ä»¤ åŠŸèƒ½ a(è¡Œä¸‹æ ‡, åˆ—ä¸‹æ ‡) å¾—åˆ°æŒ‡å®šè¡Œå’Œåˆ—ä¸‹æ ‡çš„å…ƒç´  a(ä¸‹æ ‡) ç”¨å•ä¸€ä¸‹æ ‡æŒ‰é¡ºåºå‘ä¸‹éå†æ¯ä¸€åˆ—ï¼Œå¾—åˆ°å•ä¸€å…ƒç´  a(å¼€å§‹è¡Œä¸‹æ ‡:ç»“æŸè¡Œä¸‹æ ‡, åˆ—ä¸‹æ ‡) å¾—åˆ°æŒ‡å®šåˆ—ï¼Œä»å¼€å§‹è¡Œåˆ°ç»“æŸè¡Œçš„å…ƒç´ æ•°ç»„ a(:, åˆ—ä¸‹æ ‡) å¾—åˆ°æŒ‡å®šåˆ—çš„å…ƒç´ æ•°ç»„ å·¥ä½œå˜é‡â€‹ å·¥ä½œåŒºåŒ…å«åœ¨ MATLAB ä¸­åˆ›å»ºæˆ–ä»æ•°æ®æ–‡ä»¶æˆ–å…¶ä»–ç¨‹åºå¯¼å…¥çš„å˜é‡ã€‚ whos å¯ä»¥æŸ¥çœ‹å·¥ä½œåŒºçš„å†…å®¹ã€‚ é€€å‡º MATLAB åï¼Œå·¥ä½œåŒºå˜é‡ä¸ä¼šä¿ç•™ã€‚ä½¿ç”¨ save å‘½ä»¤ä¿å­˜æ•°æ®ä»¥ä¾›å°†æ¥ä½¿ç”¨ save myfile.mat è¦æ¸…é™¤å·¥ä½œåŒºä¸­çš„æ‰€æœ‰å˜é‡ï¼Œè¯·ä½¿ç”¨ clear å‘½ä»¤ã€‚ ä½¿ç”¨ load å°† MAT æ–‡ä»¶ä¸­çš„æ•°æ®è¿˜åŸåˆ°å·¥ä½œåŒºã€‚load myfile.mat æ–‡æœ¬ä¸å­—ç¬¦ MATLABä¸­ç”¨ &quot;&quot; å®šä¹‰å­—ç¬¦ï¼› +è¿æ¥å­—ç¬¦æˆ–æ•°å­—ï¼› è°ƒç”¨å‡½æ•° æ ¼å¼ï¼š[è¾“å‡ºå˜é‡1, è¾“å‡ºå˜é‡2...] = functionName(è¾“å…¥å˜é‡1, è¾“å…¥å˜é‡2...) å°†ä»»ä½•å­—ç¬¦è¾“å…¥æ‹¬åœ¨å•å¼•å·ä¸­ clc å‡½æ•°æ¸…ç©ºå‘½ä»¤è¡Œçª—å£ äºŒç»´å›¾å’Œä¸‰ç»´å›¾äºŒç»´å›¾â€‹ ç”¨ plot å‡½æ•°åˆ›å»ºäºŒç»´çº¿å›¾ã€‚ 123456x = 0:pi/100:2*pi; %è‡ªå˜é‡æ•°ç»„y = sin(x); %å› å˜é‡å‡½æ•°plot(x,y) %æ˜¾ç¤ºx-yå›¾åƒxlabel('x') %xè½´æ ‡é¢˜ylabel('sin(x)') %yè½´æ ‡é¢˜title('Plot of the Sine Function') %æ€»æ ‡é¢˜ â€‹ åˆ©ç”¨hold onä¸€ä¸ªçª—å£æ˜¾ç¤ºä¸¤ä¸ªå›¾ã€‚ 123456789x = 0:pi/100:2*pi; y = sin(x); plot(x,y)hold on %ä¿ç•™ä½ç°çª—å£%æ˜¾ç¤ºç¬¬äºŒä¸ªå›¾å½¢y2 = cos(x); plot(x,y2,':') legend('sin','cos')hold off %å…³é—­çª—å£ ä¸‰ç»´å›¾ ä½¿ç”¨ meshgrid åœ¨æ­¤å‡½æ•°çš„åŸŸä¸­åˆ›å»ºä¸€ç»„ (x,y) ç‚¹ surf åˆ›å»ºæ›²é¢å›¾ 123mat[X,Y] = meshgrid(-2:.2:2); Z = X .* exp(-X.^2 - Y.^2);surf(X,Y,Z) %åˆ›å»ºæ›²é¢ å­å›¾â€‹ ä½¿ç”¨ subplot å‡½æ•°å¯ä»¥åœ¨åŒä¸€çª—å£çš„ä¸åŒå­åŒºåŸŸæ˜¾ç¤ºå¤šä¸ªç»˜å›¾ã€‚ æ ¼å¼ï¼šsubplot(a, b, c) åŠŸèƒ½ï¼šaâ¨‰bç½‘æ ¼ä¸­çš„ç¬¬cä¸ªä½ç½®æ˜¾ç¤ºå›¾å½¢ã€‚ 123456t = 0:pi/10:2*pi;[X,Y,Z] = cylinder(4*cos(t));subplot(2,2,1); mesh(X); title('X');subplot(2,2,2); mesh(Y); title('Y');subplot(2,2,3); mesh(Z); title('Z');subplot(2,2,4); mesh(X,Y,Z); title('X,Y,Z');","categories":[{"name":"MATLAB","slug":"MATLAB","permalink":"https://gy23333.github.io/categories/MATLAB/"}],"tags":[{"name":"MATLAB","slug":"MATLAB","permalink":"https://gy23333.github.io/tags/MATLAB/"}]},{"title":"é«˜æ–¯æ»¤æ³¢&å‡å€¼æ»¤æ³¢&ä¸­å€¼æ»¤æ³¢","slug":"é«˜æ–¯æ»¤æ³¢-å‡å€¼æ»¤æ³¢-ä¸­å€¼æ»¤æ³¢","date":"2020-03-01T09:13:02.000Z","updated":"2024-11-11T03:57:58.118Z","comments":true,"path":"2020/03/01/é«˜æ–¯æ»¤æ³¢-å‡å€¼æ»¤æ³¢-ä¸­å€¼æ»¤æ³¢/","link":"","permalink":"https://gy23333.github.io/2020/03/01/%E9%AB%98%E6%96%AF%E6%BB%A4%E6%B3%A2-%E5%9D%87%E5%80%BC%E6%BB%A4%E6%B3%A2-%E4%B8%AD%E5%80%BC%E6%BB%A4%E6%B3%A2/","excerpt":"â€‹ å›¾åƒæ»¤æ³¢ï¼Œå³åœ¨å°½é‡ä¿ç•™å›¾åƒç»†èŠ‚ç‰¹å¾çš„æ¡ä»¶ä¸‹å¯¹å™ªå£°è¿›è¡ŒæŠ‘åˆ¶ï¼Œé€šè¿‡æŠ‘åˆ¶é«˜é¢‘æ®µæ¥å‡å°‘å™ªéŸ³ï¼ŒåŒæ—¶ä¼šç…§æˆå›¾åƒä¸€å®šç¨‹åº¦ä¸Šçš„æ¨¡ç³Šï¼Œè¿™ä¹Ÿå«åšå¹³æ»‘æˆ–è€…ä½é€šæ»¤æ³¢å™¨ã€‚","text":"â€‹ å›¾åƒæ»¤æ³¢ï¼Œå³åœ¨å°½é‡ä¿ç•™å›¾åƒç»†èŠ‚ç‰¹å¾çš„æ¡ä»¶ä¸‹å¯¹å™ªå£°è¿›è¡ŒæŠ‘åˆ¶ï¼Œé€šè¿‡æŠ‘åˆ¶é«˜é¢‘æ®µæ¥å‡å°‘å™ªéŸ³ï¼ŒåŒæ—¶ä¼šç…§æˆå›¾åƒä¸€å®šç¨‹åº¦ä¸Šçš„æ¨¡ç³Šï¼Œè¿™ä¹Ÿå«åšå¹³æ»‘æˆ–è€…ä½é€šæ»¤æ³¢å™¨ã€‚ æ»¤æ³¢&emsp;&emsp;æ»¤æ³¢æœ¬æ¥åº”è¯¥æ˜¯åœ¨å‚…ç«‹å¶å˜æ¢çš„é¢‘è°±ä¸Šå¯¹å›¾åƒè¿›è¡Œå¤„ç†ï¼Œä½†ç”±äºå‚…ç«‹å¶çš„å·ç§¯ç‰¹æ€§ F[g*h]=F[g]F[h]æ»¤æ³¢åçš„å›¾åƒå¯ä»¥ç”±åŸå›¾åƒå’Œæ»¤æ³¢ç®—å­åšå·ç§¯ç”Ÿæˆï¼ˆé¢‘åŸŸçš„ä¹˜ç§¯ =&gt; ç©ºåŸŸçš„å·ç§¯ï¼‰ g*h=F^{-1}[F[g]F[h]]é«˜æ–¯æ»¤æ³¢â€‹ é«˜æ–¯æ»¤æ³¢å™¨æ˜¯åˆ©ç”¨é«˜æ–¯æ ¸çš„ä¸€ä¸ª2ç»´çš„å·ç§¯ç®—å­ï¼ˆçº¿æ€§æ»¤æ³¢å™¨ï¼‰ï¼Œå¯¹äºæŠ‘åˆ¶æœä»æ­£æ€åˆ†å¸ƒçš„å™ªå£°éå¸¸æœ‰æ•ˆã€‚ é«˜æ–¯åˆ†å¸ƒä¸€ç»´é«˜æ–¯åˆ†å¸ƒ &emsp;&emsp;å…¶ä¸­ï¼ŒÏƒæè¿°æ­£æ€åˆ†å¸ƒèµ„æ–™æ•°æ®åˆ†å¸ƒçš„ç¦»æ•£ç¨‹åº¦ï¼ŒÏƒè¶Šå¤§ï¼Œæ•°æ®åˆ†å¸ƒè¶Šåˆ†æ•£ï¼ŒÏƒè¶Šå°ï¼Œæ•°æ®åˆ†å¸ƒè¶Šé›†ä¸­ã€‚ä¹Ÿç§°ä¸ºæ˜¯æ­£æ€åˆ†å¸ƒçš„å½¢çŠ¶å‚æ•°ï¼ŒÏƒè¶Šå¤§ï¼Œæ›²çº¿è¶Šæ‰å¹³ï¼Œåä¹‹ï¼ŒÏƒè¶Šå°ï¼Œæ›²çº¿è¶Šç˜¦é«˜ã€‚ äºŒç»´é«˜æ–¯åˆ†å¸ƒ é«˜æ–¯æ ¸&emsp;&emsp;é«˜æ–¯æ ¸ä¸»è¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼šé«˜æ–¯æ ¸çš„å¤§å°ã€ç¦»æ•£ç¨‹åº¦Ïƒ 1h = fspecial('gaussian',hsize,sigma) é«˜æ–¯æ ¸çš„å¤§å°ï¼šæŒ‰é«˜æ–¯åˆ†å¸ƒï¼Œç†è®ºä¸Šéœ€è¦ä¸€ä¸ªæ— é™å¤§çš„å·ç§¯æ ¸ã€‚ä½†å®é™…ä¸Šï¼Œä»…éœ€è¦å–å‡å€¼å‘¨å›´3å€æ ‡å‡†å·®å†…çš„å€¼ï¼ˆé«˜æ–¯æ ¸å•è¾¹å¤§å°ä¸º3Ïƒï¼‰ï¼Œä»¥å¤–éƒ¨åˆ†ç›´æ¥å»æ‰å³å¯ã€‚ï¼ˆæ²¡å¿…è¦ç”¨å¾ˆå¤§çš„é«˜æ–¯æ ¸ï¼‰ ç¦»æ•£ç¨‹åº¦Ïƒï¼šÏƒè¶Šå¤§ï¼Œæ•°æ®åˆ†å¸ƒè¶Šåˆ†æ•£ï¼Œå¹³æ»‘ç¨‹åº¦è¶Šå¼ºï¼Œå¯¹é«˜é¢‘çš„æŠ‘åˆ¶ç¨‹åº¦æ›´å¤§ã€‚ &emsp;&emsp;é«˜æ–¯æ»¤æ³¢å†é«˜æ–¯æ»¤æ³¢è¿˜æ˜¯é«˜æ–¯æ»¤æ³¢ï¼Œä¸¤ä¸ªÏƒçš„é«˜æ–¯æ»¤æ³¢ç›¸å½“äºä¸€æ¬¡$\\sqrt{2}\\sigma$ã€‚ Matlabå®ç°Gauss123456789101112131415img = imread('Lenna.jpg');img = rgb2gray(img);sigma = 1;gausFilter = fspecial('gaussian', [5,5], sigma);gaus= imfilter(img, gausFilter, 'replicate');subplot(2,3,1),imshow(img,[]),title('åŸå›¾');subplot(2,3,2),imshow(gausFilter,[]),title('é«˜æ–¯æ ¸');subplot(2,3,3),imshow(gaus,[]),title('é«˜æ–¯æ»¤æ³¢åçš„å›¾åƒ');F1 = DFT(img);F2 = DFT(gausFilter);F3 = DFT(gaus);subplot(2,3,4),imshow(F1,[]),title('åŸå›¾çš„é¢‘è°±å›¾');subplot(2,3,5),imshow(F2,[]),title('é«˜æ–¯æ ¸çš„é¢‘è°±å›¾');subplot(2,3,6),imshow(F3,[]),title('é«˜æ–¯æ»¤æ³¢åçš„é¢‘è°±å›¾'); Gauss1234567function F = DFT(img)% ç¦»æ•£å‚…é‡Œå¶å˜æ¢é¢‘è°±å›¾img_Double = double(img);% å°†ç°åº¦å›¾å½’ä¸€åŒ–å¤„ç†F = fft2(img_Double); % äºŒç»´å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ F = fftshift(F); % FFTé¢‘è°±å¹³ç§»F = log(1+abs(F)); % é¢‘è°±å¯¹æ•°å˜æ¢ï¼ˆç”±äºå¹…åº¦å€¼èŒƒå›´å¾ˆå¤§ï¼Œæ‰€ä»¥è¦å–å¯¹æ•°å¤„ç†ï¼‰end &emsp;&emsp;å¯ä»¥çœ‹å‡ºå›¾åƒçš„é«˜é¢‘éƒ¨åˆ†å—åˆ°äº†æŠ‘åˆ¶ï¼Œä½†å¹¶ä¸æ˜¯å®Œå…¨æˆªæ–­äº†é«˜é¢‘ã€‚ç©ºåŸŸä¸­çš„é«˜æ–¯åˆ°é¢‘åŸŸä¸­ä¾æ—§æ˜¯é«˜æ–¯ã€‚ &emsp;&emsp; openCVå®ç°ï¼ˆopenCVæä¾›çš„å‡½æ•°ï¼‰cv :: GaussianBlurâ€‹ openCVè‡ªå¸¦çš„é«˜æ–¯æ»¤æ³¢å™¨ï¼šcv :: GaussianBlur åº“æ–‡ä»¶ï¼š#include &lt;opencv2/imgproc.hpp&gt; ä½œç”¨ï¼šè¯¥å‡½æ•°å°†æºå›¾åƒä¸æŒ‡å®šçš„é«˜æ–¯å†…æ ¸è¿›è¡Œå·ç§¯ã€‚ è°ƒç”¨æ–¹æ³• void cv::GaussianBlur ( InputArray src, OutputArray dst, Size ksize, double sigmaX, double sigmaY = 0, int borderType = BORDER_DEFAULT ) å‚é‡ src è¾“å…¥å›¾åƒï¼›å›¾åƒå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„é€šé“ï¼Œè¿™äº›é€šé“å¯ä»¥ç‹¬ç«‹å¤„ç†ï¼Œä½†æ·±åº¦åº”ä¸ºCV_8Uï¼ŒCV_16Uï¼ŒCV_16Sï¼ŒCV_32Fæˆ–CV_64Fã€‚ dst è¾“å‡ºä¸srcå¤§å°å’Œç±»å‹ç›¸åŒçš„å›¾åƒã€‚ size é«˜æ–¯æ ¸å¤§å°ã€‚ksize.widthå’Œksize.heightå¯ä»¥ä¸åŒï¼Œä½†å®ƒä»¬éƒ½å¿…é¡»ä¸ºæ­£æ•°å’Œå¥‡æ•°ã€‚æˆ–è€…ï¼Œå®ƒä»¬å¯ä»¥ä¸ºé›¶ï¼Œç„¶åæ ¹æ®sigmaè®¡ç®—å¾—å‡ºã€‚ sigmaX Xæ–¹å‘ä¸Šçš„é«˜æ–¯æ ¸æ ‡å‡†åå·®ã€‚ sigmaY Yæ–¹å‘çš„é«˜æ–¯æ ¸æ ‡å‡†å·®ï¼›å¦‚æœsigmaYä¸ºé›¶ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸ºç­‰äºsigmaXï¼›å¦‚æœä¸¤ä¸ªsigmasä¸ºé›¶ï¼Œåˆ™åˆ†åˆ«ä»ksize.widthå’Œksize.heightè®¡ç®—å¾—å‡ºï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§getGaussianKernelï¼‰ï¼›ä¸ºäº†å®Œå…¨æ§åˆ¶ç»“æœï¼Œè€Œä¸ç®¡å°†æ¥å¯èƒ½å¯¹æ‰€æœ‰è¿™äº›è¯­ä¹‰è¿›è¡Œçš„ä¿®æ”¹ï¼Œå»ºè®®æŒ‡å®šæ‰€æœ‰ksizeï¼ŒsigmaXå’ŒsigmaYã€‚ borderType åƒç´ å¤–æ¨æ–¹æ³•ï¼Œè¯·å‚è§BorderTypes ä»£ç 12345678910111213141516171819202122#include &lt;opencv2/opencv.hpp&gt;#include &lt;opencv2/imgproc.hpp&gt;using namespace cv;int main() &#123; Mat src = imread(\"Lenna.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ Mat dst; // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (src.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return 0; &#125; // é«˜æ–¯æ»¤æ³¢ï¼Œé«˜æ–¯æ ¸å¤§å°ä¸º5*5 GaussianBlur(src, dst, Size(5,5), 0); imshow(\"dst\",dst); imwrite(\"gas_openCV.jpg\", dst); waitKey(); return 0;&#125; ç»“æœ åŸå›¾åƒå’Œç»é«˜æ–¯æ»¤æ³¢åå›¾åƒçš„å‚…ç«‹å¶å˜æ¢é¢‘è°± C++å®ç°ï¼ˆå‡½æ•°è‡ªå·±ç¼–å†™ï¼‰â€‹ å¦‚åˆ©ç”¨5*5çš„é«˜æ–¯æ ¸ï¼Œå¯¹å›¾åƒè¿›è¡Œå·ç§¯ã€‚ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;opencv2/opencv.hpp&gt;using namespace cv;/* åˆ©ç”¨5*5çš„é«˜æ–¯æ ¸è¿›è¡Œé«˜æ–¯æ»¤æ³¢ img è¾“å…¥åŸå›¾åƒ dst é«˜æ–¯æ»¤æ³¢åçš„è¾“å‡ºå›¾åƒ */void Gaussian_Blur(Mat &amp;img, Mat &amp;dst)&#123; int Kernel[5][5] = &#123; &#123;1, 4, 7, 4, 1&#125;, &#123;4,16,26,16, 4&#125;, &#123;7,26,41,26, 7&#125;, &#123;4,16,26,16, 4&#125;, &#123;1, 4, 7, 4, 1&#125;, &#125;; //5*5çš„é«˜æ–¯æ ¸ // ä¸5*5çš„é«˜æ–¯æ ¸åšå·ç§¯ for (int nrow = 2; nrow &lt; img.rows-2; nrow++) &#123; for (int ncol = 2; ncol &lt; img.cols-2; ncol++) &#123; int point = 0; for (int i = 0; i &lt; 5; i++) &#123; for (int j = 0; j &lt; 5; j++) &#123; point += Kernel[i][j] * img.ptr&lt;uchar&gt;(nrow+i-2)[ncol+j-2]; &#125; &#125; dst.ptr&lt;uchar&gt;(nrow)[ncol] = point/273; &#125; &#125;&#125;int main() &#123; Mat src = imread(\"Lenna.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ Mat dst = src.clone(); // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (src.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return 0; &#125; // é«˜æ–¯æ»¤æ³¢ï¼Œé«˜æ–¯æ ¸å¤§å°ä¸º5*5 GaussianBlur(src, dst, Size(5,5), 0); imshow(\"dst\",dst); imwrite(\"gas.jpg\", dst); waitKey(); return 0;&#125; ç»“æœ â€‹ è¯¥é«˜æ–¯æ»¤æ³¢ç»“æœä¸openCVæ»¤æ³¢ç»“æœåŸºæœ¬ä¸€è‡´ã€‚ å‡å€¼æ»¤æ³¢â€‹ å‡å€¼æ»¤æ³¢æ˜¯ç©ºé—´åŸŸçº¿æ€§æ»¤æ³¢å™¨ï¼Œå…¶ä¸­æ‰€å¾—åˆ°çš„å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ å…·æœ‰çš„å€¼ç­‰äºå…¶é‚»è¿‘çš„åƒç´ çš„è¾“å…¥å›¾åƒä¸­çš„å¹³å‡å€¼ã€‚å®ƒæ˜¯ä½é€šï¼ˆâ€œæ¨¡ç³Šâ€ï¼‰æ»¤æ³¢å™¨çš„ä¸€ç§å½¢å¼ã€‚ openCVå®ç°ï¼ˆopenCVæä¾›çš„å‡½æ•°ï¼‰cv::blurâ€‹ openCVè‡ªå¸¦çš„å‡å€¼æ»¤æ³¢å™¨ï¼šcv::blur åº“æ–‡ä»¶ï¼š#include &lt;opencv2/imgproc.hpp&gt; ä½œç”¨ï¼šä½¿ç”¨å½’ä¸€åŒ–æ¡†æ»¤æ³¢æ¨¡ç³Šå›¾åƒã€‚ è°ƒç”¨æ–¹æ³• void cv::blur ( InputArray src, OutputArray dst, Size ksize, Point anchor = Point(-1,-1), int borderType = BORDER_DEFAULT ) å‚æ•° src è¾“å…¥å›¾åƒï¼›å®ƒå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„é€šé“ï¼Œè¿™äº›é€šé“å¯ä»¥ç‹¬ç«‹å¤„ç†ï¼Œä½†æ·±åº¦åº”ä¸ºCV_8Uï¼ŒCV_16Uï¼ŒCV_16Sï¼ŒCV_32Fæˆ–CV_64Fã€‚ dst è¾“å‡ºä¸srcå¤§å°å’Œç±»å‹ç›¸åŒçš„å›¾åƒã€‚ å¤§å° å†…æ ¸å¤§å°æ¨¡ç³Šã€‚ é”š é”šç‚¹ é»˜è®¤å€¼Pointï¼ˆ-1ï¼Œ-1ï¼‰è¡¨ç¤ºé”šç‚¹ä½äºå†…æ ¸ä¸­å¿ƒã€‚ borderType ç”¨äºæ¨æ–­å›¾åƒå¤–éƒ¨åƒç´ çš„è¾¹æ¡†æ¨¡å¼ ä»£ç 12345678910111213141516171819202122#include &lt;opencv2/opencv.hpp&gt;#include &lt;opencv2/imgproc.hpp&gt;using namespace cv;int main() &#123; Mat src = imread(\"Lenna.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ Mat dst; // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (src.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return 0; &#125; // å‡å€¼æ»¤æ³¢ï¼Œæ ¸å¤§å°ä¸º5*5 blur(src, dst, Size(5, 5)); imshow(\"dst\",dst); imwrite(\"box_openCV.jpg\", dst); waitKey(); return 0;&#125; ç»“æœ åŸå›¾åƒå’Œç»å‡å€¼æ»¤æ³¢åå›¾åƒçš„å‚…ç«‹å¶å˜æ¢é¢‘è°± C++å®ç°ï¼ˆå‡½æ•°è‡ªå·±ç¼–å†™ï¼‰â€‹ åˆ©ç”¨5*5çš„å‡å€¼æ»¤æ³¢å™¨ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;opencv2/opencv.hpp&gt;using namespace cv;/* åˆ©ç”¨5*5çš„å‡å€¼æ»¤æ³¢ img è¾“å…¥åŸå›¾åƒ dst å‡å€¼æ»¤æ³¢åçš„è¾“å‡ºå›¾åƒ */void Blur(Mat &amp;img, Mat &amp;dst)&#123; int Kernel[5][5] = &#123; &#123;1, 1, 1, 1, 1&#125;, &#123;1, 1, 1, 1, 1&#125;, &#123;1, 1, 1, 1, 1&#125;, &#123;1, 1, 1, 1, 1&#125;, &#123;1, 1, 1, 1, 1&#125;, &#125;; //5*5çš„æ ¸ // ä¸5*5çš„æ ¸åšå·ç§¯ for (int nrow = 2; nrow &lt; img.rows-2; nrow++) &#123; for (int ncol = 2; ncol &lt; img.cols-2; ncol++) &#123; int point = 0; for (int i = 0; i &lt; 5; i++) &#123; for (int j = 0; j &lt; 5; j++) &#123; point += Kernel[i][j] * img.ptr&lt;uchar&gt;(nrow+i-2)[ncol+j-2]; &#125; &#125; dst.ptr&lt;uchar&gt;(nrow)[ncol] = point/25; &#125; &#125;&#125;int main() &#123; Mat src = imread(\"Lenna.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ Mat dst = src.clone(); // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (src.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return 0; &#125; // å‡å€¼æ»¤æ³¢ï¼Œæ ¸å¤§å°ä¸º5*5 Blur(src, dst); imshow(\"dst\",dst); imwrite(\"box.jpg\", dst); waitKey(); return 0;&#125; ç»“æœ ä¸­å€¼æ»¤æ³¢â€‹ ä¸­å€¼æ»¤æ³¢æ˜¯ä¸€ç§éçº¿æ€§æ»¤æ³¢å™¨ï¼Œåˆ©ç”¨é‡‡é›†é¢†åŸŸçš„ä¸­å€¼çš„æ–¹æ³•ï¼Œå¯¹å™ªå£°è¿›è¡ŒæŠ‘åˆ¶ã€‚å°¤å…¶å¯¹äºæ¤’ç›å™ªå£°æœ‰ç”¨ã€‚ openCVå®ç°ï¼ˆopenCVæä¾›çš„å‡½æ•°ï¼‰cv::medianBlurâ€‹ openCVè‡ªå¸¦çš„å‡å€¼æ»¤æ³¢å™¨ï¼šcv::medianBlur åº“æ–‡ä»¶ï¼š#include &lt;opencv2/imgproc.hpp&gt; ä½œç”¨ï¼šä½¿ç”¨ä¸­å€¼æ»¤æ³¢æ¨¡ç³Šå›¾åƒã€‚ è°ƒç”¨æ–¹æ³• void cv::medianBlur ( InputArray src, OutputArray dst, int ksize ) å‚æ•° src è¾“å…¥1ã€3æˆ–4é€šé“å›¾åƒ; å½“ksizeä¸º3æˆ–5æ—¶ï¼Œå›¾åƒæ·±åº¦åº”ä¸ºCV_8Uï¼ŒCV_16Uæˆ–CV_32Fï¼Œå¯¹äºè¾ƒå¤§çš„å…‰åœˆï¼Œåªèƒ½ä¸ºCV_8Uã€‚ dst ä¸srcå…·æœ‰ç›¸åŒå¤§å°å’Œç±»å‹çš„ç›®æ ‡æ•°ç»„ã€‚ å¤§å° å­”å¾„çº¿æ€§å°ºå¯¸ï¼›å®ƒå¿…é¡»æ˜¯å¥‡æ•°ä¸”å¤§äº1ï¼Œä¾‹å¦‚ï¼š3ã€5ã€7 â€¦ ä»£ç 12345678910111213141516171819202122#include &lt;opencv2/opencv.hpp&gt;#include &lt;opencv2/imgproc.hpp&gt;using namespace cv;int main() &#123; Mat src = imread(\"Lenna.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ Mat dst; // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (src.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return 0; &#125; // ä¸­å€¼æ»¤æ³¢ï¼Œé¢†åŸŸå¤§å°ä¸º5*5 medianBlur(src, dst, 5); imshow(\"dst\",dst); imwrite(\"median_openCV.jpg\", dst); waitKey(); return 0;&#125; ç»“æœ C++å®ç°ï¼ˆå‡½æ•°è‡ªå·±ç¼–å†™ï¼‰ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#include &lt;opencv2/opencv.hpp&gt;using namespace cv;/* ä¸­å€¼æ»¤æ³¢ img è¾“å…¥åŸå›¾åƒ dst ä¸­å€¼æ»¤æ³¢åçš„è¾“å‡ºå›¾åƒ ksize é¢†åŸŸå¤§å° */void median_blur(Mat &amp;img, Mat &amp;dst, int ksize)&#123; for (int nrow = 2; nrow &lt; img.rows-2; nrow++) &#123; for (int ncol = 2; ncol &lt; img.cols-2; ncol++) &#123; vector&lt;int&gt; points; for (int i = 0; i &lt; ksize; i++) &#123; for (int j = 0; j &lt; ksize; j++) &#123; points.push_back(img.ptr&lt;uchar&gt;(nrow+i-2)[ncol+j-2]); &#125; &#125; for (int i = 0; i &lt; points.size()/2+1; i++) &#123; int minIndex = i; int j; for (j = i+1; j &lt; points.size(); j++) &#123; if (points[j] &lt; points[i]) &#123; minIndex = j; &#125; &#125; int temp = points[i]; points[i] = points[minIndex]; points[minIndex] = temp; &#125; dst.ptr&lt;uchar&gt;(nrow)[ncol] = points[points.size()/2]; &#125; &#125;&#125;int main() &#123; Mat src = imread(\"Lenna.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ Mat dst = src.clone(); // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (src.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return 0; &#125; // ä¸­å€¼æ»¤æ³¢ï¼Œé¢†åŸŸå¤§å°ä¸º5*5 median_blur(src, dst, 5); imshow(\"dst\",dst); imwrite(\"median.jpg\", dst); waitKey(); return 0;&#125; ç»“æœ å¯¹æ¯”æ¦‚è¿°â€‹ ä»Lennaå›¾æ— æ³•çœ‹å‡ºä¸Šé¢ä¸‰ç§æ»¤æ³¢å¤ªå¤§çš„åŒºåˆ«ï¼Œä½†å¯ä»¥æ˜æ˜¾çœ‹å‡ºåœ¨åŒæ ·çš„é¢†åŸŸå¤§å°ä¸‹ï¼Œé«˜æ–¯æ»¤æ³¢çš„æ¨¡ç³ŠåŒ–ç¨‹åº¦å°äºå…¶ä½™ä¸¤ç§ã€‚ â€‹ é«˜æ–¯æ»¤æ³¢å’Œå‡å€¼æ»¤æ³¢å‡æ˜¯çº¿æ€§æ»¤æ³¢ï¼Œè€Œä¸­å€¼æ»¤æ³¢ä¸ºéçº¿æ€§æ»¤æ³¢ã€‚ â€‹ è¿™ä¸‰ç§æ»¤æ³¢é€‚åˆå¤„ç†çš„å™ªå£°ä¸åŒï¼Œé«˜æ–¯æ»¤æ³¢å’Œå‡å€¼æ»¤æ³¢æ›´é€‚å®œæŠ‘åˆ¶é«˜æ–¯å™ªå£°ï¼Œå°¤å…¶æ˜¯é«˜æ–¯æ»¤æ³¢æœ€é€‚åˆé«˜æ–¯å™ªå£°ï¼Œè€Œä¸­å€¼æ»¤æ³¢æ›´é€‚åˆæŠ‘åˆ¶æ¤’ç›å™ªå£°ã€‚ é«˜æ–¯å™ªå£°çš„æŠ‘åˆ¶ç¨‹åº¦å¯¹æ¯”â€‹ è¿™æ˜¯ä¸€å¼ åŠ å…¥é«˜æ–¯å™ªå£°çš„å›¾åƒã€‚ â€‹ ä¸‹é¢åˆ†åˆ«è¯¥é«˜æ–¯å™ªå£°å›¾åƒæ˜¯ç”¨5*5çš„é«˜æ–¯æ»¤æ³¢ã€å‡å€¼æ»¤æ³¢ã€ä¸­å€¼æ»¤æ³¢å¤„ç†åçš„å›¾åƒã€‚ æ¤’ç›å™ªå£°çš„æŠ‘åˆ¶ç¨‹åº¦å¯¹æ¯”â€‹ è¿™æ˜¯ä¸€å¼ åŠ å…¥æ¤’ç›å™ªå£°çš„å›¾åƒã€‚ â€‹ ä¸‹é¢åˆ†åˆ«è¯¥æ¤’ç›å™ªå£°å›¾åƒæ˜¯ç”¨5*5çš„é«˜æ–¯æ»¤æ³¢ã€å‡å€¼æ»¤æ³¢ã€ä¸­å€¼æ»¤æ³¢å¤„ç†åçš„å›¾åƒã€‚","categories":[{"name":"Computer Vision","slug":"Computer-Vision","permalink":"https://gy23333.github.io/categories/Computer-Vision/"}],"tags":[{"name":"é«˜æ–¯æ»¤æ³¢","slug":"é«˜æ–¯æ»¤æ³¢","permalink":"https://gy23333.github.io/tags/%E9%AB%98%E6%96%AF%E6%BB%A4%E6%B3%A2/"},{"name":"å‡å€¼æ»¤æ³¢","slug":"å‡å€¼æ»¤æ³¢","permalink":"https://gy23333.github.io/tags/%E5%9D%87%E5%80%BC%E6%BB%A4%E6%B3%A2/"},{"name":"ä¸­å€¼æ»¤æ³¢","slug":"ä¸­å€¼æ»¤æ³¢","permalink":"https://gy23333.github.io/tags/%E4%B8%AD%E5%80%BC%E6%BB%A4%E6%B3%A2/"}]},{"title":"Hexoæ­å»ºè®°å½•","slug":"Hexoæ­å»ºè®°å½•","date":"2020-02-25T08:13:22.000Z","updated":"2024-11-11T03:57:58.123Z","comments":true,"path":"2020/02/25/Hexoæ­å»ºè®°å½•/","link":"","permalink":"https://gy23333.github.io/2020/02/25/Hexo%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/","excerpt":"è®°å½•Hexoåšå®¢çš„æ­å»ºè¿‡ç¨‹ã€‚åŒ…æ‹¬Hexoçš„ä¹¦å†™æŠ€å·§ä¸ä¸»é¢˜ä¼˜åŒ–ã€‚","text":"è®°å½•Hexoåšå®¢çš„æ­å»ºè¿‡ç¨‹ã€‚åŒ…æ‹¬Hexoçš„ä¹¦å†™æŠ€å·§ä¸ä¸»é¢˜ä¼˜åŒ–ã€‚ Hexoä¹¦å†™æŠ€å·§æ•°å­¦å…¬å¼Hexoå¼•å…¥æ•°å­¦å…¬å¼Hexoé»˜è®¤ä¸æ”¯æŒæ•°å­¦å…¬å¼ï¼Œéœ€è¦å¼•å…¥æ•°å­¦å…¬å¼çš„å“åº”ç¯å¢ƒã€‚ æ›´æ¢Hexoçš„markdownæ¸²æŸ“å¼•æ“ å¸è½½åŸæœ‰çš„æ¸²æŸ“å™¨ hexo-renderer-markedï¼Œå®‰è£…æ¸²æŸ“å™¨hexo-renderer-kramed 12npm uninstall hexo-renderer-markednpm install hexo-renderer-kramed åœ¨nextä¸»é¢˜ä¸­å¼€å¯mathJaxå¼€å…³ åœ¨ next/_config.yml ä¸­å°† mathjax çš„ enable æ‰“å¼€ã€‚ /themes/next/_config.yml1234567# per_pageä¸ºtrueï¼Œåˆ™éœ€è¦æ¯é¡µè‡ªå·±æ·»åŠ `mathjax: true`ï¼›# per_pageä¸ºfalseï¼Œåˆ™æ¯é¡µè‡ªåŠ¨å…è®¸æ•°å­¦å…¬å¼per_page: falseengine: mathjaxmathjax: enable: true mhchem: true å¦‚æ­¤å³å¯åœ¨æ¯ç‰‡æ–‡ç« ä¸­è‡ªåŠ¨å…è®¸æ•°å­¦å…¬å¼ã€‚ æ•°å­¦å…¬å¼ä¹¦å†™è§„åˆ™Hexoçš„markdownæ•°å­¦å…¬å¼ä¹¦å†™è§„åˆ™ä¸Latexç›¸åŒï¼Œå…·ä½“è§„åˆ™è§ Latexå…¥é—¨/æ•°å­¦å…¬å¼ æµç¨‹å›¾Hexoå¼•å…¥flowchartæµç¨‹å›¾Hexoé»˜è®¤ä¸æ”¯æŒmarkdownçš„æµç¨‹å›¾ï¼Œéœ€å®‰è£…hexo-filter-flowchartæ’ä»¶ã€‚ å®‰è£…hexo-filter-flowchartæ’ä»¶1npm install --save hexo-filter-flowchart åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸‹æ·»åŠ flowcharté…ç½® /themes/next/_config.yml1234flowchart:# raphael: # optional, the source url of raphael.js# flowchart: # optional, the source url of flowchart.jsoptions: # options used for `drawSVG` ç»˜åˆ¶æµç¨‹å›¾ èŒƒä¾‹ï¼šä¸‹åˆ—ä»£ç åŒ…åœ¨flowä¹‹é—´ 1&lt;div id=\"flowchart-0\" class=\"flow-chart\"&gt;&lt;/div&gt; æµç¨‹å›¾ç»˜åˆ¶è§„åˆ™æµç¨‹å›¾è¯­æ³•åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š å‰åŠéƒ¨åˆ†ï¼šå®šä¹‰æµç¨‹å›¾å…ƒç´  ååŠéƒ¨åˆ†ï¼šè¿æ¥æµç¨‹å›¾å…ƒç´  å‰åŠéƒ¨åˆ†å®šä¹‰å…ƒç´ çš„è¯­æ³• 1tag&#x3D;&gt;type: content:&gt;url tagï¼šå…ƒç´ æ ‡ç­¾ï¼Œè¿æ¥å…ƒç´ æ—¶ç”¨æ¥ä»£è¡¨å…ƒç´ ã€‚åç§°å¯ä»¥ä»»æ„ï¼Œä¸€èˆ¬ä¸ºæµç¨‹çš„è‹±æ–‡ç¼©å†™å’Œæ•°å­—çš„ç»„åˆã€‚ typeï¼šå…ƒç´ ç±»å‹ï¼Œä¸€å…±æœ‰6ç§ç±»å‹ï¼Œåˆ†åˆ«ä¸ºstartã€endã€operationã€subroutineã€conditionã€inputoutput contentï¼šæ–‡æœ¬æ¡†ä¸­çš„å†…å®¹ï¼Œæ³¨æ„type:å’Œcontenté—´ä¸€å®šè¦æœ‰ç©ºæ ¼ urlï¼šæ–‡æœ¬ç»‘å®šçš„é“¾æ¥ï¼Œç‚¹å‡»å¯è·³è½¬ ååŠéƒ¨åˆ†è¿æ¥æµç¨‹å›¾å…ƒç´  ç”¨-&gt;æ¥è¿æ¥ä¸¤ä¸ªå…ƒç´  conditionç±»å‹æœ‰yeså’Œnoä¸¤ä¸ªåˆ†æ”¯ï¼Œå¦‚cond(yes)å’Œcond(no) æ¯ä¸ªå…ƒç´ å¯ä»¥åˆ¶å®šåˆ†æ”¯èµ°å‘ï¼Œé»˜è®¤å‘ä¸‹ï¼Œä¹Ÿå¯ä»¥ç”¨rightæŒ‡å‘å³è¾¹ï¼Œå¦‚sub1(right) ç¤ºä¾‹ 1&lt;div id&#x3D;&quot;flowchart-2&quot; class&#x3D;&quot;flow-chart&quot;&gt;&lt;&#x2F;div&gt; Hexoå¼•å…¥Mermaidæµç¨‹å›¾ å®‰è£…hexo-filter-mermaid-diagramsæ’ä»¶1npm install --save hexo-filter-mermaid-diagrams åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸‹æ·»åŠ mermaidé…ç½® /themes/next/_config.yml12345# Mermaid tagmermaid: enable: true # Available themes: default | dark | forest | neutral theme: forest Mermaidå®˜æ–¹æ–‡æ¡£ Mermaidåœ¨çº¿ç¼–è¾‘å™¨ ç®€å•æ•™ç¨‹ ä»£ç å—markdownçš„ä»£ç å—å†™æ³•æœ‰ä¸¤ç§â€”â€”```...``` å’Œ{ % ... % }ï¼Œè¿™é‡Œä¸»è¦ä½¿ç”¨```...``` æ¥å®ç°åŠŸèƒ½ã€‚ æ ¼å¼å†™æ³•ä¸€123&#96;&#96;&#96;[language] [title] [url] [link text]code snippet&#96;&#96;&#96; language: è¯­è¨€åç§°ï¼Œå¼•å¯¼æ¸²æŸ“å¼•æ“æ­£ç¡®è§£æå¹¶é«˜äº®æ˜¾ç¤ºå…³é”®å­— title: ä»£ç å—æ ‡é¢˜ï¼Œå°†ä¼šæ˜¾ç¤ºåœ¨å·¦ä¸Šè§’ url: é“¾æ¥åœ°å€ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š link text åˆ™ä¼šåœ¨å³ä¸Šè§’æ˜¾ç¤º link link text: é“¾æ¥åç§°ï¼ŒæŒ‡å®š url åæœ‰æ•ˆï¼Œå°†ä¼šæ˜¾ç¤ºåœ¨å³ä¸Šè§’ url å¿…é¡»ä¸ºæœ‰æ•ˆé“¾æ¥åœ°å€æ‰ä¼šä»¥é“¾æ¥çš„å½¢å¼æ˜¾ç¤ºåœ¨å³ä¸Šè§’ï¼Œå¦åˆ™å°†ä½œä¸ºæ ‡é¢˜æ˜¾ç¤ºåœ¨å·¦ä¸Šè§’ã€‚ä»¥ url ä¸ºåˆ†ç•Œï¼Œå·¦ä¾§é™¤äº†ç¬¬ä¸€ä¸ªå•è¯ä¼šè¢«è§£æä¸º languageï¼Œå…¶ä»–æ‰€æœ‰å•è¯éƒ½ä¼šè¢«è§£æä¸º titleï¼Œè€Œå³ä¾§çš„æ‰€æœ‰å•è¯éƒ½ä¼šè¢«è§£æä¸º link textã€‚ å¦‚æœä¸æƒ³å¡«å†™ titleï¼Œå¯ä»¥åœ¨ language å’Œ url ä¹‹é—´æ·»åŠ è‡³å°‘ä¸‰ä¸ªç©ºæ ¼ã€‚ ç¤ºä¾‹ 12345678&#96;&#96;&#96;C HelloWorld https:&#x2F;&#x2F;gy23333.github.io&#x2F;2020&#x2F;02&#x2F;25&#x2F;Hexoæ­å»ºè®°å½•&#x2F; ä¸‹è½½åœ°å€#include &lt;stdio.h&gt;int main()&#123; printf(&quot;hello world\\n&quot;); return 0;&#125;&#96;&#96;&#96; æ•ˆæœ HelloWorldä¸‹è½½åœ°å€123456#include &lt;stdio.h&gt;int main()&#123; printf(\"hello world\\n\"); return 0;&#125; å†™æ³•äºŒ123&#123;% codeblock [title] [lang:language] [url] [link text] [additional options] %&#125;code snippet&#123;% endcodeblock %&#125; è®¾ç½®è¯­è¨€ æ ¼å¼ 123&#123;% codeblock [lang:language] %&#125;code snippet&#123;% endcodeblock %&#125; ç¤ºä¾‹ 12345678&#123;% codeblock lang:C %&#125;#include &lt;stdio.h&gt;int main()&#123; printf(&quot;hello world\\n&quot;); return 0;&#125;&#123;% endcodeblock %&#125; æ•ˆæœ 123456#include &lt;stdio.h&gt;int main()&#123; printf(\"hello world\\n\"); return 0;&#125; è®¾ç½®æ ‡é¢˜ æ ¼å¼ 123&#123;% codeblock [title] %&#125;code snippet&#123;% endcodeblock %&#125; ç¤ºä¾‹ 12345678&#123;% codeblock HelloWorld %&#125;#include &lt;stdio.h&gt;int main()&#123; printf(&quot;hello world\\n&quot;); return 0;&#125;&#123;% endcodeblock %&#125; æ•ˆæœ HelloWorld123456#include &lt;stdio.h&gt;int main()&#123; printf(&quot;hello world\\n&quot;); return 0;&#125; è®¾ç½®é“¾æ¥ æ ¼å¼ 123&#123;% codeblock [url] [link text] %&#125;code snippet&#123;% endcodeblock %&#125; ç¤ºä¾‹ 12345678&#123;% codeblock HelloWorld lang:C https:&#x2F;&#x2F;gy23333.github.io&#x2F;2020&#x2F;02&#x2F;25&#x2F;Hexoæ­å»ºè®°å½•&#x2F; ä¸‹è½½åœ°å€ %&#125;#include &lt;stdio.h&gt;int main()&#123; printf(&quot;hello world\\n&quot;); return 0;&#125;&#123;% endcodeblock %&#125; æ•ˆæœ HelloWorldä¸‹è½½åœ°å€123456#include &lt;stdio.h&gt;int main()&#123; printf(\"hello world\\n\"); return 0;&#125; æ˜¯å¦æ˜¾ç¤ºè¡Œå· æ ¼å¼ 123&#123;% codeblock [line_number:(true|false)] %&#125;code snippet&#123;% endcodeblock %&#125; line_numberçš„é»˜è®¤å€¼ä¸ºtrueã€‚ ç¤ºä¾‹ 12345678&#123;% codeblock lang:C line_number:false %&#125;#include &lt;stdio.h&gt;int main()&#123; printf(&quot;hello world\\n&quot;); return 0;&#125;&#123;% endcodeblock %&#125; æ•ˆæœ #include &lt;stdio.h&gt;int main()&#123; printf(\"hello world\\n\"); return 0;&#125; è®¾ç½®èµ·å§‹è¡Œå· æ ¼å¼ 123&#123;% codeblock [first_line:number] %&#125;code snippet&#123;% endcodeblock %&#125; first_lineçš„é»˜è®¤å€¼ä¸º1ã€‚ ç¤ºä¾‹ 12345678&#123;% codeblock lang:C first_line:10 %&#125;#include &lt;stdio.h&gt;int main()&#123; printf(&quot;hello world\\n&quot;); return 0;&#125;&#123;% endcodeblock %&#125; æ•ˆæœ 101112131415#include &lt;stdio.h&gt;int main()&#123; printf(\"hello world\\n\"); return 0;&#125; è®¾ç½®ä»£ç æ·»åŠ åˆ é™¤æ ‡è®°è®¾ç½®è¯­è¨€ä¸º diffï¼Œå¯ä»¥åœ¨ä»£ç å‰æ·»åŠ  + å’Œ - æ¥ä½¿ç”¨å¦‚ä¸Šæ‰€ç¤ºçš„é«˜äº®å¢åˆ è¡Œæç¤ºæ•ˆæœã€‚ æ ¼å¼ 123&#123;% codeblock lang:diff %&#125;code snippet&#123;% endcodeblock %&#125; ç¤ºä¾‹ 123456789&#123;% codeblock lang:diff %&#125;#include &lt;stdio.h&gt;int main()&#123;- printf(&quot;delete\\n&quot;);+ printf(&quot;add\\n&quot;); return 0;&#125;&#123;% endcodeblock %&#125; æ•ˆæœ 12345678#include &lt;stdio.h&gt;int main()&#123;- printf(\"delete\\n\");+ printf(\"add\\n\"); return 0; &#125; AplayeréŸ³ä¹æ’­æ”¾å™¨&emsp;&emsp;åœ¨blogä¸­æ·»åŠ ä¸€ä¸ªéŸ³ä¹æ’­æ”¾é¡µé¢ Aplayerå®˜æ–¹ä¸­æ–‡æ–‡æ¡£ æ–°å»ºéŸ³ä¹é¡µé¢ æ–°å»ºä¸€ä¸ªé¡µé¢ 1hexo new page music åœ¨æ–°ç”Ÿæˆçš„ /source/music/index.md ä¸­ 123title: æ­Œå•date: 2020-02-25 19:50:11type: &quot;music&quot; åœ¨ä¸»é¢˜çš„ _config.ymlæ–‡ä»¶ä¸­ï¼Œè®¾ç½®é¡µé¢ 123456menu:home: &#x2F; || homearchives: &#x2F;archives&#x2F; || archivecategories: &#x2F;categories&#x2F; || thtags: &#x2F;tags&#x2F; || tagsmusic: &#x2F;music&#x2F; || music é¡µé¢åˆ›å»ºæˆåŠŸï¼ ä½¿ç”¨hexo-tag-aplayeræ’ä»¶ å®‰è£…hexo-tag-aplayer 1npm install --save hexo-tag-aplayer MeingJSæ”¯æŒ MetingJS æ˜¯åŸºäºMeting API çš„ APlayer è¡ç”Ÿæ’­æ”¾å™¨ï¼Œå¼•å…¥ MetingJS åï¼Œæ’­æ”¾å™¨å°†æ”¯æŒå¯¹äº QQéŸ³ä¹ã€ç½‘æ˜“äº‘éŸ³ä¹ã€è™¾ç±³ã€é…·ç‹—ã€ç™¾åº¦ç­‰å¹³å°çš„éŸ³ä¹æ’­æ”¾ã€‚ å¦‚æœæƒ³åœ¨æœ¬æ’ä»¶ä¸­ä½¿ç”¨ MetingJSï¼Œè¯·åœ¨ Hexo é…ç½®æ–‡ä»¶ _config.yml ä¸­è®¾ç½®ï¼š 12aplayer: meting: true ä½¿ç”¨ MetingJS æ’­æ”¾å™¨ 12345&lt;!-- ç®€å•ç¤ºä¾‹ (id, server, type) --&gt;&#123;% meting \"60198\" \"netease\" \"playlist\" %&#125;&lt;!-- è¿›é˜¶ç¤ºä¾‹ --&gt;&#123;% meting \"60198\" \"netease\" \"playlist\" \"autoplay\" \"mutex:false\" \"listmaxheight:340px\" \"preload:none\" \"theme:#ad7a86\"%&#125; æœ‰å…³é€‰é¡¹åˆ—è¡¨å¦‚ä¸‹: é€‰é¡¹ é»˜è®¤å€¼ æè¿° id å¿…é¡»å€¼ æ­Œæ›² id / æ’­æ”¾åˆ—è¡¨ id / ç›¸å†Œ id / æœç´¢å…³é”®å­— server å¿…é¡»å€¼ éŸ³ä¹å¹³å°: netease, tencent, kugou, xiami, baidu type å¿…é¡»å€¼ songï¼ˆå•é¦–æ­Œï¼‰, playlistï¼ˆæ­Œå•ï¼‰, album, search, artist fixed false å¼€å¯å›ºå®šæ¨¡å¼ mini false å¼€å¯è¿·ä½ æ¨¡å¼ loop all åˆ—è¡¨å¾ªç¯æ¨¡å¼ï¼šall, one,none order list åˆ—è¡¨æ’­æ”¾æ¨¡å¼ï¼š list, random volume 0.7 æ’­æ”¾å™¨éŸ³é‡ lrctype 0 æ­Œè¯æ ¼å¼ç±»å‹ listfolded false æŒ‡å®šéŸ³ä¹æ’­æ”¾åˆ—è¡¨æ˜¯å¦æŠ˜å  storagename metingjs LocalStorage ä¸­å­˜å‚¨æ’­æ”¾å™¨è®¾å®šçš„é”®å autoplay true è‡ªåŠ¨æ’­æ”¾ï¼Œç§»åŠ¨ç«¯æµè§ˆå™¨æš‚æ—¶ä¸æ”¯æŒæ­¤åŠŸèƒ½ mutex true è¯¥é€‰é¡¹å¼€å¯æ—¶ï¼Œå¦‚æœåŒé¡µé¢æœ‰å…¶ä»– aplayer æ’­æ”¾ï¼Œè¯¥æ’­æ”¾å™¨ä¼šæš‚åœ listmaxheight 340px æ’­æ”¾åˆ—è¡¨çš„æœ€å¤§é•¿åº¦ preload auto éŸ³ä¹æ–‡ä»¶é¢„è½½å…¥æ¨¡å¼ï¼Œå¯é€‰é¡¹ï¼š none, metadata, auto theme #ad7a86 æ’­æ”¾å™¨é£æ ¼è‰²å½©è®¾ç½® é…ç½®ç»“æŸï¼ æ‰‹åŠ¨å»ºç«‹æ­Œå•ï¼ˆä¸æ¨èï¼‰å¼ºè¿«ç—‡å¯æ‰‹åŠ¨å°†å„å¹³å°çš„æ­Œå•æ•´åˆåœ¨ä¸€èµ·ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªä¸‹è½½å„å¹³å°éŸ³ä¹çš„ç¥å™¨ã€‚ 123456789101112131415161718192021222324252627&#123;% aplayerlist %&#125;&#123; \"narrow\": false, // ï¼ˆå¯é€‰ï¼‰æ’­æ”¾å™¨è¢–çé£æ ¼ \"autoplay\": true, // ï¼ˆå¯é€‰) è‡ªåŠ¨æ’­æ”¾ï¼Œç§»åŠ¨ç«¯æµè§ˆå™¨æš‚æ—¶ä¸æ”¯æŒæ­¤åŠŸèƒ½ \"mode\": \"random\", // ï¼ˆå¯é€‰ï¼‰æ›²ç›®å¾ªç¯ç±»å‹ï¼Œæœ‰ 'random'ï¼ˆéšæœºæ’­æ”¾ï¼‰, 'single' (å•æ›²æ’­æ”¾), 'circulation' (å¾ªç¯æ’­æ”¾), 'order' (åˆ—è¡¨æ’­æ”¾)ï¼Œ é»˜è®¤ï¼š'circulation' \"showlrc\": 3, // ï¼ˆå¯é€‰ï¼‰æ­Œè¯æ˜¾ç¤ºé…ç½®é¡¹ï¼Œå¯é€‰é¡¹æœ‰ï¼š1,2,3 \"mutex\": true, // ï¼ˆå¯é€‰ï¼‰è¯¥é€‰é¡¹å¼€å¯æ—¶ï¼Œå¦‚æœåŒé¡µé¢æœ‰å…¶ä»– aplayer æ’­æ”¾ï¼Œè¯¥æ’­æ”¾å™¨ä¼šæš‚åœ \"theme\": \"#e6d0b2\", // ï¼ˆå¯é€‰ï¼‰æ’­æ”¾å™¨é£æ ¼è‰²å½©è®¾ç½®ï¼Œé»˜è®¤ï¼š#b7daff \"preload\": \"metadata\", // ï¼ˆå¯é€‰ï¼‰éŸ³ä¹æ–‡ä»¶é¢„è½½å…¥æ¨¡å¼ï¼Œå¯é€‰é¡¹ï¼š 'none' 'metadata' 'auto', é»˜è®¤: 'auto' \"listmaxheight\": \"513px\", // (å¯é€‰) è¯¥æ’­æ”¾åˆ—è¡¨çš„æœ€å¤§é•¿åº¦ \"music\": [ &#123; \"title\": \"CoCo\", \"author\": \"Jeff Williams\", \"url\": \"caffeine.mp3\", \"pic\": \"caffeine.jpeg\", \"lrc\": \"caffeine.txt\" &#125;, &#123; \"title\": \"ã‚¢ã‚¤ãƒ­ãƒ‹\", \"author\": \"é¹¿ä¹ƒ\", \"url\": \"irony.mp3\", \"pic\": \"irony.jpg\" &#125; ]&#125;&#123;% endaplayerlist %&#125; Hexoä¸»é¢˜ä¼˜åŒ–ä¸ªæ€§åŒ–å›åˆ°é¡¶éƒ¨â€‹ çŒ«è€³FMåŒæ¬¾å›åˆ°é¡¶éƒ¨æ’ä»¶ã€‚ ä¸‹è½½å›¾ç‰‡ï¼Œå°†å…¶æ·»åŠ åˆ°ä¸»é¢˜é¡µé¢çš„ source\\images\\ ä¸‹ï¼› åœ¨ /themes/next/source/css/_common/components/back-to-top.styl ä¸­æ·»åŠ  12345678910111213141516171819202122//è‡ªå®šä¹‰å›åˆ°é¡¶éƒ¨æ ·å¼@media screen and (min-width: 900px) &#123; .back-to-top &#123; right: 60px; width: 70px; //å›¾ç‰‡ç´ æå®½åº¦ height: 900px; //å›¾ç‰‡ç´ æé«˜åº¦ top: -900px; bottom: unset; transition: all .5s ease-in-out; background: url(\"/images/scroll.png\"); position: fixed; //éšè—ç®­å¤´å›¾æ ‡ &gt; i &#123; display: none; &#125; &amp;.back-to-top-on &#123; bottom: unset; top: 100vh &lt; (900px + 200px) ? calc( 100vh - 900px - 200px ) : 0px; &#125;&#125;&#125; æ•ˆæœå›¾ é¼ æ ‡ç‚¹å‡»æ•ˆæœâ€‹ å‚è€ƒYearitoâ€™s Blogæœ‰ä¸‹é¢å››ç§é¼ æ ‡ç‚¹å‡»æ•ˆæœã€‚åœ¨ themes\\next\\source\\js\\cursor\\ ä¸­åŠ å…¥ä¸‹åˆ—jsæ–‡ä»¶ explosion.min.jslove.min.jsfireworks.jstext.js1\"use strict\";function updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;function setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;function createParticule(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;function createCircle(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color=\"#F00\",a.radius=.1,a.alpha=.5,a.lineWidth=6,a.draw=function()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;function renderParticule(e)&#123;for(var t=0;t&lt;e.animatables.length;t++)e.animatables[t].target.draw()&#125;function animateParticules(e,t)&#123;for(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)n.push(createParticule(e,t));anime.timeline().add(&#123;targets:n,x:function(e)&#123;return e.endPos.x&#125;,y:function(e)&#123;return e.endPos.y&#125;,radius:.1,duration:anime.random(1200,1800),easing:\"easeOutExpo\",update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:\"linear\",duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:\"easeOutExpo\",update:renderParticule,offset:0&#125;)&#125;function debounce(e,t)&#123;var a;return function()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(function()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(\".fireworks\");if(canvasEl)&#123;var ctx=canvasEl.getContext(\"2d\"),numberOfParticules=30,pointerX=0,pointerY=0,tap=\"mousedown\",colors=[\"#FF1461\",\"#18FF92\",\"#5A87FF\",\"#FBF38C\"],setCanvasSize=debounce(function()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+\"px\",canvasEl.style.height=window.innerHeight+\"px\",canvasEl.getContext(\"2d\").scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:function()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,function(e)&#123;\"sidebar\"!==e.target.id&amp;&amp;\"toggle-sidebar\"!==e.target.id&amp;&amp;\"A\"!==e.target.nodeName&amp;&amp;\"IMG\"!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(\"resize\",setCanvasSize,!1)&#125;1!function(e,t,a)&#123;function n()&#123;c(\".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;\"),o(),r()&#125;function r()&#123;for(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText=\"left:\"+d[e].x+\"px;top:\"+d[e].y+\"px;opacity:\"+d[e].alpha+\";transform:scale(\"+d[e].scale+\",\"+d[e].scale+\") rotate(45deg);background:\"+d[e].color+\";z-index:99999\");requestAnimationFrame(r)&#125;function o()&#123;var t=\"function\"==typeof e.onclick&amp;&amp;e.onclick;e.onclick=function(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;function i(e)&#123;var a=t.createElement(\"div\");a.className=\"heart\",d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;function c(e)&#123;var a=t.createElement(\"style\");a.type=\"text/css\";try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(\"head\")[0].appendChild(a)&#125;function s()&#123;return\"rgb(\"+~~(255*Math.random())+\",\"+~~(255*Math.random())+\",\"+~~(255*Math.random())+\")\"&#125;var d=[];e.requestAnimationFrame=function()&#123;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document);123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154class Circle &#123; constructor(&#123; origin, speed, color, angle, context &#125;) &#123; this.origin = origin this.position = &#123; ...this.origin &#125; this.color = color this.speed = speed this.angle = angle this.context = context this.renderCount = 0 &#125; draw() &#123; this.context.fillStyle = this.color this.context.beginPath() this.context.arc(this.position.x, this.position.y, 2, 0, Math.PI * 2) this.context.fill() &#125; move() &#123; this.position.x = (Math.sin(this.angle) * this.speed) + this.position.x this.position.y = (Math.cos(this.angle) * this.speed) + this.position.y + (this.renderCount * 0.3) this.renderCount++ &#125;&#125;class Boom &#123; constructor (&#123; origin, context, circleCount = 16, area &#125;) &#123; this.origin = origin this.context = context this.circleCount = circleCount this.area = area this.stop = false this.circles = [] &#125; randomArray(range) &#123; const length = range.length const randomIndex = Math.floor(length * Math.random()) return range[randomIndex] &#125; randomColor() &#123; const range = ['8', '9', 'A', 'B', 'C', 'D', 'E', 'F'] return '#' + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) &#125; randomRange(start, end) &#123; return (end - start) * Math.random() + start &#125; init() &#123; for(let i = 0; i &lt; this.circleCount; i++) &#123; const circle = new Circle(&#123; context: this.context, origin: this.origin, color: this.randomColor(), angle: this.randomRange(Math.PI - 1, Math.PI + 1), speed: this.randomRange(1, 6) &#125;) this.circles.push(circle) &#125; &#125; move() &#123; this.circles.forEach((circle, index) =&gt; &#123; if (circle.position.x &gt; this.area.width || circle.position.y &gt; this.area.height) &#123; return this.circles.splice(index, 1) &#125; circle.move() &#125;) if (this.circles.length == 0) &#123; this.stop = true &#125; &#125; draw() &#123; this.circles.forEach(circle =&gt; circle.draw()) &#125;&#125;class CursorSpecialEffects &#123; constructor() &#123; this.computerCanvas = document.createElement('canvas') this.renderCanvas = document.createElement('canvas') this.computerContext = this.computerCanvas.getContext('2d') this.renderContext = this.renderCanvas.getContext('2d') this.globalWidth = window.innerWidth this.globalHeight = window.innerHeight this.booms = [] this.running = false &#125; handleMouseDown(e) &#123; const boom = new Boom(&#123; origin: &#123; x: e.clientX, y: e.clientY &#125;, context: this.computerContext, area: &#123; width: this.globalWidth, height: this.globalHeight &#125; &#125;) boom.init() this.booms.push(boom) this.running || this.run() &#125; handlePageHide() &#123; this.booms = [] this.running = false &#125; init() &#123; const style = this.renderCanvas.style style.position = 'fixed' style.top = style.left = 0 style.zIndex = '999999999999999999999999999999999999999999' style.pointerEvents = 'none' style.width = this.renderCanvas.width = this.computerCanvas.width = this.globalWidth style.height = this.renderCanvas.height = this.computerCanvas.height = this.globalHeight document.body.append(this.renderCanvas) window.addEventListener('mousedown', this.handleMouseDown.bind(this)) window.addEventListener('pagehide', this.handlePageHide.bind(this)) &#125; run() &#123; this.running = true if (this.booms.length == 0) &#123; return this.running = false &#125; requestAnimationFrame(this.run.bind(this)) this.computerContext.clearRect(0, 0, this.globalWidth, this.globalHeight) this.renderContext.clearRect(0, 0, this.globalWidth, this.globalHeight) this.booms.forEach((boom, index) =&gt; &#123; if (boom.stop) &#123; return this.booms.splice(index, 1) &#125; boom.move() boom.draw() &#125;) this.renderContext.drawImage(this.computerCanvas, 0, 0, this.globalWidth, this.globalHeight) &#125;&#125;const cursorSpecialEffects = new CursorSpecialEffects()cursorSpecialEffects.init()123456789101112131415161718192021222324var a_idx = 0;jQuery(document).ready(function($) &#123; $(\"body\").click(function(e) &#123; var a = new Array(\"å–œæ¬¢æˆ‘\", \"ä¸å–œæ¬¢æˆ‘\"); var $i = $(\"&lt;span/&gt;\").text(a[a_idx]); var x = e.pageX, y = e.pageY; $i.css(&#123; \"z-index\": 99999, \"top\": y - 28, \"left\": x - a[a_idx].length * 8, \"position\": \"absolute\", \"color\": \"#ff7a45\" &#125;); $(\"body\").append($i); $i.animate(&#123; \"top\": y - 180, \"opacity\": 0 &#125;, 1500, function() &#123; $i.remove(); &#125;); a_idx = (a_idx + 1) % a.length; &#125;);&#125;); â€‹ åœ¨ themes\\next\\layout_custom\\custom.swig ä¸­åŠ å…¥ 123456789101112&#123;# é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ #&#125;&#123;% if theme.cursor_effect == \"fireworks\" %&#125; &lt;script async src=\"/js/cursor/fireworks.js\"&gt;&lt;/script&gt;&#123;% elseif theme.cursor_effect == \"explosion\" %&#125; &lt;canvas class=\"fireworks\" style=\"position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;\" &gt;&lt;/canvas&gt; &lt;script src=\"//cdn.bootcss.com/animejs/2.2.0/anime.min.js\"&gt;&lt;/script&gt; &lt;script async src=\"/js/cursor/explosion.min.js\"&gt;&lt;/script&gt;&#123;% elseif theme.cursor_effect == \"love\" %&#125; &lt;script async src=\"/js/cursor/love.min.js\"&gt;&lt;/script&gt;&#123;% elseif theme.cursor_effect == \"text\" %&#125; &lt;script async src=\"/js/cursor/text.js\"&gt;&lt;/script&gt;&#123;% endif %&#125; â€‹ å¦‚æœ custom.swig æ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨æ–°å»ºå¹¶åœ¨å¸ƒå±€é¡µé¢ themes\\next\\layout_layout.swig ä¸­ body æœ«å°¾å¼•å…¥ï¼š 1&#123;% include '_custom/custom.swig' %&#125; â€‹ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ themes\\next_config.yml ä¸­æ·»åŠ ï¼š 12# mouse click effect: fireworks | explosion | love | textcursor_effect: fireworks â€‹ åˆ™å¯é€šè¿‡é…ç½®ä¸»é¢˜é…ç½®æ–‡ä»¶æ¥è®¾ç½®é¼ æ ‡ç‚¹å‡»æ•ˆæœã€‚ â€‹ å¦‚explosionçš„æ•ˆæœ Hexoå¸¸è§é—®é¢˜hexo dæŠ¥é”™1fatal: Authentication failed for â€˜https:&#x2F;&#x2F;github.com&#x2F;gy23333&#x2F;gy23333.github.io.git&#x2F;â€˜ Githubå¼€å¯äºŒæ¬¡éªŒè¯åå¯¼è‡´åšå®¢æäº¤é”™è¯¯ï¼Œè§£å†³æ–¹æ³•å‚è€ƒGitHubäºŒæ¬¡éªŒè¯å¸¦æ¥çš„é—®é¢˜ã€‚ ç”ŸæˆPersonal access tokensä»¤ç‰Œç ï¼Œä½¿ç”¨è¯¥ç ä½œä¸ºå¯†ç ç™»å½•ã€‚ ç™»å½•Github Setttings -&gt; Developer Settings -&gt; Personal access tokens -&gt; Generate new token è®¾å®štokençš„Expirationä¸ºno expirationï¼ˆæ°¸ä¹…ï¼‰ï¼Œå…¨é€‰scopes ç”Ÿæˆtokenï¼Œå¤åˆ¶è®°å½• hexo dï¼Œè¾“å…¥Githubç”¨æˆ·åå’Œå¯†ç ï¼ˆtokenï¼‰ å‚è€ƒ hexoå®˜æ–¹æ–‡æ¡£ Yearitoâ€™s Blog|Hexo æ­å»ºä¸ªäººåšå®¢ç³»åˆ—ï¼šå†™ä½œæŠ€å·§ç¯‡ æ•°å­¦å…¬å¼ çŒªçŒªä¾  | Hexo ä¸‹çš„è¯­æ³•é«˜äº®æ‹“å±•ä¿®æ”¹ st=>start: Start|past:>http://www.google.com[blank] e=>end: End:>http://www.google.com op1=>operation: My Operation|past op2=>operation: Stuff|current sub1=>subroutine: My Subroutine|invalid cond=>condition: Yes or No?|approved:>http://www.google.com c2=>condition: Good idea|rejected io=>inputoutput: catch something...|request st->op1(right)->cond cond(yes, right)->c2 cond(no)->sub1(left)->op1 c2(yes)->io->e c2(no)->op2->e{\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12} var code = document.getElementById(\"flowchart-0-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value)); var diagram = flowchart.parse(code); diagram.drawSVG(\"flowchart-0\", options);st=>start: Start|past:>http://www.google.com[blank] e=>end: End:>http://www.google.com op1=>operation: My Operation|past op2=>operation: Stuff|current sub1=>subroutine: My Subroutine|invalid cond=>condition: Yes or No?|approved:>http://www.google.com c2=>condition: Good idea|rejected io=>inputoutput: catch something...|request st->op1(right)->cond cond(yes, right)->c2 cond(no)->sub1(left)->op1 c2(yes)->io->e c2(no)->op2->e{\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12} var code = document.getElementById(\"flowchart-1-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-1-options\").value)); var diagram = flowchart.parse(code); diagram.drawSVG(\"flowchart-1\", options);st=>start: å¼€å§‹ op1=>operation: æ“ä½œ1 cond1=>condition: Yes or No? sub=>subroutine: å­ç¨‹åº e=>end: ç»“æŸ st->op1->cond1 cond1(yes)->e cond1(no)->sub(right)->op1{\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12} var code = document.getElementById(\"flowchart-2-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-2-options\").value)); var diagram = flowchart.parse(code); diagram.drawSVG(\"flowchart-2\", options);st=>start: å¼€å§‹ op1=>operation: æ“ä½œ1 cond1=>condition: Yes or No? sub=>subroutine: å­ç¨‹åº e=>end: ç»“æŸ st->op1->cond1 cond1(yes)->e cond1(no)->sub(right)->op1{\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12} var code = document.getElementById(\"flowchart-3-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-3-options\").value)); var diagram = flowchart.parse(code); diagram.drawSVG(\"flowchart-3\", options);","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://gy23333.github.io/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://gy23333.github.io/tags/Hexo/"},{"name":"blog","slug":"blog","permalink":"https://gy23333.github.io/tags/blog/"}]},{"title":"Latexå…¥é—¨","slug":"Latexå…¥é—¨","date":"2020-02-13T15:22:24.000Z","updated":"2024-11-11T03:57:58.118Z","comments":true,"path":"2020/02/13/Latexå…¥é—¨/","link":"","permalink":"https://gy23333.github.io/2020/02/13/Latex%E5%85%A5%E9%97%A8/","excerpt":"â€‹ Latexæ˜¯åŸºäºTexçš„æ’ç‰ˆç³»ç»Ÿï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆå¤æ‚å…¬å¼ï¼Œå¸¸å¸¸åº”ç”¨äºè®ºæ–‡çš„ç¼–å†™ã€‚æœ¬æ–‡ä»‹ç»åœ¨Macç¯å¢ƒä¸‹åˆ©ç”¨Texpadç¼–å†™Latexã€‚","text":"â€‹ Latexæ˜¯åŸºäºTexçš„æ’ç‰ˆç³»ç»Ÿï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆå¤æ‚å…¬å¼ï¼Œå¸¸å¸¸åº”ç”¨äºè®ºæ–‡çš„ç¼–å†™ã€‚æœ¬æ–‡ä»‹ç»åœ¨Macç¯å¢ƒä¸‹åˆ©ç”¨Texpadç¼–å†™Latexã€‚ åœ¨Macç¯å¢ƒä¸‹ç¼–å†™LatexMacTeXâ€‹ åœ¨Macç¯å¢ƒä¸‹å¿…éœ€ä¸‹è½½ç›¸åº”çš„ MacTeX â€‹ ä¸‹è½½å®Œæˆåä¼šå¾—åˆ°ä¸‹é¢å››ä¸ªappã€‚ â€‹ å…¶ä¸­TeXShopæ˜¯Latexçš„ç¼–è¾‘å™¨ï¼Œä½†åŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œå»ºè®®ä½¿ç”¨Sublime+Skim æˆ– TeXpad Texpadâ€‹ ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„Latexç¼–è¾‘å™¨ Texpad for macOS LatexåŸºæœ¬ç»“æ„â€‹ æ¯ä¸ªtexæ–‡ä»¶éƒ½åŒ…å«å¯¼è¨€åŒºå’Œæ­£æ–‡åŒºï¼Œå¯¼è¨€åŒºç”¨äºè®¾ç½®å…¨å±€è®¾ç½®ï¼Œæ­£æ–‡åŒºç”¨äºç¼–å†™æ˜¾ç¤ºçš„å†…å®¹ã€‚ å¯¼è¨€åŒºæ–‡ä»¶ç±»å‹1\\documentclass&#123;article&#125; %æ–‡ä»¶ç±»å‹ï¼Œä¼šæ ¹æ®ä¸åŒçš„æ–‡ä»¶ç±»å‹æœ‰ä¸åŒçš„æ’ç‰ˆï¼Œä¾‹å¦‚article, book, letterç­‰ç­‰ æ ‡é¢˜åŒºâ€‹ åŒ…æ‹¬titleã€authorã€dateç­‰ç­‰ï¼Œåœ¨æ­£æ–‡ä¸­è°ƒç”¨ 1\\maketitle â€‹ æ­¤æ—¶ï¼Œä¼šæ˜¾ç¤ºæ ‡é¢˜åŒºå†…å®¹ã€‚ æ­£æ–‡åŒºæ­£æ–‡â€‹ æ­£æ–‡éƒ¨åˆ†ç›´æ¥è¾“å…¥ï¼Œä½†æ˜¯è¦æ³¨æ„ï¼š ä½¿ç”¨ç©ºè¡Œåˆ†æ®µã€‚å•ä¸ªæ¢è¡Œä¸ä¼šå¼•èµ·åˆ†æ®µï¼Œå¿…é¡»ä¸­é—´æœ‰ç©ºè¡Œï¼Œå¤šä¸ªç©ºè¡Œå’Œä¸€ä¸ªç©ºè¡Œæ•ˆæœä¸€è‡´ã€‚ æ®µå‰ä¸ç”¨ç©ºæ ¼ã€‚Latexä¼šè‡ªåŠ¨æ®µå‰ç¼©è¿›ï¼Œå³ä½¿æ®µå‰æ‰“äº†ç©ºæ ¼ä¹Ÿä¼šè¢«çœç•¥ã€‚ æ±‰å­—åçš„ç©ºæ ¼ä¼šè¢«çœç•¥ï¼Œä½†è‹±æ–‡å­—æ¯ä¹‹é—´ä¸ä¼šï¼Œå¤šä¸ªç©ºæ ¼å’Œä¸€ä¸ªç©ºæ ¼æ•ˆæœä¸€è‡´ã€‚ å…¬å¼â€‹ åœ¨ $ $ ä¸­æ’å…¥å…¬å¼â€”â€”è¡Œå†…å…¬å¼ï¼Œå…¬å¼å¤„äºè¡Œå†…ï¼› â€‹ åœ¨ ä¸­æ’å…¥å…¬å¼â€”â€”è¡Œé—´å…¬å¼ï¼Œå…¬å¼å‰åè‡ªåŠ¨æ¢è¡Œï¼Œå…¬å¼å±…ä¸­ã€‚ ä¾‹å­1234567891011121314151617181920212223% exemple.tex%--------------------å¯¼è¨€åŒº-------------------% ç”¨äºè®¾ç½®æ€§è´¨ï¼ˆå…¨å±€è®¾ç½®ï¼‰ï¼Œè‡ªå®šä¹‰ä¸€äº›å‘½ä»¤\\documentclass&#123;article&#125; %æ–‡ä»¶ç±»å‹ï¼Œä¼šæ ¹æ®ä¸åŒçš„æ–‡ä»¶ç±»å‹æœ‰ä¸åŒçš„æ’ç‰ˆï¼Œä¾‹å¦‚article, book, letterç­‰ç­‰%----------æ ‡é¢˜åŒº------------\\title&#123;Tex Introduction&#125;\\author&#123;GuoYi&#125;\\date&#123;\\today&#125; %\\todayä¼šè‡ªåŠ¨åŒæ­¥åˆ°ä»Šå¤©%--------------------æ­£æ–‡åŒº-------------------% ä¸€ä¸ªtexæœ‰ä¸”åªæœ‰ä¸€ä¸ªdocumentéƒ¨åˆ†\\begin&#123;document&#125; \\maketitle %å®é™…è¾“å‡ºæ ‡é¢˜åŒº Hello world! % æ­£æ–‡ä¸­ç©ºè¡Œè¡¨æ¢è¡Œ % $è¡Œå†…å…¬å¼$ $$è¡Œé—´å…¬å¼$$ Let $f(x)$ be defined by the formula $$f(x)=2sinx$$ which is a polynomial of degree 2. \\end&#123;document&#125; Latexä½¿ç”¨ä¸­æ–‡CTEXæ–‡æ¡£ï¼ˆæ¨èï¼‰â€‹ åœ¨UTF-8ç¼–ç æƒ…å†µä¸‹ï¼Œä½¿ç”¨CTEXæ–‡æ¡£ã€‚ 123456\\documentclass[UTF8]&#123;ctexart&#125;\\title&#123;æ ‡é¢˜&#125;\\begin&#123;document&#125; \\maketitle ä¸­æ–‡è¾“å…¥ã€‚&#123;\\kaishu è¿™é‡Œæ˜¯æ¥·ä½“æ˜¾ç¤º&#125;ï¼Œ&#123;\\songti è¿™é‡Œæ˜¯å®‹ä½“æ˜¾ç¤º&#125;ï¼Œ&#123;\\heiti è¿™é‡Œæ˜¯é»‘ä½“æ˜¾ç¤º&#125;ï¼Œ&#123;\\fangsong è¿™é‡Œæ˜¯ä»¿å®‹æ˜¾ç¤º&#125;ã€‚\\end&#123;document&#125; å­—ä½“å­—ä½“æ—â€‹ å­—ä½“æ—å…±æœ‰3ç§ï¼šç½—é©¬å­—ä½“æ—ï¼ˆRoman Familyï¼‰ã€æ— è¡¬çº¿å­—ä½“æ—ï¼ˆSans Serif Familyï¼‰ã€æ‰“å­—æœºå­—ä½“æ—ï¼ˆTypewriter Familyï¼‰ã€‚ â€‹ æ­£æ–‡ä¸€èˆ¬é»˜è®¤ä½¿ç”¨ç½—é©¬å­—ä½“æ—ï¼Œå¯ç”¨ä¸‹é¢ä¸¤ç§å­—ä½“æ—å‘½ä»¤è§„å®šå­—ä½“æ—ã€‚ 12345678910\\documentclass[UTF8]&#123;ctexart&#125;\\begin&#123;document&#125; %å­—ä½“æ—è®¾ç½®ï¼ˆç½—é©¬å­—ä½“æ—ã€æ— è¡¬çº¿å­—ä½“æ—ã€æ‰“å­—æœºå­—ä½“æ—ï¼‰ \\textrm&#123;Roman Family&#125; \\textsf&#123;Sans Serif Family&#125; \\texttt&#123;Typewriter Family&#125; \\rmfamily Roman Family \\sffamily Sans Serif Family \\ttfamily Typewriter Family &#123;\\rmfamily Roman Family&#125; &#123;\\sffamily Sans Serif Family&#125; &#123;\\ttfamily Typewriter Family&#125;\\end&#123;document&#125; å­—ä½“ç³»åˆ—â€‹ å­—ä½“ç³»åˆ—å…±æœ‰2ç§ï¼šä¸­ç­‰ï¼ˆmediumï¼‰ã€åŠ å®½åŠ ç²—ï¼ˆbold extendedï¼‰ã€‚ â€‹ æ­£æ–‡é»˜è®¤ä½¿ç”¨ä¸­ç­‰å­—ä½“ç³»åˆ—ã€‚ 12345678\\documentclass[UTF8]&#123;ctexart&#125;\\begin&#123;document&#125; %å­—ä½“ç³»åˆ—è®¾ç½®(ç²—ç»†ã€å®½åº¦) \\textmd&#123;Medium Series&#125; \\textbf&#123;Boldface Series&#125; &#123;\\mdseries Medium Series&#125; &#123;\\bfseries Boldface Series&#125; \\end&#123;document&#125; å­—ä½“å½¢çŠ¶â€‹ å­—ä½“å½¢çŠ¶å…±æœ‰4ç§ï¼šç›´ç«‹ï¼ˆUpright Shapeï¼‰ã€æ„å¤§åˆ©ï¼ˆItalic Shapeï¼‰ã€å€¾æ–œï¼ˆSlanted Shapeï¼‰ã€å°å‹å¤§å†™ï¼ˆSmall Caps Shapeï¼‰ã€‚ â€‹ æ­£æ–‡é»˜è®¤ä½¿ç”¨ç›´ç«‹å­—ä½“å½¢çŠ¶ã€‚ 12345678\\documentclass[UTF8]&#123;ctexart&#125;\\begin&#123;document&#125; %å­—ä½“å½¢çŠ¶ï¼ˆç›´ç«‹ã€æ„å¤§åˆ©ã€å€¾æ–œã€å°å‹å¤§å†™ï¼‰ \\textup&#123;Upright Shape&#125; \\textit&#123;Italic Shape&#125; \\textsl&#123;Slanted Shape&#125; \\textsc&#123;Small Caps Shape&#125; &#123;\\upshape Upright Shape&#125; &#123;\\itshape Italic Shape&#125; &#123;\\slshape Slanted Shape&#125; &#123;\\scshape Small Caps Shape&#125;\\end&#123;document&#125; ä¸­æ–‡å­—ä½“â€‹ ä¸­æ–‡å­—ä½“å…±æœ‰4ç§ï¼šå®‹ä½“ã€é»‘ä½“ã€ä»¿å®‹ã€æ¥·ä¹¦ã€‚ â€‹ ctexartæ–‡ä½“ï¼Œæ­£æ–‡ä¸­çš„ä¸­æ–‡é»˜è®¤ä¸ºå®‹ä½“ã€‚ 123456\\documentclass[UTF8]&#123;ctexart&#125;\\begin&#123;document&#125; %ä¸­æ–‡å­—ä½“ï¼ˆå®‹ä½“ã€é»‘ä½“ã€ä»¿å®‹ã€æ¥·ä¹¦ï¼‰ &#123;\\songti å®‹ä½“&#125; \\quad &#123;\\heiti é»‘ä½“&#125; \\quad &#123;\\fangsong ä»¿å®‹&#125; \\quad &#123;\\kaishu æ¥·ä¹¦&#125;\\end&#123;document&#125; %\\quadä¸ºtap â€‹ ä¸­æ–‡å­—ä½“åŒæ ·åŒ…å«ç²—ä½“å’Œæ–œä½“ã€‚ 123456\\documentclass[UTF8]&#123;ctexart&#125;\\begin&#123;document&#125; %ä¸­æ–‡å­—ä½“çš„ç²—ä½“å’Œæ–œä½“ ä¸­æ–‡å­—ä½“çš„\\textbf&#123;ç²—ä½“&#125;å’Œ\\textit&#123;æ–œä½“&#125;\\end&#123;document&#125; å­—ä½“å¤§å°è‹±æ–‡å­—ä½“å¤§å°â€‹ ä»¥\\normalsizeçš„å¤§å°ä¸ºåŸºç¡€ï¼Œæ¥è®¾ç½®å­—ä½“å¤§å°ã€‚ â€‹ æ­£æ–‡å­—ä½“é»˜è®¤ä¸º\\normalsizeï¼Œ\\normalsizeå­—ä½“å¤§å°é»˜è®¤ä¸º10ptã€‚ 12345678910111213141516\\documentclass[12pt]&#123;ctexart&#125; %[]ä¸­å¯è®¾ç½®normalsizeå­—ä½“å¤§å°\\begin&#123;document&#125; % å­—ä½“å¤§å° &#123;\\tiny tiny&#125;\\\\ % \\\\ä¸ºæ¢è¡Œ &#123;\\scriptsize scriptsize&#125;\\\\ &#123;\\footnotesize footnotesize&#125;\\\\ &#123;\\small small&#125;\\\\ &#123;\\normalsize normalsize&#125;\\\\ &#123;\\large large&#125;\\\\ &#123;\\Large Large&#125;\\\\ &#123;\\LARGE LARGE&#125;\\\\ &#123;\\huge huge&#125;\\\\ &#123;\\Huge Huge&#125;\\\\ \\end&#123;document&#125; ä¸­æ–‡å­—ä½“å¤§å°â€‹ ä»¥äº”å·å­—ä½“çš„å¤§å°ä¸ºåŸºç¡€ï¼Œæ¥è®¾ç½®å­—ä½“å¤§å°ã€‚ â€‹ æ­£æ–‡å­—ä½“é»˜è®¤ä¸º äº”å·å­—ä½“ã€‚ 123456789101112\\documentclass&#123;ctexart&#125;\\begin&#123;document&#125; % ä¸­æ–‡å­—ä½“å¤§å° \\zihao&#123;2&#125; äºŒå·ä¸­æ–‡å­—ä½“ \\zihao&#123;-2&#125; å°äºŒå·ä¸­æ–‡å­—ä½“ \\zihao&#123;5&#125; äº”å·ä¸­æ–‡å­—ä½“ \\zihao&#123;-5&#125; å°äº”å·ä¸­æ–‡å­—ä½“\\end&#123;document&#125; ç¯‡ç« ç»“æ„æçº²â€‹ \\sectionå¯ä»¥åœ¨æ­£æ–‡ä¸­æ„å»ºå°èŠ‚ï¼Œç›¸å½“äºä¸€çº§æ ‡é¢˜ï¼Œåœ¨sectionå‰åŠ subå¥—å¨ƒå½¢æˆäºŒçº§ã€ä¸‰çº§ã€å››çº§ç­‰ç­‰æ ‡é¢˜ã€‚ 12345678\\documentclass&#123;article&#125;\\begin&#123;document&#125; \\section&#123;section title&#125; %ä¸€çº§æ ‡é¢˜ \\subsection&#123;subsection title&#125; %äºŒçº§æ ‡é¢˜ \\subsubsection&#123;subsubsection title&#125; %ä¸‰çº§æ ‡é¢˜ \\section&#123;section title&#125; %ä¸‰çº§æ ‡é¢˜\\end&#123;document&#125; ç›®å½•â€‹ \\tableofcontents å¯ç”Ÿæˆç›®å½•ã€‚ 123456789\\documentclass&#123;article&#125;\\begin&#123;document&#125; \\tableofcontents %ç”Ÿæˆç›®å½• \\section&#123;section title&#125; %ä¸€çº§æ ‡é¢˜ \\subsection&#123;subsection title&#125; %äºŒçº§æ ‡é¢˜ \\section&#123;section title&#125; %ä¸‰çº§æ ‡é¢˜\\end&#123;document&#125; æ­£æ–‡ ä½¿ç”¨ç©ºè¡Œåˆ†æ®µã€‚å•ä¸ªæ¢è¡Œä¸ä¼šå¼•èµ·åˆ†æ®µï¼Œå¿…é¡»ä¸­é—´æœ‰ç©ºè¡Œï¼Œå¤šä¸ªç©ºè¡Œå’Œä¸€ä¸ªç©ºè¡Œæ•ˆæœä¸€è‡´ã€‚ æ®µå‰ä¸ç”¨ç©ºæ ¼ã€‚Latexä¼šè‡ªåŠ¨æ®µå‰ç¼©è¿›ï¼Œå³ä½¿æ®µå‰æ‰“äº†ç©ºæ ¼ä¹Ÿä¼šè¢«çœç•¥ã€‚ æ±‰å­—åçš„ç©ºæ ¼ä¼šè¢«çœç•¥ï¼Œä½†è‹±æ–‡å­—æ¯ä¹‹é—´ä¸ä¼šï¼Œå¤šä¸ªç©ºæ ¼å’Œä¸€ä¸ªç©ºæ ¼æ•ˆæœä¸€è‡´ã€‚ \\ \\ ç”¨æ¥æ¢è¡Œã€‚æ¢è¡Œä¸ä¼šæ–°å¼€ä¸€ä¸ªæ®µè½ã€‚ \\par åˆ†æ®µã€‚ä¸€èˆ¬ä¸ä½¿ç”¨ã€‚ 12345678\\documentclass&#123;article&#125;\\begin&#123;document&#125; This is an article. This is an article. This is an article. %ç©ºè¡Œâ€”â€”æ–°å¼€ä¸€ä¸ªæ®µè½ This is an article. This is an article. This is an article.\\\\Change the line. Change the line. Change the line. % \\\\â€”â€”æ¢è¡Œ\\end&#123;document&#125; ç‰¹æ®Šå­—ç¬¦ç©ºç™½ç¬¦å· è‹±æ–‡å­—ç¬¦ä¹‹é—´å¤šä¸ªç©ºæ ¼å½“ä¸€ä¸ªç©ºæ ¼å¤„ç†ï¼Œä¸­æ–‡å­—ç¬¦ä¹‹é—´çš„ç©ºæ ¼æ— æ•ˆï¼› ä¸­æ–‡ä¹‹é—´æ’å…¥è‹±æ–‡ï¼Œåœ¨è‹±æ–‡ç‰‡æ®µå‰åè‡ªåŠ¨æ·»åŠ ç©ºæ ¼ï¼› å…¶ä»–ç©ºæ ¼å‘½ä»¤ å‘½ä»¤ åŠŸèƒ½ \\quad 1emçš„ç©ºç™½ï¼ˆæ¨èï¼‰ \\qquad 2emçš„ç©ºç™½ \\, 1/6emçš„ç©ºç™½ \\thinspace 1/6emçš„ç©ºç™½ \\enspace 0.5emçš„ç©ºç™½ \\ ç©ºæ ¼ï¼ˆæ¨èï¼‰ ï½ ç¡¬ç©ºæ ¼ \\kern æŒ‡å®šå®½åº¦ äº§ç”ŸæŒ‡å®šå®½åº¦çš„ç©ºç™½ï¼ˆå®½åº¦å¯ä¸ºå‰¯å€¼ï¼‰ \\hspace{æŒ‡å®šå®½åº¦} äº§ç”ŸæŒ‡å®šå®½åº¦çš„ç©ºç™½ï¼ˆå®½åº¦å¯ä¸ºå‰¯å€¼ï¼‰ \\hphantom{} å ä½å®½åº¦çš„ç©ºæ ¼ï¼ˆç©ºæ ¼é•¿åº¦ç­‰äº{}å†…çš„å­—ç¬¦åº”æœ‰çš„é•¿åº¦ï¼‰ \\hfill äº§ç”Ÿä¸€è¡Œçš„ç©ºæ ¼ï¼ˆå‰ååˆ†åˆ«åœ¨è¡Œé¦–å’Œè¡Œå°¾ï¼‰ 123456789101112131415161718192021222324252627282930313233343536\\documentclass&#123;article&#125;\\begin&#123;document&#125; % 1emçš„ç©ºç™½ a\\textbackslash quad b --------------- a\\quad b % 2emçš„ç©ºç™½ a\\textbackslash qquad b -------------- a\\qquad b % 1/6emçš„ç©ºç™½ a\\textbackslash,b --------------------- a\\,b % 1/6emçš„ç©ºç™½ a\\textbackslash thinspace b --------- a\\thinspace b % 0.5emçš„ç©ºç™½ a\\textbackslash enspace b ------------ a\\enspace b % ç©ºæ ¼ a\\textbackslash b ----------------------- a\\ b % ç¡¬ç©ºæ ¼ a\\~b ------------------------ a~b % äº§ç”ŸæŒ‡å®šå®½åº¦çš„ç©ºç™½ï¼ˆå®½åº¦å¯ä¸ºå‰¯å€¼ï¼‰ a\\textbackslash kern 1em b ----------- a\\kern 1em b % äº§ç”ŸæŒ‡å®šå®½åº¦çš„ç©ºç™½ï¼ˆå®½åº¦å¯ä¸ºå‰¯å€¼ï¼‰ a\\textbackslash hspace\\&#123;1em\\&#125;b ------ a\\hspace&#123;1em&#125; b % å ä½å®½åº¦çš„ç©ºæ ¼ï¼ˆç©ºæ ¼é•¿åº¦ç­‰äº&#123;&#125;å†…çš„å­—ç¬¦åº”æœ‰çš„é•¿åº¦ï¼‰ a\\textbackslash hphantom\\&#123;xyz\\&#125;b --- a\\hphantom&#123;xyz&#125;b % äº§ç”Ÿä¸€è¡Œçš„ç©ºæ ¼ï¼ˆå‰ååˆ†åˆ«åœ¨è¡Œé¦–å’Œè¡Œå°¾ï¼‰ a\\textbackslash hfill b ------------------ a\\hfill b\\end&#123;document&#125; æ§åˆ¶ç¬¦â€‹ å¯¹äºæœ‰ç‰¹æ®Šå«ä¹‰çš„ç¬¦å·ï¼Œè¦æƒ³å…¶æ­£å¸¸æ˜¾ç¤ºï¼Œéœ€åœ¨ç¬¦å·å‰åŠ  \\ ï¼Œè€Œ \\ æœ¬èº«ç”±äº\\ \\è¡¨ç¤ºæ¢è¡Œï¼Œæ‰€ä»¥ç”¨ \\textbacklash è¡¨ç¤ºã€‚ æ§åˆ¶ç¬¦ å‘½ä»¤ \\ \\textbackslash # \\# $ \\$ {} \\{\\} æ’ç‰ˆç¬¦å· æ’ç‰ˆç¬¦å· å‘½ä»¤ Â§ \\S Â¶ \\P â€  \\dag â€¡ \\ddag Â© \\copyright Â£ \\pounds æ ‡å¿—ç¬¦å·12345\\documentclass&#123;article&#125;\\begin&#123;document&#125; \\TeX \\quad \\LaTeX\\end&#123;document&#125; å¼•å· ç¬¦å·åç§° ç¬¦å· å‘½ä»¤ å·¦å•å¼•å· â€˜ ` å³å•å¼•å· â€™ â€˜ å·¦åŒå¼•å· â€œ `` å³åŒå¼•å· â€ â€˜â€™ æ’å›¾åŸºæœ¬â€‹ åœ¨LaTeXä¸­ï¼Œæ’å›¾æ˜¯ç”± graphics æˆ– graphicx å®åŒ…æ‰€ä½¿ç”¨çš„ \\includegraphics å‘½ä»¤å®Œæˆçš„ã€‚graphics å’Œ graphicx åŠŸèƒ½å·®åˆ«ä¸å¤§ï¼Œä½† graphicx ä½¿ç”¨æ›´æ–¹ä¾¿ä¸€äº›ã€‚ â€‹ æ’å›¾é€‚ç”¨æ ¼å¼ï¼šEPSã€PDFã€PNGã€JPEGã€BMP â€‹ æœç´¢è·¯å¾„é»˜è®¤ä¸ºtexæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ç”¨\\graphicspath å¯¹æœç´¢è·¯å¾„è¿›è¡Œä¿®æ”¹ã€‚ 12345678910\\documentclass&#123;article&#125;% è°ƒç”¨graphicxå®åŒ…ï¼Œä½¿ç”¨æ’å›¾åŠŸèƒ½\\usepackage&#123;graphicx&#125;\\graphicspath&#123;&#123;\\figures&#125;&#125; %ä¿®æ”¹æœç´¢è·¯å¾„\\begin&#123;document&#125; % åŸºäºæœç´¢è·¯å¾„æ’å…¥å›¾åƒ \\includegraphics&#123;Sx2ec.png&#125;\\end&#123;document&#125; å‘½ä»¤é€‰é¡¹å¤§å°ç¼©æ”¾â€‹ widthã€height å’Œ scale è®¾ç½®å›¾å½¢çš„å®½åº¦ã€é«˜åº¦æˆ–ç¼©æ”¾æ¯”ä¾‹ã€‚ 1234567891011\\documentclass&#123;article&#125;% è°ƒç”¨graphicxå®åŒ…ï¼Œä½¿ç”¨æ’å›¾åŠŸèƒ½\\usepackage&#123;graphicx&#125;\\begin&#123;document&#125; % åŸºäºæœç´¢è·¯å¾„æ’å…¥å›¾åƒ \\includegraphics[width=10em]&#123;figures/Sx2ec&#125; %å®½åº¦ä¸º10em \\includegraphics[height=5cm]&#123;figures/Sx2ec&#125; %é«˜åº¦ä¸º10cm \\includegraphics[scale=0.5]&#123;figures/Sx2ec&#125; %ç¼©æ”¾0.5å€\\end&#123;document&#125; æ—‹è½¬â€‹ angle é€‰é¡¹å¯ä»¥è®©å›¾å½¢é€†æ—¶é’ˆæ—‹è½¬ä¸€å®šçš„è§’åº¦ï¼Œæ—‹è½¬çš„ä¸­å¿ƒå¯ä»¥ç”¨ origin é€‰é¡¹ç¡®å®šã€‚originçš„å€¼å¯ä»¥ç”¨å­—ç¬¦ lï¼Œrï¼Œcï¼Œtï¼Œbï¼ŒBä¸­çš„ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªï¼Œåˆ†åˆ«è¡¨ç¤ºå·¦ï¼Œå³ï¼Œä¸­ï¼Œä¸Šï¼Œä¸‹å’ŒåŸºçº¿ï¼Œé»˜è®¤å€¼ä¸º lbã€‚ 12345678910\\documentclass&#123;article&#125;% è°ƒç”¨graphicxå®åŒ…ï¼Œä½¿ç”¨æ’å›¾åŠŸèƒ½\\usepackage&#123;graphicx&#125;\\begin&#123;document&#125; % åŸºäºæœç´¢è·¯å¾„æ’å…¥å›¾åƒ \\includegraphics[angle=90]&#123;figures/Sx2ec&#125; %åŸºäºå·¦ä¸‹ï¼Œé€†æ—¶é’ˆæ—‹è½¬90åº¦ \\includegraphics[angle=-45,origin=c]&#123;figures/Sx2ec&#125; %åŸºäºä¸­å¿ƒï¼Œé¡ºæ—¶é’ˆæ—‹è½¬45åº¦\\end&#123;document&#125; è¡¨æ ¼â€‹ LaTeXè¡¨æ ¼ä½¿ç”¨ç¯å¢ƒå½•å…¥ï¼šåœ¨æ–‡æœ¬æˆ–æ•°å­¦æ¨¡å¼ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ tabular ç¯å¢ƒï¼Œåœ¨æ•°å­¦æ¨¡å¼ä¸‹è¿˜å¯ä»¥ä½¿ç”¨ array ç¯å¢ƒã€‚tabular å’Œ array çš„ä¸€èˆ¬æ ¼å¼åŸºæœ¬ç›¸åŒã€‚ åŸºæœ¬â€‹ æ¯è¡Œåç”¨ \\\\ è¡¨ç¤ºæ¢è¡Œï¼Œä¸€è¡Œå†…çš„ä¸åŒåˆ—ä¹‹é—´ç”¨ &amp; åˆ†å¼€ã€‚ â€‹ åˆ—æ ¼å¼è¯´æ˜ï¼Œç”¨ lã€cã€r åˆ†åˆ«è¡¨ç¤º å·¦å¯¹é½ã€å±…ä¸­ã€å³å¯¹é½ã€‚ 123456789101112131415\\documentclass&#123;article&#125;\\begin&#123;document&#125; % \\begin&#123;tabular&#125;[(å‚ç›´å¯¹é½)]&#123;(åˆ—æ ¼å¼è¯´æ˜)&#125; % (è¡¨é¡¹)&amp;(è¡¨é¡¹)&amp;...&amp;(è¡¨é¡¹)\\\\ % .... % \\end&#123;tabular&#125; \\begin&#123;tabular&#125;&#123;lcr&#125; %ä¸‰åˆ— åˆ†åˆ«ä¸ºï¼šå·¦å¯¹é½ã€å±…ä¸­ã€å³å¯¹é½ l &amp; c &amp; r \\\\ %ä¸€è¡Œ left &amp; center &amp; right \\\\ %ä¸€è¡Œ \\end&#123;tabular&#125;\\end&#123;document&#125; è¡¨æ ¼çº¿â€‹ åˆ—è¡¨æ ¼çº¿ï¼šåœ¨åˆ—æ ¼å¼è¯´æ˜ä¸­åŠ  | â€‹ è¡Œè¡¨æ ¼çº¿ï¼š\\hline â€‹ éœ€è¦åŒçº¿æ˜¯é‡å¤ || æˆ– \\hline\\hlineã€‚ 123456789101112131415161718\\documentclass&#123;article&#125;\\begin&#123;document&#125; % \\begin&#123;tabular&#125;[(å‚ç›´å¯¹é½)]&#123;(åˆ—æ ¼å¼è¯´æ˜)&#125; % (è¡¨é¡¹)&amp;(è¡¨é¡¹)&amp;...&amp;(è¡¨é¡¹)\\\\ % .... % \\end&#123;tabular&#125; \\begin&#123;tabular&#125;&#123;|l|c|r|&#125; %ä¸‰åˆ— åˆ†åˆ«ä¸ºï¼šå·¦å¯¹é½ã€å±…ä¸­ã€å³å¯¹é½ \\hline l &amp; c &amp; r \\\\ %ä¸€è¡Œ \\hline \\hline left &amp; center &amp; right \\\\ %ä¸€è¡Œ \\hline \\end&#123;tabular&#125;\\end&#123;document&#125; å‚ç›´å¯¹é½â€‹ ç¡®å®šè¡¨æ ¼çš„åŸºçº¿ä½ç½®ã€‚ t æŒ‰è¡¨æ ¼é¡¶éƒ¨å¯¹é½ b æŒ‰è¡¨æ ¼åº•éƒ¨å¯¹é½ é»˜è®¤ å‚ç›´å±…ä¸­ 123456789101112131415161718192021222324252627282930313233343536\\documentclass&#123;article&#125;\\begin&#123;document&#125; ---line1--- \\begin&#123;tabular&#125;&#123;|rr|&#125; %é»˜è®¤å‚ç›´å±…ä¸­ \\hline Input &amp; Output \\\\ \\hline $-2$ &amp; 4 \\\\ 0 &amp; 0 \\\\ 2 &amp; 4 \\\\ \\hline \\end&#123;tabular&#125; ---line2--- \\begin&#123;tabular&#125;[t]&#123;|rr|&#125; %æŒ‰è¡¨æ ¼é¡¶éƒ¨å¯¹é½ \\hline Input &amp; Output \\\\ \\hline $-2$ &amp; 4 \\\\ 0 &amp; 0 \\\\ 2 &amp; 4 \\\\ \\hline \\end&#123;tabular&#125; ---line3--- \\begin&#123;tabular&#125;[b]&#123;|rr|&#125; %æŒ‰è¡¨æ ¼åº•éƒ¨å¯¹é½ \\hline Input &amp; Output \\\\ \\hline $-2$ &amp; 4 \\\\ 0 &amp; 0 \\\\ 2 &amp; 4 \\\\ \\hline \\end&#123;tabular&#125;\\end&#123;document&#125; åˆ—æ ¼å¼è¯´æ˜ l æœ¬åˆ—å·¦å¯¹é½ c æœ¬åˆ—å±…ä¸­ r æœ¬åˆ—å³å¯¹é½ p{(å®½)} æœ¬åˆ—å…·æœ‰å›ºå®šå®½åº¦ï¼Œä¸”å¯ä»¥è‡ªåŠ¨æ¢è¡Œã€‚ | ç”»ä¸€æ¡ç«–çº¿ @{(å†…å®¹)} æ·»åŠ ä»»æ„å†…å®¹ï¼Œä¸å è¡¨é¡¹è®¡æ•°ã€‚ *{(è®¡æ•°)}{(åˆ—æ ¼å¼è¯´æ˜ç¬¦)} å°†ç»™å‡ºçš„åˆ—æ ¼å¼è¯´æ˜ç¬¦é‡å¤å¤šæ¬¡ã€‚ 1234567891011\\documentclass&#123;article&#125;\\begin&#123;document&#125; \\begin&#123;tabular&#125;&#123;|c|*&#123;3&#125;&#123;r@&#123;.&#125;l|&#125;&#125; \\hline revenue &amp; 1234&amp;6 &amp; 2345&amp;23 &amp; 239&amp;0 \\\\ \\hline cost &amp; 231&amp;24 &amp; 123&amp;0 &amp; 329&amp;18 \\\\ \\hline \\end&#123;tabular&#125;\\end&#123;document&#125; è¡¨æ ¼å•å…ƒçš„åˆå¹¶ä¸åˆ†å‰²åˆå¹¶è¡Œåˆå¹¶â€‹ \\multicolumn{(é¡¹æ•°)}{(æ–°åˆ—æ ¼å¼)}{(å†…å®¹)} å¯ç”¨äºå°†ä¸€è¡Œä¸­çš„å‡ ä¸ªä¸åŒçš„è¡¨é¡¹åˆå¹¶ä¸ºä¸€é¡¹ã€‚ 12345678910111213\\documentclass&#123;article&#125;\\begin&#123;document&#125; \\begin&#123;tabular&#125;&#123;|r|r|&#125; \\hline \\multicolumn&#123;2&#125;&#123;|c|&#125;&#123;score&#125; \\\\ %å±…ä¸­åˆå¹¶ä¸¤ä¸ªå•å…ƒæ ¼ï¼Œå†…å®¹ä¸ºscore \\hline Maths &amp; English \\\\ \\hline 80 &amp; 85 \\\\ \\hline \\end&#123;tabular&#125;\\end&#123;document&#125; åˆ—åˆå¹¶\\clineï¼ˆå®¹æ˜“å®ç°ï¼Œä½†æ•ˆæœä¸ä½³ï¼‰â€‹ \\cline{(èµ·å§‹åˆ—å·)-(ç»ˆæ­¢åˆ—å·)} å’Œ \\hline ä¸€æ ·å¯ä»¥ç”»æ°´å¹³çš„è¡¨æ ¼çº¿ï¼Œä½†æ˜¯ \\cline å¯ä»¥è§„å®šè¡¨æ ¼çº¿èµ·å§‹å’Œç»ˆæ­¢çš„åˆ—å·ï¼Œå³å¯ç›¸å½“äºåˆå¹¶åˆ—å•å…ƒã€‚ 1234567891011\\documentclass&#123;article&#125;\\begin&#123;document&#125; \\begin&#123;tabular&#125;&#123;|c|r|r|&#125; \\hline &amp; Maths &amp; English \\\\ \\cline&#123;2-3&#125; %åªç”»2åˆ°3åˆ— score &amp; 80 &amp; 85 \\\\ \\hline \\end&#123;tabular&#125;\\end&#123;document&#125; \\multirow ï¼ˆæ•ˆæœè¾ƒå¥½ï¼‰â€‹ \\multirow{(è¡Œæ•°)}{(å®½åº¦)}{(å†…å®¹)} æˆ– \\multirow{(è¡Œæ•°)}*{(å†…å®¹)} â€‹ ç¬¬ä¸€ç§å½¢å¼å¯è‡ªåŠ¨æ¢è¡Œã€‚ â€‹ ä½¿ç”¨\\multirowå¾—å…ˆå¼•å…¥å®åŒ…multirowã€‚ 1234567891011121314\\documentclass&#123;article&#125;% ä½¿ç”¨\\multirowå¾—å…ˆå¼•å…¥å®åŒ…multirow\\usepackage&#123;multirow&#125;\\begin&#123;document&#125; \\begin&#123;tabular&#125;&#123;|c|r|r|&#125; \\hline \\multirow&#123;2&#125;*&#123;score&#125; &amp; Maths &amp; English \\\\ \\cline&#123;2-3&#125; &amp; 80 &amp; 85 \\\\ \\hline \\end&#123;tabular&#125;\\end&#123;document&#125; æ‹†åˆ†â€‹ \\diagbox è‡ªåŠ¨åˆ¤æ–­æ˜¯æŠŠè¡¨å¤´åˆ†æˆä¸¤éƒ¨åˆ†è¿˜æ˜¯ä¸‰éƒ¨åˆ†ã€‚ â€‹ ä½¿ç”¨\\diagboxå¾—å…ˆå¼•å…¥å®åŒ…diagboxã€‚ 12345678910111213141516\\documentclass&#123;article&#125;% ä½¿ç”¨\\diagboxå¾—å…ˆå¼•å…¥å®åŒ…diagbox\\usepackage&#123;diagbox&#125;\\begin&#123;document&#125; \\begin&#123;tabular&#125;&#123;|c|c|c|&#125; \\hline \\diagbox&#123;Letter&#125;&#123;Number&#125;&amp; 1 &amp; 2 \\\\ \\hline a &amp; 0.1 &amp; 0.3 \\\\ \\hline b &amp; 0.3 &amp; 0.8 \\\\ \\hline \\end&#123;tabular&#125;\\end&#123;document&#125; æµ®åŠ¨ä½“â€‹ æµ®åŠ¨ä½“ç”¨äºå®ç°çµæ´»åˆ†é¡µï¼Œç»™å›¾è¡¨æ·»åŠ æ ‡é¢˜ï¼Œäº¤å‰åº”ç”¨ã€‚ â€‹ å›¾ç‰‡ä½¿ç”¨ figureç¯å¢ƒï¼Œè¡¨æ ¼ä½¿ç”¨ tableç¯å¢ƒã€‚ æ ¼å¼ï¼ˆä»¥figureä¸ºä¾‹ï¼‰ï¼š 123\\begin&#123;figure&#125;[&lt;å…è®¸ä½ç½®&gt;]&lt; ä»»æ„å†…å®¹ &gt;\\end&#123;figure&#125; &lt;å…è®¸ä½ç½®&gt;å‚æ•°ï¼ˆé»˜è®¤tbpï¼‰ï¼š h â€”- æ­¤å¤„ï¼ˆhereï¼‰ï¼Œä»£ç æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä½ç½® t â€”- é¡µé¡¶ï¼ˆtopï¼‰ï¼Œä»£ç æ‰€åœ¨é¡µé¢æˆ–ä¹‹åçš„é¡µé¢çš„é¡¶éƒ¨ b â€”- é¡µåº•ï¼ˆbottomï¼‰ï¼Œä»£ç æ‰€åœ¨é¡µé¢æˆ–ä¹‹åçš„é¡µé¢çš„åº•éƒ¨ p â€”- ç‹¬ç«‹ä¸€é¡µï¼ˆpageï¼‰ï¼Œæµ®åŠ¨é¡µé¢ 123456789101112131415161718192021222324252627282930\\documentclass&#123;ctexart&#125;% è°ƒç”¨graphicxå®åŒ…ï¼Œä½¿ç”¨æ’å›¾åŠŸèƒ½\\usepackage&#123;graphicx&#125;\\begin&#123;document&#125; ä¸‹é¢\\ref&#123;Latex&#125; æ˜¯\\LaTeX&#123;&#125;çš„æ ‡å¿—ã€‚% \\refä¸ºå¼•ç”¨æ ‡ç­¾ \\begin&#123;figure&#125;[htbp] %htbpå¯ä»¥è®©å›¾è¡¨éšæ–‡å­—è¿åŠ¨ \\centering %æµ®åŠ¨ä½“å±…ä¸­ \\includegraphics&#123;figures/Sx2ec&#125; \\caption&#123;\\LaTeX çš„æ ‡å¿—&#125; %æ ‡é¢˜ \\label&#123;Latex&#125; %æ ‡ç­¾ï¼ˆç”¨äºå¼•ç”¨ï¼‰ \\end&#123;figure&#125; å¼•ç”¨ä¸‹é¢\\ref&#123;InAndOut&#125; ä¸­çš„æ•°æ®ã€‚% \\refä¸ºå¼•ç”¨æ ‡ç­¾ \\begin&#123;table&#125;[htbp] %htbpå¯ä»¥è®©å›¾è¡¨éšæ–‡å­—è¿åŠ¨ \\centering %æµ®åŠ¨ä½“å±…ä¸­ \\begin&#123;tabular&#125;&#123;|rr|&#125; \\hline Input &amp; Output \\\\ \\hline $-2$ &amp; 4 \\\\ 0 &amp; 0 \\\\ 2 &amp; 4 \\\\ \\hline \\end&#123;tabular&#125; \\caption&#123;è¾“å…¥è¾“å‡ºæ•°æ®&#125; %æ ‡é¢˜ \\label&#123;InAndOut&#125; %æ ‡ç­¾ï¼ˆç”¨äºå¼•ç”¨ï¼‰ \\end&#123;table&#125;\\end&#123;document&#125; æ•°å­¦å…¬å¼â€‹ LaTeX å°†æ’ç‰ˆå†…å†…å®¹åˆ†ä¸ºæ–‡æœ¬æ¨¡å¼å’Œæ•°å­¦æ¨¡å¼ã€‚æ–‡æœ¬æ¨¡å¼é€‚ç”¨äºæ™®é€šæ–‡æœ¬æ’ç‰ˆï¼Œæ•°å­¦æ¨¡å¼ç”¨äºæ•°å­¦å…¬å¼æ’ç‰ˆã€‚ åŸºæœ¬è¡Œå†…å…¬å¼â€‹ ä¸éœ€æ¢è¡Œçš„å…¬å¼ã€‚ä¸‹é¢ä¸‰ç§æ–¹æ³•å‡å¯ç”Ÿæˆè¡Œå†…å…¬å¼ã€‚ $ ç¾å…ƒç¬¦å·â€‹ æ ¼å¼ï¼š å°æ‹¬å·â€‹ æ ¼å¼ï¼š \\(&lt;æ•°å­¦å…¬å¼&gt;\\) mathç¯å¢ƒâ€‹ æ ¼å¼ï¼š \\begin{math}&lt;æ•°å­¦å…¬å¼&gt;\\end{math} â€‹ ä½¿ç”¨mathç¯å¢ƒéœ€å¼•å…¥ amsmathå®åŒ…ã€‚ 1234567891011121314\\documentclass&#123;ctexart&#125;\\usepackage&#123;amsmath&#125;\\begin&#123;document&#125; % $ ç¾å…ƒç¬¦å· äº¤æ¢å¾‹æ˜¯ $a+b=b+a$ï¼Œå¦‚ $1+2=2+1=3$ã€‚ % å°æ‹¬å· äº¤æ¢å¾‹æ˜¯ \\(a+b=b+a\\)ï¼Œå¦‚ \\(1+2=2+1=3\\)ã€‚ %mathç¯å¢ƒ äº¤æ¢å¾‹æ˜¯ \\begin&#123;math&#125; a+b=b+a\\end&#123;math&#125;ï¼Œå¦‚ \\begin&#123;math&#125; 1+2=2+1=3\\end&#123;math&#125;ã€‚\\end&#123;document&#125; è¡Œé—´å…¬å¼â€‹ è¡Œé—´å…¬å¼æ¢è¡Œä¸åˆ†æ®µã€‚ä¸‹é¢ä¸‰ç§æ–¹æ³•å‡å¯ç”Ÿæˆè¡Œé—´å…¬å¼ã€‚ $ ç¾å…ƒç¬¦å·â€‹ æ ¼å¼ï¼š $$$&lt;æ•°å­¦å…¬å¼&gt;$$$ ä¸­æ‹¬å·â€‹ æ ¼å¼ï¼š \\[&lt;æ•°å­¦å…¬å¼&gt;\\] displaymathç¯å¢ƒâ€‹ æ ¼å¼ï¼š \\begin{displaymath}&lt;æ•°å­¦å…¬å¼&gt;\\end{displaymath} â€‹ ä½¿ç”¨displaymathç¯å¢ƒéœ€å¼•å…¥ amsmathå®åŒ…ã€‚ 1234567891011121314151617181920212223\\documentclass&#123;ctexart&#125;\\usepackage&#123;amsmath&#125;\\begin&#123;document&#125; % $ ç¾å…ƒç¬¦å· äº¤æ¢å¾‹æ˜¯ $$a+b=b+a$$ å¦‚ $$1+2=2+1=3$$ % ä¸­æ‹¬å· äº¤æ¢å¾‹æ˜¯ \\[a+b=b+a\\] å¦‚ \\[1+2=2+1=3\\] %displaymathç¯å¢ƒ äº¤æ¢å¾‹æ˜¯ \\begin&#123;displaymath&#125; a+b=b+a\\end&#123;displaymath&#125; å¦‚ \\begin&#123;displaymath&#125; 1+2=2+1=3\\end&#123;displaymath&#125;\\end&#123;document&#125; è‡ªåŠ¨ç¼–å·å…¬å¼â€”â€”equationç¯å¢ƒâ€‹ equationç¯å¢ƒå¯ä»¥å¯¹å…¬å¼è‡ªåŠ¨ç¼–å·ï¼Œæ­¤æ—¶æ·»åŠ  \\label æ ‡ç­¾æ–¹ä¾¿å¼•ç”¨ã€‚ â€‹ æ ¼å¼ï¼š\\begin{equation}&lt;æ•°å­¦å…¬å¼&gt;\\end{equation} 12345678\\documentclass&#123;ctexart&#125;\\begin&#123;document&#125; è°ƒç”¨ä¸‹é¢çš„å…¬å¼\\ref&#123;eq:exchange&#125; \\begin&#123;equation&#125; a+b=b+a \\label&#123;eq:exchange&#125; \\end&#123;equation&#125;\\end&#123;document&#125; æ•°å­¦ç»“æ„ä¸Šæ ‡ä¸ä¸‹æ ‡ä¸Šæ ‡â€‹ ç”¨ ^{} è¡¨ç¤ºä¸Šæ ‡ã€‚ 123456\\documentclass&#123;article&#125;\\begin&#123;document&#125; % ä¸Šæ ‡^&#123;&#125; $ f(x)=x^2 + x^&#123;20&#125; + 2x^&#123;4x^2+1&#125; $\\end&#123;document&#125; ä¸‹æ ‡â€‹ ç”¨ _{} è¡¨ç¤ºä¸‹æ ‡ã€‚ 123456\\documentclass&#123;article&#125;\\begin&#123;document&#125; % ä¸‹æ ‡_&#123;&#125; $a_0,a_1,a_2,...,a_&#123;100&#125;$\\end&#123;document&#125; å…¶ä»–ä¸Šä¸‹æ ‡ ç¬¦å· å‘½ä»¤ â€˜ â€˜ Â° ^\\circ æ±‚å’Œâ€‹ æ ¼å¼ï¼š \\sum_{&lt;ä¸‹é™&gt;}^{&lt;ä¸Šé™&gt;} &lt;å‡½æ•°&gt; â€‹ æˆ–ï¼ˆä¸Šé¢çš„æ ¼å¼ä¸Šä¸‹é™åœ¨å³è¾¹ï¼Œä¸‹é¢çš„\\limitæ ¼å¼ä¸Šä¸‹é™åœ¨æ­£ä¸Šä¸‹æ–¹ ï¼‰ â€‹ \\sum\\limits_{&lt;ä¸‹é™&gt;}^{&lt;ä¸Šé™&gt;} &lt;å‡½æ•°&gt; 1234567\\documentclass&#123;ctexart&#125;\\begin&#123;document&#125; $ \\sum_&#123;i=0&#125;^&#123;n&#125; a_i $ %ä¸Šä¸‹é™åœ¨å³è¾¹ \\quad $ \\sum\\limits_&#123;i=0&#125;^&#123;n&#125; a_i $ %ä¸Šä¸‹é™åœ¨æ­£ä¸Šä¸‹æ–¹\\end&#123;document&#125; ç§¯åˆ†â€‹ æ ¼å¼: \\int_{&lt;ä¸‹é™&gt;}^{&lt;ä¸Šé™&gt;} &lt;å‡½æ•°&gt; d\\! &lt;å˜é‡&gt; â€‹ å¤šé‡ç§¯åˆ†ç”¨ \\iint \\iiint 12345\\documentclass&#123;ctexart&#125;\\begin&#123;document&#125; $ \\int_0^1 f(t) d\\! t $\\end&#123;document&#125; åˆ†å¼â€‹ æ ¼å¼ï¼š \\frac &lt;åˆ†å­&gt;&lt;åˆ†æ¯&gt; 12345\\documentclass&#123;article&#125;\\begin&#123;document&#125; $ \\frac 12 + \\frac 1a = \\frac&#123;2+a&#125;&#123;2a&#125; $\\end&#123;document&#125; æ ¹å¼â€‹ æ ¼å¼ï¼š \\sqrt[&lt;å¼€æ–¹æ¬¡æ•°&gt;]{&lt;è¢«å¼€æ–¹æ•°&gt;} 12345\\documentclass&#123;article&#125;\\begin&#123;document&#125; $ \\sqrt[n]&#123;\\frac&#123;x^2+\\sqrt&#123;2&#125;&#125;&#123;x+y&#125;&#125; $\\end&#123;document&#125; çŸ©é˜µâ€‹ amsmathå®åŒ…æä¾›ä¸€ä¸‹çŸ©é˜µå½¢å¼ã€‚ â€‹ ç¼–å†™æ ¼å¼ä¸è¡¨æ ¼ç›¸ä¼¼ã€‚ 123456789101112\\documentclass&#123;article&#125;% ä½¿ç”¨çŸ©é˜µï¼Œå¼•å…¥amsmathå®åŒ…\\usepackage&#123;amsmath&#125;\\begin&#123;document&#125; $ A = \\begin&#123;pmatrix&#125; a_&#123;11&#125; &amp; a_&#123;12&#125; &amp; a_&#123;13&#125; \\\\ 0 &amp; a_&#123;22&#125; &amp; a_&#123;23&#125; \\\\ 0 &amp; 0 &amp; a_&#123;33&#125; \\end&#123;pmatrix&#125; $\\end&#123;document&#125; çœç•¥å· è¡Œçœç•¥å· \\dots åˆ—çœç•¥å· \\vdots æ–œçœç•¥å· \\ddots 123456789101112\\documentclass&#123;ctexart&#125;% ä½¿ç”¨çŸ©é˜µï¼Œå¼•å…¥amsmathå®åŒ…\\usepackage&#123;amsmath&#125;\\begin&#123;document&#125; $A = \\begin&#123;bmatrix&#125; a_&#123;11&#125; &amp; \\dots &amp; a_&#123;1n&#125; \\\\ &amp; \\ddots &amp; \\vdots \\\\ 0 &amp; &amp; a_&#123;nn&#125; \\end&#123;bmatrix&#125;_&#123;n\\times n&#125;$\\end&#123;document&#125; å¤šåˆ—çœç•¥å· \\hdotsfor{&lt;åˆ—æ•°&gt;} 123456789101112\\documentclass&#123;ctexart&#125;% ä½¿ç”¨çŸ©é˜µï¼Œå¼•å…¥amsmathå®åŒ…\\usepackage&#123;amsmath&#125;\\begin&#123;document&#125; $A = \\begin&#123;bmatrix&#125; a_&#123;11&#125; &amp; \\dots &amp; a_&#123;1n&#125; \\\\ \\hdotsfor&#123;3&#125; \\\\ %è·¨3åˆ—çš„çœç•¥å· 0 &amp; &amp; a_&#123;nn&#125; \\end&#123;bmatrix&#125;_&#123;n\\times n&#125;$\\end&#123;document&#125; ç¬¦å·ä¸ç±»å‹ ç¬¦å· LaTeX $\\geq$ \\geq $\\leq$ \\leq $\\approx$ \\approx $\\pm$ \\pm $\\partial$ \\partial ç¬¦å· LaTeX $\\vec x$ \\vec x $\\hat x$ \\hat x $\\widehat x$ \\widehat x å¸Œè…Šå­—æ¯ æ•°å­¦æ™®é€šç¬¦å· è¿ç®—ç¬¦ æ•°å­¦ç®—å­ å¤šè¡Œå…¬å¼â€‹ equationç¯å¢ƒä¸­ï¼Œæ¢è¡Œå‘½ä»¤\\\\æ— æ•ˆï¼Œæ‰€ä»¥å¤šè¡Œå…¬å¼éœ€è¦ä½¿ç”¨å…¶ä»–ç¯å¢ƒï¼Œä½¿å…¶å¯ç”¨\\\\æ¢è¡Œã€‚ â€‹ ä½¿ç”¨å¤šè¡Œå…¬å¼çš„ç¯å¢ƒï¼Œå‡éœ€å¼•å…¥ amsmathå®åŒ…ã€‚ gatherç¯å¢ƒâ€‹ gatherç¯å¢ƒä¸­å…¬å¼è‡ªå¸¦ç¼–å·ï¼Œå¦‚è¦é˜»æ­¢ç¼–å·ï¼Œéœ€ä½¿ç”¨ \\notag å‘½ä»¤ã€‚ 1234567891011\\documentclass&#123;article&#125;% ä½¿ç”¨gatherç¯å¢ƒï¼Œå¼•å…¥amsmathå®åŒ…\\usepackage&#123;amsmath&#125;\\begin&#123;document&#125; \\begin&#123;gather&#125; a+b = b+a \\\\ %å¸¦ç¼–å· ab = ba \\notag %ä¸å¸¦ç¼–å· \\end&#123;gather&#125;\\end&#123;document&#125; gather*ç¯å¢ƒâ€‹ ä¸gatherç¯å¢ƒä¸åŒçš„æ˜¯ï¼Œå…¬å¼ä¸å¸¦ç¼–å·ã€‚ 1234567891011\\documentclass&#123;article&#125;% ä½¿ç”¨gatherç¯å¢ƒï¼Œå¼•å…¥amsmathå®åŒ…\\usepackage&#123;amsmath&#125;\\begin&#123;document&#125; \\begin&#123;gather*&#125; %ä¸å¸¦ç¼–å· a+b = b+a \\\\ ab = ba \\end&#123;gather*&#125;\\end&#123;document&#125; alignç¯å¢ƒâ€‹ alignç¯å¢ƒå…è®¸å…¬å¼æŒ‰ç­‰å·æˆ–å…¶ä»–å…³ç³»ç¬¦å¯¹é½ï¼Œåœ¨å…³ç³»ç¬¦å‰åŠ  &amp; è¡¨ç¤ºå¯¹é½ã€‚ 1234567891011\\documentclass&#123;article&#125;% ä½¿ç”¨gatherç¯å¢ƒï¼Œå¼•å…¥amsmathå®åŒ…\\usepackage&#123;amsmath&#125;\\begin&#123;document&#125; \\begin&#123;align&#125; %å…³äº&amp;å¯¹é½ï¼Œå¸¦ç¼–å· x &amp;= t + \\cos t + 1 \\\\ y &amp;= 2\\sin t \\end&#123;align&#125;\\end&#123;document&#125; align*ç¯å¢ƒâ€‹ ä¸alignç¯å¢ƒä¸åŒçš„æ˜¯ï¼Œä½†å…¬å¼ä¸å¸¦ç¼–å·ã€‚ è‡ªå®šä¹‰å‘½ä»¤\\newcommand å®šä¹‰æ–°çš„å‘½ä»¤ æ ¼å¼ï¼š\\newcommand&lt;å‘½ä»¤&gt;[&lt;å‚æ•°ä¸ªæ•°&gt;][&lt;é¦–å‚æ•°é»˜è®¤å€¼&gt;]{&lt;å…·ä½“å®šä¹‰&gt;} å‘½ä»¤åªèƒ½ç”±å­—æ¯ç»„æˆï¼Œä¸èƒ½ä»¥ \\end å¼€å¤´ å‚æ•°å¯ä»¥ä»1åˆ°9ï¼Œç”¨ #1ï¼Œ#2ï¼Œâ€¦.ï¼Œ#9 è¡¨ç¤º é»˜è®¤å€¼ä¸ºéå¿…å¡«é¡¹ï¼Œåªèƒ½è®¾å®š #1 çš„å‚æ•° 1234567891011\\documentclass&#123;article&#125;% è®¾ç½®æ–°å‘½ä»¤\\newcommand&#123;\\PRC&#125;&#123;People's Republic of China&#125;\\newcommand&#123;\\loves&#125;[2]&#123;#1 love #2&#125;\\begin&#123;document&#125; \\PRC \\loves&#123;I&#125;&#123;apple&#125;\\end&#123;document&#125; \\renewcommand é‡æ–°å®šä¹‰å‘½ä»¤ æ ¼å¼ï¼š\\renewcommand&lt;å‘½ä»¤&gt;[&lt;å‚æ•°ä¸ªæ•°&gt;][&lt;é¦–å‚æ•°é»˜è®¤å€¼&gt;]{&lt;å…·ä½“å®šä¹‰&gt;} åªèƒ½å®šä¹‰å·²æœ‰å‘½ä»¤ 12345678\\documentclass&#123;ctexart&#125;% é‡æ–°å®šä¹‰å·²æœ‰å‘½ä»¤\\renewcommand \\abstractname&#123;ç®€ä»‹&#125;\\begin&#123;document&#125; \\abstractname\\end&#123;document&#125;","categories":[{"name":"Latex","slug":"Latex","permalink":"https://gy23333.github.io/categories/Latex/"}],"tags":[{"name":"å…¥é—¨","slug":"å…¥é—¨","permalink":"https://gy23333.github.io/tags/%E5%85%A5%E9%97%A8/"},{"name":"Latex","slug":"Latex","permalink":"https://gy23333.github.io/tags/Latex/"},{"name":"Mac","slug":"Mac","permalink":"https://gy23333.github.io/tags/Mac/"}]},{"title":"å¾®ä¿¡å°ç¨‹åºï¼ˆäº‘å¼€å‘ï¼‰","slug":"å¾®ä¿¡å°ç¨‹åºï¼ˆäº‘å¼€å‘ï¼‰","date":"2020-02-03T12:45:44.000Z","updated":"2024-11-11T03:57:58.123Z","comments":true,"path":"2020/02/03/å¾®ä¿¡å°ç¨‹åºï¼ˆäº‘å¼€å‘ï¼‰/","link":"","permalink":"https://gy23333.github.io/2020/02/03/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%BA%91%E5%BC%80%E5%8F%91%EF%BC%89/","excerpt":"â€‹ å¾®ä¿¡å°ç¨‹åº+äº‘å¼€å‘çš„å…¥é—¨è®²è§£ã€‚","text":"â€‹ å¾®ä¿¡å°ç¨‹åº+äº‘å¼€å‘çš„å…¥é—¨è®²è§£ã€‚ å¼€å§‹æ­å»ºäº‘å¼€å‘ç¯å¢ƒ æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ–°å»ºä¸€ä¸ªå°ç¨‹åºï¼Œæ³¨å†ŒAppIDï¼Œé€‰æ‹©äº‘å¼€å‘ ç‚¹å‡»äº‘å¼€å‘æŒ‰é’®ï¼Œå¼€é€šäº‘å¼€å‘ åˆ›å»ºèµ„æºç¯å¢ƒï¼Œå¹¶åœ¨miniprogram/app.jsä¸­é…ç½®ç¯å¢ƒ 12345678910111213141516171819//app.jsApp(&#123; onLaunch: function () &#123; if (!wx.cloud) &#123; console.error('è¯·ä½¿ç”¨ 2.2.3 æˆ–ä»¥ä¸Šçš„åŸºç¡€åº“ä»¥ä½¿ç”¨äº‘èƒ½åŠ›') &#125; else &#123; wx.cloud.init(&#123; // env å‚æ•°è¯´æ˜ï¼š // env å‚æ•°å†³å®šæ¥ä¸‹æ¥å°ç¨‹åºå‘èµ·çš„äº‘å¼€å‘è°ƒç”¨ï¼ˆwx.cloud.xxxï¼‰ä¼šé»˜è®¤è¯·æ±‚åˆ°å“ªä¸ªäº‘ç¯å¢ƒçš„èµ„æº // æ­¤å¤„è¯·å¡«å…¥ç¯å¢ƒ ID, ç¯å¢ƒ ID å¯æ‰“å¼€äº‘æ§åˆ¶å°æŸ¥çœ‹ // å¦‚ä¸å¡«åˆ™ä½¿ç”¨é»˜è®¤ç¯å¢ƒï¼ˆç¬¬ä¸€ä¸ªåˆ›å»ºçš„ç¯å¢ƒï¼‰ env: 'test-6ga7apra89fe93e5', traceUser: true, &#125;) &#125; this.globalData = &#123;&#125; &#125;&#125;) äº‘å¼€å‘ç¯å¢ƒæ­å»ºå®Œæˆï¼Œåç»­å¯æ ¹æ®æŒ‡å¼•æµè§ˆå°ç¨‹åºã€‚ ç›®å½•ç»“æ„äº‘å¼€å‘å°ç¨‹åºä¸€ç»æ­å»ºï¼Œå°±æä¾›ä¸€ä¸ªåŸºç¡€æ¡†æ¶ã€‚ 1234567891011121314151617181920.â”œâ”€â”€ README.mdâ”œâ”€â”€ cloudfunctions &#x2F;&#x2F;äº‘å‡½æ•°æ ¹ç›®å½•â”‚ â”œâ”€â”€ callbackâ”‚ â”œâ”€â”€ echoâ”‚ â”œâ”€â”€ loginâ”‚ â””â”€â”€ openapiâ”‚â”œâ”€â”€ miniprogram &#x2F;&#x2F;å°ç¨‹åºæ ¹ç›®å½•â”‚ â”œâ”€â”€ components &#x2F;&#x2F;è‡ªå®šä¹‰ç»„ä»¶ç›®å½•â”‚ â”œâ”€â”€ images &#x2F;&#x2F;å›¾ç‰‡ç›®å½•â”‚ â”œâ”€â”€ pages &#x2F;&#x2F;é¡µé¢ç›®å½•â”‚ â”œâ”€â”€ style &#x2F;&#x2F;æ ·å¼ç›®å½•â”‚â”‚ â”œâ”€â”€ app.js &#x2F;&#x2F;å°ç¨‹åºé€»è¾‘â”‚ â”œâ”€â”€ app.json &#x2F;&#x2F;å°ç¨‹åºå…¬å…±é…ç½®â”‚ â”œâ”€â”€ app.wxss &#x2F;&#x2F;å°ç¨‹åºå…¬å…±æ ·å¼è¡¨â”‚ â””â”€â”€ sitemap.json &#x2F;&#x2F;sitemapé…ç½®â”‚ â””â”€â”€ project.config.json ç”¨æˆ·ç™»å½•ç”¨æˆ·ç™»å½•ä¸»è¦æ˜¯è¦è·å–ç”¨æˆ·çš„userInfoå’Œopenidï¼Œæµç¨‹å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354Page(&#123; data: &#123; userInfo: &#123;&#125; &#125;, onLoad() &#123; // è·å–æœ¬åœ°ç¼“å­˜çš„userInfo this.setData(&#123; userInfo: wx.getStorageSync('userInfo') &#125;) &#125;, // æˆæƒç™»å½• // 1.getUserProfileè·å–userInfo // 2.è·å–userInfoæˆåŠŸï¼Œå†é€šè¿‡äº‘å‡½æ•°getOpenidè·å–openidï¼Œå°†openidæ·»åŠ è¿›userInfoä¸­ // 3.å°†userInfoåŠ å…¥æœ¬åœ°ç¼“å­˜ login()&#123; // 1.è·å–userInfo wx.getUserProfile(&#123; desc: 'ç”¨äºå®Œå–„ç”¨æˆ·èµ„æ–™', // å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œåç»­ä¼šå±•ç¤ºåœ¨å¼¹çª—ä¸­ï¼Œè¯·è°¨æ…å¡«å†™ success: res =&gt; &#123; this.setData(&#123; userInfo: res.userInfo &#125;) // 2.è·å–OpenID wx.cloud.callFunction(&#123; name: \"getOpenid\", success: res =&gt; &#123; this.data.userInfo.openid = res.result.openid // 3.åŠ å…¥æœ¬åœ°ç¼“å­˜ wx.setStorageSync('userInfo', this.data.userInfo) &#125;, fail: res =&gt; &#123; this.setData(&#123; userInfo: &#123;&#125; &#125;) console.log(\"è·å–OpenIDç™»å½•å¤±è´¥\") &#125; &#125;) &#125; &#125;) &#125;, // ç™»å‡º logout()&#123; // æ¸…ç©ºç”¨æˆ·ä¿¡æ¯ç¼“å­˜ wx.removeStorageSync('userInfo') this.setData(&#123; userInfo: null &#125;) &#125;&#125;) st=>start: start op1=>operation: æœªç™»å½•çŠ¶æ€ op2=>operation: ç‚¹å‡»æˆæƒç™»å½• cond1=>condition: è·å–userInfo (getUserProfileå‡½æ•°) op3=>operation: æ‹’ç»æˆæƒ (æœªè·å¾—userInfo) op4=>operation: åŒæ„æˆæƒ (è·å¾—userInfo) cond2=>condition: è·å–openid (getOpenidäº‘å‡½æ•°) op5=>operation: openidè·å–å¤±è´¥ op6=>operation: æ¸…ç©ºuserInfo op7=>operation: openidè·å–æˆåŠŸ op8=>operation: å°†userInfoå’ŒopenidåŠ å…¥æœ¬åœ°ç¼“å­˜ op9=>operation: ç™»å½•æˆåŠŸ e=>end: end st->op1->op2->cond1 cond1(no)->op3(right)->op1 cond1(yes)->op4->cond2 cond2(no)->op5->op6(right)->op1 cond2(yes)->op7->op8->op9->e{\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12} var code = document.getElementById(\"flowchart-0-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value)); var diagram = flowchart.parse(code); diagram.drawSVG(\"flowchart-0\", options);","categories":[{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://gy23333.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}],"tags":[{"name":"å…¥é—¨","slug":"å…¥é—¨","permalink":"https://gy23333.github.io/tags/%E5%85%A5%E9%97%A8/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://gy23333.github.io/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"äº‘å¼€å‘","slug":"äº‘å¼€å‘","permalink":"https://gy23333.github.io/tags/%E4%BA%91%E5%BC%80%E5%8F%91/"}]},{"title":"æ•°å­¦å½¢æ€å­¦è¿ç®—â€”â€”è…èš€ã€è†¨èƒ€ã€å¼€è¿ç®—ã€é—­è¿ç®—","slug":"æ•°å­¦å½¢æ€å­¦è¿ç®—â€”â€”è…èš€ã€è†¨èƒ€ã€å¼€è¿ç®—ã€é—­è¿ç®—","date":"2020-01-20T15:02:14.000Z","updated":"2024-11-11T03:57:58.112Z","comments":true,"path":"2020/01/20/æ•°å­¦å½¢æ€å­¦è¿ç®—â€”â€”è…èš€ã€è†¨èƒ€ã€å¼€è¿ç®—ã€é—­è¿ç®—/","link":"","permalink":"https://gy23333.github.io/2020/01/20/%E6%95%B0%E5%AD%A6%E5%BD%A2%E6%80%81%E5%AD%A6%E8%BF%90%E7%AE%97%E2%80%94%E2%80%94%E8%85%90%E8%9A%80%E3%80%81%E8%86%A8%E8%83%80%E3%80%81%E5%BC%80%E8%BF%90%E7%AE%97%E3%80%81%E9%97%AD%E8%BF%90%E7%AE%97/","excerpt":"â€‹ æ•°å­¦å½¢æ€å­¦ä¸­çš„äºŒå€¼å½¢æ€å­¦æœ€åŸºæœ¬çš„ä¸¤ç§è¿ç®—â€”â€”è…èš€ã€è†¨èƒ€ã€‚ç”±è¿™ä¸¤ä¸ªç®—å­åˆå¯ä»¥è¡ç”Ÿå‡ºå¼€è¿ç®—å’Œé—­è¿ç®—ã€‚å¼€è¿ç®—ä¸ºå…ˆè…èš€å†è†¨èƒ€ï¼Œé—­è¿ç®—ä¸ºå…ˆè†¨èƒ€å†è…èš€ã€‚","text":"â€‹ æ•°å­¦å½¢æ€å­¦ä¸­çš„äºŒå€¼å½¢æ€å­¦æœ€åŸºæœ¬çš„ä¸¤ç§è¿ç®—â€”â€”è…èš€ã€è†¨èƒ€ã€‚ç”±è¿™ä¸¤ä¸ªç®—å­åˆå¯ä»¥è¡ç”Ÿå‡ºå¼€è¿ç®—å’Œé—­è¿ç®—ã€‚å¼€è¿ç®—ä¸ºå…ˆè…èš€å†è†¨èƒ€ï¼Œé—­è¿ç®—ä¸ºå…ˆè†¨èƒ€å†è…èš€ã€‚ è…èš€ç®—æ³•æè¿°â€‹ åœ¨ç›®æ ‡å›¾åƒä¸­æ ‡å‡ºé‚£äº›ä¸ç»“æ„å…ƒç´ ç›¸åŒçš„å­å›¾åƒçš„åŸç‚¹ä½ç½®çš„åƒç´ ã€‚ â€‹ æŠŠç»“æ„å…ƒç´ Bçœ‹ä½œä¸€ä¸ªå·ç§¯æ¨¡ç‰ˆï¼Œæ¯å½“ç»“æ„å…ƒç´ å¹³ç§»åˆ°å…¶åŸç‚¹ä½ç½®ä¸ç›®æ ‡å›¾åƒAä¸­é‚£äº›åƒç´ å€¼ä¸ºâ€œ1â€çš„ä½ç½®é‡åˆæ—¶ï¼Œå°±åˆ¤æ–­è¢«ç»“æ„å…ƒç´ è¦†ç›–çš„å­å›¾åƒçš„å…¶å®ƒåƒç´ çš„å€¼æ˜¯å¦éƒ½ä¸ç»“æ„å…ƒç´ ç›¸åº”ä½ç½®çš„åƒç´ å€¼ç›¸åŒï¼›åªæœ‰å½“å…¶éƒ½ç›¸åŒæ—¶ï¼Œå°±å°†ç»“æœå›¾åƒä¸­çš„é‚£ä¸ªä¸åŸç‚¹ä½ç½®å¯¹åº”çš„åƒç´ ä½ç½®çš„å€¼ç½®ä¸º1ï¼Œå¦åˆ™ç½®ä¸º0ã€‚ â€‹ âš ï¸æ³¨æ„ï¼šå½“ç»“æ„å…ƒç´ åœ¨ç›®æ ‡å›¾åƒä¸Šå¹³ç§»æ—¶ï¼Œç»“æ„å…ƒç´ ä¸­çš„ä»»ä½•å…ƒç´ ä¸èƒ½è¶…å‡ºç›®æ ‡å›¾åƒçš„èŒƒå›´ã€‚ ä¾‹å­åŸå›¾åƒï¼š ç»“æ„å…ƒç´ ï¼š è…èš€è¿ç®—åçš„ç»“æœå›¾åƒï¼š ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495#include &lt;opencv2/opencv.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/imgproc/imgproc.hpp&gt;using namespace cv;struct Kernel&#123; Mat B; int position[2]; //åŸç‚¹ä½ç½®&#125;; //ç»“æ„å…ƒç´ /** ç”Ÿæˆåå­—å‹ç»“æ„å…ƒç´  sizeä¸ºç»“æ„å…ƒç´ çš„è¡Œåˆ—æ•°ï¼Œpositionä¸ºåŸç‚¹ä½ç½® è¿”å›ç”Ÿæˆçš„ç»“æ„å…ƒç´  */Kernel getCrossKernel(int* size, int* position)&#123; Kernel kernel; kernel.B = Mat::zeros(size[0], size[1], CV_8U); kernel.position[0] = position[0]; kernel.position[1] = position[1]; for (int nrow = 0; nrow &lt; size[0]; nrow++) &#123; kernel.B.ptr&lt;uchar&gt;(nrow)[kernel.position[0]] = 255; &#125; for (int ncol = 0; ncol &lt; size[1]; ncol++) &#123; kernel.B.ptr&lt;uchar&gt;(kernel.position[1])[ncol] = 255; &#125; return kernel;&#125;/** è…èš€ imgä¸ºåŸå›¾åƒï¼Œdstä¸ºè…èš€åçš„å›¾åƒï¼Œkernelä¸ºç»“æ„å…ƒç´  */void getErosion(Mat img, Mat &amp;dst, Kernel kernel)&#123; dst = img.clone(); Mat B = kernel.B; int r_pos = kernel.position[0]; int c_pos = kernel.position[1]; // éå†æŸ¥é‡ for (int nrow = r_pos; nrow &lt; img.rows-r_pos; nrow++) &#123; for (int ncol = c_pos; ncol &lt; img.cols-c_pos; ncol++) &#123; bool bingo = true; if (img.ptr&lt;uchar&gt;(nrow)[ncol] == 255) &#123; for (int i = 0; i &lt; B.rows; i++) &#123; for (int j = 0; j &lt; B.cols; j++) &#123; if (B.ptr&lt;uchar&gt;(i)[j] == 255) &#123; if (img.ptr&lt;uchar&gt;(i+nrow-r_pos)[j+ncol-c_pos] != 255) &#123; bingo = false; break; &#125; &#125; &#125; &#125; &#125; if (!bingo) &#123; //ä¸ç¬¦åˆ dst.ptr&lt;uchar&gt;(nrow)[ncol] = 0; &#125; &#125; &#125;&#125;int main() &#123; Mat img1,erosion_dst; //å›¾åƒä¸€å’Œå…¶è…èš€ç»“æœ img1 = imread(\"img1.png\", IMREAD_GRAYSCALE); //è·å–åŸå›¾çš„ç°åº¦å›¾åƒ // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img1.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return -1; &#125; // OtsuäºŒå€¼åŒ– Mat img1_twoColor; threshold(img1, img1_twoColor, 0, 255, THRESH_OTSU); // å»ºç«‹ç»“æ„å…ƒç´ (ä¸­å¿ƒä¸ºåŸç‚¹ä½ç½®) int size[2] = &#123;5, 5&#125;; //ç»“æ„å…ƒç´ çš„å¤§å° int position[2] = &#123;2, 2&#125;; //åŸç‚¹ä½ç½® Kernel kernel = getCrossKernel(size, position); getErosion(img1_twoColor, erosion_dst, kernel); //è…èš€ imshow(\"img1\",img1_twoColor); imshow(\"erosion_dst\", erosion_dst); imwrite(\"erosion_dst.jpg\", erosion_dst); waitKey(); //ç­‰å¾…é”®å€¼è¾“å…¥ return 0;&#125; ç»“æœåŸå›¾åƒï¼š è…èš€åçš„å›¾åƒï¼ˆåå­—ç»“æ„å…ƒç´ ï¼‰ï¼š è†¨èƒ€ç®—æ³•æè¿°â€‹ ä½äºæŸä¸ªç‚¹çš„æ¢é’ˆ(ç»“æ„å…ƒç´ )æ˜¯å¦æœ‰æ¢æµ‹åˆ°ç‰©ä»¶ï¼Ÿ è¿‡ç¨‹ï¼š æ±‚ç»“æ„å…ƒç´ Bå…³äºåŸç‚¹çš„åå°„é›†åˆBxï¼› æ¯å½“ç»“æ„å…ƒç´ Bxåœ¨ç›®æ ‡å›¾åƒAä¸Šå¹³ç§»åï¼Œç»“æ„å…ƒç´ Bxä¸å…¶è¦†ç›–çš„å­å›¾åƒä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ ç›¸äº¤æ—¶ï¼Œå°±å°†ç›®æ ‡å›¾åƒä¸­ä¸ç»“æ„å…ƒç´ Bxçš„åŸç‚¹å¯¹åº”çš„é‚£ä¸ªä½ç½®çš„åƒç´ ä¸º1ï¼Œå¦åˆ™ç½®ä¸º0ã€‚ âš ï¸æ³¨æ„ï¼š å½“ç»“æ„å…ƒç´ ä¸­åŸç‚¹ä½ç½®çš„å€¼æ˜¯0æ—¶ï¼Œä»æŠŠå®ƒçœ‹ä½œæ˜¯0ï¼›è€Œä¸å†æŠŠå®ƒçœ‹ä½œæ˜¯1ã€‚ å½“ç»“æ„å…ƒç´ åœ¨ç›®æ ‡å›¾åƒä¸Šå¹³ç§»æ—¶ï¼Œå…è®¸ç»“æ„ä¸­çš„éåŸç‚¹åƒç´ è¶…å‡ºç›®æ ‡å›¾åƒèŒƒå›´ã€‚ ä¾‹å­ ç»“æ„å…ƒç´ åŸç‚¹ä¸º1æ—¶ï¼Œ â€‹ åŸå›¾åƒï¼š â€‹ ç»“æ„å…ƒç´ ï¼š â€‹ ç»“æ„å…ƒç´ çš„åå°„ï¼š â€‹ è†¨èƒ€è¿ç®—åçš„ç»“æœå›¾åƒï¼š ç»“æ„å…ƒç´ åŸç‚¹ä¸º0æ—¶ï¼Œ â€‹ åŸå›¾åƒï¼š â€‹ ç»“æ„å…ƒç´ ï¼š â€‹ ç»“æ„å…ƒç´ çš„åå°„ï¼š â€‹ è†¨èƒ€è¿ç®—åçš„ç»“æœå›¾åƒï¼š â€‹ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112#include &lt;opencv2/opencv.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/imgproc/imgproc.hpp&gt;using namespace cv;struct Kernel&#123; Mat B; int position[2]; //åŸç‚¹ä½ç½®&#125;; //ç»“æ„å…ƒç´ /** ç”ŸæˆçŸ©å½¢ç»“æ„å…ƒç´  sizeä¸ºç»“æ„å…ƒç´ çš„å¤§å°ï¼Œpositionä¸ºåŸç‚¹ä½ç½® è¿”å›ç”Ÿæˆçš„ç»“æ„å…ƒç´  */Kernel getRectKernel(int* size, int* position) &#123; Kernel kernel; kernel.B = Mat::ones(size[0], size[1], CV_8U); for (int nrow = 0; nrow &lt; kernel.B.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; kernel.B.cols; ncol++) &#123; kernel.B.ptr&lt;uchar&gt;(nrow)[ncol] = 255; &#125; &#125; kernel.position[0] = position[0]; kernel.position[1] = position[1]; return kernel;&#125;/** è†¨èƒ€ imgä¸ºåŸå›¾åƒï¼Œdstä¸ºè†¨èƒ€åçš„å›¾åƒï¼Œkernelä¸ºç»“æ„å…ƒç´  */void getDilation(Mat img, Mat &amp;dst, Kernel kernel) &#123; dst = img.clone(); Mat B = kernel.B; // ç»“æ„å…ƒç´ åå°„ Mat B_x = Mat::zeros(B.cols, B.rows, CV_8U); for (int nrow = 0; nrow &lt; B.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; B.cols; ncol++) &#123; B_x.ptr&lt;uchar&gt;(ncol)[nrow] = B.ptr&lt;uchar&gt;(nrow)[ncol]; &#125; &#125; int r_pos = kernel.position[1]; int c_pos = kernel.position[0]; // æ£€éªŒå›¾åƒçš„æ¯ä¸€ä¸ªç‚¹ for (int nrow = 0; nrow &lt; img.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; img.cols; ncol++) &#123; bool bingo = false; // æ£€æµ‹ç»“æ„å…ƒç´ ä¸­æ˜¯å¦æœ‰ç¬¦åˆçš„1 for (int i = 0; i &lt; B_x.rows; i++) &#123; for (int j = 0; j &lt; B_x.cols; j++) &#123; // å›¾åƒä¸­çš„ä½ç½®ï¼ˆæœ‰å¯èƒ½è¶Šç•Œï¼‰ int row = nrow - r_pos + i; int col = ncol - c_pos + j; if (B_x.ptr&lt;uchar&gt;(i)[j] == 255) &#123; if (row &gt;= 0 &amp;&amp; row &lt; img.rows &amp;&amp; col &gt;= 0 &amp;&amp; col &lt; img.cols) &#123; if (img.ptr&lt;uchar&gt;(row)[col] == 255) &#123; bingo = true; break; &#125; &#125; &#125; &#125; if (bingo) &#123; break; &#125; &#125; if (bingo) &#123; //å¦‚æœç¬¦åˆï¼Œå³å­˜åœ¨é‡åˆçš„1ï¼Œåˆ™ç½®1 dst.ptr&lt;uchar&gt;(nrow)[ncol] = 255; &#125; else &#123; //å¦‚æœæ²¡æœ‰ç¬¦åˆçš„ï¼Œåˆ™ç½®0 dst.ptr&lt;uchar&gt;(nrow)[ncol] = 0; &#125; &#125; &#125;&#125;int main() &#123; Mat img2,dilation_dst; //å›¾åƒäºŒå’Œå…¶è†¨èƒ€ç»“æœ img2 = imread(\"img2.png\", IMREAD_GRAYSCALE); //è·å–åŸå›¾çš„ç°åº¦å›¾åƒ // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img2.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return -1; &#125; // OtsuäºŒå€¼åŒ– Mat img2_twoColor; threshold(img2, img2_twoColor, 0, 255, THRESH_OTSU); // çŸ©å½¢ç»“æ„å…ƒç´  int size[2] = &#123;7, 7&#125;; //ç»“æ„å…ƒç´ çš„å¤§å° int position[2] = &#123;0, 0&#125;; //åŸç‚¹ä½ç½® Kernel kernel = getRectKernel(size, position); getDilation(img2_twoColor, dilation_dst, kernel); //è†¨èƒ€ imshow(\"img2\",img2_twoColor); imshow(\"dilation_dst\", dilation_dst); imwrite(\"dilation_dst.jpg\", dilation_dst); waitKey(); //ç­‰å¾…é”®å€¼è¾“å…¥ return 0;&#125; ç»“æœåŸå›¾åƒï¼š è†¨èƒ€åçš„å›¾åƒï¼ˆçŸ©å½¢ç»“æ„å…ƒç´ ï¼‰ï¼š å¼€è¿ç®—â€‹ å¼€è¿ç®—ä¸ºå…ˆè…èš€å†è†¨èƒ€ã€‚ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148#include &lt;opencv2/opencv.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/imgproc/imgproc.hpp&gt;using namespace cv;struct Kernel&#123; Mat B; int position[2]; //åŸç‚¹ä½ç½®&#125;; //ç»“æ„å…ƒç´ /** ç”ŸæˆçŸ©å½¢ç»“æ„å…ƒç´  sizeä¸ºç»“æ„å…ƒç´ çš„å¤§å°ï¼Œpositionä¸ºåŸç‚¹ä½ç½® è¿”å›ç”Ÿæˆçš„ç»“æ„å…ƒç´  */Kernel getRectKernel(int* size, int* position) &#123; Kernel kernel; kernel.B = Mat::ones(size[0], size[1], CV_8U); for (int nrow = 0; nrow &lt; kernel.B.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; kernel.B.cols; ncol++) &#123; kernel.B.ptr&lt;uchar&gt;(nrow)[ncol] = 255; &#125; &#125; kernel.position[0] = position[0]; kernel.position[1] = position[1]; return kernel;&#125;/** è…èš€ imgä¸ºåŸå›¾åƒï¼Œdstä¸ºè…èš€åçš„å›¾åƒï¼Œkernelä¸ºç»“æ„å…ƒç´  */void getErosion(Mat img, Mat &amp;dst, Kernel kernel)&#123; dst = img.clone(); Mat B = kernel.B; int r_pos = kernel.position[0]; int c_pos = kernel.position[1]; // éå†æŸ¥é‡ for (int nrow = r_pos; nrow &lt; img.rows-r_pos; nrow++) &#123; for (int ncol = c_pos; ncol &lt; img.cols-c_pos; ncol++) &#123; bool bingo = true; if (img.ptr&lt;uchar&gt;(nrow)[ncol] == 255) &#123; for (int i = 0; i &lt; B.rows; i++) &#123; for (int j = 0; j &lt; B.cols; j++) &#123; if (B.ptr&lt;uchar&gt;(i)[j] == 255) &#123; if (img.ptr&lt;uchar&gt;(i+nrow-r_pos)[j+ncol-c_pos] != 255) &#123; bingo = false; break; &#125; &#125; &#125; &#125; &#125; if (!bingo) &#123; //ä¸ç¬¦åˆ dst.ptr&lt;uchar&gt;(nrow)[ncol] = 0; &#125; &#125; &#125;&#125;/** è†¨èƒ€ imgä¸ºåŸå›¾åƒï¼Œdstä¸ºè†¨èƒ€åçš„å›¾åƒï¼Œkernelä¸ºç»“æ„å…ƒç´  */void getDilation(Mat img, Mat &amp;dst, Kernel kernel) &#123; dst = img.clone(); Mat B = kernel.B; // ç»“æ„å…ƒç´ åå°„ Mat B_x = Mat::zeros(B.cols, B.rows, CV_8U); for (int nrow = 0; nrow &lt; B.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; B.cols; ncol++) &#123; B_x.ptr&lt;uchar&gt;(ncol)[nrow] = B.ptr&lt;uchar&gt;(nrow)[ncol]; &#125; &#125; int r_pos = kernel.position[1]; int c_pos = kernel.position[0]; // æ£€éªŒå›¾åƒçš„æ¯ä¸€ä¸ªç‚¹ for (int nrow = 0; nrow &lt; img.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; img.cols; ncol++) &#123; bool bingo = false; // æ£€æµ‹ç»“æ„å…ƒç´ ä¸­æ˜¯å¦æœ‰ç¬¦åˆçš„1 for (int i = 0; i &lt; B_x.rows; i++) &#123; for (int j = 0; j &lt; B_x.cols; j++) &#123; // å›¾åƒä¸­çš„ä½ç½®ï¼ˆæœ‰å¯èƒ½è¶Šç•Œï¼‰ int row = nrow - r_pos + i; int col = ncol - c_pos + j; if (B_x.ptr&lt;uchar&gt;(i)[j] == 255) &#123; if (row &gt;= 0 &amp;&amp; row &lt; img.rows &amp;&amp; col &gt;= 0 &amp;&amp; col &lt; img.cols) &#123; if (img.ptr&lt;uchar&gt;(row)[col] == 255) &#123; bingo = true; break; &#125; &#125; &#125; &#125; if (bingo) &#123; break; &#125; &#125; if (bingo) &#123; //å¦‚æœç¬¦åˆï¼Œå³å­˜åœ¨é‡åˆçš„1ï¼Œåˆ™ç½®1 dst.ptr&lt;uchar&gt;(nrow)[ncol] = 255; &#125; else &#123; //å¦‚æœæ²¡æœ‰ç¬¦åˆçš„ï¼Œåˆ™ç½®0 dst.ptr&lt;uchar&gt;(nrow)[ncol] = 0; &#125; &#125; &#125;&#125;int main() &#123; Mat img3, erosion_dst, opening_dst; //å›¾åƒä¸‰å’Œå…¶å¼€è¿ç®—ç»“æœ img3 = imread(\"img3.png\", IMREAD_GRAYSCALE); //è·å–åŸå›¾çš„ç°åº¦å›¾åƒ // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img3.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return -1; &#125; // OtsuäºŒå€¼åŒ– Mat img3_twoColor; threshold(img3, img3_twoColor, 0, 255, THRESH_OTSU); // çŸ©å½¢ç»“æ„å…ƒç´  int size[2] = &#123;4, 4&#125;; //ç»“æ„å…ƒç´ çš„å¤§å° int position[2] = &#123;0, 0&#125;; //åŸç‚¹ä½ç½® Kernel kernel = getRectKernel(size, position); getErosion(img3_twoColor, erosion_dst, kernel); //è…èš€ getDilation(erosion_dst, opening_dst, kernel); //è†¨èƒ€ imshow(\"img3\",img3); imshow(\"erosion_dst\", erosion_dst); imshow(\"opening_dst\", opening_dst); imwrite(\"opening_dst.jpg\", opening_dst); waitKey(); //ç­‰å¾…é”®å€¼è¾“å…¥ return 0;&#125; ç»“æœåŸå›¾åƒï¼š å¼€è¿ç®—ç»“æœï¼š é—­è¿ç®—â€‹ é—­è¿ç®—ä¸ºå…ˆè†¨èƒ€å†è…èš€ã€‚ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148#include &lt;opencv2/opencv.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/imgproc/imgproc.hpp&gt;using namespace cv;struct Kernel&#123; Mat B; int position[2]; //åŸç‚¹ä½ç½®&#125;; //ç»“æ„å…ƒç´ /** ç”ŸæˆçŸ©å½¢ç»“æ„å…ƒç´  sizeä¸ºç»“æ„å…ƒç´ çš„å¤§å°ï¼Œpositionä¸ºåŸç‚¹ä½ç½® è¿”å›ç”Ÿæˆçš„ç»“æ„å…ƒç´  */Kernel getRectKernel(int* size, int* position) &#123; Kernel kernel; kernel.B = Mat::ones(size[0], size[1], CV_8U); for (int nrow = 0; nrow &lt; kernel.B.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; kernel.B.cols; ncol++) &#123; kernel.B.ptr&lt;uchar&gt;(nrow)[ncol] = 255; &#125; &#125; kernel.position[0] = position[0]; kernel.position[1] = position[1]; return kernel;&#125;/** è…èš€ imgä¸ºåŸå›¾åƒï¼Œdstä¸ºè…èš€åçš„å›¾åƒï¼Œkernelä¸ºç»“æ„å…ƒç´  */void getErosion(Mat img, Mat &amp;dst, Kernel kernel)&#123; dst = img.clone(); Mat B = kernel.B; int r_pos = kernel.position[0]; int c_pos = kernel.position[1]; // éå†æŸ¥é‡ for (int nrow = r_pos; nrow &lt; img.rows-r_pos; nrow++) &#123; for (int ncol = c_pos; ncol &lt; img.cols-c_pos; ncol++) &#123; bool bingo = true; if (img.ptr&lt;uchar&gt;(nrow)[ncol] == 255) &#123; for (int i = 0; i &lt; B.rows; i++) &#123; for (int j = 0; j &lt; B.cols; j++) &#123; if (B.ptr&lt;uchar&gt;(i)[j] == 255) &#123; if (img.ptr&lt;uchar&gt;(i+nrow-r_pos)[j+ncol-c_pos] != 255) &#123; bingo = false; break; &#125; &#125; &#125; &#125; &#125; if (!bingo) &#123; //ä¸ç¬¦åˆ dst.ptr&lt;uchar&gt;(nrow)[ncol] = 0; &#125; &#125; &#125;&#125;/** è†¨èƒ€ imgä¸ºåŸå›¾åƒï¼Œdstä¸ºè†¨èƒ€åçš„å›¾åƒï¼Œkernelä¸ºç»“æ„å…ƒç´  */void getDilation(Mat img, Mat &amp;dst, Kernel kernel) &#123; dst = img.clone(); Mat B = kernel.B; // ç»“æ„å…ƒç´ åå°„ Mat B_x = Mat::zeros(B.cols, B.rows, CV_8U); for (int nrow = 0; nrow &lt; B.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; B.cols; ncol++) &#123; B_x.ptr&lt;uchar&gt;(ncol)[nrow] = B.ptr&lt;uchar&gt;(nrow)[ncol]; &#125; &#125; int r_pos = kernel.position[1]; int c_pos = kernel.position[0]; // æ£€éªŒå›¾åƒçš„æ¯ä¸€ä¸ªç‚¹ for (int nrow = 0; nrow &lt; img.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; img.cols; ncol++) &#123; bool bingo = false; // æ£€æµ‹ç»“æ„å…ƒç´ ä¸­æ˜¯å¦æœ‰ç¬¦åˆçš„1 for (int i = 0; i &lt; B_x.rows; i++) &#123; for (int j = 0; j &lt; B_x.cols; j++) &#123; // å›¾åƒä¸­çš„ä½ç½®ï¼ˆæœ‰å¯èƒ½è¶Šç•Œï¼‰ int row = nrow - r_pos + i; int col = ncol - c_pos + j; if (B_x.ptr&lt;uchar&gt;(i)[j] == 255) &#123; if (row &gt;= 0 &amp;&amp; row &lt; img.rows &amp;&amp; col &gt;= 0 &amp;&amp; col &lt; img.cols) &#123; if (img.ptr&lt;uchar&gt;(row)[col] == 255) &#123; bingo = true; break; &#125; &#125; &#125; &#125; if (bingo) &#123; break; &#125; &#125; if (bingo) &#123; //å¦‚æœç¬¦åˆï¼Œå³å­˜åœ¨é‡åˆçš„1ï¼Œåˆ™ç½®1 dst.ptr&lt;uchar&gt;(nrow)[ncol] = 255; &#125; else &#123; //å¦‚æœæ²¡æœ‰ç¬¦åˆçš„ï¼Œåˆ™ç½®0 dst.ptr&lt;uchar&gt;(nrow)[ncol] = 0; &#125; &#125; &#125;&#125;int main() &#123; Mat img4, dilation_dst, closing_dst; //å›¾åƒå››å’Œå…¶é—­è¿ç®—ç»“æœ img4 = imread(\"img4.png\", IMREAD_GRAYSCALE); //è·å–åŸå›¾çš„ç°åº¦å›¾åƒ // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img4.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return -1; &#125; // OtsuäºŒå€¼åŒ– Mat img4_twoColor; threshold(img4, img4_twoColor, 0, 255, THRESH_OTSU); // çŸ©å½¢ç»“æ„å…ƒç´  int size[2] = &#123;4, 4&#125;; //ç»“æ„å…ƒç´ çš„å¤§å° int position[2] = &#123;0, 0&#125;; //åŸç‚¹ä½ç½® Kernel kernel = getRectKernel(size, position); getDilation(img4_twoColor, dilation_dst, kernel); //è†¨èƒ€ getErosion(dilation_dst, closing_dst, kernel); //è…èš€ imshow(\"img4\",img4); imshow(\"dilation_dst\", dilation_dst); imshow(\"closing_dst\", closing_dst); imwrite(\"closing_dst.jpg\", closing_dst); waitKey(); //ç­‰å¾…é”®å€¼è¾“å…¥ return 0;&#125; ç»“æœåŸå›¾åƒï¼š é—­è¿ç®—ç»“æœï¼š","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"æ•°å­¦å½¢æ€å­¦","slug":"æ•°å­¦å½¢æ€å­¦","permalink":"https://gy23333.github.io/tags/%E6%95%B0%E5%AD%A6%E5%BD%A2%E6%80%81%E5%AD%A6/"}]},{"title":"åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²â€”â€”åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶","slug":"åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²â€”â€”åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶","date":"2020-01-19T09:39:31.000Z","updated":"2024-11-11T03:57:58.120Z","comments":true,"path":"2020/01/19/åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²â€”â€”åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶/","link":"","permalink":"https://gy23333.github.io/2020/01/19/%E5%9F%BA%E4%BA%8E%E5%8C%BA%E5%9F%9F%E7%9A%84%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E2%80%94%E2%80%94%E5%8C%BA%E5%9F%9F%E5%88%86%E8%A3%82%E4%B8%8E%E5%90%88%E5%B9%B6/","excerpt":"â€‹ åˆ†è£‚ä¸åˆå¹¶æ˜¯ä¸€ç§åŒºåŸŸåˆ†å‰²æ–¹å¼ï¼Œå°†å›¾åƒåˆ’åˆ†æˆä¸ç›¸äº¤çš„åŒºåŸŸï¼Œä»¥æŸä¸€æ£€æµ‹å‡†åˆ™ä»å››å‰æ ‘æ•°æ®ç»“æ„çš„ä»»ä¸€å±‚å¼€å§‹ï¼Œå¯¹åŒºåŸŸè¿›è¡Œåˆ†è£‚æˆ–åˆå¹¶ã€‚å¹¶é€æ­¥æ”¹å–„åŒºåŸŸåˆ’åˆ†çš„æ€§èƒ½ï¼Œç›´åˆ°æœ€åå°†å›¾åƒåˆ†æˆæ•°é‡æœ€å°çš„å‡åŒ€åŒºåŸŸä¸ºæ­¢ã€‚","text":"â€‹ åˆ†è£‚ä¸åˆå¹¶æ˜¯ä¸€ç§åŒºåŸŸåˆ†å‰²æ–¹å¼ï¼Œå°†å›¾åƒåˆ’åˆ†æˆä¸ç›¸äº¤çš„åŒºåŸŸï¼Œä»¥æŸä¸€æ£€æµ‹å‡†åˆ™ä»å››å‰æ ‘æ•°æ®ç»“æ„çš„ä»»ä¸€å±‚å¼€å§‹ï¼Œå¯¹åŒºåŸŸè¿›è¡Œåˆ†è£‚æˆ–åˆå¹¶ã€‚å¹¶é€æ­¥æ”¹å–„åŒºåŸŸåˆ’åˆ†çš„æ€§èƒ½ï¼Œç›´åˆ°æœ€åå°†å›¾åƒåˆ†æˆæ•°é‡æœ€å°çš„å‡åŒ€åŒºåŸŸä¸ºæ­¢ã€‚ ç®—æ³•æ­¥éª¤ å®šä¹‰ç”¨äºåŒè´¨æ€§çš„æ ‡å‡†ï¼› å°†å›¾åƒåˆ†æˆç›¸ç­‰å¤§å°çš„åŒºåŸŸï¼› è®¡ç®—æ¯ä¸ªåŒºåŸŸçš„åŒè´¨æ€§ï¼› å¦‚æœåŒºåŸŸåŒè´¨ï¼Œåˆ™å°†å…¶ä¸é‚»å±…åˆå¹¶ï¼› é‡å¤è¯¥è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰åŒºåŸŸå‡é€šè¿‡å‡ä¸€æ€§æµ‹è¯•ã€‚ åŒè´¨æ€§â€‹ å¯æœ‰å¤šç§åŒè´¨æ€§çš„å®šä¹‰æ–¹å¼ï¼Œæ¯”å¦‚ï¼š æ–¹å·®-ç°åº¦æ–¹å·® å½“åŒºåŸŸæ–¹å·®å°äºæŒ‡å®šå€¼æ—¶ï¼Œåˆ™è¯¥åŒºåŸŸç¬¦åˆåŒè´¨æ€§ã€‚ C++å®ç°ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193#include &lt;iostream&gt;#include &lt;opencv2/opencv.hpp&gt;using namespace cv;using namespace std;struct Block&#123; int row; //èµ·å§‹è¡Œ int col; //èµ·å§‹åˆ— int height; //é«˜åº¦ int width; //å®½åº¦&#125;; //åŒºåŸŸ/** è®¡ç®—åŒºåŸŸçš„ç°åº¦æ–¹å·® imgä¸ºåŸå›¾åƒï¼Œblocksä¸ºåŒºåŸŸé›† */double variance(Mat img, vector&lt;Block&gt; blocks)&#123; // æ±‚å¾—åŒºåŸŸæ–¹å·® double ave_I = 0; //åŒºåŸŸå¹³å‡ç°åº¦å€¼ int aero = 0; //åŒºåŸŸé›†é¢ç§¯ for (int i = 0; i &lt; blocks.size(); i++) &#123; for (int nrow = blocks[i].row; nrow &lt; blocks[i].row+blocks[i].height; nrow++) &#123; for (int ncol = blocks[i].col; ncol &lt; blocks[i].col+blocks[i].width; ncol++) &#123; ave_I += img.ptr&lt;uchar&gt;(nrow)[ncol]; &#125; &#125; aero += blocks[i].height * blocks[i].width; &#125; ave_I /= double(aero); double v = 0; //åŒºåŸŸç°åº¦æ–¹å·® for (int i = 0; i &lt; blocks.size(); i++) &#123; for (int nrow = blocks[i].row; nrow &lt; blocks[i].row+blocks[i].height; nrow++) &#123; for (int ncol = blocks[i].col; ncol &lt; blocks[i].col+blocks[i].width; ncol++) &#123; v += (img.ptr&lt;uchar&gt;(nrow)[ncol] - ave_I)*(img.ptr&lt;uchar&gt;(nrow)[ncol] - ave_I); &#125; &#125; &#125; v /= double(aero - 1); return v;&#125;/** ç”»çº¿ */void drawLines(Mat &amp;img, vector&lt;vector&lt;Block&gt;&gt; homo_blocks)&#123; for (int i = 0; i &lt; homo_blocks.size(); i++) &#123; Mat linePic = Mat::zeros(img.size(), CV_8UC1); for (int j = 0; j &lt; homo_blocks[i].size(); j++) &#123; // ä¸Šä¸‹è¾¹ç¼˜ for (int ncol = homo_blocks[i][j].col; ncol &lt; homo_blocks[i][j].col+homo_blocks[i][j].width; ncol++) &#123; // ä¸Šè¾¹ç¼˜ int I = linePic.ptr&lt;uchar&gt;(homo_blocks[i][j].row)[ncol]; if (I == 0) &#123; //å¦‚æœä¸ºé»‘ï¼Œè¿˜æœªåˆ’çº¿ linePic.ptr&lt;uchar&gt;(homo_blocks[i][j].row)[ncol] = 255; &#125; else if (I == 255) &#123; //å·²åˆ’çº¿åˆ™å»æ‰çº¿ linePic.ptr&lt;uchar&gt;(homo_blocks[i][j].row)[ncol] = 0; &#125; // ä¸‹è¾¹ç¼˜ I = linePic.ptr&lt;uchar&gt;(homo_blocks[i][j].row+homo_blocks[i][j].height)[ncol]; if (I == 0) &#123; //å¦‚æœä¸ºé»‘ï¼Œè¿˜æœªåˆ’çº¿ linePic.ptr&lt;uchar&gt;(homo_blocks[i][j].row+homo_blocks[i][j].height)[ncol] = 255; &#125; else if (I == 255) &#123; //å·²åˆ’çº¿åˆ™å»æ‰çº¿ linePic.ptr&lt;uchar&gt;(homo_blocks[i][j].row+homo_blocks[i][j].height)[ncol] = 0; &#125; &#125; // å·¦å³è¾¹ç¼˜ for (int nrow = homo_blocks[i][j].row; nrow &lt; homo_blocks[i][j].row+homo_blocks[i][j].height; nrow++) &#123; // å·¦è¾¹ç¼˜ int I = linePic.ptr&lt;uchar&gt;(nrow)[homo_blocks[i][j].col]; if (I == 0) &#123; //å¦‚æœä¸ºé»‘ï¼Œè¿˜æœªåˆ’çº¿ linePic.ptr&lt;uchar&gt;(nrow)[homo_blocks[i][j].col] = 255; &#125; else if (I == 255) &#123; //å·²åˆ’çº¿åˆ™å»æ‰çº¿ linePic.ptr&lt;uchar&gt;(nrow)[homo_blocks[i][j].col] = 0; &#125; // å³è¾¹ç¼˜ I = linePic.ptr&lt;uchar&gt;(nrow)[homo_blocks[i][j].col+homo_blocks[i][j].width]; if (I == 0) &#123; //å¦‚æœä¸ºé»‘ï¼Œè¿˜æœªåˆ’çº¿ linePic.ptr&lt;uchar&gt;(nrow)[homo_blocks[i][j].col+homo_blocks[i][j].width] = 255; &#125; else if (I == 255) &#123; //å·²åˆ’çº¿åˆ™å»æ‰çº¿ linePic.ptr&lt;uchar&gt;(nrow)[homo_blocks[i][j].col+homo_blocks[i][j].width] = 0; &#125; &#125; &#125; for (int nrow = 0; nrow &lt; img.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; img.cols; ncol++) &#123; if (linePic.ptr&lt;uchar&gt;(nrow)[ncol] == 255) &#123; img.ptr&lt;uchar&gt;(nrow)[ncol] = 255; &#125; &#125; &#125; &#125;&#125;/** åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶ imgä¸ºåŸå›¾åƒï¼Œresultä¸ºå¤„ç†åçš„å›¾åƒï¼Œthresholdä¸ºæ–¹å·®é˜ˆå€¼ */void splitMerge (Mat img, Mat &amp;result, double threshold)&#123; Block init_block = &#123; .row = 0, .col = 0, .height = img.rows, .width = img.cols &#125;; //åˆå§‹åŒºåŸŸ vector&lt;Block&gt; blocks; //ä¸ç¬¦åˆåŒè´¨æ€§åŒºåŸŸé›† vector&lt;vector&lt;Block&gt;&gt; homo_blocks; //ç¬¦åˆåŒè´¨æ€§çš„åŒºåŸŸé›† blocks.push_back(init_block); //å°†åˆå§‹åŒºåŸŸå‹å…¥ä¸ç¬¦åˆåŒè´¨æ€§åŒºåŸŸé›† // åˆ†è£‚ä¸åˆå¹¶çš„è¿­ä»£ while (!blocks.empty()) &#123; // å–å‡ºä¸€ä¸ªä¸ç¬¦åˆåŒè´¨æ€§çš„åŒºåŸŸ Block current_block = blocks.back(); blocks.pop_back(); // é¢ç§¯ä¸º8ä»¥ä¸Šå¯åˆ† if (current_block.height * current_block.width &gt;= 8) &#123; Block child_blocks[4] = &#123; &#123;.row = current_block.row, .col = current_block.col, .height = (current_block.height+1)/2, .width = (current_block.width+1)/2&#125;, &#123;.row = current_block.row, .col = current_block.col+(current_block.width+1)/2, .height = (current_block.height+1)/2, .width = current_block.width-(current_block.width+1)/2&#125;, &#123;.row = current_block.row+(current_block.height+1)/2, .col = current_block.col, .height = current_block.height-(current_block.height+1)/2, .width = (current_block.width+1)/2&#125;, &#123;.row = current_block.row+(current_block.height+1)/2, .col = current_block.col+(current_block.width+1)/2, .height = current_block.height-(current_block.height+1)/2, .width = current_block.width-(current_block.width+1)/2&#125; &#125;; //åŒºåŸŸåˆ†è£‚æˆå››å—å­åŒºåŸŸ // åˆ¤æ–­å­åŒºåŸŸæ˜¯å¦å…·æœ‰åŒè´¨æ€§ for (int i = 0; i &lt; 4; i++) &#123; vector&lt;Block&gt; c_block = &#123;child_blocks[i]&#125;; if (variance(img, c_block) &lt;= threshold) &#123; //å¦‚æœå…·æœ‰åŒè´¨æ€§ï¼ˆæ–¹å·®å°äºé˜ˆå€¼ï¼‰ï¼Œè¿›è¡Œåˆå¹¶ // å¦‚æœç¬¦åˆåŒè´¨æ€§çš„åŒºåŸŸé›†ä¸ºç©º if (homo_blocks.size() == 0) &#123; homo_blocks.push_back(c_block); //å°†è¯¥å­åŒºåŸŸå‹å…¥ç¬¦åˆåŒè´¨æ€§çš„åŒºåŸŸé›† &#125; else&#123; // éå†ç¬¦åˆåŒè´¨æ€§çš„åŒºåŸŸé›† int n; double min_v = 0; int min_n = 0; for (n = 0; n &lt; homo_blocks.size(); n++) &#123; vector&lt;Block&gt; bk = homo_blocks[n]; bk.push_back(child_blocks[i]); if (n == 0) &#123; min_v = variance(img, bk); &#125; else&#123; if (variance(img, bk) &lt; min_v) &#123; min_v = variance(img, bk); min_n = n; &#125; &#125; &#125; // éœ€åˆå¹¶ï¼Œä¿®æ”¹æ·»åŠ å…¥åŒºåŸŸ if (min_v &lt;= threshold) &#123; vector&lt;Block&gt; bk = homo_blocks[min_n]; bk.push_back(child_blocks[i]); homo_blocks[min_n] = bk; &#125; else &#123; //ä¸éœ€åˆå¹¶ï¼Œç›´æ¥åŠ å…¥è¯¥åŒºåŸŸ homo_blocks.push_back(c_block); &#125; &#125; &#125;else&#123; //å¦‚æœä¸å…·æœ‰åŒè´¨æ€§ blocks.push_back(child_blocks[i]); //å‹å…¥ä¸ç¬¦åˆåŒè´¨æ€§åŒºåŸŸé›† &#125; &#125; &#125; &#125; drawLines(result, homo_blocks);&#125;int main() &#123; Mat img,result; img = imread(\"img.jpg\", IMREAD_GRAYSCALE); //è·å–åŸå›¾çš„ç°åº¦å›¾åƒ // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return -1; &#125; result = img.clone(); double threshold = 200; //æ–¹å·®é˜ˆå€¼ splitMerge(img, result, threshold); //åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶ // å›¾åƒæ˜¾ç¤º imshow(\"img\",img); imshow(\"result\",result); imwrite(\"result.jpg\", result); waitKey(); //ç­‰å¾…é”®å€¼è¾“å…¥ return 0;&#125; ç»“æœåŸå›¾åƒï¼š â€‹ è¯¥å›¾ç‰‡ç”±HOerwin56åœ¨Pixabayä¸Šå‘å¸ƒ å¤„ç†åçš„å›¾åƒï¼š","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"åŒºåŸŸåˆ†å‰²","slug":"åŒºåŸŸåˆ†å‰²","permalink":"https://gy23333.github.io/tags/%E5%8C%BA%E5%9F%9F%E5%88%86%E5%89%B2/"},{"name":"åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶","slug":"åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶","permalink":"https://gy23333.github.io/tags/%E5%8C%BA%E5%9F%9F%E5%88%86%E8%A3%82%E4%B8%8E%E5%90%88%E5%B9%B6/"}]},{"title":"åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²â€”â€”åŒºåŸŸç”Ÿé•¿","slug":"åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²â€”â€”åŒºåŸŸç”Ÿé•¿","date":"2020-01-18T12:37:00.000Z","updated":"2024-11-11T03:57:58.125Z","comments":true,"path":"2020/01/18/åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²â€”â€”åŒºåŸŸç”Ÿé•¿/","link":"","permalink":"https://gy23333.github.io/2020/01/18/%E5%9F%BA%E4%BA%8E%E5%8C%BA%E5%9F%9F%E7%9A%84%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E2%80%94%E2%80%94%E5%8C%BA%E5%9F%9F%E7%94%9F%E9%95%BF/","excerpt":"â€‹ åŒºåŸŸç”Ÿé•¿æ˜¯ä¸€ç§åŸºäºåŒºåŸŸçš„åˆ†å‰²æ–¹å¼ï¼Œä»åˆå§‹ç§å­ç‚¹å‡ºå‘ï¼Œæ£€æŸ¥ç›¸é‚»åƒç´ ç‚¹ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦åŠ å…¥è¯¥åŒºåŸŸã€‚","text":"â€‹ åŒºåŸŸç”Ÿé•¿æ˜¯ä¸€ç§åŸºäºåŒºåŸŸçš„åˆ†å‰²æ–¹å¼ï¼Œä»åˆå§‹ç§å­ç‚¹å‡ºå‘ï¼Œæ£€æŸ¥ç›¸é‚»åƒç´ ç‚¹ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦åŠ å…¥è¯¥åŒºåŸŸã€‚ ç®—æ³•â€‹ ä»¤ f(x, y) è¡¨ç¤ºä¸€ä¸ªè¾“å…¥å›¾åƒé˜µåˆ—ï¼›S(x, y) è¡¨ç¤ºä¸€ä¸ªç§å­é˜µåˆ—ï¼Œé˜µåˆ—ä¸­ç§å­ç‚¹ä½ç½®å¤„ä¸º1ï¼Œå…¶ä»–ä½ç½®å¤„ä¸º0ï¼›Q è¡¨ç¤ºåœ¨æ¯ä¸ªä½ç½® (x, y) å¤„æ‰€ç”¨çš„å±æ€§ã€‚å‡è®¾é˜µåˆ— f å’Œ S çš„å°ºå¯¸ç›¸åŒã€‚åŸºäº8è¿æ¥çš„ä¸€ä¸ªåŸºæœ¬åŒºåŸŸç”Ÿé•¿ç®—æ³•è¯´æ˜å¦‚ä¸‹ï¼š åœ¨ S(x, y) ä¸­å¯»æ‰¾æ‰€æœ‰è¿é€šåˆ†é‡ï¼Œå¹¶æŠŠæ¯ä¸ªè¿é€šåˆ†é‡è…èš€æˆä¸€ä¸ªåƒç´ ï¼›æŠŠæ‰¾åˆ°çš„æ‰€æœ‰è¿™ç§åƒç´ æ ‡è®°ä¸º1ï¼ŒæŠŠ S ä¸­çš„æ‰€æœ‰å…¶ä»–åƒç´ æ ‡è®°ä¸º0ï¼› åœ¨åæ ‡å¯¹ (x, y) å¤„å½¢æˆå›¾åƒ fQï¼šå¦‚æœè¾“å…¥å›¾åƒåœ¨è¯¥åæ ‡å¤„æ»¡è¶³ç»™å®šçš„å±æ€§ Qï¼Œåˆ™ä»¤ fQ(x, y) = 1ï¼Œå¦åˆ™ä»¤ fQ(x, y) = 0ï¼› ä»¤ g æ˜¯è¿™æ ·å½¢æˆçš„å›¾åƒï¼šå³æŠŠ fQ ä¸­ä¸º8è¿é€šç§å­ç‚¹çš„æ‰€æœ‰1å€¼ç‚¹ï¼Œæ·»åŠ åˆ° S ä¸­çš„æ¯ä¸ªç§å­ç‚¹ï¼› ç”¨ä¸åŒçš„åŒºåŸŸæ ‡è®°æ ‡è®°å‡º g ä¸­çš„æ¯ä¸ªè¿é€šåˆ†é‡ã€‚è¿™å°±æ˜¯ç”±åŒºåŸŸç”Ÿé•¿å¾—åˆ°çš„åˆ†å‰²å›¾åƒã€‚ ä¾‹å­ C++å®ç°ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081#include &lt;opencv2/opencv.hpp&gt;#include &lt;iostream&gt;using namespace cv;using namespace std;/** åŒºåŸŸç”Ÿé•¿ imgä¸ºåŸå›¾åƒï¼Œresultä¸ºç»åŒºåŸŸç”Ÿé•¿åçš„å›¾åƒï¼Œseedä¸ºåˆå§‹ç§å­ç‚¹ï¼Œthresholdä¸ºé˜ˆå€¼ è¾“å…¥ç§å­ç‚¹è¶…å‡ºèŒƒå›´è¿”å›false */bool regionGrowing(Mat img, Mat &amp;result, Point2i seed, int threshold)&#123; result = Mat::zeros(img.size(), CV_8UC1); //èƒŒæ™¯å…¨éƒ¨è®¾ç½®ä¸ºé»‘// è¾“å…¥ç§å­ç‚¹è¶…å‡ºèŒƒå›´è¿”å›false if (seed.x &lt; 0 || seed.y &lt; 0 || seed.y &gt; img.rows-1 || seed.x &gt; img.cols-1) &#123; return false; &#125; vector&lt;Point2i&gt; seeds; //ç§å­ç‚¹é›† seeds.push_back(seed); //å‹å…¥åˆå§‹ç§å­ç‚¹ result.ptr&lt;uchar&gt;(seed.y)[seed.x] = 255; //ç§å­ç‚¹è®¾ç½®ä¸ºç™½ int growDirections[8][2] = &#123;&#123;-1,-1&#125;, &#123;0,-1&#125;, &#123;1,-1&#125;, &#123;-1,0&#125;, &#123;1,0&#125;, &#123;-1,1&#125;, &#123;0,1&#125;, &#123;1,1&#125;&#125;; //ç”Ÿé•¿æ–¹å‘ // å¼€å§‹ç”Ÿé•¿ while (!seeds.empty()) &#123; // å–å‡ºä¸€ä¸ªç§å­ç‚¹ä½œä¸ºç°åœ¨å¾ªç¯çš„åˆå§‹ç§å­ç‚¹ Point2i seed_current = seeds.back(); seeds.pop_back(); // éå†å„ç”Ÿé•¿æ–¹å‘çš„é‚»ç‚¹ for (int i = 0; i &lt; 8; i++) &#123; Point2i neighborPoint = &#123;seed_current.x + growDirections[i][0], seed_current.y + growDirections[i][1]&#125;; //é‚»ç‚¹ if (neighborPoint.x &lt; 0 || neighborPoint.y &lt; 0 || neighborPoint.x &gt; img.cols-1 || neighborPoint.y &gt; img.rows-1) &#123; //é‚»ç‚¹è¶…å‡ºèŒƒå›´ continue; &#125; if ((result.ptr&lt;uchar&gt;(neighborPoint.y)[neighborPoint.x] == 0) &amp;&amp; abs(img.ptr&lt;uchar&gt;(neighborPoint.y)[neighborPoint.x] - img.ptr&lt;uchar&gt;(seed.y)[seed.x]) &lt; threshold) &#123; // è®¾ç½®ä¸ºç§å­ç‚¹ result.ptr&lt;uchar&gt;(neighborPoint.y)[neighborPoint.x] = 255; //è®¾ç½®ä¸ºç™½è‰² seeds.push_back(neighborPoint); //å‹å…¥ç§å­é›† &#125; &#125; &#125; return true;&#125;int main() &#123; Mat img, result; img = imread(\"mountains.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ// è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return -1; &#125; // è¾“å…¥åˆå§‹ç§å­ç‚¹ cout &lt;&lt; \"Select a point as seed from [\" &lt;&lt; img.rows-1 &lt;&lt; \", \" &lt;&lt; img.cols-1 &lt;&lt; \"]\" &lt;&lt; endl; int seed_row, seed_col; cout &lt;&lt; \"row\"; cin &gt;&gt; seed_row; cout &lt;&lt; \"col\"; cin &gt;&gt; seed_col; Point2i seed; seed.x = seed_col; seed.y = seed_row; // åŒºåŸŸç”Ÿé•¿ int threshold = 50; regionGrowing(img, result, seed, threshold); //åŒºåŸŸç”Ÿé•¿ // å›¾åƒæ˜¾ç¤º imshow(\"img\",img); imshow(\"result\",result); imwrite(\"result.jpg\", result); waitKey(); //ç­‰å¾…é”®å€¼è¾“å…¥ return 0;&#125; ç»“æœåŸå›¾åƒï¼š ç»åŒºåŸŸç”Ÿé•¿åçš„å›¾åƒï¼ˆå–åŸç§å­ç‚¹ä¸ºï¼ˆ0, 0ï¼‰ï¼‰ï¼š","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"åŒºåŸŸåˆ†å‰²","slug":"åŒºåŸŸåˆ†å‰²","permalink":"https://gy23333.github.io/tags/%E5%8C%BA%E5%9F%9F%E5%88%86%E5%89%B2/"},{"name":"åŒºåŸŸç”Ÿé•¿","slug":"åŒºåŸŸç”Ÿé•¿","permalink":"https://gy23333.github.io/tags/%E5%8C%BA%E5%9F%9F%E7%94%9F%E9%95%BF/"}]},{"title":"å¤§æ´¥äºŒå€¼åŒ–æ³•","slug":"å¤§æ´¥äºŒå€¼åŒ–æ³•","date":"2020-01-17T17:05:12.000Z","updated":"2024-11-11T03:57:58.129Z","comments":true,"path":"2020/01/18/å¤§æ´¥äºŒå€¼åŒ–æ³•/","link":"","permalink":"https://gy23333.github.io/2020/01/18/%E5%A4%A7%E6%B4%A5%E4%BA%8C%E5%80%BC%E5%8C%96%E6%B3%95/","excerpt":"â€‹ å¤§æ´¥æ³•ï¼ˆOtsuç®—æ³•ï¼ŒãŠãŠã¤ï¼‰ç”¨æ¥è‡ªåŠ¨å¯¹å›¾åƒè¿›è¡ŒäºŒå€¼åŒ–ï¼Œå³å°†å›¾åƒçš„ä¸¤ç±»åˆ†å¼€ã€‚è¦è®¡ç®—å°†ä¸¤ç±»åˆ†å¼€çš„æœ€ä½³é˜ˆå€¼ï¼Œå³è¦ä½¿ä¸¤ç±»çš„ç±»å†…æ–¹å·®æœ€å°ã€‚ç”±äºä¸¤ç±»å¹³æ–¹è·ç¦»æ’å®šï¼Œæ‰€ä»¥ç±»å†…æ–¹å·®æœ€å°å³æ˜¯æ±‚ç±»é—´æ–¹å·®æœ€å¤§æ—¶çš„é˜ˆå€¼ä¸ºæœ€ä½³é˜ˆå€¼ã€‚","text":"â€‹ å¤§æ´¥æ³•ï¼ˆOtsuç®—æ³•ï¼ŒãŠãŠã¤ï¼‰ç”¨æ¥è‡ªåŠ¨å¯¹å›¾åƒè¿›è¡ŒäºŒå€¼åŒ–ï¼Œå³å°†å›¾åƒçš„ä¸¤ç±»åˆ†å¼€ã€‚è¦è®¡ç®—å°†ä¸¤ç±»åˆ†å¼€çš„æœ€ä½³é˜ˆå€¼ï¼Œå³è¦ä½¿ä¸¤ç±»çš„ç±»å†…æ–¹å·®æœ€å°ã€‚ç”±äºä¸¤ç±»å¹³æ–¹è·ç¦»æ’å®šï¼Œæ‰€ä»¥ç±»å†…æ–¹å·®æœ€å°å³æ˜¯æ±‚ç±»é—´æ–¹å·®æœ€å¤§æ—¶çš„é˜ˆå€¼ä¸ºæœ€ä½³é˜ˆå€¼ã€‚ ç®—æ³• è®¡ç®—å¾—åŸå›¾çš„ç°åº¦ç›´æ–¹å›¾å’Œæ¦‚ç‡ç›´æ–¹å›¾ â€‹ è®¾å›¾åƒåƒç´ ä¸º Nï¼Œç°åº¦èŒƒå›´ä¸º [0, L-1]ï¼Œå¯¹åº”ç°åº¦çº§ i çš„åƒç´ ä¸º niï¼Œæ¦‚ç‡ä¸ºï¼š éå†æ‰€æœ‰å¯èƒ½é˜ˆå€¼ t ï¼Œæ‰¾åˆ°ç±»é—´æ–¹å·®æœ€å¤§æ˜¯çš„ä¸¤ä¸ªå¯¹åº”çš„é˜ˆå€¼ï¼ˆæœ‰ä¸€ä¸ªæœ€å¤§åˆ™å–ä¸€ä¸ªï¼Œä¸¤ä¸ªæœ€å¤§å–å¹³å‡ï¼‰ ç±»æ¦‚ç‡ï¼š ç±»å‡å€¼ï¼š ç±»é—´æ–¹å·®ï¼š æœ€ä½³é˜ˆå€¼= C++å®ç°ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110#include &lt;opencv2/opencv.hpp&gt;using namespace cv;/** è·å–ç°åº¦æ¦‚ç‡ç›´æ–¹å›¾ imgä¸ºåŸå›¾åƒï¼Œhistogramä¸ºç°åº¦æ¦‚ç‡ç›´æ–¹å›¾ */void getHistogram(Mat &amp;img, double *histogram)&#123; int H[256] = &#123;0&#125;; for (int nrow = 0; nrow &lt; img.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; img.cols; ncol++) &#123; int h = img.ptr&lt;uchar&gt;(nrow)[ncol]; H[h] ++; &#125; &#125; int N = img.rows * img.cols; //æ€»åƒç´  for (int i = 0; i &lt;= 255; i++) &#123; histogram[i] = double(H[i]) / double(N); &#125;&#125;/** å¤§æ´¥æ³•è·å–æœ€ä½³é˜ˆå€¼ histogramä¸ºç°åº¦æ¦‚ç‡ç›´æ–¹å›¾ï¼Œthresholdä¸ºæœ€ä½³é˜ˆå€¼ */void Otsu(double *histogram, double &amp;threshold)&#123; double w1 = 0.0, w2 = 1.0; //ç±»æ¦‚ç‡w1,w2 double u1, u2; //ç±»å‡å€¼u1,u2 double max = 0.0; //æœ€å¤§ç±»é—´æ–¹å·® double sum = 0.0; for (int i = 0; i &lt;= 255; i++) &#123; sum += i * histogram[i]; &#125; double sum1 = 0.0, sum2 = sum; double threshold1 = 0.0, threshold2 = 0.0; //æœ‰ä¸€ä¸ªæœ€å¤§åˆ™å–ä¸€ä¸ªï¼Œä¸¤ä¸ªæœ€å¤§å–å¹³å‡ // éå†æ‰€æœ‰å¯èƒ½é˜ˆå€¼ t ï¼Œæ‰¾åˆ°ç±»é—´æ–¹å·®æœ€å¤§æ˜¯çš„ä¸¤ä¸ªå¯¹åº”çš„é˜ˆå€¼ for (int t = 1; t &lt;= 255; t++) &#123; w1 += histogram[t]; w2 = 1 - w1; if (w1 == 0) &#123; //è¿˜æ²¡å‡ºç°ç‚¹æ—¶ä¸ä¼šæ˜¯é˜ˆå€¼ continue; &#125;else if (w2 == 0)&#123; //åé¢æ²¡ç‚¹æ—¶å·²è·å¾—æœ€ä½³é˜ˆå€¼ break; &#125; sum1 += t * histogram[t]; sum2 = sum - sum1; u1 = sum1 / w1; u2 = sum2 / w2; double v = w1 * w2 * (u1 - u2) * (u1 - u2); //ç±»é—´æ–¹å·® if (v &gt;= max) &#123; threshold1 = t; //å¤§äºç­‰äºï¼Œç­‰äºæ—¶ï¼Œæœ‰ä¸¤ä¸ªæœ€å¤§ if (v &gt; max) &#123; threshold2 = t; //å¤§äºæ—¶ï¼Œæœ‰å”¯ä¸€æœ€å¤§ï¼Œthreshold1ã€threshold2ç»Ÿä¸€ &#125; max = v; //æ›¿æ¢max &#125; &#125; threshold = (threshold1 + threshold2) / 2;&#125;/** è·å¾—å¤§æ´¥æ³•äºŒå€¼åŒ–åçš„å›¾åƒ imgä¸ºåŸå›¾åƒï¼Œresultä¸ºå¤§æ´¥æ³•äºŒå€¼åŒ–åçš„å›¾åƒï¼Œthresholdä¸ºæœ€ä½³é˜ˆå€¼ */void getOtsuImg(Mat img, Mat &amp;result, double threshold)&#123; for (int nrow = 0; nrow &lt;= img.rows; nrow++) &#123; for (int ncol = 0; ncol &lt;= img.cols; ncol++) &#123; if (img.ptr&lt;uchar&gt;(nrow)[ncol] &lt;= threshold) &#123; result.ptr&lt;uchar&gt;(nrow)[ncol] = 0; &#125;else&#123; result.ptr&lt;uchar&gt;(nrow)[ncol] = 255; &#125; &#125; &#125;&#125;int main() &#123; Mat img,result; img = imread(\"Otsu.png\", IMREAD_GRAYSCALE); //è·å–åŸå›¾çš„ç°åº¦å›¾åƒ // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return -1; &#125; // è·å–ç°åº¦æ¦‚ç‡ç›´æ–¹å›¾ double histogram[256] = &#123;0&#125;; //ç°åº¦æ¦‚ç‡ç›´æ–¹å›¾ getHistogram(img, histogram); //è·å–ç°åº¦æ¦‚ç‡ç›´æ–¹å›¾ // è·å–æœ€ä½³é˜ˆå€¼ double threshold = 0; //æœ€ä½³é˜ˆå€¼ Otsu(histogram, threshold); //è·å–æœ€ä½³é˜ˆå€¼ // è·å¾—å¤§æ´¥æ³•äºŒå€¼åŒ–åçš„å›¾åƒ result = img.clone(); getOtsuImg(img, result, threshold); // å›¾åƒæ˜¾ç¤º imshow(\"img\", img); imshow(\"Otsu\", result); waitKey(); imwrite(\"result.jpg\", result); return 0;&#125; ç»“æœåŸå›¾åƒï¼š å¤§æ´¥æ³•äºŒå€¼åŒ–åå¾—åˆ°çš„å›¾åƒï¼š","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"å¤§æ´¥æ³•","slug":"å¤§æ´¥æ³•","permalink":"https://gy23333.github.io/tags/%E5%A4%A7%E6%B4%A5%E6%B3%95/"}]},{"title":"Xcodeä¸Šé…ç½®OpenCVå’ŒC++å¼€å‘ç¯å¢ƒ","slug":"Xcodeä¸Šé…ç½®OpenCVå’ŒC-å¼€å‘ç¯å¢ƒ","date":"2020-01-15T16:01:55.000Z","updated":"2024-11-11T03:57:58.130Z","comments":true,"path":"2020/01/16/Xcodeä¸Šé…ç½®OpenCVå’ŒC-å¼€å‘ç¯å¢ƒ/","link":"","permalink":"https://gy23333.github.io/2020/01/16/Xcode%E4%B8%8A%E9%85%8D%E7%BD%AEOpenCV%E5%92%8CC-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/","excerpt":"â€‹ åœ¨ä¸‹è½½å®ŒOpenCVå’Œæ–°å»ºå®ŒC++å·¥ç¨‹åï¼Œéœ€åœ¨Xcodeçš„C++æ–‡ä»¶ä¸Šé…ç½®OpenCVã€‚","text":"â€‹ åœ¨ä¸‹è½½å®ŒOpenCVå’Œæ–°å»ºå®ŒC++å·¥ç¨‹åï¼Œéœ€åœ¨Xcodeçš„C++æ–‡ä»¶ä¸Šé…ç½®OpenCVã€‚ Xcodeé…ç½®OpenCVæ­¥éª¤â€‹ é¦–å…ˆå…ˆæ–°å»ºå¥½C++å·¥ç¨‹ã€‚ è®¾ç½®åº“æ–‡ä»¶æœç´¢è·¯å¾„(Header Search Paths)â€‹ æ‰¾åˆ°OpenCVçš„headerè·¯å¾„æ·»åŠ è¿›Header Search Pathsã€‚ ç”¨SpotLightæœç´¢åˆ°éšè—æ–‡ä»¶å¤¹1&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;opencv&#x2F; æ‰¾åˆ°headerçš„æœ€ç»ˆè·¯å¾„â€‹ è¿™é‡Œæˆ‘çš„æœ€ç»ˆè·¯å¾„æ˜¯ 1&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;opencv&#x2F;4.1.1_2&#x2F;include&#x2F;opencv4 å°†OpenCVçš„headerè·¯å¾„æ·»åŠ è¿›Header Search Pathsâ€‹ åœ¨è¯¥Xcodeé¡¹ç›®ä¸‹ï¼Œé€‰æ‹©Building Settings -&gt; Header Search Pathsï¼Œæ·»åŠ è¿›å…¥headerçš„æœç´¢è·¯å¾„ã€‚ 1&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;opencv&#x2F;4.1.1_2&#x2F;include&#x2F;opencv4 è®¾ç½®åº“æœç´¢è·¯å¾„ï¼ˆLibrary Search Pathsï¼‰â€‹ åœ¨åˆšåˆšæŸ¥è¯¢åˆ°çš„ç›®å½•é‡Œé¢æ‰¾åˆ°ä¸includeåŒçº§çš„libæ–‡ä»¶å¤¹ 1&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;opencv&#x2F;4.1.1_2&#x2F;lib â€‹ åœ¨è¯¥Xcodeé¡¹ç›®ä¸‹ï¼Œé€‰æ‹©Building Settings -&gt; Library Search Pathsï¼Œæ·»åŠ è¿›å…¥libè·¯å¾„ã€‚ è®¾ç½®å…¶ä»–é“¾æ¥å™¨æ ‡å¿—ï¼ˆOther Linker Flagsï¼‰â€‹ é€šè¿‡pkg-configè·å–opencvæ‰€æœ‰çš„Linker Flagsï¼Œæ·»åŠ è¿›Other Linker Flagsã€‚ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥pkg-configå‘½ä»¤ï¼Œå¾—åˆ°æ‰€æœ‰çš„Linker Flags1pkg-config --libs opencv4 å°†Linker Flagsæ·»åŠ è¿›Other Linker Flagsâ€‹ åœ¨è¯¥Xcodeé¡¹ç›®ä¸‹ï¼Œé€‰æ‹©Building Settings -&gt; Other Linker Flagsï¼Œæ·»åŠ Linker Flagsã€‚ â€‹ æ­¤æ—¶ï¼ŒXcodeçš„OpenCVç¯å¢ƒé…ç½®æˆåŠŸã€‚ è°ƒç”¨OpenCVåº“æ–‡ä»¶1#include &lt;opencv2/opencv.hpp&gt; ä½¿ç”¨æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„â€‹ åšå›¾åƒå…ä¸äº†è¦ä½¿ç”¨å›¾ç‰‡æ–‡ä»¶ï¼Œå…¨éƒ¨ä½¿ç”¨ç»å¯¹è·¯å¾„ä¸æ˜“è½¬ç§»ï¼Œæ‰€ä»¥éœ€åœ¨Xcodeé‡Œè®¾ç½®æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚ æ‰“å¼€Edit Schemeâ€‹ é€‰æ‹© Product -&gt; Scheme -&gt; Edit Scheme æ·»åŠ ç›¸å¯¹è·¯å¾„â€‹ åœ¨ Run -&gt; Options å‹¾é€‰ Use Custom Working Directoryï¼Œå¹¶æ·»åŠ è·¯å¾„ã€‚ â€‹ ç°åœ¨å³å¯ä½¿ç”¨ç›¸å¯¹åœ°å€å¼•å…¥æ–‡ä»¶ã€‚ å‚è€ƒSetting up OpenCV and C++ development environment in Xcode for Computer Vision projects æ³¨æ„ç§‘å­¦ä¸Šç½‘ï¼ï¼","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"Xcode","slug":"Xcode","permalink":"https://gy23333.github.io/tags/Xcode/"},{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://gy23333.github.io/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"}]},{"title":"ç›´æ–¹å›¾å‡è¡¡åŒ–","slug":"ç›´æ–¹å›¾å‡è¡¡åŒ–","date":"2020-01-15T15:55:04.000Z","updated":"2024-11-11T03:57:58.126Z","comments":true,"path":"2020/01/15/ç›´æ–¹å›¾å‡è¡¡åŒ–/","link":"","permalink":"https://gy23333.github.io/2020/01/15/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96/","excerpt":"â€‹ ç›´æ–¹å›¾å‡è¡¡åŒ–æ˜¯é€šè¿‡å¯¹åŸå›¾åƒåœ¨åƒç´ ä¸ªæ•°å¤šçš„ç°åº¦çº§è¿›è¡Œå±•å®½ï¼Œå¯¹åƒç´ ä¸ªæ•°å°‘çš„ç°åº¦çº§è¿›è¡Œç¼©å‡ï¼Œä½¿åŸå›¾åƒçš„ç°åº¦ç›´æ–¹å›¾ä¿®æ­£ä¸ºå‡åŒ€åˆ†å¸ƒçš„ç›´æ–¹å›¾ã€‚","text":"â€‹ ç›´æ–¹å›¾å‡è¡¡åŒ–æ˜¯é€šè¿‡å¯¹åŸå›¾åƒåœ¨åƒç´ ä¸ªæ•°å¤šçš„ç°åº¦çº§è¿›è¡Œå±•å®½ï¼Œå¯¹åƒç´ ä¸ªæ•°å°‘çš„ç°åº¦çº§è¿›è¡Œç¼©å‡ï¼Œä½¿åŸå›¾åƒçš„ç°åº¦ç›´æ–¹å›¾ä¿®æ­£ä¸ºå‡åŒ€åˆ†å¸ƒçš„ç›´æ–¹å›¾ã€‚ æ­¥éª¤ç”±åŸå›¾åƒå¾—ç°åº¦ç›´æ–¹å›¾â€‹ è®¡æ¯ä¸€ä¸ªåƒç´ å€¼çš„ç‚¹çš„ä¸ªæ•°ã€‚ ä¾‹å¦‚ï¼šåŸå›¾åƒ 1 3 9 9 8 2 1 3 7 3 3 6 0 6 4 6 8 2 0 5 2 9 2 6 0 ç°åº¦ç›´æ–¹å›¾ ç°åº¦çº§ åƒç´ ç‚¹ä¸ªæ•°H 0 3 1 2 2 4 3 4 4 1 5 1 6 4 7 1 8 2 9 3 ç”±ç°åº¦ç›´æ–¹å›¾å¾—ç°åº¦çº§åƒç´ ç™¾åˆ†æ¯”â€‹ ç°åº¦ç›´æ–¹å›¾ä¸­çš„åƒç´ ç‚¹ä¸ªæ•° / æ€»åƒç´ ç‚¹ä¸ªæ•° ç°åº¦çº§ ç°åº¦çº§åƒç´ ç™¾åˆ†æ¯”HR 0 0.12 1 0.08 2 0.16 3 0.16 4 0.04 5 0.04 6 0.16 7 0.04 8 0.08 9 0.12 è®¡ç®—å„ç°åº¦çº§çš„ç´¯ç§¯åˆ†å¸ƒ ç°åº¦çº§ ç´¯ç§¯åˆ†å¸ƒHS 0 0.12 1 0.20 2 0.36 3 0.52 4 0.56 5 0.60 6 0.76 7 0.80 8 0.88 9 1.00 æ±‚å‡ºæ–°å›¾åƒçš„ç°åº¦å€¼ â€‹ å³ä¹˜ä»¥ç°åº¦çº§ä¸ªæ•°åå†å››èˆäº”å…¥ã€‚ C++å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758#include &lt;iostream&gt;#include &lt;opencv2/opencv.hpp&gt;using namespace std;using namespace cv;//ç›´æ–¹å›¾å‡è¡¡åŒ–void histogram_equalization(Mat &amp;img, Mat &amp;result) &#123; int H[256] = &#123;0&#125;; for (int i = 0; i &lt;= 255; i++) &#123; H[i] = 0; // ç°åº¦ç›´æ–¹å›¾ &#125;// ç”±åŸå›¾åƒå¾—ç°åº¦ç›´æ–¹å›¾ for (int nrow = 0; nrow &lt; img.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; img.cols; ncol++) &#123; int h = img.ptr&lt;uchar&gt;(nrow)[ncol]; H[h] ++; &#125; &#125;// ç”±ç°åº¦ç›´æ–¹å›¾å¾—ç°åº¦çº§åƒç´ ç™¾åˆ†æ¯” int NR = img.rows * img.cols; // æ€»åƒç´ ç‚¹ä¸ªæ•° double HR[256] = &#123;0&#125;; for (int i = 0; i &lt;= 255; i++) &#123; HR[i] = 0.0; // ç°åº¦ç›´æ–¹å›¾ &#125; for (int i = 0; i &lt;= 255; i++) &#123; HR[i] = double(H[i])/double(NR); // ç°åº¦çº§åƒç´ ç™¾åˆ†æ¯” &#125;// è®¡ç®—å„ç°åº¦çº§çš„ç´¯ç§¯åˆ†å¸ƒï¼Œå¹¶æ±‚å‡ºæ–°å›¾åƒçš„ç°åº¦å€¼ double HS[256] = &#123;0&#125;; for (int i = 0; i &lt;= 255; i++) &#123; HS[i] = 0.0; // å„ç°åº¦çº§çš„ç´¯ç§¯åˆ†å¸ƒ &#125; for (int i = 1; i &lt;= 255; i++) &#123; for (int j = 0; j &lt;= i; j++) &#123; HS[i] += HR[j]; &#125; H[i] = round(HS[i] * 255); &#125;// è·å¾—æ–°å›¾åƒ for (int nrow = 0; nrow &lt; img.rows; nrow++) &#123; for (int ncol = 0; ncol &lt; img.cols; ncol++) &#123; int h = img.ptr&lt;uchar&gt;(nrow)[ncol]; result.ptr&lt;uchar&gt;(nrow)[ncol] = H[h]; &#125; &#125;&#125;int main() &#123; Mat img = imread(\"Unequalized.jpg\", IMREAD_GRAYSCALE); Mat result = img.clone(); histogram_equalization(img, result); imshow(\"img\",img); imshow(\"Histogram Equalization\",result); imwrite(\"result.jpg\", result); waitKey(); return 0;&#125; åŸå›¾åƒï¼š ç»ç›´æ–¹å›¾å‡è¡¡åŒ–åçš„å›¾åƒï¼š","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"ç›´æ–¹å›¾å‡è¡¡åŒ–","slug":"ç›´æ–¹å›¾å‡è¡¡åŒ–","permalink":"https://gy23333.github.io/tags/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96/"}]},{"title":"C++å­¦ä¹ æ‰‹å†Œ","slug":"C-å­¦ä¹ æ‰‹å†Œ","date":"2020-01-09T18:36:52.000Z","updated":"2024-11-11T03:57:58.131Z","comments":true,"path":"2020/01/10/C-å­¦ä¹ æ‰‹å†Œ/","link":"","permalink":"https://gy23333.github.io/2020/01/10/C-%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C/","excerpt":"â€‹ C++å­¦ä¹ æ‰‹å†Œï¼Œä¸»è¦æ˜¯åœ¨Cçš„åŸºç¡€ä¸Šå†™å‡ºä¸€äº›C++ä¸åŒäºCçš„ç‚¹ï¼Œéƒ¨åˆ†Cè¯­è¨€ç›¸é€šéƒ¨åˆ†å°±ä¸å†èµ˜è¿°ã€‚","text":"â€‹ C++å­¦ä¹ æ‰‹å†Œï¼Œä¸»è¦æ˜¯åœ¨Cçš„åŸºç¡€ä¸Šå†™å‡ºä¸€äº›C++ä¸åŒäºCçš„ç‚¹ï¼Œéƒ¨åˆ†Cè¯­è¨€ç›¸é€šéƒ¨åˆ†å°±ä¸å†èµ˜è¿°ã€‚ ç¯å¢ƒæ­å»ºä½¿ç”¨ VS Code æ­å»ºC++å¼€å‘ç¯å¢ƒï¼ˆMACï¼‰å‚è€ƒè§†é¢‘ åœ¨VS Codeä¸Šå®‰è£…å¥½ç›¸åº”æ’ä»¶ï¼šC/C++ã€CodeLLDB æ–°å»ºå·¥ä½œç›®å½•ï¼Œç¼–å†™C++æ–‡ä»¶ åœ¨Debugä¸­åˆ›å»ºlaunch.jsonæ–‡ä»¶ï¼Œé€‰æ‹©LLDB å°†&lt;your program&gt;æ›¿æ¢ä¸º${fileBasenameNoExtension} é€‰æ‹©cppæ–‡ä»¶ï¼Œå»ºç«‹Buildæ–‡ä»¶ï¼ŒShift+Command+Påˆ‡å‡ºé¢æ¿ï¼Œé€‰æ‹©Tasks:Configure Task -&gt; C/C++ clang++ build active file åœ¨â€argsâ€ä¸­æ·»åŠ C++æ ‡å‡†&quot;-std=c++2a&quot; åœ¨launch.jsonä¸­çš„â€configurationsâ€ä¸­æ·»åŠ &quot;preLaunchTask&quot;: &quot;C/C++: clang++ build active file&quot;(ä¸tasks.jsonä¸­çš„labelä¸€è‡´) Xcodeå¼•å…¥iostreamåº“å¤±è´¥æç¤º â€˜iostreamâ€™ file not foundçš„è§£å†³åŠæ³•ï¼š åœ¨Build Settings -&gt; Search paths -&gt;System Header Search Pathsä¸­æ·»åŠ è·¯å¾„ 1&#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Toolchains&#x2F;XcodeDefault.xctoolchain&#x2F;usr&#x2F;include&#x2F;c++&#x2F;v1&#x2F; æ·»åŠ åï¼ŒC++åº“å¼•å…¥æˆåŠŸã€‚ ä»Cåˆ°C++è¾“å…¥è¾“å‡ºC++è¾“å…¥è¾“å‡ºéœ€ä½¿ç”¨iostreamåº“ æ ‡å‡†è¾“å‡ºcoutstd :: cout æ˜¯è¾“å‡ºå†…å®¹ï¼Œ&lt;&lt; æ˜¯è¾“å‡ºè¿ç®—ç¬¦ï¼Œstd :: endl ç»“æŸæ”¹è¡Œï¼Œç›¸å½“äºä¸€ä¸ªâ€\\nâ€ 1std::cout &lt;&lt; \"Hello, World!\" &lt;&lt; std::endl; 1std::cout &lt;&lt; \"Hello, World!\\n\" ; æ ‡å‡†è¾“å…¥cinstd :: cin æ˜¯è¾“å…¥å†…å®¹ï¼Œ&gt;&gt; æ˜¯è¾“å…¥è¿ç®—ç¬¦ã€‚ 123456789#include &lt;iostream&gt;int main() &#123; int a = 0, b = 0; std::cout &lt;&lt; \"Input a and b.\" &lt;&lt; std::endl; std::cin &gt;&gt; a &gt;&gt; b; std::cout &lt;&lt; \"The sum of a and b is \" &lt;&lt; a+b &lt;&lt; std::endl; return 0;&#125; ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„åå­—â€‹ std::è¡¨ç¤ºcoutå’Œcinæ˜¯å®šä¹‰åœ¨åä¸ºstdçš„å‘½åç©ºé—´ä¸­çš„ï¼Œå¯ä»¥é€šè¿‡using namespaceæ¥è¿›è¡Œå‘½åç©ºé—´çš„ç¼©ç•¥ã€‚ 1using namespace std; æ§åˆ¶æµwhileè¯­å¥â€‹ whileè¯­å¥åå¤æ‰§è¡Œä¸€æ®µä»£ç ï¼Œç›´è‡³æ¡ä»¶åˆ¤æ–­ä¸ºé”™è¯¯ã€‚ è¯»å–æ•°é‡ä¸å®šçš„è¾“å…¥æ•°æ®â€‹ åˆ©ç”¨std::cinè¿›è¡Œè¾“å…¥ä¸å®šçš„è¾“å…¥ã€‚ 123456789101112131415/** ä¸æ–­è¾“å…¥æ•°å­—æ±‚å’Œï¼Œç›´è‡³è¾“å…¥ä¸æ˜¯æ•°å­—ç»“æŸ */#include &lt;iostream&gt;using namespace std;int main() &#123; int sum = 0, value = 0; cout &lt;&lt; \"Input number.\" &lt;&lt; endl; while (cin &gt;&gt; value) &#123; //å½“è¾“å…¥ä¸ä¸ºæ•°å­—æ—¶åˆ¤æ–­ä¸ºfalse sum += value; cout &lt;&lt; \"Input number.\" &lt;&lt; endl; &#125; cout &lt;&lt; \"Sum is \" &lt;&lt; sum &lt;&lt; endl; return 0;&#125; â€‹ å·²ç»å®šä¹‰äº†valueä¸ºintå‹ï¼Œæ‰€ä»¥åœ¨ cin&gt;&gt;value è¾“å…¥ä¸ä¸ºintå‹æ—¶ï¼Œåˆ™åˆ¤æ–­ä¸ºfalseã€‚ â€‹ ä¹Ÿå¯ç”¨æ–‡ä»¶ç»“æŸç¬¦ï¼Œè¾“å…¥Ctrl+D forè¯­å¥â€‹ for(åˆå§‹åŒ–è¯­å¥; å¾ªç¯æ¡ä»¶; è¡¨è¾¾å¼) éå†æ•°ç»„ä¸­çš„å…ƒç´  â€‹ ä¸€ç»´æ•°ç»„ 1234567891011#include &lt;iostream&gt;using namespace std;int main()&#123; int scores[10] = &#123;0&#125;; for (auto i : scores) &#123; //éå†æ•°ç»„scoresä¸­çš„å…ƒç´  cout &lt;&lt; i &lt;&lt; endl; &#125; return 0;&#125; å¤šç»´æ•°ç»„ 1234567891011121314#include &lt;iostream&gt;using namespace std;int main()&#123; int ia[2][5] = &#123;0&#125;; for (auto &amp;row : ia) &#123; //éå†äºŒç»´æ•°ç»„iaå¤–å±‚æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼ˆè¿™é‡Œç›¸å½“äºéå†æ¯è¡Œï¼‰ for (auto &amp;col : row) &#123; //éå†äºŒç»´æ•°ç»„iaå†…å±‚æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´  cout &lt;&lt; col; &#125; cout &lt;&lt; endl; &#125; return 0;&#125; å‡½æ•°é‡è½½åŒä¸€ä½œç”¨åŸŸå†…ï¼Œå¯ä»¥æœ‰åŒåå‡½æ•°ï¼Œç»™å‡½æ•°å¤šä¸ªå®šä¹‰ï¼Œä½†å½¢å‚å¿…é¡»ä¸åŒï¼ŒåŠ ä»¥åŒºåˆ†ã€‚ å½¢å‚ä¸åŒï¼ŒæŒ‡å‚æ•°çš„ç±»å‹ã€å‚æ•°çš„ä¸ªæ•°å’Œå‚æ•°çš„é¡ºåºï¼Œè‡³å°‘æœ‰ä¸€ä¸ªä¸åŒã€‚ 12345678910111213141516171819202122#include &lt;iostream&gt;using namespace std;//ä¸‰ä¸ªå½¢å‚ä¸åŒçš„printå‡½æ•°void print(int data) &#123; cout &lt;&lt; data &lt;&lt; endl;&#125;void print(double data) &#123; cout &lt;&lt; data &lt;&lt; endl;&#125;void print(int a, int b) &#123; cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; endl;&#125;int main() &#123; print(2); print(2.5); print(1,2); return 0;&#125; C++åŸºç¡€å˜é‡å’ŒåŸºæœ¬ç±»å‹ç±»â€‹ ç›¸å½“äºæŠŠå„ç§æ•°æ®æ‰“åŒ…ç»„æˆäº†ä¸€ä¸ªé›†åˆæ¥è°ƒç”¨ã€‚ â€‹ ä¸‹é¢ä»¥å»ºç«‹å’Œä½¿ç”¨ä¸€ä¸ªä¹¦ç±é”€å”®å•ç±»Sales_dataä¸ºä¾‹ã€‚ å»ºç«‹å¤´æ–‡ä»¶â€‹ ä¸ºä¿éšœå„æ–‡ä»¶ä¸­çš„ç±»çš„å®šä¹‰ä¸€è‡´ï¼Œç±»é€šå¸¸è¢«å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªåä¸ºSales_data.hçš„å¤´æ–‡ä»¶æ¥è½¬è½½Sales_dataç±»çš„å®šä¹‰ã€‚ â€‹ å¤´æ–‡ä»¶ä¸€èˆ¬æœ€å¥½è¿›è¡Œé¢„å¤„ç†ï¼Œæ·»åŠ å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦ï¼š #define æŠŠåå­—è®¾å®šä¸ºé¢„å¤„ç†å˜é‡ #ifdef å½“ä¸”ä»…å½“å˜é‡å·²å®šä¹‰æ—¶ä¸ºçœŸ #ifndef å½“ä¸”ä»…å½“å˜é‡æœªè¢«å®šä¹‰æ—¶ä¸ºçœŸ #endif åˆ¤æ–­ä¸ºçœŸåï¼Œæ‰§è¡Œåˆ°#endifç»“æŸ 123456789#ifndef Sales_data_h#define Sales_data_h#include &lt;string.h&gt;struct Sales_data&#123; std::string bookNo; // ä¹¦ç±ç¼–å· unsigned units_sold = 0; // é”€å”®æ•°é‡ double revenue = 0.0; // é”€å”®æ”¶å…¥&#125;;#endif ä½¿ç”¨ç±»å®šä¹‰â€‹ è°ƒç”¨è¯¥.hæ–‡ä»¶ 1#include \"Sales_data.h\" â€‹ å®šä¹‰ç±»å˜é‡ 1Sales_data data1; â€‹ åˆ©ç”¨.æ¥è®¿é—®ç±»ä¸­çš„å¯¹è±¡ 12345678910111213#include &lt;iostream&gt;#include \"Sales_data.h\"using namespace std;int main() &#123; Sales_data data1; double price = 0.0; // ä¹¦ç±å•ä»· cout &lt;&lt; \"Input book_No, sold_num and price.\" &lt;&lt; endl; cin &gt;&gt; data1.bookNo &gt;&gt; data1.units_sold &gt;&gt; price; data1.revenue = price * data1.units_sold; cout &lt;&lt; \"Book \" &lt;&lt; data1.bookNo &lt;&lt; \"'s revenue is \" &lt;&lt; data1.revenue &lt;&lt; endl; return 0;&#125; è¿­ä»£å™¨â€‹ è¿­ä»£å™¨æ˜¯ä¸€ç§æ£€æŸ¥å®¹å™¨å†…å…ƒç´ å¹¶éå†å…ƒç´ çš„æ•°æ®ç±»å‹ã€‚å¯ä»¥æ›¿ä»£ä¸‹æ ‡è®¿é—®vectorå¯¹è±¡çš„å…ƒç´ ã€‚å¯ä»¥ç†è§£ä¸ºæŒ‡å‘å®¹å™¨å†…å…ƒç´ çš„æŒ‡é’ˆã€‚ ä½¿ç”¨è¿­ä»£å™¨â€‹ begin è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ï¼Œend è¿”å›æŒ‡å‘å®¹å™¨å°¾å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨ï¼ˆå®é™…ä¸Šæ˜¯ä¸å­˜åœ¨çš„ï¼‰ã€‚å½“beginå’Œendè¿”å›çš„ä¸ºåŒä¸€è¿­ä»£å™¨ï¼Œåˆ™è¯¥å®¹å™¨ä¸ºç©ºã€‚ â€‹ ä¸åœ¨æ„è¿­ä»£å™¨çš„ç±»å‹ï¼Œä¸€èˆ¬å®šä¹‰ä¸ºautoã€‚ è¿­ä»£å™¨è¿ç®—ç¬¦ åŠŸèƒ½ *iter è¿”å›è¿­ä»£å™¨iteræ‰€æŒ‡çš„å…ƒç´ çš„å¼•ç”¨ Iter-&gt;mem è§£å¼•ç”¨iterå¹¶è·å–è¯¥å…ƒç´ çš„åä¸ºmemçš„æˆå‘˜ï¼Œç­‰ä»·äº(*iter).mem ++iter ä»¤iteræŒ‡ç¤ºå®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´  â€”iter ä»¤iteræŒ‡ç¤ºå®¹å™¨ä¸­çš„ä¸Šä¸€ä¸ªå…ƒç´  iter1 == iter2 / iter1 != iter2 åˆ¤æ–­ä¸¤è¿­ä»£å™¨æ˜¯å¦ç›¸ç­‰ã€‚å¦‚ä¸¤è¿­ä»£å™¨æŒ‡ç¤ºçš„æ˜¯åŒä¸€ä¸ªå…ƒç´ æˆ–è€…å®ƒä»¬æ˜¯åŒä¸€ä¸ªå®¹å™¨æˆ–è€…å®ƒä»¬æ˜¯åŒä¸€ä¸ªå®¹å™¨çš„å°¾åè¿­ä»£å™¨ï¼Œåˆ™ç›¸ç­‰ã€‚ 12345678910111213141516/** å°†é¦–å•è¯çš„é¦–å­—æ¯å¤§å†™ */#include &lt;iostream&gt;using namespace std;int main()&#123; string s = \"hello world.\"; if (s.begin() != s.end()) &#123; // sä¸ä¸ºç©º auto it = s.begin(); // æŒ‡å‘é¦–å•è¯çš„è¿­ä»£å™¨ *it = toupper(*it); // å°†itè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ çš„å¼•ç”¨é¦–å­—æ¯å¤§å†™ cout &lt;&lt; s &lt;&lt; endl; &#125; return 0;&#125; è¿­ä»£å™¨è¿ç®— ä»£ç  åŠŸèƒ½ iter + n / iter - n åŠ æˆ–å‡nä¸ªä½ç½®å¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨ iter += n / iter -= n åŠ æˆ–å‡nä¸ªä½ç½®å¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨èµ‹ç»™iteræœ¬èº« iter1 - iter2 iter1ä¸iter2ä¹‹é—´çš„ä½ç½®å·® &gt; ã€&gt;=ã€&lt;ã€&lt;= æ¯”è¾ƒä½ç½® tryè¯­å¥å—å’Œå¼‚å¸¸å¤„ç†throwè¡¨è¾¾å¼â€‹ throwè¡¨è¾¾å¼ï¼Œå¼‚å¸¸æ£€æµ‹éƒ¨åˆ†ä½¿ç”¨throwè¡¨è¾¾å¼æ¥è¡¨ç¤ºå®ƒé‡åˆ°äº†æ— æ³•å¤„ç†çš„é—®é¢˜ã€‚ 12345678910111213141516171819/** æ£€éªŒè¾“å…¥æ˜¯å¦æ˜¯æ•°å­—ï¼Œä¸æ˜¯åˆ™æŠ›å‡ºå¼‚å¸¸ */#include &lt;iostream&gt;using namespace std;int main()&#123; int number = 0; cout &lt;&lt; \"Input a number.\" &lt;&lt; endl; char input; cin &gt;&gt; input; if (input &gt;= '0' &amp;&amp; input &lt;= '9') &#123; //è¾“å…¥ä¸ºæ•°å­— number = input - '0'; &#125; else &#123; //è¾“å…¥ä¸ä¸ºæ•°å­— throw runtime_error(\"Input not number.\"); &#125; return 0;&#125; å½“è¾“å…¥ä¸ä¸ºæ•°å­—æ—¶ï¼Œè¿è¡Œåˆ°throwè¯­å¥æ—¶å¡ä½ï¼Œå¹¶è¾“å‡ºå¼‚å¸¸ä¿¡æ¯ã€‚ tryè¯­å¥å—â€‹ tryè¯­å¥å—ï¼Œå¼‚å¸¸å¤„ç†éƒ¨åˆ†ä½¿ç”¨tryè¯­å¥å—å¤„ç†å¼‚å¸¸ã€‚tryå°è¯•ä¸€ä¸ªä»£ç å—ï¼Œå¦‚æœ‰å¼‚å¸¸é€šå¸¸ä¼šè¢«catchæ•æ‰å¤„ç†ã€‚ 12345try&#123; //æµ‹è¯•çš„ä»£ç å—&#125; catch(exception-declaration) &#123; //exception-declarationå¼‚å¸¸å£°æ˜ //å¼‚å¸¸å¤„ç†&#125; C++é¢å‘å¯¹è±¡C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚ ä¸‡äº‹ä¸‡ç‰©éƒ½æ˜¯å¯¹è±¡ï¼Œå…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡å¯ä»¥æŠ½è±¡æˆä¸€ä¸ªç±»ã€‚ ç±»å’Œå¯¹è±¡ç±»å’Œå¯¹è±¡çš„å®šä¹‰æŠŠç±»çš„æ‰€æœ‰æˆå‘˜ï¼ˆå˜é‡å’Œå‡½æ•°ï¼‰å°è£…èµ·æ¥ï¼Œå¹¶åŠ ä»¥æƒé™é™åˆ¶ã€‚ è¯­æ³•ï¼š 12345class ç±»å &#123;è®¿é—®æƒé™: æˆå‘˜å˜é‡ æˆå‘˜å‡½æ•°&#125;; ç¤ºä¾‹ï¼šè®¾è®¡ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿ 1234567891011121314151617181920212223242526#include &lt;iostream&gt;using namespace std;const double PI = 3.14;//å®šä¹‰ä¸€ä¸ªåœ†ç±»class Circle&#123;public: //è®¿é—®æƒé™ //æˆå‘˜å˜é‡ double r; //åŠå¾„ //æˆå‘˜å‡½æ•° //è®¡ç®—å‘¨é•¿ double calculate_circumference () &#123; return 2 * PI * r; &#125;&#125;;int main () &#123; Circle c1; //å£°æ˜ä¸€ä¸ªåœ†å¯¹è±¡ c1.r = 10; cout &lt;&lt; \"å‘¨é•¿ä¸ºï¼š\" &lt;&lt; c1.calculate_circumference() &lt;&lt; endl; return 0;&#125; æˆå‘˜å‡½æ•°ä¹Ÿå¯åœ¨ç±»çš„å¤–éƒ¨ï¼Œä½¿ç”¨èŒƒå›´è§£æè¿ç®—ç¬¦::å®šä¹‰ 12345678910111213class Circle&#123;public: double r; //æˆå‘˜å‡½æ•°å£°æ˜ double calculate_circumference();&#125;;//æˆå‘˜å‡½æ•°å®šä¹‰double Circle::calculate_circumference () &#123; return 2 * PI * r;&#125; è®¿é—®æƒé™ç±»æˆå‘˜çš„è®¿é—®é™åˆ¶å…±ä¸‰ç§ï¼špublicã€privateã€protected å…¬å…±æƒé™ public ç±»å†…ã€ç±»å¤–éƒ½å¯è®¿é—® ä¿æŠ¤æƒé™ protected ç±»å†…å¯è®¿é—®ï¼Œæ´¾ç”Ÿç±»å¯è®¿é—®ï¼Œç±»å¤–ä¸å¯è®¿é—® ç§æœ‰æƒé™ private åªå…è®¸ç±»å†…è®¿é—® å¦‚æœæ²¡æœ‰ä½¿ç”¨ä»»ä½•è®¿é—®ä¿®é¥°ç¬¦ï¼Œé»˜è®¤ä¸ºç§æœ‰æƒé™ è®¿é—®æƒé™ public protected private ç±»å†… å¯è®¿é—® å¯è®¿é—® å¯è®¿é—® æ´¾ç”Ÿç±» å¯è®¿é—® å¯è®¿é—® ä¸å¯è®¿é—® ç±»å¤– å¯è®¿é—® ä¸å¯è®¿é—® ä¸å¯è®¿é—® structå’Œclassçš„åŒºåˆ«ï¼šstructå’Œclasséƒ½å¯ä»¥è¡¨ç¤ºç±»ï¼Œä½†é»˜è®¤çš„æƒé™ä¸åŒã€‚å¦‚æœæˆå‘˜æ²¡æœ‰ä½¿ç”¨ä»»ä½•è®¿é—®ä¿®é¥°ç¬¦ï¼Œstructé»˜è®¤ä¸ºå…¬å…±æˆå‘˜ï¼Œclassé»˜è®¤ä¸ºç§æœ‰æˆå‘˜ã€‚ ç±»å†…è®¿é—® &amp; ç±»å¤–è®¿é—® 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;iostream&gt;using namespace std;class Person&#123;public: //å…¬å…±æˆå‘˜ //ç±»å†…å¯è®¿é—®ï¼Œç±»å¤–å¯è®¿é—® string name; string getPassword(); //è¯»å‡½æ•° void setPassword(string pass); //å†™å‡½æ•°protected: //ä¿æŠ¤æˆå‘˜ //ç±»å†…å¯è®¿é—®ï¼Œç±»å¤–ä¸å¯è®¿é—® string address;private: //ç§æœ‰æˆå‘˜ //ç±»å†…å¯è®¿é—®ï¼Œç±»å¤–ä¸å¯è®¿é—® string password;&#125;;string Person::getPassword () &#123; return password; //ç±»å†…è®¿é—®&#125;void Person::setPassword (string pass) &#123; password = pass; //ç±»å†…è®¿é—®&#125;int main () &#123; Person p1; //æ­£ç¡®ï¼Œç±»å¤–å¯è®¿é—®å…¬å…±æˆå‘˜ p1.name = \"ZhangSan\"; cout &lt;&lt; p1.name &lt;&lt; endl; //é”™è¯¯ï¼Œç±»å¤–ä¸å¯è®¿é—®ä¿æŠ¤/ç§æœ‰æˆå‘˜ // p1.password = \"123456\"; p1.setPassword(\"123456\"); cout &lt;&lt; p1.getPassword() &lt;&lt; endl; return 0;&#125; ä¸€èˆ¬éƒ½æŠŠæˆå‘˜å˜é‡è®¾ç½®ä¸ºprivateæƒé™ï¼Œç„¶ååœ¨publicä¸­è®¾ç½®è¯»å†™å‡½æ•°ï¼Œä»¥ä¾¿æ§åˆ¶è¯»å†™æƒé™ã€‚ æ„é€ å‡½æ•°/ææ„å‡½æ•°æ„é€ å‡½æ•°/ææ„å‡½æ•°æ˜¯ä¸¤ä¸ªç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œåˆ†åˆ«åœ¨åˆ›å»ºå¯¹è±¡/é”€æ¯å¯¹è±¡æ—¶è¢«è‡ªåŠ¨è°ƒç”¨ï¼Œç”¨äºå®Œæˆå¯¹è±¡åˆå§‹åŒ–/æ¸…ç†å·¥ä½œã€‚ å³ä½¿ä¸ä¸»åŠ¨ç¼–è¾‘æ„é€ å‡½æ•°/ææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šè‡ªåŠ¨æä¾›ä¸¤ä¸ªç©ºå‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°/ææ„å‡½æ•°ã€‚ æ„é€ å‡½æ•° åˆ›å»ºå¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨äºå®Œæˆå¯¹è±¡åˆå§‹åŒ– å‡½æ•°åä¸ç±»åç›¸åŒ ç±»å() {} å¯ä»¥æœ‰å‚æ•°ï¼Œä¸ä¼šæœ‰è¿”å›å€¼ï¼Œä¹Ÿä¸ä¼šè¿”å›void ææ„å‡½æ•° é”€æ¯å¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨äºå®Œæˆæ¸…ç†å·¥ä½œ å‡½æ•°åä¸ç±»åç›¸åŒï¼ŒåŠ ä¸ªå‰ç¼€~ï¼Œ ~ç±»å() {} ä¸èƒ½æœ‰å‚æ•°ï¼Œä¸ä¼šæœ‰è¿”å›å€¼ï¼Œä¹Ÿä¸ä¼šè¿”å›void è¯­æ³•æ¡†æ¶ 12345678910111213141516class ç±»å&#123;private: /* data */public: ç±»å(/* args */); //æ„é€ å‡½æ•°ï¼Œå¯ä»¥æœ‰å‚æ•° ~ç±»å(); //ææ„å‡½æ•°&#125;;ç±»å::ç±»å(/* args */)&#123;&#125;ç±»å::~ç±»å()&#123;&#125; ç¤ºä¾‹ 12345678910111213141516171819202122232425#include &lt;iostream&gt;using namespace std;class Line&#123;private: int length;public: Line(); //æ„é€ å‡½æ•° ~Line(); //ææ„å‡½æ•°&#125;;Line::Line() &#123; cout &lt;&lt; \"è°ƒç”¨æ„é€ å‡½æ•°\" &lt;&lt; endl;&#125;Line::~Line() &#123; cout &lt;&lt; \"è°ƒç”¨ææ„å‡½æ•°\" &lt;&lt; endl;&#125;int main () &#123; Line line; //åˆ›å»ºå¯¹è±¡ï¼Œè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•° return 0; //é”€æ¯å¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°&#125; æ„é€ å‡½æ•°çš„åˆ†ç±»å’Œè°ƒç”¨æ–¹å¼æ— å‚æ„é€  å‡½æ•°ç»“æ„ 123className() &#123; ...&#125; è°ƒç”¨æ–¹æ³•ï¼ˆå®šä¹‰å¯¹è±¡ï¼‰ 1className c; å®šä¹‰æ— å‚æ„é€ çš„å¯¹è±¡çš„é”™è¯¯å†™æ³•className c();ï¼Œä¸èƒ½åŠ ()ï¼Œä¸ç„¶ä¼šä¸å‡½æ•°çš„å£°æ˜å¼„æ··ã€‚ æœ‰å‚æ„é€ ä»¥intå‹å‚æ•°ä¸ºä¾‹ å‡½æ•°ç»“æ„ 123className(int x) &#123; ...&#125; è°ƒç”¨æ–¹æ³•ï¼ˆå®šä¹‰å¯¹è±¡ï¼‰ 1className c(10); //æ–¹æ³•ä¸€ï¼šæ‹¬å·æ³• 1className c = className(10); //æ–¹æ³•äºŒï¼šæ˜¾ç¤ºæ³• 1className c = 10; //æ–¹æ³•ä¸‰ï¼šéšå¼è½¬æ¢æ³• ç¤ºä¾‹ 12345Line::Line(int a, int b) &#123; A = a; B = b; ...&#125; å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ¥åˆå§‹åŒ–å­—æ®µï¼Œä¸¤ç§æ–¹æ³•ç­‰æ•ˆ 1234Line::Line(int a, int b) : A(a), B(b)&#123; ...&#125; æ‹·è´æ„é€ æ‹·è´æ„é€ å‡½æ•°ï¼Œå³å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ï¼Œç”Ÿæˆæ–°å¯¹è±¡ã€‚ å‡½æ•°ç»“æ„ 123className(const className &amp;obj) &#123; ...&#125; consté˜²æ­¢è¢«æ‹·è´çš„æ•°æ®objè¢«ä¿®æ”¹ï¼Œä¸”é¡»ç”¨å¼•ç”¨ä¼ é€’ï¼Œè€Œä¸èƒ½ç”¨å€¼ä¼ é€’ã€‚ è°ƒç”¨æ–¹æ³•ï¼ˆå®šä¹‰å¯¹è±¡ï¼‰ 1className c(obj); //æ–¹æ³•ä¸€ï¼šæ‹¬å·æ³• 1className c = className(obj); //æ–¹æ³•äºŒï¼šæ˜¾ç¤ºæ³• 1className c = obj; //æ–¹æ³•ä¸‰ï¼šéšå¼è½¬æ¢æ³• è°ƒç”¨æ—¶æœº ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œæ‹·è´å‡ºä¸€ä¸ªæ–°å¯¹è±¡ 12Line l1(10);Line l2(l1); //è°ƒç”¨æ‹·è´æ„é€  å€¼æ–¹å¼ä¼ é€’å‚æ•°æ—¶ï¼Œå¤åˆ¶å‰¯æœ¬ 123void func(Line l) &#123; //å€¼ä¼ é€’ï¼Œå¤åˆ¶åŸå¯¹è±¡lï¼Œè°ƒç”¨æ‹·è´æ„é€  ...&#125; å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡æ—¶ï¼Œå¤åˆ¶å‰¯æœ¬ 1234void func( &#123; ... return l; //å¤åˆ¶åŸå¯¹è±¡lï¼Œè¿”å›å‰¯æœ¬ï¼Œè°ƒç”¨æ‹·è´æ„é€ &#125; æ— å‚/æœ‰å‚/æ‹·è´æ„é€ ç¤ºä¾‹ å®šä¹‰lineç±»ï¼Œåˆ†åˆ«ç”¨æ— å‚/æœ‰å‚æ„é€ å‡½æ•°ï¼Œå®šä¹‰ä¸¤ä¸ªlengthç›¸åŒçš„å¯¹è±¡ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#include &lt;iostream&gt;using namespace std;class Line&#123;private: int length;public: Line(); //æ— å‚æ„é€ å‡½æ•° Line(int len); //æœ‰å‚æ„é€ å‡½æ•° Line(const Line &amp;obj); //æ‹·è´æ„é€ å‡½æ•° ~Line(); void setLength(int len); int getLength();&#125;;//æ— å‚æ„é€ å‡½æ•°Line::Line() &#123; cout &lt;&lt; \"æ— å‚æ„é€ å‡½æ•°è°ƒç”¨\" &lt;&lt; endl;&#125;//æœ‰å‚æ„é€ å‡½æ•°Line::Line(int len) &#123; length = len; cout &lt;&lt; \"æœ‰å‚æ„é€ å‡½æ•°è°ƒç”¨\" &lt;&lt; endl;&#125;//æ‹·è´æ„é€ å‡½æ•°Line::Line(const Line &amp;obj) &#123; length = obj.length; cout &lt;&lt; \"æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨\" &lt;&lt; endl;&#125;Line::~Line() &#123; cout &lt;&lt; \"ææ„å‡½æ•°è°ƒç”¨\" &lt;&lt; endl;&#125;void Line::setLength(int len) &#123; length = len;&#125;int Line::getLength() &#123; return length;&#125;int main () &#123; Line l1; //æ— å‚æ„é€  l1.setLength(10); Line l2(10); //æœ‰å‚æ„é€  Line l3(l2); //æ‹·è´æ„é€  return 0;&#125; æ„é€ å‡½æ•°çš„è°ƒç”¨è§„åˆ™é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç»™ä¸€ä¸ªç±»æ·»åŠ 3ä¸ªå‡½æ•°ï¼š é»˜è®¤æ„é€ å‡½æ•°ï¼ˆæ— å‚ï¼Œç©ºå‡½æ•°ï¼‰ é»˜è®¤ææ„å‡½æ•°ï¼ˆç©ºå‡½æ•°ï¼‰ é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼ˆå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´ï¼‰ å¦‚ç”¨æˆ·è‡ªè¡Œå®šä¹‰äº†æœ‰å‚æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°†ä¸å†æä¾›é»˜è®¤æ— å‚æ„é€ å‡½æ•°ï¼Œä½†ä¾æ—§æä¾›é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼› å¦‚ç”¨æˆ·è‡ªè¡Œå®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°†ä¸å†æä¾›å…¶ä»–æ„é€ å‡½æ•°ã€‚ å¯¹è±¡å‚æ•°çš„å¼•ç”¨ä¼ é€’ ä¼ é€’å¯¹è±¡å‚æ•°æ—¶ï¼Œæœ€å¥½ç”¨å¼•ç”¨ä¼ é€’void func(className &amp;obj); å¦‚ä¸ºå€¼ä¼ é€’ï¼Œå³void func(className obj);ï¼Œè°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œè¦å¤åˆ¶ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œç»“æŸæ—¶ï¼Œè¿˜éœ€è¦è°ƒç”¨ææ„å‡½æ•°æ¥åšæ¸…ç†å·¥ä½œã€‚æ—¶é—´æ•ˆç‡ä½ã€‚ å¦‚ä¸ºå¼•ç”¨ä¼ é€’ï¼Œå³void func(className &amp;obj);ï¼Œè°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œç›´æ¥ç”¨åŸå¯¹è±¡ï¼Œä¸éœ€è¦ç”Ÿæˆæ–°å¯¹è±¡ã€‚ å½“ä¸ä¿®æ”¹å¯¹è±¡æ—¶ï¼Œåº”å½“å°†å‚æ•°å£°æ˜ä¸ºconstå¼•ç”¨ã€‚ æ‹·è´æ„é€ å‡½æ•°çš„å‚æ•°å¿…é¡»æ˜¯å¼•ç”¨ï¼Œä¸”æœ€å¥½ç”¨constå¼•ç”¨className(const className &amp;obj); å¦‚æœä½¿ç”¨å€¼ä¼ é€’ï¼Œå³className(className obj);ï¼Œåˆ™ä¼ å€¼æ—¶ä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œä¼šå‡ºç°æ— ç©·é€’å½’è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„æƒ…å†µï¼Œæ‰€ä»¥æ‹·è´æ„é€ å‡½æ•°çš„å‚æ•°ä¸èƒ½ä½¿ç”¨å€¼ä¼ é€’ã€‚ æ·±æ‹·è´/æµ…æ‹·è´æµ…æ‹·è´ï¼Œå³ç®€å•çš„èµ‹å€¼æ‹·è´ï¼Œé»˜è®¤æ‹·è´æ„é€ å³æ˜¯æµ…æ‹·è´ã€‚ å¦‚å®šä¹‰ä¸€ä¸ªç±» 123456789class Person &#123;private: int age;public: Person(int m_age) &#123; age = m_age; &#125;&#125;; ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå³ 123Person(const Person &amp;obj) &#123; age = obj.age;&#125; è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œå³å¯è¿›è¡Œç®€å•æ‹·è´ï¼Œä¹Ÿå°±æ˜¯æµ…æ‹·è´ã€‚ 12Person p1(10);Person p2(p1); æµ…æ‹·è´å¯ä»¥å¤„ç†ä¸€èˆ¬çš„å¯¹è±¡æ‹·è´ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–å†™æ‹·è´æ„é€ å‡½æ•°ï¼Œç›´æ¥ç”¨é»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œå³å¯è¿›è¡Œæµ…æ‹·è´ã€‚ ä½†ä¸€æ—¦ç±»å¸¦æœ‰æŒ‡é’ˆå˜é‡ï¼Œç”¨æµ…æ‹·è´å°±ä¼šå‡ºç°é”™è¯¯ã€‚ å¦‚ä¸‹é¢çš„ç±»ä¸­ï¼Œå¸¦æœ‰æŒ‡é’ˆå˜é‡ 1234567891011121314151617181920class Person &#123;private: int age; int *height; //æŒ‡é’ˆå˜é‡public: Person(int m_age, int m_height) &#123; age = m_age; height = new int(m_height); &#125; ~Person() &#123; //ææ„å‡½æ•°ï¼Œé‡Šæ”¾å †åŒºåŠ¨æ€åˆ†é…çš„ç©ºé—´ if (height != NULL) &#123; delete height; height = NULL; &#125; &#125;&#125;; å¦‚æœä½¿ç”¨ç¼–è¯‘å™¨çš„é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œè¿›è¡Œæµ…æ‹·è´ 1234Person(const Person &amp;obj) &#123; age = obj.age; height = obj.height;&#125; 12Person p1(10);Person p2(p1); p2çš„heightä¸p1çš„heightå®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯æŒ‡å‘å †åŒºåŒä¸€åœ°å€çš„æŒ‡é’ˆã€‚ åœ¨ææ„å‡½æ•°é‡Šæ”¾ç©ºé—´æ—¶ï¼Œå…ˆé‡Šæ”¾å®Œp1çš„heightï¼Œå¯¹p2ææ„æ—¶ï¼Œheightå·²ç»é‡Šæ”¾ï¼Œæ— æ³•é‡æ–°é‡Šæ”¾ï¼Œå‘ç”Ÿé”™è¯¯ã€‚ æ‰€ä»¥ç±»å¸¦æœ‰æŒ‡é’ˆå˜é‡ï¼Œå¹¶æœ‰åŠ¨æ€å†…å­˜åˆ†é…ï¼Œåˆ™å¿…é¡»è‡ªè¡Œå®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œè¿›è¡Œæ·±åº¦æ‹·è´ã€‚ æ·±æ‹·è´ï¼Œå³åœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´ï¼Œå†…å®¹ç›¸åŒï¼Œä½†æ˜¯ä¸åŒçš„åœ°å€ã€‚ 12345678910111213141516171819202122232425class Person &#123;private: int age; int *height; //æŒ‡é’ˆå˜é‡public: Person(int m_age, int m_height) &#123; age = m_age; height = new int(m_height); &#125; Person(const Person &amp;obj) &#123; age = obj.age; //æ·±æ‹·è´ height = new int(*obj.height); &#125; ~Person() &#123; //ææ„å‡½æ•°ï¼Œé‡Šæ”¾å †åŒºåŠ¨æ€åˆ†é…çš„ç©ºé—´ if (height != NULL) &#123; delete height; height = NULL; &#125; &#125;&#125;; thisæŒ‡é’ˆæ¯ä¸€ä¸ªå¯¹è±¡éƒ½èƒ½é€šè¿‡thisæŒ‡é’ˆæ¥è®¿é—®è‡ªå·±çš„åœ°å€ï¼ŒthisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨æˆå‘˜å‡½æ•°çš„æ‰€å±å¯¹è±¡ã€‚ ä¸»è¦ç”¨é€”ï¼š å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œç”¨thisæŒ‡é’ˆåŠ ä»¥åŒºåˆ† è¿”å›å¯¹è±¡æœ¬èº« 12345678910class Person&#123;private: int age;public: Person(int age)&#123; this-&gt;age = age; &#125;&#125;; é™æ€æˆå‘˜åœ¨ç±»æˆå‘˜å‰åŠ ä¸Šstaticï¼Œç§°ä¸ºé™æ€æˆå‘˜ã€‚å½“å£°æ˜æˆå‘˜ä¸ºé™æ€æ—¶ï¼Œè¿™æ„å‘³ç€æ— è®ºåˆ›å»ºå¤šå°‘ä¸ªç±»çš„å¯¹è±¡ï¼Œé™æ€æˆå‘˜éƒ½åªæœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œé™æ€æˆå‘˜åœ¨ç±»çš„æ‰€æœ‰å¯¹è±¡ä¸­æ˜¯å…±äº«çš„ã€‚ é™æ€æˆå‘˜å˜é‡ è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ® ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜ ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ– è®¿é—®é™æ€æˆå‘˜ï¼Œå¯ä»¥ç”¨p1.Aæˆ–è€…Person::A 12345678910111213141516171819202122#include &lt;iostream&gt;using namespace std;class Person&#123;public: static int A; //ç±»å†…å£°æ˜é™æ€æˆå‘˜å˜é‡&#125;;int Person::A = 10; //ç±»å¤–åˆå§‹åŒ–int main () &#123; Person p1; cout &lt;&lt; p1.A &lt;&lt; endl; //10 //æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®ï¼Œæ‰€ä»¥ä¿®æ”¹p2çš„Aï¼Œp1çš„Aä¹Ÿä¼šç›¸åº”å˜åŒ– Person p2; p2.A = 20; cout &lt;&lt; p1.A &lt;&lt; endl; //20 return 0;&#125; é™æ€æˆå‘˜å‡½æ•° è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•° é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜ é™æ€æˆå‘˜å‡½æ•°ä¸æ™®é€šæˆå‘˜å‡½æ•°çš„æ ¹æœ¬åŒºåˆ«åœ¨äºï¼š æ™®é€šæˆå‘˜å‡½æ•°æœ‰thisæŒ‡é’ˆï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ä»»æ„æˆå‘˜ é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰thisæŒ‡é’ˆï¼Œåªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼ˆåŒ…æ‹¬é™æ€æˆå‘˜å˜é‡å’Œé™æ€æˆå‘˜å‡½æ•°ï¼‰ é™æ€æˆå‘˜å‡½æ•°çš„ä½œç”¨ï¼šæ–¹ä¾¿è°ƒç”¨ 12345class Solution &#123;public: void func1(); static void func2();&#125;; è°ƒç”¨func1()æ—¶ï¼Œéœ€è¦å…ˆç”Ÿæˆç±»å¯¹è±¡ï¼Œæ‰èƒ½è°ƒç”¨ 12Solution s;s.func1(); è°ƒç”¨é™æ€æˆå‘˜å‡½æ•°func2()æ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ 1Solution::func2(); constå¸¸å‡½æ•°å’Œå¸¸å¯¹è±¡å¦‚æœä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹ï¼Œå¯ä»¥åŠ ä¸Šconstå…³é”®å­—æ¥ä¿®é¥°æˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°ã€å¯¹è±¡ã€‚ å¸¸å‡½æ•° æˆå‘˜å‡½æ•°ååŠ const å¸¸å‡½æ•°å†…ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡ å¦‚æœæˆå‘˜å˜é‡å‰åŠ mutableï¼Œåˆ™å¯åœ¨å¸¸å‡½æ•°å†…æ”¹å˜è¯¥å˜é‡ 12345678910class Person &#123;public: void test() const &#123; //å¸¸å‡½æ•° m_A = 100; //é”™è¯¯ï¼Œå¸¸å‡½æ•°ä¸­æ™®é€šæˆå‘˜å˜é‡æ— æ³•ä¿®æ”¹ m_B = 100; //æ­£ç¡®ï¼Œmutableå˜é‡å¯åœ¨å¸¸å‡½æ•°ä¸­ä¿®æ”¹ &#125; int m_A; mutable int m_B; //åŠ å…¥mutableåï¼Œå¯åœ¨å¸¸å‡½æ•°ä¸­ä¿®æ”¹&#125;; æˆå‘˜å‡½æ•°ä¸­è°ƒç”¨m_Aï¼Œå®é™…æ˜¯è°ƒç”¨äº†this -&gt; m_A æˆå‘˜å‡½æ•°çš„thisæŒ‡é’ˆï¼Œæœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œä¹Ÿå°±æ˜¯æŒ‡é’ˆæœ¬èº«æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œåœ°å€ä¸å˜ï¼Œå³Person * const this;ï¼Œæ­¤æ—¶thisä¸€ç›´æŒ‡å‘å¯¹è±¡æœ¬èº« å¦‚æœä¸ºå¸¸å‡½æ•°ï¼Œconstä¿®é¥°çš„æ˜¯thisæŒ‡é’ˆçš„æŒ‡å‘ï¼ŒthisæŒ‡é’ˆçš„æŒ‡å‘çš„å€¼å†…å®¹ä¸å˜ï¼Œå³const Person * const this;ï¼Œæ­¤æ—¶thisæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ getç±»å‹çš„æˆå‘˜å‡½æ•°ä¸€èˆ¬éƒ½é‡‡ç”¨å¸¸å‡½æ•°ï¼Œåªéœ€è·å–ï¼Œä¸éœ€ä¿®æ”¹ å¸¸å¯¹è±¡ å¯¹è±¡å‰åŠ const ä¸èƒ½ä¿®æ”¹ä¸€èˆ¬çš„æˆå‘˜å˜é‡ï¼Œä½†å¯ä»¥ä¿®æ”¹mutableçš„æˆå‘˜å˜é‡ å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨constå¸¸å‡½æ•°ï¼ˆä¸èƒ½è°ƒç”¨æ™®é€šå‡½æ•°ï¼Œå› ä¸ºæ™®é€šçš„æˆå‘˜å‡½æ•°å¯èƒ½ä¼šä¿®æ”¹æˆå‘˜å˜é‡ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;class Person &#123;public: Person(string name, int age); string get_name() const; //å¸¸å‡½æ•° void set_age(int age); //æ™®é€šæˆå‘˜å‡½æ•° int m_a; mutable int m_b; private: string m_name; mutable int m_age; &#125;;Person::Person(string name, int age) : m_name(name), m_age(age) &#123;&#125;string Person::get_name() const&#123; return m_name;&#125;void Person::set_age(int age) &#123; m_age = age;&#125;int main() &#123; const Person p(\"Job\", 20); cout &lt;&lt; p.get_name() &lt;&lt; endl; //æ­£ç¡®ï¼Œå¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•° p.set_age(30); //é”™è¯¯ï¼Œå¸¸å¯¹è±¡æ— æ³•è°ƒç”¨æ™®é€šæˆå‘˜å‡½æ•° p.m_a = 100; //é”™è¯¯ï¼Œå¸¸å¯¹è±¡æ— æ³•ä¿®æ”¹æ™®é€šæˆå‘˜å˜é‡ p.m_b = 100; //æ­£ç¡®ï¼Œå¸¸å¯¹è±¡èƒ½ä¿®æ”¹mutableæˆå‘˜å˜é‡&#125; å‹å…ƒå‹å…ƒå®šä¹‰åœ¨ç±»çš„å¤–éƒ¨ï¼Œä¸å±äºç±»çš„æˆå‘˜ï¼Œä½†æœ‰è®¿é—®privateå’Œprotectedçš„æƒé™ï¼Œåœ¨ç±»ä¸­ç”¨å…³é”®å­—friendå£°æ˜å‡½æ•°/ç±»ï¼Œå³å¯å°†å…¶è®¾å®šä¸ºå‹å…ƒã€‚ å‹å…ƒå‡½æ•°å°†å…¨å±€å‡½æ•°åŠ ä¸Šå…³é”®å­—friendï¼Œåœ¨ç±»ä¸­å£°æ˜ä¸ºå‹å…ƒï¼Œå³å¯ä½¿å…¶èƒ½å¤Ÿè®¿é—®privateå’Œprotectedçš„æƒé™æˆå‘˜ã€‚ å°½ç®¡åœ¨ç±»ä¸­æœ‰å£°æ˜ï¼Œä½†å‹å…ƒå‡½æ•°å¹¶ä¸æ˜¯æˆå‘˜å‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;using namespace std;class Person&#123; //å°†å…¨å±€å‡½æ•°è®¾ç½®ä¸ºå‹å…ƒï¼Œå…è®¸å…¶è®¿é—®ç§æœ‰æˆå‘˜ friend void print_age(Person &amp;p);private: int m_age;public: void set_age(int age);&#125;;void Person::set_age(int age) &#123; m_age = age;&#125;//å…¨å±€å‡½æ•°void print_age(Person &amp;p) &#123; cout &lt;&lt; p.m_age &lt;&lt; endl; //å…è®¸è®¿é—®ç§æœ‰æˆå‘˜m_age&#125;int main () &#123; Person p; p.set_age(18); print_age(p); return 0;&#125; å‹å…ƒç±»å°†ç±»åŠ ä¸Šå…³é”®å­—friendï¼Œåœ¨ç±»ä¸­å£°æ˜ä¸ºå‹å…ƒï¼Œå³å¯ä½¿å…¶èƒ½å¤Ÿè®¿é—®privateå’Œprotectedçš„æƒé™æˆå‘˜ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;iostream&gt;using namespace std;class Person&#123; //å°†ç±»è®¾ç½®ä¸ºå‹å…ƒï¼Œå…è®¸å…¶è®¿é—®ç§æœ‰æˆå‘˜ friend class PersonFriend;private: int m_age;public: Person()&#123; m_age = 18; &#125;&#125;;class PersonFriend&#123;public: void visit(); PersonFriend();private: Person *p;&#125;;PersonFriend::PersonFriend()&#123; p = new Person;&#125;void PersonFriend::visit()&#123; cout &lt;&lt; p-&gt;m_age &lt;&lt; endl; //å¯ä»¥è®¿é—®Personç±»å¯¹è±¡çš„ç§æœ‰æˆå‘˜&#125;int main () &#123; Person p; PersonFriend pf; pf.visit(); return 0;&#125; è¿ç®—ç¬¦é‡è½½åŒä¸€ä½œç”¨åŸŸä¸­çš„æŸä¸ªå‡½æ•°å’Œè¿ç®—ç¬¦æŒ‡å®šå¤šä¸ªå®šä¹‰ï¼Œåˆ†åˆ«ç§°ä¸ºå‡½æ•°é‡è½½å’Œè¿ç®—ç¬¦é‡è½½ã€‚ å‡½æ•°é‡è½½å’Œæ™®é€šçš„å‡½æ•°é‡è½½ä¸€è‡´ï¼Œåˆ©ç”¨å½¢å‚çš„ä¸åŒåŠ ä»¥åŒºåˆ†ã€‚ è¿ç®—ç¬¦é‡è½½ï¼Œåˆ™æ˜¯é‡æ–°å®šä¹‰è¿ç®—ç¬¦ï¼Œä»¥é€‚åº”ç±»çš„è¿ç®—ã€‚ è¿ç®—ç¬¦é‡è½½æ˜¯é€šè¿‡å‡½æ•°å®ç°çš„ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯å‡½æ•°é‡è½½ã€‚å¯ä»¥ä½œä¸ºç±»çš„æˆå‘˜å‡½æ•°ï¼Œè¿˜å¯ä»¥ä½œä¸ºå…¨å±€å‡½æ•°ã€‚ åœ¨è¿ç®—ç¬¦å‰åŠ ä¸Šå…³é”®è¯operatorï¼Œä½œä¸ºå£°æ˜æ—¶çš„å‡½æ•°åã€‚ å¯é‡è½½çš„è¿ç®—ç¬¦ ç±»å‹ è¿ç®—ç¬¦ åŒç›®ç®—æœ¯è¿ç®—ç¬¦ + (åŠ )ï¼Œ-(å‡)ï¼Œ*(ä¹˜)ï¼Œ/(é™¤)ï¼Œ% (å–æ¨¡) å…³ç³»è¿ç®—ç¬¦ ==(ç­‰äº)ï¼Œ!= (ä¸ç­‰äº)ï¼Œ&lt; (å°äº)ï¼Œ&gt; (å¤§äº)ï¼Œ&lt;=(å°äºç­‰äº)ï¼Œ&gt;=(å¤§äºç­‰äº) é€»è¾‘è¿ç®—ç¬¦ \\ \\ (é€»è¾‘æˆ–)ï¼Œ&amp;&amp;(é€»è¾‘ä¸)ï¼Œ!(é€»è¾‘é) å•ç›®è¿ç®—ç¬¦ + (æ­£)ï¼Œ-(è´Ÿ)ï¼Œ*(æŒ‡é’ˆ)ï¼Œ&amp;(å–åœ°å€) è‡ªå¢è‡ªå‡è¿ç®—ç¬¦ ++(è‡ªå¢)ï¼Œâ€”(è‡ªå‡) ä½è¿ç®—ç¬¦ \\ (æŒ‰ä½æˆ–)ï¼Œ&amp; (æŒ‰ä½ä¸)ï¼Œ~(æŒ‰ä½å–å)ï¼Œ^(æŒ‰ä½å¼‚æˆ–),ï¼Œ&lt;&lt; (å·¦ç§»)ï¼Œ&gt;&gt;(å³ç§») èµ‹å€¼è¿ç®—ç¬¦ =, +=, -=, *=, /= , % = , &amp;=, =, ^=, &lt;&lt;=, &gt;&gt;= ç©ºé—´ç”³è¯·ä¸é‡Šæ”¾ new, delete, new[ ] , delete[] å…¶ä»–è¿ç®—ç¬¦ ()(å‡½æ•°è°ƒç”¨)ï¼Œ-&gt;(æˆå‘˜è®¿é—®)ï¼Œ,(é€—å·)ï¼Œ[](ä¸‹æ ‡) ä¸å¯é‡è½½çš„è¿ç®—ç¬¦ .ï¼šæˆå‘˜è®¿é—®è¿ç®—ç¬¦ .*, -&gt;*ï¼šæˆå‘˜æŒ‡é’ˆè®¿é—®è¿ç®—ç¬¦ ::ï¼šåŸŸè¿ç®—ç¬¦ sizeofï¼šé•¿åº¦è¿ç®—ç¬¦ ?:ï¼šæ¡ä»¶è¿ç®—ç¬¦ #ï¼š é¢„å¤„ç†ç¬¦å· è´Ÿå·-é‡è½½ï¼ˆä¸€å…ƒï¼‰ ä½œä¸ºç±»çš„æˆå‘˜å‡½æ•° 123456789101112131415161718192021class Complex &#123;public: Complex (int i, int j); //é‡è½½-ï¼Œä½œä¸ºç±»çš„æˆå‘˜å‡½æ•° Complex operator- ();private: int m_i; int m_j;&#125;;Complex :: Complex (int i, int j) &#123; m_i = i; m_j = j;&#125;//é‡è½½-Complex Complex :: operator- () &#123; m_i = -m_i; m_j = -m_j; return *this;&#125; è¿˜å¯ä»¥ä½œä¸ºå…¨å±€å‡½æ•° 123456789101112131415161718192021class Complex &#123; //é‡è½½-ï¼Œåœ¨å…¨å±€èŒƒå›´å†…é‡è½½è¿ç®—ç¬¦ï¼Œè®¾ç½®ä¸ºå‹å…ƒå‡½æ•° friend Complex operator- (Complex &amp;c);public: Complex (int i, int j);private: int m_i; int m_j;&#125;;Complex :: Complex (int i, int j) &#123; m_i = i; m_j = j;&#125;//é‡è½½-Complex operator- (Complex &amp;c) &#123; c.m_i = -c.m_i; c.m_j = -c.m_j; return Complex(c.m_i, c.m_j);&#125; è°ƒç”¨-cï¼Œå³å¯å°†m_iã€m_jå–å 12Complex c(1,2);-c; åŠ å·+é‡è½½123456789101112131415161718192021class Complex &#123;public: Complex (int i, int j); //é‡è½½+ Complex operator+ (const Complex &amp;b);private: int m_i; int m_j;&#125;;Complex :: Complex (int i, int j) &#123; m_i = i; m_j = j;&#125;//é‡è½½+Complex Complex :: operator+ (const Complex &amp;b) &#123; int i = this-&gt;m_i + b.m_i; int j = this-&gt;m_j + b.m_j; return Complex(i, j);&#125; è°ƒç”¨a+bï¼Œå³å¯å°†m_iã€m_jç›¸åŠ  12Complex a(1,2), b(2,3);Complex c = a + b; å…³ç³»è¿ç®—ç¬¦==é‡è½½1234567891011121314151617181920212223class Complex &#123;public: Complex (int i, int j); //é‡è½½== bool operator== (const Complex &amp;b) const;private: int m_i; int m_j;&#125;;Complex :: Complex (int i, int j) &#123; m_i = i; m_j = j;&#125;//é‡è½½==bool Complex :: operator== (const Complex &amp;b) const &#123; if (m_i == b.m_i &amp;&amp; m_j == b.m_j) &#123; return true; &#125; else &#123; return false; &#125;&#125; ç»§æ‰¿ç±»ä¸ç±»ä¹‹é—´å¯ä»¥æœ‰ç»§æ‰¿å…³ç³»ï¼Œå·²æœ‰ä¸€ä¸ªåŸºç±»ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæ´¾ç”Ÿç±»æ¥ç»§æ‰¿åŸºç±» è¯­æ³•ï¼šclass æ´¾ç”Ÿç±» : ç»§æ‰¿æ–¹å¼ åŸºç±» 123456789//åŸºç±»class Animal &#123;...&#125;;//æ´¾ç”Ÿç±»class Dog : public Animal &#123;...&#125;; Dogå°±æ˜¯Animalçš„æ´¾ç”Ÿç±»ï¼Œå¯ä»¥ç»§æ‰¿åŸºç±»çš„æˆå‘˜ã€‚ æ´¾ç”Ÿç±»å¯ä»¥ç»§æ‰¿åŸºç±»çš„æ‰€æœ‰æˆå‘˜ï¼Œä½†åªæœ‰publicå’Œprotectedæˆå‘˜èƒ½è¢«è®¿é—®åˆ°ï¼Œprivateæˆå‘˜å¯ä»¥ç»§æ‰¿ï¼Œä½†æ— æ³•è®¿é—®ã€‚ ç»§æ‰¿æ–¹å¼ç»§æ‰¿æ–¹å¼åˆ†ä¸ºä¸‰ç§ï¼šå…¬å…±ç»§æ‰¿publicã€ä¿æŠ¤ç»§æ‰¿protectedã€ç§æœ‰ç»§æ‰¿private ä¾‹å¦‚ä¸€ä¸ªåŸºç±»A 12345678class A &#123;public: int a;protected: int b;private: int c;&#125;; æ´¾ç”Ÿç±»BæŒ‰ä¸åŒç»§æ‰¿æ–¹å¼ï¼Œæˆå‘˜ä¼šç»§æ‰¿ä¸ºä¸åŒçš„æƒé™ å…¬å…±ç»§æ‰¿public åŸpublicã€protectedä¾æ—§ä»¥publicã€protectedç»§æ‰¿ï¼Œä¸å¯è®¿é—®privateã€‚ 12345678class B : public A &#123;public: int a;protected: int b;ä¸å¯è®¿é—®: int c;&#125;; ä¿æŠ¤ç»§æ‰¿protected åŸpublicã€protectedä»¥protectedç»§æ‰¿ï¼Œä¸å¯è®¿é—®privateã€‚ 1234567class B : protected A &#123;protected: int a; int b;ä¸å¯è®¿é—®: int c;&#125;; ç§æœ‰ç»§æ‰¿private åŸpublicã€protectedä»¥privateç»§æ‰¿ï¼Œä¸å¯è®¿é—®privateã€‚ 1234567class B : private A &#123;private: int a; int b;ä¸å¯è®¿é—®: int c;&#125;; å¤šç»§æ‰¿ä¸€ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿äº†å¤šä¸ªåŸºç±»ã€‚ 1234class &lt;æ´¾ç”Ÿç±»å&gt;:&lt;ç»§æ‰¿æ–¹å¼1&gt;&lt;åŸºç±»å1&gt;,&lt;ç»§æ‰¿æ–¹å¼2&gt;&lt;åŸºç±»å2&gt;,â€¦&#123;...&#125;; ä¾‹å¦‚ï¼Œ 123class Son : public Mother, public Father &#123;...&#125;; æ„é€ å’Œææ„é¡ºåºæ„é€ é¡ºåºã€ææ„é¡ºåºé•œåƒç›¸åï¼Œå…ˆæ„é€ çš„åææ„ï¼Œå…ˆææ„çš„åæ„é€ ã€‚ ç»§æ‰¿å…³ç³»ä¸­ï¼Œ æ„é€ é¡ºåºï¼šåŸºç±»æ„é€  -&gt; æ´¾ç”Ÿç±»æ„é€  ææ„é¡ºåºï¼šæ´¾ç”Ÿç±»ææ„ -&gt; åŸºç±»ææ„ 123456789101112131415161718192021222324252627#include &lt;iostream&gt;using namespace std;class Father &#123;public: Father() &#123; cout &lt;&lt; \"Fatheræ„é€ \" &lt;&lt; endl; &#125; ~Father() &#123; cout &lt;&lt; \"Fatherææ„\" &lt;&lt; endl; &#125;&#125;;class Son : public Father &#123;public: Son() &#123; cout &lt;&lt; \"Sonæ„é€ \" &lt;&lt; endl; &#125; ~Son() &#123; cout &lt;&lt; \"Sonææ„\" &lt;&lt; endl; &#125;&#125;;int main() &#123; Son s; return 0;&#125; è¾“å‡ºï¼š Fatheræ„é€ Sonæ„é€ Sonææ„Fatherææ„ å½“å…¶ä»–ç±»ä½œä¸ºæœ¬ç±»æˆå‘˜æ—¶ï¼Œ æ„é€ é¡ºåºï¼šæˆå‘˜ç±»æ„é€  -&gt; æœ¬ç±»æ„é€  ææ„é¡ºåºï¼šæœ¬ç±»ææ„ -&gt; æˆå‘˜ç±»ææ„ 12345678910111213141516171819202122232425262728293031#include &lt;iostream&gt;using namespace std;class A &#123;public: A() &#123; cout &lt;&lt; \"Aæ„é€ \" &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; \"Aææ„\" &lt;&lt; endl; &#125;&#125;;class B &#123;public: B() &#123; cout &lt;&lt; \"Bæ„é€ \" &lt;&lt; endl; &#125; ~B() &#123; cout &lt;&lt; \"Bææ„\" &lt;&lt; endl; &#125; private: A a;&#125;;int main(void)&#123; B b; return 0;&#125; è¾“å‡ºï¼š Aæ„é€ Bæ„é€ Bææ„Aææ„ åŒåæˆå‘˜å¤„ç†å¦‚æœæ´¾ç”Ÿç±»å’ŒåŸºç±»ä¸­æœ‰ç›¸åŒæˆå‘˜é‡åï¼Œé‚£ä¹ˆå°±ä¼šé®è”½ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ï¼Œä½¿ç”¨æ´¾ç”Ÿç±»æˆå‘˜ã€‚ å¦‚åŸºç±»Fatherå’Œæ´¾ç”Ÿç±»Sonä¸­éƒ½æœ‰æˆå‘˜å˜é‡m_A 123Son s;cout &lt;&lt; s.m_A; //é»˜è®¤è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»Sonä¸­çš„m_Acout &lt;&lt; s.Father::m_A; //åŠ ä½œç”¨åŸŸå¯è°ƒç”¨åŸºç±»Fatherä¸­çš„m_A åŸºç±»æˆå‘˜å‡½æ•°å’Œæ´¾ç”Ÿç±»æˆå‘˜å‡½æ•°ä¸ä¼šæ„æˆé‡è½½ï¼Œå¦‚æœæ´¾ç”Ÿç±»æœ‰åŒåå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šé®è”½åŸºç±»ä¸­çš„æ‰€æœ‰åŒåå‡½æ•°ï¼Œä¸ç®¡å®ƒä»¬çš„å‚æ•°æ˜¯å¦ä¸€æ ·ã€‚ 123Son s;s.func(); //é»˜è®¤è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»Sonä¸­çš„funcå‡½æ•°s.Father::func(100); //åŠ ä½œç”¨åŸŸå¯è°ƒç”¨åŸºç±»Fatherä¸­çš„funcå‡½æ•° æ´¾ç”Ÿç±»èµ‹å€¼ç»™åŸºç±»ï¼ˆå‘ä¸Šè½¬å‹ï¼‰æ´¾ç”Ÿç±»èµ‹å€¼ç»™åŸºç±»ï¼Œç§°ä¸ºå‘ä¸Šè½¬å‹ã€‚ç›¸åº”åœ°ï¼Œå°†åŸºç±»èµ‹å€¼ç»™æ´¾ç”Ÿç±»ï¼Œç§°ä¸ºå‘ä¸‹è½¬å‹ã€‚ å‘ä¸Šè½¬å‹éå¸¸å®‰å…¨ï¼Œå¯ä»¥ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆï¼›å‘ä¸‹è½¬å‹æœ‰é£é™©ï¼Œéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨å¹²é¢„ã€‚ æ´¾ç”Ÿç±»å¯¹è±¡èµ‹å€¼ç»™åŸºç±»å¯¹è±¡ 1Father f = Son(); æ´¾ç”Ÿç±»æŒ‡é’ˆèµ‹å€¼ç»™åŸºç±»æŒ‡é’ˆ 1Father *f = new Son(); æ´¾ç”Ÿç±»å¼•ç”¨èµ‹å€¼ç»™åŸºç±»å¼•ç”¨ 12Son s;Father &amp;f = s; èµ‹å€¼åªåŒ…å«æˆå‘˜å˜é‡ï¼Œä¸åŒ…å«æˆå‘˜å‡½æ•°ã€‚æ‰€ä»¥è°ƒç”¨åŒåæˆå‘˜å‡½æ•°æ—¶ï¼Œfä¾æ—§è°ƒç”¨çš„æ˜¯åŸæœ¬åŸºç±»Fatherçš„æˆå‘˜å‡½æ•°ã€‚ å¤šæ€å¤šæ€ï¼Œå³å‡½æ•°å¤šç§å½¢æ€ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š é™æ€å¤šæ€ å‡½æ•°é‡è½½ã€è¿ç®—ç¬¦é‡è½½ é™æ€ï¼šç¼–è¯‘é˜¶æ®µç»‘å®šå‡½æ•°åœ°å€ åŠ¨æ€å¤šæ€ æ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶çš„å¤šæ€ åŠ¨æ€ï¼šè¿è¡Œé˜¶æ®µç»‘å®šå‡½æ•°åœ°å€ å½“åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­æœ‰ç›¸åŒæˆå‘˜å‡½æ•°æ—¶ï¼Œ 12345678910111213class Animal &#123;public: void speak() &#123; cout &lt;&lt; \"åŠ¨ç‰©å‘å£°\" &lt;&lt; endl; &#125;&#125;;class Cat : public Animal &#123;public: void speak() &#123; cout &lt;&lt; \"å–µå–µå–µ\" &lt;&lt; endl; &#125;&#125;; æ´¾ç”Ÿç±»è°ƒç”¨ï¼Œä¼šé®è”½åŸºç±»ä¸­çš„æ‰€æœ‰åŒåå‡½æ•°ï¼Œç›´æ¥è°ƒç”¨æ´¾ç”Ÿç±»çš„å‡½æ•°ï¼Œæ‰€ä»¥c.speak();è¾“å‡ºäº†â€œå–µå–µå–µâ€ã€‚ æ´¾ç”Ÿç±»èµ‹å€¼ç»™åŸºç±»åï¼Œåªæ”¹å˜æˆå‘˜å˜é‡ï¼Œä¸æ”¹å˜æˆå‘˜å‡½æ•°ï¼ŒåŸºç±»è°ƒç”¨ï¼Œä¾æ—§è°ƒç”¨çš„æ˜¯åŸæœ¬åŸºç±»çš„æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥a-&gt;speak();è¾“å‡ºäº†â€œåŠ¨ç‰©å‘å£°â€ã€‚ 12345Cat c;c.speak(); //å–µå–µå–µï¼Œè°ƒç”¨æ´¾ç”Ÿç±»å‡½æ•° Animal *a = &amp;c;a-&gt;speak(); //åŠ¨ç‰©å‘å£°ï¼Œè°ƒç”¨åŸºç±»å‡½æ•° è™šå‡½æ•°å¦‚æœå¸Œæœ›a-&gt;speak();è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»å‡½æ•°çš„â€œå–µå–µå–µâ€ï¼Œåˆ™åº”å°†åŸºç±»çš„speak()è®¾ç½®ä¸ºè™šå‡½æ•°ï¼Œæ·»åŠ å…³é”®å­—virtual 1234567891011121314151617181920212223242526#include &lt;iostream&gt;using namespace std;class Animal &#123;public: //è™šå‡½æ•° virtual void speak() &#123; cout &lt;&lt; \"åŠ¨ç‰©å‘å£°\" &lt;&lt; endl; &#125;&#125;;class Cat : public Animal &#123;public: void speak() &#123; cout &lt;&lt; \"å–µå–µå–µ\" &lt;&lt; endl; &#125;&#125;;int main() &#123; Cat c; c.speak(); //å–µå–µå–µï¼Œè°ƒç”¨æ´¾ç”Ÿç±»å‡½æ•° Animal *a = &amp;c; a-&gt;speak(); //å–µå–µå–µï¼Œè°ƒç”¨æ´¾ç”Ÿç±»å‡½æ•° return 0;&#125; å¦‚ä¸æ˜¯è™šå‡½æ•°ï¼Œåœ¨ç¼–è¯‘æ—¶å°±ä¼šé™æ€é“¾æ¥ï¼Œå°†a-&gt;speak();æ—©ç»‘å®šåˆ°åŸºç±»å‡½æ•°ä¸Šã€‚ å¦‚æ˜¯è™šå‡½æ•°ï¼Œåœ¨è¿è¡Œæ—¶æ‰ä¼šåŠ¨æ€é“¾æ¥ï¼Œå¦‚æ­¤ï¼Œä¾¿å¯å°†a-&gt;speak();ç»‘å®šåˆ°æ´¾ç”Ÿç±»å‡½æ•°ä¸Šã€‚ çº¯è™šå‡½æ•°å¦‚æœåŸºç±»ä¸­çš„è™šå‡½æ•°æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œå¯ä»¥å®šä¹‰ä¸ºçº¯è™šå‡½æ•°ã€‚ 1virtual è¿”å›å€¼ç±»å‹ å‡½æ•°å (å‡½æ•°å‚æ•°) = 0; çº¯è™šå‡½æ•°æ²¡æœ‰å‡½æ•°ä½“ï¼Œåªæœ‰å‡½æ•°å£°æ˜ï¼Œåœ¨è™šå‡½æ•°å£°æ˜çš„ç»“å°¾åŠ ä¸Š=0ï¼Œè¡¨æ˜æ­¤å‡½æ•°ä¸ºçº¯è™šå‡½æ•°ã€‚ 12345class Animal &#123;public: //çº¯è™šå‡½æ•° virtual void speak() = 0;&#125;; æ¨¡ç‰ˆC++æ³›å‹ç¼–ç¨‹ï¼Œä¸»è¦æŠ€æœ¯å°±æ˜¯æ¨¡ç‰ˆã€‚ä½¿å˜é‡å˜æˆé€šç”¨å˜é‡ï¼Œå¦‚vector&lt;int&gt;çš„åˆ©ç”¨æ¨¡ç‰ˆæŠ€æœ¯ï¼Œå¯ä»¥è¾“å…¥ä¸åŒçš„æ•°æ®ç±»å‹ã€‚ å‡½æ•°æ¨¡ç‰ˆ/ç±»æ¨¡ç‰ˆ å®šä¹‰ åˆ†ä¸ºå»ºç«‹ä¸€ä¸ªé€šç”¨å‡½æ•°/ç±»ï¼Œè¿”å›å€¼å’Œå½¢å‚çš„ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œè€Œç”¨ä¸€ä¸ªè™šæ‹Ÿç±»å‹æ¥è¡¨ç¤ºã€‚ å‡½æ•°æ¨¡ç‰ˆä¾‹å¦‚swapå‡½æ•°ï¼Œè¾“å…¥çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯æ¨¡ç‰ˆï¼Œæ‰€æœ‰å¯ä»¥äº¤æ¢ä¸¤ä¸ªintï¼Œä¹Ÿå¯ä»¥äº¤æ¢ä¸¤ä¸ªstringã€‚ ç±»æ¨¡ç‰ˆä¾‹å¦‚vector&lt;int&gt;ï¼Œå…¶ä¸­çš„æˆå‘˜ç±»å‹å¯å˜æ¢ã€‚ è¯­æ³• 12template &lt;typename T&gt;å‡½æ•°/ç±»å£°æ˜æˆ–å®šä¹‰ templateè¡¨æ˜å£°æ˜ä¸€ä¸ªæ¨¡ç‰ˆ typenameå¯ä»¥æ¢æˆclassï¼Œæ•ˆæœç›¸åŒ Tä¸ºé€šç”¨æ•°æ®ç±»å‹åï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦æŠ¥é”™ å‡½æ•°æ¨¡ç‰ˆä¾‹å­ è‡ªè¡Œå®šä¹‰ä¸€ä¸ªäº¤æ¢å‡½æ•°æ¨¡ç‰ˆ 123456template&lt;typename T&gt;void Swap(T &amp;a, T &amp;b) &#123; T temp = a; a = b; b = temp;&#125; è°ƒç”¨æ¨¡ç‰ˆå‡½æ•°ï¼Œå¯ä»¥è‡ªåŠ¨ç±»å‹æ¨å¯¼ 12int a = 10, b = 20;Swap(a, b); ä¹Ÿå¯ä»¥æŒ‡å®šç±»å‹ 12int a = 10, b = 20;Swap&lt;int&gt;(a, b); ç±»æ¨¡ç‰ˆ å®šä¹‰ä¸€ä¸ªæ¨¡ç‰ˆç±» 12345678910template&lt;typename NameType, typename AgeType&gt;class Person &#123; NameType m_name; AgeType m_age;public: Person(NameType name, AgeType age) &#123; m_name = name; m_age = age; &#125;&#125;; è°ƒç”¨æ¨¡ç‰ˆç±» 1Person&lt;string, int&gt; p(\"Job\", 10); STLSTLï¼ˆStandard Template Libraryï¼‰ï¼Œå³æ ‡å‡†æ¨¡æ¿åº“ã€‚ STLç”±ä¸‰å¤§ç»„ä»¶æ„æˆï¼šå®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€‚ å®¹å™¨ï¼šç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œå¦‚ å‘é‡ï¼ˆvectorï¼‰ã€åŒç«¯é˜Ÿåˆ—ï¼ˆdequeï¼‰ã€é“¾è¡¨ï¼ˆlistï¼‰ã€é›†åˆï¼ˆsetï¼‰ã€å¤šé‡é›†åˆï¼ˆmultisetï¼‰ã€æ˜ å°„ï¼ˆmapï¼‰å’Œå¤šé‡æ˜ å°„ï¼ˆmultimapï¼‰ç­‰ ç®—æ³•ï¼šå¸¸ç”¨çš„å„ç§ç®—æ³•ï¼Œå¦‚ sortã€findã€copyã€for_eachç­‰ è¿­ä»£å™¨ï¼šæ£€æŸ¥å®¹å™¨å†…å…ƒç´ å¹¶éå†å…ƒç´ çš„æ•°æ®ç±»å‹ vectorï¼ˆå‘é‡ï¼‰ å‘é‡ï¼ˆvectorï¼‰æ˜¯ä¸€ä¸ªå°è£…äº†åŠ¨æ€å¤§å°æ•°ç»„çš„é¡ºåºå®¹å™¨ å‡½æ•°æ–¹æ³• ä»£ç  åŠŸèƒ½ v.front() è¿”å›ç¬¬ä¸€ä¸ªæ•°æ® v.back() è¿”å›æœ€åä¸€ä¸ªæ•°æ® v.pop_back() åˆ é™¤æœ€åä¸€ä¸ªæ•°æ® v.push_back(element) åœ¨å°¾éƒ¨åŠ ä¸€ä¸ªæ•°æ® v.size() è¿”å›å…ƒç´ ä¸ªæ•° v.clear() æ¸…é™¤æ‰€æœ‰å…ƒç´  v.resize(n,v) æ”¹å˜æ•°ç»„å¤§å°ä¸ºnï¼Œnä¸ªç©ºé—´æ•°å€¼èµ‹ä¸ºvï¼Œå¦‚æœæ²¡æœ‰é»˜è®¤èµ‹å€¼ä¸º0 v.insert(it,x) å‘ä»»æ„è¿­ä»£å™¨itæ’å…¥ä¸€ä¸ªå…ƒç´ x v.erase(first,last) åˆ é™¤[first,last)çš„æ‰€æœ‰å…ƒç´  v.begin() è¿”å›é¦–å…ƒç´ çš„è¿­ä»£å™¨ v.end() è¿”å›æœ€åä¸€ä¸ªå…ƒç´ åä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨ v.empty() åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºè¿”å›çœŸï¼Œåä¹‹è¿”å›å‡ åŸºæœ¬ç”¨æ³•è¿ç”¨vectorå®¹å™¨éœ€è¦å¼•ç”¨vectorå¤´æ–‡ä»¶ 1#include &lt;vector&gt; vectoråˆå§‹åŒ– æ–¹æ³• æè¿° vector v é»˜è®¤åˆå§‹åŒ–ä¸€ä¸ªç©ºvector vector v2(v1) v2ä¸­åŒ…å«æœ‰v1æ‰€æœ‰å…ƒç´ çš„å‰¯æœ¬ vector v2 = v1 ç­‰ä»·äº v2(v1) vector v(n, val) nä¸ªé‡å¤çš„å…ƒç´ val vector v(n) nä¸ªé‡å¤çš„é»˜è®¤ vector v {a, b, câ€¦.} èµ‹å€¼ vector v = {a, b, câ€¦.} ç­‰ä»·äº v{a, b, câ€¦.} äºŒç»´vectoråˆå§‹åŒ– 12// åˆå§‹åŒ–10*5çš„äºŒç»´vectorï¼Œå…ƒç´ å€¼éƒ½ä¸º1vector&lt;vector&lt;int&gt;&gt; v(10, vector&lt;int&gt;(5, 1)); å°¾éƒ¨æ’å…¥å…ƒç´  1v.push_back(x); æ’å…¥å…ƒç´  1v.insert(v.begin() + 2, x); //åœ¨ç¬¬3ä¸ªä½ç½®æ’å…¥x åˆ é™¤å…ƒç´  12v.erase(v.begin() + 2); //åˆ é™¤ç¬¬3ä¸ªä½ç½®çš„å…ƒç´ v.erase(v.begin() + i, v.begin() + j); //åˆ é™¤ç¬¬[i, j)ä½ç½®çš„å…ƒç´  éå†vectoré›†åˆ 123456789//è¿­ä»£å™¨éå†è®¿é—®for(vector&lt;int&gt;::iterator it = s.begin(); it != s.end(); it++)&#123; cout &lt;&lt; *it &lt;&lt; \" \";&#125;//å¦ä¸€ç§éå†è®¿é—®æ–¹å¼for(auto i : s)&#123; cout &lt;&lt; i &lt;&lt; \" \";&#125; setï¼ˆé›†åˆï¼‰ setï¼ˆé›†åˆï¼‰çš„æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œä¸”é»˜è®¤å‡åºæ’åˆ—ã€‚ å‡½æ•°æ–¹æ³• ä»£ç  åŠŸèƒ½ s.begin() è¿”å›setå®¹å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼ˆè¿­ä»£å™¨ï¼‰ s.end() è¿”å›setå®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªåœ°å€ï¼ˆè¿­ä»£å™¨ï¼‰ s.rbegin() è¿”å›é€†åºè¿­ä»£å™¨ï¼ŒæŒ‡å‘å®¹å™¨å…ƒç´ æœ€åä¸€ä¸ªä½ç½® s.rend() è¿”å›é€†åºè¿­ä»£å™¨ï¼ŒæŒ‡å‘å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ å‰é¢çš„ä½ç½® s.clear() åˆ é™¤setå®¹å™¨ä¸­çš„æ‰€æœ‰çš„å…ƒç´ ,è¿”å›unsigned intç±»å‹O(N) s.empty() åˆ¤æ–­setå®¹å™¨æ˜¯å¦ä¸ºç©º s.insert() æ’å…¥ä¸€ä¸ªå…ƒç´  s.size() è¿”å›å½“å‰setå®¹å™¨ä¸­çš„å…ƒç´ ä¸ªæ•°O(1) erase(iterator) åˆ é™¤å®šä½å™¨iteratoræŒ‡å‘çš„å€¼ erase(first,secondï¼‰ åˆ é™¤å®šä½å™¨firstå’Œsecondä¹‹é—´çš„å€¼ erase(key_value) åˆ é™¤é”®å€¼key_valueçš„å€¼ s.find(å…ƒç´ ) æŸ¥æ‰¾setä¸­çš„æŸä¸€å…ƒç´ ï¼Œæœ‰åˆ™è¿”å›è¯¥å…ƒç´ å¯¹åº”çš„è¿­ä»£å™¨ï¼Œæ— åˆ™è¿”å›ç»“æŸè¿­ä»£å™¨ï¼Œå³s.end() s.lower_bound(k) è¿”å›å¤§äºç­‰äºkçš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ s.upper_bound(k) è¿”å›å¤§äºkçš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ åŸºæœ¬ç”¨æ³•è¿ç”¨setå®¹å™¨éœ€è¦å¼•ç”¨setå¤´æ–‡ä»¶ 1#include &lt;set&gt; setæ„é€ å‡½æ•° 12set&lt;int&gt; s; //é»˜è®¤æŒ‰é”®å€¼å‡åºset&lt;int, greater&lt;int&gt;&gt; p; //é™åº éå†seté›†åˆ 123456789//è¿­ä»£å™¨éå†è®¿é—®for(set&lt;int&gt;::iterator it = s.begin(); it != s.end(); it++)&#123; cout &lt;&lt; *it &lt;&lt; \" \";&#125;//å¦ä¸€ç§éå†è®¿é—®æ–¹å¼for(auto i : s)&#123; cout &lt;&lt; i &lt;&lt; \" \";&#125; mapï¼ˆæ˜ å°„ï¼‰ mapï¼ˆæ˜ å°„ï¼‰çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªpairï¼ŒåŒ…å« &lt;é”®å€¼ï¼Œå®å€¼&gt;ï¼Œmapä¸å…è®¸ä¸¤ä¸ªå…ƒç´ æœ‰ç›¸åŒçš„é”®å€¼ï¼Œæ‰€æœ‰å…ƒç´ æ ¹æ®é”®å€¼è‡ªåŠ¨æ’åºã€‚ å‡½æ•°æ–¹æ³• ä»£ç  åŠŸèƒ½ mp.find(key) è¿”å›é”®ä¸ºkeyçš„æ˜ å°„çš„è¿­ä»£å™¨ï¼Œå½“æ•°æ®å­˜åœ¨æ—¶ï¼Œè¿”å›æ•°æ®æ‰€åœ¨ä½ç½®çš„è¿­ä»£å™¨ï¼Œæ•°æ®ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›mp.end() mp.erase(it) åˆ é™¤è¿­ä»£å™¨å¯¹åº”çš„é”®å’Œå€¼ mp.erase(key) æ ¹æ®æ˜ å°„çš„é”®åˆ é™¤é”®å’Œå€¼ mp.erase(first,last) åˆ é™¤å·¦é—­å³å¼€åŒºé—´è¿­ä»£å™¨å¯¹åº”çš„é”®å’Œå€¼ mp.size() è¿”å›æ˜ å°„çš„å¯¹æ•° mp.clear() æ¸…ç©ºmapä¸­çš„æ‰€æœ‰å…ƒç´  mp.insert() æ’å…¥å…ƒç´ ï¼Œæ’å…¥æ—¶è¦æ„é€ é”®å€¼å¯¹ mp.empty() å¦‚æœmapä¸ºç©ºï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false mp.begin() è¿”å›æŒ‡å‘mapç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰ mp.end() è¿”å›æŒ‡å‘mapå°¾éƒ¨çš„è¿­ä»£å™¨ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªåœ°å€ï¼‰ mp.rbegin() è¿”å›æŒ‡å‘mapæœ€åä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰ mp.rend() è¿”å›æŒ‡å‘mapç¬¬ä¸€ä¸ªå…ƒç´ å‰é¢(ä¸Šä¸€ä¸ªï¼‰çš„åå‘è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰ mp.count(key) æŸ¥çœ‹å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå› ä¸ºmapä¸­é”®æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å­˜åœ¨è¿”å›1ï¼Œä¸å­˜åœ¨è¿”å›0 mp.lower_bound() è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘é”®å€¼&gt;= keyçš„ç¬¬ä¸€ä¸ªå…ƒç´  mp.upper_bound() è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘é”®å€¼&gt; keyçš„ç¬¬ä¸€ä¸ªå…ƒç´  åŸºæœ¬ç”¨æ³•è¿ç”¨mapå®¹å™¨éœ€è¦å¼•ç”¨mapå¤´æ–‡ä»¶ 1#include &lt;map&gt; mapæ„é€ å‡½æ•° 1map&lt;string, int&gt; mp; //é”®å€¼ä¸ºstringï¼Œå®å€¼ä¸ºint æ·»åŠ å…ƒç´  æ–¹æ³•ä¸€ï¼šé€šè¿‡æ•°ç»„çš„æ–¹å¼æ’å…¥å€¼ 1mp[\"a\"] = 1; //mp[key]ï¼Œå¦‚æœä¸å­˜åœ¨å¯¹åº”çš„keyæ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹ æ–¹æ³•äºŒï¼šé€šè¿‡pairçš„æ–¹å¼æ’å…¥å¯¹è±¡ 1234567mp.insert(&#123;\"a\", 1&#125;); mp.insert(make_pair(\"a\", 1)); mp.insert(&#123;\"a\",1&#125;); mp.insert(pair&lt;string, int&gt; (\"a\", 1)); è®¿é—®å…ƒç´  é€šè¿‡ä¸‹æ ‡è®¿é—® 1cout &lt;&lt; mp[\"a\"] &lt;&lt; endl; é€šè¿‡findå‡½æ•°è®¿é—® 12map&lt;string, int&gt;::iterator it = mp.find(\"a\");cout &lt;&lt; it-&gt;first &lt;&lt; \" \" &lt;&lt; it-&gt;second &lt;&lt; endl; éå†å…ƒç´  é€šè¿‡è¿­ä»£å™¨éå† 1234// æ­£å‘éå†ï¼ˆåˆ©ç”¨beginå’Œendå‡½æ•°ï¼‰for(auto it = mp.begin(); it != mp.end(); ++it)&#123; cout &lt;&lt; it-&gt;first &lt;&lt; \" \" &lt;&lt; it-&gt;second &lt;&lt; endl;&#125; 123456// é€†å‘éå†ï¼ˆåˆ©ç”¨rbeginå’Œrendå‡½æ•°ï¼‰auto it = mp.rbegin();while (it != mp.rend()) &#123; cout &lt;&lt; it-&gt;first &lt;&lt; \" \" &lt;&lt; it-&gt;second &lt;&lt; endl; it++;&#125; èŒƒå›´forè¯­å¥éå† 1234// åªèƒ½è®¿é—®ï¼Œæ— æ³•æ”¹å˜å®¹å™¨ä¸­çš„å€¼for(auto i : mp)&#123; cout &lt;&lt; i.first &lt;&lt; \" \" &lt;&lt; i.second &lt;&lt; endl;&#125; 1234// å¦‚éœ€æ”¹å˜å€¼ï¼Œåˆ™ç”¨å¼•ç”¨for(auto &amp;i : mp)&#123; i.second *= 2;&#125; é€šè¿‡è¿­ä»£å™¨éå†æ—¶ï¼Œè¿­ä»£å™¨itå¯ä»¥ç†è§£ä¸ºæŒ‡å‘å…ƒç´ çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆç”¨-&gt;è®¿é—®ï¼Œå³it-&gt;firstï¼Œæˆ–ç”¨(*it).firstï¼Œå¯æ”¹å˜å®¹å™¨ä¸­çš„å€¼ èŒƒå›´forè¯­å¥éå†æ—¶ï¼Œiæ˜¯ä¸€ä¸ªpairå¯¹è±¡ï¼Œç›´æ¥ç”¨.è®¿é—®ï¼Œå³it.firstã€‚åªè®¿é—®æ—¶ï¼Œç”¨auto i : mpï¼Œå½“éœ€è¦æ”¹å˜å€¼æ—¶ï¼Œç”¨auto &amp;i : mp dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰ dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰é¦–å°¾éƒ½å¯ä»¥æ’å…¥å’Œåˆ é™¤çš„é˜Ÿåˆ—ã€‚ å‡½æ•°æ–¹æ³• ä»£ç  åŠŸèƒ½ push_back(x) æŠŠxå‹å…¥åç«¯ push_front(x) æŠŠxå‹å…¥å‰ç«¯ back() è®¿é—®(ä¸åˆ é™¤)åç«¯å…ƒç´  front() è®¿é—®(ä¸åˆ é™¤)å‰ç«¯å…ƒç´  pop_back() åˆ é™¤åç«¯å…ƒç´  pop_front() åˆ é™¤å‰ç«¯å…ƒç´  erase(iterator it) åˆ é™¤åŒç«¯é˜Ÿåˆ—ä¸­çš„æŸä¸€ä¸ªå…ƒç´  erase(iterator first,iterator last) åˆ é™¤åŒç«¯é˜Ÿåˆ—ä¸­ï¼ˆfirst,lastï¼‰ä¸­çš„å…ƒç´  empty() åˆ¤æ–­dequeæ˜¯å¦ç©º size() è¿”å›dequeçš„å…ƒç´ æ•°é‡ clear() æ¸…ç©ºdeque åŸºæœ¬ç”¨æ³•è¿ç”¨dequeå®¹å™¨éœ€è¦å¼•ç”¨dequeå¤´æ–‡ä»¶ 1#include &lt;deque&gt; dequeæ„é€ å‡½æ•° 1deque&lt;int&gt; d; stackï¼ˆæ ˆï¼‰ stackï¼ˆæ ˆï¼‰ï¼Œå…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ã€‚ å‡½æ•°æ–¹æ³• ä»£ç  åŠŸèƒ½ s.push(x) å°†xå‹å…¥æ ˆé¡¶ s.top() è¿”å›æ ˆé¡¶çš„å…ƒç´  s.pop() åˆ é™¤æ ˆé¡¶çš„å…ƒç´  s.size() è¿”å›æ ˆä¸­å…ƒç´ çš„ä¸ªæ•° s.empty() æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º,è‹¥ä¸ºç©ºè¿”å›true,å¦åˆ™è¿”å›false åŸºæœ¬ç”¨æ³•è¿ç”¨stackå®¹å™¨éœ€è¦å¼•ç”¨stackå¤´æ–‡ä»¶ 1#include &lt;stack&gt; stackæ„é€ å‡½æ•° 1stack&lt;int&gt; s; stringï¼ˆå­—ç¬¦ä¸²ï¼‰stringæ˜¯C++ä¸­çš„ä¸€ä¸ªç±»ï¼Œä¸“é—¨å®ç°å­—ç¬¦ä¸²çš„ç›¸å…³æ“ä½œã€‚æ•°æ®ç±»å‹ä¸ºstringï¼Œå­—ç¬¦ä¸²ç»“å°¾æ²¡æœ‰\\0å­—ç¬¦ã€‚ ä¸ä¹‹ç›¸æ¯”ï¼ŒCè¯­è¨€å­—ç¬¦ä¸²ï¼ˆC-stringï¼‰ï¼Œç”¨charæ•°ç»„å®ç°ï¼Œå­—ç¬¦ä¸²ç»“å°¾ä»¥\\0ç»“å°¾ã€‚ åŸºæœ¬ç”¨æ³•1#include &lt;string&gt; åˆå§‹åŒ– 1234567891011string str1; //ç”Ÿæˆç©ºå­—ç¬¦ä¸²string str2(\"12345678\"); //ç»“æœä¸º\"12345678\"string str3(\"12345678\", 1, 3); //ç»“æœä¸º\"234\"ï¼Œä»1å·å¼€å§‹ï¼Œé•¿åº¦ä¸º3çš„å­—ç¬¦ä¸²string str4(\"12345678\", 3); //ç»“æœä¸º\"123\"ï¼Œä»0å·å¼€å§‹ï¼Œé•¿åº¦ä¸º3çš„å­—ç¬¦ä¸²string str4(5, '2'); //ç»“æœä¸º\"22222\"ï¼Œ5ä¸ª'2'string str4(str2, 3); //ç»“æœä¸º\"45678\"ï¼Œä»3å·å¼€å§‹çš„å­—ç¬¦ä¸² è¯»å…¥ cin &gt;&gt; str è¯»å…¥å­—ç¬¦ä¸²ï¼Œé‡åˆ°ç©ºæ ¼æˆ–å›è½¦ç»“æŸ getline(cin, str)ï¼Œè¯»å…¥ä¸€è¡Œå­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬ç©ºæ ¼ï¼Œé‡åˆ°å›è½¦ç»“æŸ æ³¨æ„ï¼šcinè¾“å…¥å›è½¦ç»“æŸåï¼Œå›è½¦ä»åœ¨è¾“å…¥æµä¸­ï¼Œgetlineä¼šè·å–å‰ä¸€ä¸ªè¾“å…¥çš„æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥éœ€è¦åœ¨å‰é¢æ·»åŠ è¯»å–æ¢è¡Œç¬¦çš„è¯­å¥ï¼šgetchar() æˆ– cin.get() é”™è¯¯è¯»å–æ–¹å¼ 123string str1, str2;cin &gt;&gt; str1;getline(cin, str2); //æ­¤å¤„getlineåªèƒ½è¯»åˆ°ä¸Šä¸€ä¸ªcinçš„æ¢è¡Œç¬¦ æ­£ç¡®è¯»å–æ–¹å¼ 1234string str1, str2;cin &gt;&gt; str1;getchar(); //æˆ–è€…cin.get()ï¼Œç”¨äºæ¥æ”¶ä¸Šä¸€ä¸ªæ¢è¡Œç¬¦getline(cin, str2); //æ­¤å¤„getlineåªèƒ½è¯»åˆ°ä¸Šä¸€ä¸ªcinçš„æ¢è¡Œç¬¦ è·å–é•¿åº¦ ä»£ç  å«ä¹‰ s.size()æˆ–s.length() è¿”å›stringå¯¹è±¡çš„å­—ç¬¦ä¸ªæ•° s.max_size() è¿”å›stringå¯¹è±¡æœ€å¤šåŒ…å«çš„å­—ç¬¦æ•°ï¼Œè¶…å‡ºä¼šæŠ›å‡ºlength_errorå¼‚å¸¸ s.capacity() é‡æ–°åˆ†é…å†…å­˜ä¹‹å‰ï¼Œstringå¯¹è±¡èƒ½åŒ…å«çš„æœ€å¤§å­—ç¬¦æ•° æ’å…¥ ä»£ç  å«ä¹‰ s.push_back(element) åœ¨æœ«å°¾æ’å…¥ä¸€ä¸ªå­—ç¬¦element s.insert(iterator it,element) åœ¨è¿­ä»£å™¨itå¤„æ’å…¥ä¸€ä¸ªå­—ç¬¦element s.append(str) åœ¨så­—ç¬¦ä¸²ç»“å°¾æ·»åŠ strå­—ç¬¦ä¸² 1234string s = \"123456\";s.push_back('a'); //ç»“æœï¼š123456aï¼Œåœ¨æœ«å°¾æ’å…¥ä¸€ä¸ªå­—ç¬¦'a's.insert(s.begin(), 'b'); //ç»“æœï¼šb123456aï¼Œåœ¨å¼€å¤´æ’å…¥ä¸€ä¸ªå­—ç¬¦'b's.append(\"cdef\"); //ç»“æœï¼šb123456acdefï¼Œåœ¨æœ«å°¾æ·»åŠ å­—ç¬¦ä¸²â€œcdefâ€ åˆ é™¤ ä»£ç  å«ä¹‰ s.erase(iterator it) åˆ é™¤å­—ç¬¦ä¸²ä¸­itæ‰€æŒ‡çš„å­—ç¬¦ s.erase(iterator first, iterator last) åˆ é™¤å­—ç¬¦ä¸²ä¸­è¿­ä»£å™¨åŒºé—´[first,last)ä¸Šæ‰€æœ‰å­—ç¬¦ s.erase(pos, len) åˆ é™¤å­—ç¬¦ä¸²ä¸­ä»ç´¢å¼•ä½ç½®poså¼€å§‹çš„lenä¸ªå­—ç¬¦ s.clear() åˆ é™¤å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—ç¬¦ 123456string s = \"123456789\";s.erase(s.begin()); //ç»“æœï¼š23456789ï¼Œåˆ é™¤å¼€å¤´çš„ä¸€ä¸ªå­—ç¬¦s.erase(s.end()-1); //ç»“æœï¼š2345678ï¼Œåˆ é™¤ç»“å°¾çš„ä¸€ä¸ªå­—ç¬¦s.erase(s.begin()+2, s.end()-2); //ç»“æœï¼š2378ï¼Œåˆ é™¤[first,last)ä¸Šæ‰€æœ‰å­—ç¬¦ï¼Œä¸åˆ lasts.erase(1, 2); //ç»“æœï¼š28ï¼Œåˆ é™¤ä»1å·ä½å¼€å§‹çš„2ä¸ªå­—ç¬¦s.clear(); //ç»“æœï¼šç©º å­—ç¬¦æ›¿æ¢ ä»£ç  å«ä¹‰ s.replace(pos,n,str) æŠŠå½“å‰å­—ç¬¦ä¸²ä»ç´¢å¼•poså¼€å§‹çš„nä¸ªå­—ç¬¦æ›¿æ¢ä¸ºstr s.replace(pos,n,n1,c) æŠŠå½“å‰å­—ç¬¦ä¸²ä»ç´¢å¼•poså¼€å§‹çš„nä¸ªå­—ç¬¦æ›¿æ¢ä¸ºn1ä¸ªå­—ç¬¦c s.replace(iterator first,iterator last,str) æŠŠå½“å‰å­—ç¬¦ä¸²[first,last)åŒºé—´æ›¿æ¢ä¸ºstr 1234string s = \"123456789\";s.replace(0, 3, \"abcd\"); //ç»“æœï¼šabcd456789ï¼Œå°†ä»0å·ä½å¼€å§‹çš„3ä¸ªå­—ç¬¦æ›¿æ¢ä¸º\"abcd\"s.replace(6, 3, 2, 'e'); //ç»“æœï¼šabcd45ee9ï¼Œå°†ä»6å·ä½å¼€å§‹çš„3ä¸ªå­—ç¬¦æ›¿æ¢ä¸º2ä¸ª'e's.replace(s.begin()+2, s.end()-2, \"fff\"); //ç»“æœï¼šabfffe9ï¼Œå°†abâ€˜cd45eâ€™e9ä¸­é—´æ›¿æ¢ä¸º\"fff\" åˆ†å‰² ä»£ç  å«ä¹‰ s.substr(pos,n) æˆªå–ä»posç´¢å¼•å¼€å§‹çš„nä¸ªå­—ç¬¦ 12string s = \"123456789\";string sub = s.substr(2, 3); //ç»“æœï¼š345ï¼Œæˆªå–ä»2å·ä½å¼€å§‹çš„3ä¸ªå­—ç¬¦ æŸ¥æ‰¾ ä»£ç  å«ä¹‰ s.find (str, pos) åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®(é»˜è®¤ä¸º0)å¼€å§‹ï¼ŒæŸ¥æ‰¾å­ä¸²strï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­ä¸² s.find (c, pos) åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®(é»˜è®¤ä¸º0)å¼€å§‹ï¼ŒæŸ¥æ‰¾å­—ç¬¦cï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦ s.rfind (str, pos) åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®å¼€å§‹ï¼Œåå‘æŸ¥æ‰¾å­ä¸²sã€strï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­ä¸² s.rfind (c,pos) åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®å¼€å§‹ï¼Œåå‘æŸ¥æ‰¾å­—ç¬¦cï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦ s.find_first_of (str, pos) åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®(é»˜è®¤ä¸º0)å¼€å§‹ï¼ŒæŸ¥æ‰¾å­ä¸²strçš„å­—ç¬¦ï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦ s.find_first_not_of (str,pos) åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®(é»˜è®¤ä¸º0)å¼€å§‹ï¼ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸ä½äºå­ä¸²sçš„å­—ç¬¦ï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦ s.find_last_of(str, pos) åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®å¼€å§‹ï¼ŒæŸ¥æ‰¾æœ€åä¸€ä¸ªä½äºå­ä¸²sçš„å­—ç¬¦ï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦ s.find_last_not_of (str, pos) åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®å¼€å§‹ï¼ŒæŸ¥æ‰¾æœ€åä¸€ä¸ªä¸ä½äºå­ä¸²sçš„å­—ç¬¦ï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­ä¸² 12345678910111213141516171819string s = \"This is a string.\"; //ä»é¦–ä½å¼€å§‹ï¼ŒæŸ¥æ‰¾å­—ç¬¦çš„ç¬¬ä¸€ä¸ªå‡ºç°çš„ä½ç½®cout &lt;&lt; s.find('s') &lt;&lt; endl; //ç»“æœï¼š3ï¼ŒThi's' //ä»é¦–ä½å¼€å§‹ï¼ŒæŸ¥æ‰¾å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå‡ºç°çš„ä½ç½®ï¼Œè¿”å›é¦–å­—ç¬¦ä½ç½®cout &lt;&lt; s.find(\"is\")&lt;&lt; endl; //ç»“æœï¼š2ï¼ŒTh'i's //ä»4å·ä½å¼€å§‹ï¼ŒæŸ¥æ‰¾å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå‡ºç°çš„ä½ç½®cout &lt;&lt; s.find(\"is\", 4)&lt;&lt; endl; //ç»“æœï¼š5ï¼Œ'i's a //ä»å°¾éƒ¨å¼€å§‹ï¼Œåå‘æŸ¥æ‰¾å­—ç¬¦ï¼Œå³æ­£åºçš„æœ€åä¸€ä¸ªä½ç½®cout &lt;&lt; s.rfind('s') &lt;&lt; endl; //ç»“æœï¼š10ï¼Œ's'tring //ä»å°¾ä½å¼€å§‹ï¼Œåå‘æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œå³æ­£åºçš„æœ€åä¸€ä¸ªä½ç½®ï¼Œè¿”å›é¦–å­—ç¬¦ä½ç½®cout &lt;&lt; s.rfind(\"is\") &lt;&lt; endl; //ç»“æœï¼š5ï¼Œ'i's a //ä»4å·ä½å¼€å§‹ï¼Œåå‘æŸ¥æ‰¾å­—ç¬¦ä¸²cout &lt;&lt; s.rfind(\"is\", 4) &lt;&lt; endl; //ç»“æœï¼š2ï¼ŒTh'i's æ’åº 123string s = \"349725618\";sort(s.begin(), s.end()); //ç»“æœï¼š123456789ï¼Œé»˜è®¤å‡åºsort(s.begin(), s.end(), greater&lt;char&gt;()); //ç»“æœï¼š987654321 å†…å­˜åˆ†é…C++ å†…å­˜åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š æ ˆåŒºï¼ˆstackï¼‰ å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ã€å±€éƒ¨å˜é‡ã€è¿”å›å€¼ã€è¿”å›åœ°å€ç­‰ ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾ å †åŒºï¼ˆheapï¼‰ å­˜æ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œå¦‚ new ã€ malloc åˆ†é…çš„åŠ¨æ€å˜é‡ STLï¼ˆé™¤ pairï¼‰ä¹Ÿéƒ½æ˜¯å­˜æ”¾åœ¨å †åŒº å †åŒºå¤§å°ä¸å›ºå®šï¼Œç”±ç¨‹åºæ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾ å…¨å±€åŒº/é™æ€åŒºï¼ˆstaticï¼‰ å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€å˜é‡ static åˆ†ä¸º data æ®µå’Œ bss æ®µï¼Œå·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨ data æ®µï¼Œæœªåˆå§‹åŒ–æˆ–è€…åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨ bss æ®µ ç¨‹åºå¯åŠ¨æ—¶è¢«åˆ†é…ï¼Œç›´åˆ°ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾ å¸¸é‡åŒº å­˜æ”¾å¸¸é‡ï¼Œä¸å…è®¸ä¿®æ”¹ ç¨‹åºå¯åŠ¨æ—¶è¢«åˆ†é…ï¼Œç›´åˆ°ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾ ä»£ç åŒº å­˜æ”¾æŒ‡ä»¤ä»£ç  ç¨‹åºå¯åŠ¨æ—¶è¢«åˆ†é…ï¼Œç›´åˆ°ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾ 1234567891011int a1; //å…¨å±€åŒºçš„bssæ®µint a2 = 0; //å…¨å±€åŒºçš„bssæ®µint a3 = 1; //å…¨å±€åŒºçš„dataæ®µconst int b = 1; //å…¨å±€åŒºçš„dataæ®µint func(int c) &#123; //æ ˆåŒº int d1 = 1; //æ ˆåŒº const int d2 = 1; //æ ˆåŒº static int d3 = 1; //å…¨å±€åŒºçš„dataæ®µ return d1; //æ ˆåŒº&#125; ç±»å‹è½¬æ¢éšå¼è½¬æ¢éšå¼è½¬æ¢ï¼Œå³åœ¨ç±»å‹ä¸ç»Ÿä¸€æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œçš„ç±»å‹è½¬æ¢ ä½•æ—¶å‘ç”Ÿéšå¼è½¬æ¢ï¼Ÿ ç®—æœ¯è¿ç®—ä¸­ï¼Œä½ç±»å‹è½¬æ¢ä¸ºé«˜ç±»å‹ èµ‹å€¼è¡¨è¾¾å¼ä¸­ï¼Œå³è¾¹çš„è¡¨è¾¾å¼çš„å€¼è‡ªåŠ¨è½¬åŒ–ä¸ºå·¦è¾¹å˜é‡çš„ç±»å‹ å‡½æ•°ä¼ å‚æ—¶ï¼Œå°†å®å‚è½¬åŒ–ä¸ºå½¢å‚çš„ç±»å‹ å‡½æ•°è¿”å›æ—¶ï¼Œå°†è¿”å›è¡¨è¾¾å¼è½¬åŒ–ä¸ºè¿”å›å€¼çš„ç±»å‹ ç®—æ•°è½¬æ¢ç®—æ•°è½¬æ¢æ˜¯éšå¼è½¬æ¢çš„ä¸€ç§ï¼Œä¼šå°†ä½ç±»å‹è½¬æ¢ä¸ºé«˜ç±»å‹ æ˜¾å¼è½¬æ¢å¸¸è§é—®é¢˜è®°å½•ä½œä¸ºå‡½æ•°å‚æ•°çš„å¤šç»´æ•°ç»„ è¯¦è§ã€ŠCå’ŒæŒ‡é’ˆã€‹P159 ä¼ æ•°ç»„å‚æ•°ï¼Œå³æ˜¯è¦ä¼ é€’æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚ ä»¥ä¸€ç»´æ•°ç»„ä¸ºä¾‹ï¼Œvectorå³ä¸ºæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªintå…ƒç´ çš„æŒ‡é’ˆ 123int vector[10];...func1(vector); å‚æ•°vectoræ˜¯æŒ‡å‘intå‹çš„æŒ‡é’ˆï¼Œæ‰€ä»¥å‡½æ•°å®šä¹‰å¯ä»¥æ˜¯å¦‚ä¸‹ä¸¤ç§æ–¹æ³• 12void func1(int *vector);void func1(int vector[]); å¤šç»´æ•°ç»„ä¼ å‚ï¼ŒåŒæ ·æ˜¯ä¼ æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œä½†æœ‰æ‰€ä¸åŒçš„æ˜¯ï¼Œå¤šç»´æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æœ¬èº«ä¹Ÿæ˜¯å¦ä¸€ä¸ªæ•°ç»„ï¼Œç¼–è¯‘å™¨éœ€è¦çŸ¥é“å®ƒçš„ç»´åº¦ã€‚ ä»¥äºŒç»´æ•°ç»„ä¸ºä¾‹ï¼ŒäºŒç»´æ•°ç»„matrix[3][10]ç›¸å½“äºæ˜¯åŒ…å«3ä¸ªå…ƒç´ çš„ä¸€ç»´æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ åˆæ˜¯ä¸€ä¸ªåŒ…å«10ä¸ªå…ƒç´ çš„ä¸€ç»´æ•°ç»„ï¼Œmatrixçš„ç±»å‹æ˜¯æŒ‡å‘åŒ…å«10ä¸ªæ•´å‹å…ƒç´ çš„æ•°ç»„çš„æŒ‡é’ˆã€‚ 123int matrix[3][10];...func2(matrix); æ‰€ä»¥ï¼Œå‡½æ•°çš„åŸå‹å¿…é¡»åŒ…å«ç¬¬äºŒä¸ªç»´åº¦10ï¼Œç¼–è¯‘å™¨æ‰çŸ¥é“ä»€ä¹ˆæ—¶å€™å¼€å§‹æ¢è¡Œï¼Œå¯ä»¥æœ‰å¦‚ä¸‹ä¸¤ç§å®šä¹‰æ–¹å¼ï¼š 12void func1(int (*matrix)[10]);void func1(int matrix[][10]); å…³é”®å°±åœ¨äºç¼–è¯‘å™¨å¿…é¡»çŸ¥é“ç¬¬2ä¸ªåŠä»¥åå„ç»´çš„é•¿åº¦ï¼Œæ‰èƒ½å¯¹ä¸‹æ ‡è¿›è¡Œæ±‚å€¼ å…¸å‹çš„é”™è¯¯å†™æ³• é”™è¯¯å†™æ³•ä¸€ï¼šæœªåŒ…å«ç¬¬äºŒä¸ªç»´åº¦é•¿åº¦ï¼Œ**matrixä¸ºæŒ‡å‘æ•´å‹æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ 1void func2(int **matrix); é”™è¯¯å†™æ³•äºŒï¼š*matrix[10]ä¸ºæŒ‡é’ˆæ•°ç»„ï¼Œå³æ•°ç»„å…ƒç´ æ˜¯æŒ‡é’ˆï¼›(*matrix)[10]ä¸ºæ•°ç»„æŒ‡é’ˆï¼Œå³æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ 1void func2(int *matrix[10]); ç±»æ¨¡æ¿å¤´æ–‡ä»¶çš„ç¼–å†™c++ä¸­æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰ä¸èƒ½åˆ†å¼€ é—®é¢˜æè¿°å¦‚å’Œä¸€èˆ¬çš„ç±»å¤´æ–‡ä»¶ä¸€æ ·ï¼Œå°†æ¨¡æ¿ç±»ä¸­å‡½æ•°å£°æ˜å†™åœ¨ç±»å.hppä¸­ï¼Œå‡½æ•°å®šä¹‰å†™åœ¨ç±»å.cppä¸­ï¼Œç±»å.cppã€main.cppè°ƒç”¨.hæ–‡ä»¶ï¼Œåˆ™ä¼šå‡ºç°æŠ¥é”™ï¼š 1error: Undefined Symbol æˆå‘˜å‡½æ•° é—®é¢˜åˆ†ææ¨¡æ¿ç±»ä¸­çš„æˆå‘˜å‡½æ•°åœ¨è°ƒç”¨æ—¶æ‰åˆ›å»ºã€‚ C++ç¼–è¯‘æ—¶ï¼Œå°±è¦ç¡®å®šæ¯ä¸ªå¯¹è±¡çš„ç©ºé—´å¤§å°ã€‚ ä½†æ˜¯ï¼Œæ¨¡æ¿ç±»åœ¨æœªè¢«ä½¿ç”¨å‰ï¼Œæ— æ³•ç¡®å®šå¤§å°ï¼Œæ¯”å¦‚vector&lt;int&gt;å’Œvector&lt;char&gt;ï¼Œè¿™ä¸¤å¥—ç”¨ä¸åŒæ•°æ®ç±»å‹çš„æ¨¡ç‰ˆï¼Œå®é™…æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»ã€‚ æ‰€ä»¥ï¼Œc++ä¸­æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰ä¸èƒ½åˆ†å¼€ã€‚ è§£å†³æ–¹æ³• æ–¹æ³•ä¸€ï¼šå°†æ¨¡æ¿ç±»ä¸­çš„æˆå‘˜å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰éƒ½å†™åœ¨.hæ–‡ä»¶é‡Œ Stack.hpp++1234567891011121314151617181920212223242526272829#ifndef Stack_hpp#define Stack_hpp//é¡ºåºæ ˆtemplate &lt;typename T&gt;class Stack &#123; T *data; //æˆå‘˜æ•°ç»„ int top; //æ ˆé¡¶æŒ‡é’ˆï¼Œå½“å‰æ ˆé¡¶å…ƒç´ çš„ä½ç½® int size; //æ ˆä¸­å…ƒç´ çš„æœ€å¤§ä¸ªæ•°public: Stack(); ~Stack();&#125;;//æ ˆåˆå§‹åŒ–template &lt;typename T&gt;Stack&lt;T&gt;::Stack() : top(-1), size(10) &#123; data = new T[size];&#125;//é”€æ¯æ ˆtemplate &lt;typename T&gt;Stack&lt;T&gt;::~Stack() &#123; delete [] data; data = nullptr;&#125;#endif åœ¨main.cppè°ƒç”¨Stack.hppæ–‡ä»¶ æ–¹æ³•äºŒï¼šmain.cppè°ƒç”¨ç±»å.cppæ–‡ä»¶ï¼Œç±»å.cppæ–‡ä»¶è°ƒç”¨ç±»å.hæ–‡ä»¶ Stack.hpp++12345678910111213141516#ifndef Stack_hpp#define Stack_hpp//é¡ºåºæ ˆtemplate &lt;typename T&gt;class Stack &#123; T *data; //æˆå‘˜æ•°ç»„ int top; //æ ˆé¡¶æŒ‡é’ˆï¼Œå½“å‰æ ˆé¡¶å…ƒç´ çš„ä½ç½® int size; //æ ˆä¸­å…ƒç´ çš„æœ€å¤§ä¸ªæ•°public: Stack(); ~Stack();&#125;;#endif Stack.hpp++1234567891011121314#include \"Stack.hpp\"//æ ˆåˆå§‹åŒ–template &lt;typename T&gt;Stack&lt;T&gt;::Stack() : top(-1), size(10) &#123; data = new T[size];&#125;//é”€æ¯æ ˆtemplate &lt;typename T&gt;Stack&lt;T&gt;::~Stack() &#123; delete [] data; data = nullptr;&#125; åœ¨main.cppè°ƒç”¨Stack.cppæ–‡ä»¶ å¸¸ç”¨å‡½æ•°sort()æ’åºå‡½æ•°sort()å‡½æ•°ç±»ä¼¼äºå¿«é€Ÿæ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $n*log2(n)$ å¤´æ–‡ä»¶ 1#include&lt;algorithm&gt; åŸºæœ¬ä½¿ç”¨æ–¹æ³• 1sort(begin, end, cmp); beginï¼šå¾…æ’åºçš„æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆ endï¼šå¾…æ’åºçš„æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®çš„æŒ‡é’ˆ cmpï¼šæ’åºå‡†åˆ™ï¼Œä¸å¡«åˆ™é»˜è®¤ä¸ºä»å°åˆ°å¤§æ’åºï¼Œå¦‚æƒ³è¦ä»å¤§åˆ°å°æ’åºï¼Œåˆ™å¡«greater&lt;int&gt;()ã€‚å¦‚éœ€è‡ªè¡Œå®šä¹‰æ’åºå‡†åˆ™ï¼Œä¹Ÿå¯ä¼ å…¥boolå‹å‡½æ•°ï¼Œè¿”å›trueåˆ™ä¸æ¢ä½ç½®ï¼Œè¿”å›falseåˆ™å‰åè°ƒæ¢ä½ç½® ç”¨ä¾‹ æ•°ç»„æ’åº123int num[5] = &#123;4, 3, 2, 1, 0&#125;;sort(num, num+5); //ä»å°åˆ°å¤§æ’åºï¼š0 1 2 3 4sort(num, num+5, greater&lt;int&gt;()); //ä»å¤§åˆ°å°æ’åºï¼š4 3 2 1 0 vectoræ’åº12vector&lt;int&gt; v = &#123;4, 3, 2, 1, 0&#125;;sort(v.begin(), v.end()); //ä»å°åˆ°å¤§æ’åºï¼š0 1 2 3 4 è‡ªå®šä¹‰æ’åºå‡†åˆ™123456789//ä¸ªä½æ•°ä»å¤§åˆ°å°æ’åºbool cmp (int x, int y) &#123; return x % 10 &gt; y % 10; //xä¸ªä½å¤§äºyæ—¶ï¼Œè¿”å›true&#125;int main () &#123; int num[5] = &#123;24, 1, 83, 12, 30&#125;; sort(num, num + 5, cmp); //ä¸ªä½æ•°ä»å¤§åˆ°å°æ’åºï¼š24 83 12 1 30&#125; å‚è€ƒ C++å…¥é—¨æ•™ç¨‹ï¼ŒC++åŸºç¡€æ•™ç¨‹","categories":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/categories/C/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"å…¥é—¨","slug":"å…¥é—¨","permalink":"https://gy23333.github.io/tags/%E5%85%A5%E9%97%A8/"},{"name":"Xcode","slug":"Xcode","permalink":"https://gy23333.github.io/tags/Xcode/"}]},{"title":"matlab GUIå…¥é—¨","slug":"matlab-GUIå…¥é—¨","date":"2020-01-07T18:49:56.000Z","updated":"2024-11-11T03:57:58.128Z","comments":true,"path":"2020/01/08/matlab-GUIå…¥é—¨/","link":"","permalink":"https://gy23333.github.io/2020/01/08/matlab-GUI%E5%85%A5%E9%97%A8/","excerpt":"â€‹ Matlab GUIä¸ºå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œå¯ä»¥ç†è§£ä¸ºç›¸å½“äºåšä¸€ä¸ªè½¯ä»¶ï¼Œå°†è¾“å…¥è¾“å‡ºå‡½æ•°æ“ä½œé€šè¿‡äº¤äº’ç•Œé¢è¡¨ç°å‡ºæ¥ï¼Œä¸‹é¢ç®€å•è®²è¿°ä¸€äº›Matlab GUIå…¥é—¨çŸ¥è¯†ã€‚","text":"â€‹ Matlab GUIä¸ºå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œå¯ä»¥ç†è§£ä¸ºç›¸å½“äºåšä¸€ä¸ªè½¯ä»¶ï¼Œå°†è¾“å…¥è¾“å‡ºå‡½æ•°æ“ä½œé€šè¿‡äº¤äº’ç•Œé¢è¡¨ç°å‡ºæ¥ï¼Œä¸‹é¢ç®€å•è®²è¿°ä¸€äº›Matlab GUIå…¥é—¨çŸ¥è¯†ã€‚ åˆ›å»ºæ–°çš„GUIç•Œé¢â€‹ GUIç³»ç»ŸåŒ…å«ä¸¤ç§æ–‡ä»¶ï¼Œä¸€ç§æ˜¯.figæ–‡ä»¶ï¼Œç”¨äºè®¾è®¡é¡µé¢ï¼Œå¦ä¸€ç§æ˜¯.mæ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾æ§ä»¶æ“ä½œã€‚ åˆ›å»º.figæ–‡ä»¶ æ‰“å¼€Matlabï¼Œåœ¨å‘½ä»¤è¡Œçª—å£ä¸­è¾“å…¥ 1guide å›è½¦ï¼Œå¼¹å‡ºGUIDEå¿«é€Ÿå…¥é—¨å¼¹çª—ï¼› é€‰ä¸­é»˜è®¤çš„ Blank GUI (Default) ï¼Œç‚¹å‡»ç¡®å®šæ–°å»ºGUIï¼Œè‡ªåŠ¨ç”Ÿæˆæ–°çš„.figé¡µé¢æ–‡ä»¶ï¼› å®ŒæˆGUIçš„.figæ–‡ä»¶çš„æ–°å»ºã€‚ åˆ›å»º.figæ–‡ä»¶â€‹ ä¿å­˜.figæ–‡ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆç›¸å¯¹åº”çš„.mçš„æ–‡ä»¶ã€‚ â€‹ ç°åœ¨ï¼Œä¸€ä¸ªGUIç•Œé¢å·²ç»æ­å»ºå®Œæˆï¼Œä½ å¯ä»¥åœ¨.figæ–‡ä»¶é‡Œå¢åŠ ä¿®æ”¹æ§ä»¶ã€è®¾è®¡é¡µé¢ï¼Œåœ¨.mæ–‡ä»¶é‡Œç¼–å†™é€»è¾‘ä»£ç ã€‚ .figçš„é¡µé¢è®¾è®¡æ§ä»¶ â€‹ å·¦ä¾§çš„æ§ä»¶æ é‡Œé¢ç›´æ¥å¯é€šè¿‡æ‹–æ‹½æ”¾å…¥æ§ä»¶ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹è¯¾è®¾é‡Œå‡ ç§å¸¸ç”¨çš„æ§ä»¶ã€‚ æŒ‰é’® åŒå‡»æ‹–æ‹½å‡ºæ¥çš„æŒ‰é’®ï¼Œå¯è¿›å…¥æŒ‰é’®çš„æ£€æŸ¥å™¨ï¼Œåœ¨æ£€æŸ¥å™¨é‡Œè®¾ç½®æŒ‰é’®çš„å±æ€§ã€‚ â€‹ æ£€æŸ¥å™¨ä¸­æ¯”è¾ƒé‡è¦çš„å‡ ä¸ªå±æ€§ï¼š | Tag | æ§ä»¶çš„åç§°ï¼ˆä¸é‡åï¼‰ï¼Œ.mé€šè¿‡Tagæ¥å”¯ä¸€å¯»æ‰¾è¯¥æ§ä»¶ï¼Œå»ºè®®å°†éœ€è°ƒç”¨çš„æ§ä»¶æ¢æˆæœ‰æ„ä¹‰çš„åå­—ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚ || â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” || String | æ§ä»¶é‡Œé¢çš„æ–‡å­— || FontSize | æ§ä»¶é‡Œé¢çš„æ–‡å­—çš„å­—ä½“å¤§å° || Visible | æ§ä»¶åˆå§‹æ˜¯å¦å¯è§ || Callback | è°ƒç”¨å‡½æ•°ï¼ˆå¦‚æ˜¯æŒ‰é’®çš„è¯ï¼Œåˆ™ç‚¹å‡»æŒ‰é’®å°±ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼‰ï¼ŒåŒå‡»ä¸­é—´çš„ä¹¦å†™æŒ‰é’®matlabä¼šè‡ªåŠ¨è·³è½¬åˆ°ç›¸åº”çš„.mä¸­çš„è°ƒç”¨å‡½æ•°çš„ä½ç½®ï¼Œæ–¹ä¾¿ä¹¦å†™ | å¯ç¼–è¾‘æ–‡æœ¬å¯ç¼–è¾‘æ–‡æœ¬ï¼Œå¯é€šè¿‡äº¤äº’ç•Œé¢æ¥è¿›è¡Œç¼–è¾‘ï¼Œå½“ç„¶ä¹Ÿå¯åœ¨æ£€æŸ¥å™¨ä¸­Stringé‡Œç›´æ¥è®¾ç½®å…¶åˆå§‹å€¼ï¼Œå¸¸ç”¨äºå‚æ•°è¾“å…¥ã€‚ é™æ€æ–‡æœ¬é™æ€æ–‡æœ¬ï¼Œä¸å¯é€šè¿‡äº¤äº’ç•Œé¢æ¥è¿›è¡Œç¼–è¾‘ï¼Œå¯è®¾ç½®Stringåˆå§‹æ–‡æœ¬ï¼Œä¹Ÿå¯é€šè¿‡.mä¿®æ”¹ï¼Œç”¨äºæè¿°æ–‡å­—å’Œè¾“å‡ºã€‚ åæ ‡åŒºåæ ‡åŒºï¼Œç”¨äºç”»å›¾ï¼ˆåŠ¨ç”»ã€åæ ‡å›¾ç­‰ï¼‰ã€‚ é¢æ¿é¢æ¿ï¼Œå¯å°†å„æ§ä»¶ç»„åˆæˆä¸€ä¸ªé›†åˆï¼Œæ–¹ä¾¿ç§»åŠ¨ï¼Œæ˜¾ç¤ºæ›´æ¸…æ™°ã€‚ å·¥å…·â€‹ ä»‹ç»ä¸¤ä¸ªæˆ‘è§‰å¾—ç”¨å¾—åˆ°çš„ã€‚ å¯¹é½å¯¹è±¡ â€‹ ç”¨äºå¯¹é½æ§ä»¶ï¼Œä½¿é¡µé¢æ•´é½ç¾è§‚ã€‚ â€‹ ä¾‹å¦‚ï¼Œéšæ„æ‹–å…¥å‡ ä¸ªæ–‡æœ¬ï¼Œé€‰ä¸­å…¨éƒ¨ï¼Œè®¾ç½®å¥½æ¨ªçºµå¯¹é½åˆ†å¸ƒæ ¼å¼ï¼Œç‚¹å‡»åº”ç”¨ã€‚ â€‹ ç¬é—´å°±æ•´é½äº†ã€‚ è¿è¡Œâ€‹ å¯æ–¹ä¾¿åœ°æŸ¥çœ‹é¡µé¢æ˜¾ç¤ºã€‚ .mçš„æ–‡ä»¶ç¼–å†™æŸ¥çœ‹ä¿®æ”¹æ§ä»¶å±æ€§â€‹ åº”ç”¨å¹¿æ³›ï¼Œæ¯”å¦‚æ£€æµ‹è¾“å…¥æ¡†è¾“å…¥çš„å†…å®¹å’Œè¾“å‡ºåˆ°è¾“å‡ºçš„é™æ€æ–‡æœ¬æ¡†ã€‚ æ£€æµ‹è¾“å…¥æ¡†è¾“å…¥çš„å†…å®¹ï¼š 1x = str2num(get(handles.Tagname, 'string')); % ä»Tagå±æ€§ä¸ºTagnameçš„Stringå±æ€§ä¸­è·å–xçš„stringæ ¼å¼ï¼Œå†è½¬ä¸ºnumï¼ˆå³åœ¨Tagnameä¸­è¾“å…¥çš„xï¼‰ è¾“å‡ºåˆ°è¾“å‡ºçš„é™æ€æ–‡æœ¬æ¡†ï¼š 1set(handles.Tagname, 'string', num2str(y)); % å°†å‚æ•°yå…ˆä»numè½¬ä¸ºstringï¼Œå†è®¾ç½®åˆ°Tagå±æ€§ä¸ºTagnameçš„Stringå±æ€§ä¸­ï¼ˆå³åœ¨Tagnameä¸­æ˜¾ç¤ºyï¼‰ é¡µé¢è·³è½¬123h = gcf; % æœ¬é¡µé¢ï¼ˆä¸éœ€å…³é—­æœ¬é¡µé¢æ­¤å¥çœç•¥ï¼‰pagename; % æ‰“å¼€åå­—ä¸ºpagenameçš„é¡µé¢close(h); % å…³é—­æœ¬é¡µé¢ï¼ˆä¸éœ€å…³é—­æœ¬é¡µé¢æ­¤å¥çœç•¥ï¼‰ é¡µé¢ä¹‹é—´ä¼ å‚â€‹ æ—¢ç„¶æœ‰è·³è½¬ï¼Œé‚£å°±å…ä¸äº†ä¼ å‚ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯è®¾ç½®å…¨å±€å˜é‡ï¼ˆé€‚ç”¨äºå°ç³»ç»Ÿï¼‰ã€‚ â€‹ åœ¨ç”¨åˆ°è¯¥å…¨å±€å˜é‡çš„å‡½æ•°å¼€å¤´éƒ½å£°æ˜è¯¥å…¨å±€å˜é‡å³å¯ã€‚ 1global x ç”»å›¾â€‹ ä¾‹å¦‚ç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å‡½æ•° y = sinxå…ˆåœ¨ç•Œé¢æ”¾ç½®å¥½axesæ§ä»¶ï¼Œè¿™é‡Œå‘½åä¸ºaxes1ï¼› 1234X = 0:0.01:pi; % è®¾ç½®xçš„èŒƒå›´(èµ·å§‹å€¼ï¼šé‡‡æ ·é—´éš”ï¼šç»ˆæ­¢å€¼)Y = sin(X); % è®¾ç½®x-yçš„å¯¹åº”å‡½æ•°axes(handles.axes1); % é€‰åˆ™åæ ‡åŒºï¼ˆaxesï¼‰axes1plot(X, Y, 'b'); % ç»˜åˆ¶X-Yï¼ˆXè½´å˜é‡ï¼ŒYè½´å˜é‡ï¼Œç‚¹çš„é¢œè‰²ï¼‰","categories":[{"name":"MATLAB","slug":"MATLAB","permalink":"https://gy23333.github.io/categories/MATLAB/"}],"tags":[{"name":"MATLAB","slug":"MATLAB","permalink":"https://gy23333.github.io/tags/MATLAB/"},{"name":"GUI","slug":"GUI","permalink":"https://gy23333.github.io/tags/GUI/"}]},{"title":"Mac WiFiè¿æ¥æ— æ³•å¼¹å‡ºéªŒè¯é¡µé¢é—®é¢˜è§£å†³åŠæ³•","slug":"Mac-WiFiè¿æ¥æ— æ³•å¼¹å‡ºéªŒè¯é¡µé¢é—®é¢˜è§£å†³åŠæ³•","date":"2019-12-21T07:24:14.000Z","updated":"2024-11-11T03:57:58.113Z","comments":true,"path":"2019/12/21/Mac-WiFiè¿æ¥æ— æ³•å¼¹å‡ºéªŒè¯é¡µé¢é—®é¢˜è§£å†³åŠæ³•/","link":"","permalink":"https://gy23333.github.io/2019/12/21/Mac-WiFi%E8%BF%9E%E6%8E%A5%E6%97%A0%E6%B3%95%E5%BC%B9%E5%87%BA%E9%AA%8C%E8%AF%81%E9%A1%B5%E9%9D%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","excerpt":"é—®é¢˜è¿æ¥å…¬å…±Wi-Fiæ—¶å¸¸æœ‰å¼¹å‡ºçš„éªŒè¯é¡µé¢ï¼ŒMacæ˜¾ç¤ºå·²è¿æ¥ä¸ŠWi-Fiï¼Œä½†æœªå¼¹å‡ºéªŒè¯é¡µé¢ï¼Œæ— æ³•ä½¿ç”¨ç½‘ç»œã€‚","text":"é—®é¢˜è¿æ¥å…¬å…±Wi-Fiæ—¶å¸¸æœ‰å¼¹å‡ºçš„éªŒè¯é¡µé¢ï¼ŒMacæ˜¾ç¤ºå·²è¿æ¥ä¸ŠWi-Fiï¼Œä½†æœªå¼¹å‡ºéªŒè¯é¡µé¢ï¼Œæ— æ³•ä½¿ç”¨ç½‘ç»œã€‚ è§£å†³æ–¹æ³• æ‰“å¼€â€œè®¾ç½® &gt; ç½‘ç»œ &gt; é«˜çº§ â€ï¼› ç¡®å®š â€œTCP/IPâ€çš„â€œé…ç½®IPv4â€é€‰ä¸­â€œä½¿ç”¨DHCPâ€ï¼› â€œDNSâ€ä¸­çš„â€œDNSæœåŠ¡å™¨â€å‡å»æ·»åŠ é…ç½®ï¼Œæ¢å¤åŸå§‹é…ç½®ã€‚","categories":[{"name":"è¸©å‘è®°å½•","slug":"è¸©å‘è®°å½•","permalink":"https://gy23333.github.io/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"DNS","slug":"DNS","permalink":"https://gy23333.github.io/tags/DNS/"},{"name":"Mac","slug":"Mac","permalink":"https://gy23333.github.io/tags/Mac/"},{"name":"Wi-Fiè¿æ¥","slug":"Wi-Fiè¿æ¥","permalink":"https://gy23333.github.io/tags/Wi-Fi%E8%BF%9E%E6%8E%A5/"}]},{"title":"houghå˜æ¢","slug":"houghå˜æ¢","date":"2019-12-20T11:06:56.000Z","updated":"2024-11-11T03:57:58.113Z","comments":true,"path":"2019/12/20/houghå˜æ¢/","link":"","permalink":"https://gy23333.github.io/2019/12/20/hough%E5%8F%98%E6%8D%A2/","excerpt":"â€‹ houghå˜æ¢ä¸»è¦ç”¨äºæ‰¾çº¿ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ‰©å±•ä¸ºæ‰¾åœ†æˆ–è€…å…¶ä»–å½¢çŠ¶ã€‚","text":"â€‹ houghå˜æ¢ä¸»è¦ç”¨äºæ‰¾çº¿ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ‰©å±•ä¸ºæ‰¾åœ†æˆ–è€…å…¶ä»–å½¢çŠ¶ã€‚ ç®—æ³•åœ¨Cannyç®—æ³•æå–å‡ºè¾¹ç¼˜çš„åŸºç¡€ä¸Šï¼Œ å°†åŸå›¾åƒç©ºé—´è½¬åˆ°å‚æ•°ç©ºé—´ï¼› åœ¨å‚æ•°ç©ºé—´ (u,v) å†…å»ºç«‹ä¸¤ç»´æ•°ç»„ A( u,v ) ; åœ¨å¼€å§‹æ—¶å°†æ•°ç»„ç½®é›¶ï¼› å¯¹å›¾åƒç©ºé—´çš„æ¯ä¸€ä¸ªå¾…æ£€æµ‹ç‚¹ (xi, yi) ï¼Œä»¤ u å–éæ‰€æœ‰å¯èƒ½çš„å–å€¼ï¼Œå¹¶è®¡ç®—å¯¹åº”çš„vï¼› â€‹ v = - xi * u + yi å¯¹è®¡ç®—å¾—åˆ°çš„ (u,v) ï¼Œå¯¹ A(u,v) ä¸­ç›¸åº”å•å…ƒè¿›è¡Œç´¯åŠ : â€‹ A(u, v) = A(u, v) + 1 æ ¹æ® A(u,v)çš„å€¼ï¼Œç¡®å®šæœ‰å¤šå°‘ç‚¹æ˜¯å…±çº¿çš„ï¼Œ åŒæ—¶å¯ä»¥çŸ¥é“çº¿æ¡çš„å‚æ•°(u,v)ã€‚ â€‹ y = u x + v C++å®ç°ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215#include &lt;opencv2/opencv.hpp&gt;#include &lt;math.h&gt;#define _USE_MATH_DEFINES#define NUM_LINES 8#define MIN_LINEPOINTS 30using namespace cv;using namespace std;/** Houghå˜æ¢(æ‰¾åˆ°æœ€é•¿çš„NUM_LINESæ¡ç›´çº¿) imgä¸ºè¾“å…¥çš„äºŒå€¼è¾¹ç¼˜å›¾åƒï¼Œlinesä¸ºHoughå˜æ¢æå–å‡ºçš„ç›´çº¿ */int houghTrans_max(Mat img, vector&lt;Vec2f&gt; &amp;lines) &#123; int numangle = 360; int numr = int(sqrt(pow(img.rows, 2) + pow(img.cols, 2))); int numpoint[numangle][numr]; int numline = 0; // numpointç½®0 for (int i = 0; i &lt; numangle; i++) &#123; for (int j = 0 ; j &lt; numr; j++) &#123; numpoint[i][j] = 0; &#125; &#125; // å¾ªç¯éå†æ¯ä¸ªç‚¹ï¼Œå¦‚æœä¸ºè¾¹ç¼˜ç‚¹åˆ™è¿›è¡Œå¤„ç†ï¼ˆéå†æ¯ä¸ªè§’åº¦angï¼Œç®—å‡ºç›¸åº”çš„rï¼‰ for (int j = 0; j &lt; img.rows; j++) &#123; for (int i = 0; i &lt; img.cols; i++) &#123; // åªå–è¾¹ç¼˜ç‚¹ if (img.ptr&lt;uchar&gt;(j)[i] == 255) &#123; // éå†æ¯ä¸ªè§’åº¦angï¼Œç®—å‡ºç›¸åº”çš„r for (int n = 0; n &lt; numangle/2; n++) &#123; double ang = double(n*M_PI/180); int r = int(i*cos(ang) + j*sin(ang)); if(r &lt; 0)&#123; int n1 = n+180; int r1 = -r; numpoint[n1][r1] ++; &#125; else &#123; numpoint[n][r] ++; //è®°å½•è¯¥è§’åº¦åŠå¾„ä¸‹çš„ç‚¹æ•° &#125; &#125; &#125; &#125; &#125; int minmax = 0; int maxNum[NUM_LINES]; for (int i = 0; i &lt; NUM_LINES; i++) &#123; maxNum[i] = 0; &#125; float lines_f[NUM_LINES][2]; // éå†è§’åº¦åŠå¾„ for (int i = 0; i &lt; numangle; i++) &#123; for (int j = 0 ; j &lt; numr; j++) &#123; // å¦‚è¯¥è§’åº¦ã€åŠå¾„ä¸‹ç‚¹æ•°å¤§äºé—¨é™10ï¼Œä¸”è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œåˆ™è®°å½•çº¿ if (numpoint[i][j] &gt; MIN_LINEPOINTS &amp;&amp; (numpoint[i][j] &gt; minmax || numline &lt; NUM_LINES)) &#123; // æœªæ»¡å››æ¡çº¿æ—¶ if (numline &lt; NUM_LINES) &#123; maxNum[numline] = numpoint[i][j]; lines_f[numline][0] = float(j); lines_f[numline][1] = float(i*M_PI/180); minmax = maxNum[0]; for (int m = 0; m &lt; numline+1; m++) &#123; if (maxNum[m] &lt; minmax) &#123; minmax = maxNum[m]; &#125; &#125; &#125; // æ»¡å››æ¡çº¿æ—¶ else &#123; for (int m = 0; m &lt; NUM_LINES; m++) &#123; if (maxNum[m] == minmax) &#123; lines_f[m][0] = float(j); lines_f[m][1] = float(i*M_PI/180); maxNum[m] = numpoint[i][j]; break; &#125; &#125; minmax = maxNum[0]; for (int m = 0; m &lt; NUM_LINES; m++) &#123; if (maxNum[m] &lt; minmax) &#123; minmax = maxNum[m]; &#125; &#125; &#125; numline++; &#125; &#125; &#125; if (numline &gt; NUM_LINES) &#123; numline = NUM_LINES; &#125; int n = 0; for (int i = 0; i &lt; numline; i++) &#123; Vec2f l; l[0] = lines_f[i][0]; l[1] = lines_f[i][1]; lines.push_back(l); n++; &#125; return numline;&#125;/** Houghå˜æ¢ imgä¸ºè¾“å…¥çš„äºŒå€¼è¾¹ç¼˜å›¾åƒï¼Œlinesä¸ºHoughå˜æ¢æå–å‡ºçš„ç›´çº¿ï¼Œthresholdæ˜¯å…±çº¿çš„ç‚¹æ•°çš„é˜ˆå€¼ */int houghTrans(Mat img, vector&lt;Vec2f&gt; &amp;lines, int threshold) &#123; int numangle = 360; int numr = int(sqrt(pow(img.rows, 2) + pow(img.cols, 2))); int numpoint[numangle][numr]; int numline = 0; // numpointç½®0 for (int i = 0; i &lt; numangle; i++) &#123; for (int j = 0 ; j &lt; numr; j++) &#123; numpoint[i][j] = 0; &#125; &#125; // å¾ªç¯éå†æ¯ä¸ªç‚¹ï¼Œå¦‚æœä¸ºè¾¹ç¼˜ç‚¹åˆ™è¿›è¡Œå¤„ç†ï¼ˆéå†æ¯ä¸ªè§’åº¦angï¼Œç®—å‡ºç›¸åº”çš„rï¼‰ for (int j = 0; j &lt; img.rows; j++) &#123; for (int i = 0; i &lt; img.cols; i++) &#123; // åªå–è¾¹ç¼˜ç‚¹ if (img.ptr&lt;uchar&gt;(j)[i] == 255) &#123; // éå†æ¯ä¸ªè§’åº¦angï¼Œç®—å‡ºç›¸åº”çš„r for (int n = 0; n &lt; numangle/2; n++) &#123; double ang = double(n*M_PI/180); int r = int(i*cos(ang) + j*sin(ang)); if(r &lt; 0)&#123; int n1 = n+180; int r1 = -r; numpoint[n1][r1] ++; &#125; else &#123; numpoint[n][r] ++; //è®°å½•è¯¥è§’åº¦åŠå¾„ä¸‹çš„ç‚¹æ•° &#125; &#125; &#125; &#125; &#125; // éå†è§’åº¦åŠå¾„ for (int i = 0; i &lt; numangle; i++) &#123; for (int j = 0 ; j &lt; numr; j++) &#123; // å¦‚è¯¥è§’åº¦ã€åŠå¾„ä¸‹ç‚¹æ•°å¤§äºé—¨é™ï¼Œä¸”è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œåˆ™è®°å½•çº¿ if (numpoint[i][j] &gt; threshold) &#123; Vec2f l; l[0] = float(j); l[1] = float(i*M_PI/180); lines.push_back(l); numline ++; &#125; &#125; &#125; return numline;&#125;/** åœ¨å›¾åƒä¸Šç”»çº¿ imgä¸ºè¾“å…¥å›¾åƒï¼Œresultä¸ºç”»å®Œçº¿çš„è¾“å‡ºå›¾åƒï¼Œlinesä¸ºéœ€è¦ç”»çš„çº¿ */void drawLines(Mat &amp;img, Mat &amp;result, vector&lt;Vec2f&gt; &amp;lines)&#123; cvtColor(img, result, COLOR_GRAY2BGR); //å°†IMREAD_GRAYSCALEè½¬åŒ–ä¸ºCOLOR_GRAY2BGRæ ¼å¼ï¼Œä»¥ä¾¿æ˜¾ç¤ºçº¿ for( size_t i = 0; i &lt; lines.size(); i++ ) &#123; float rho = lines[i][0], theta = lines[i][1]; Point pt1, pt2; double a = cos(theta), b = sin(theta); if (rho/b &lt; 0) &#123; pt1.y = 0; pt1.x = cvRound(rho/a); &#125; else &#123; pt1.x = 0; pt1.y = cvRound(rho/b); &#125; if ((-(a/b)*float(img.cols-1)+rho/b) &gt;= img.rows) &#123; pt2.y = img.rows-1; pt2.x = cvRound(-(b/a)*float(img.rows-1) + rho/a); &#125; else &#123; pt2.x = img.cols-1; pt2.y = cvRound(-(a/b)*float(img.cols-1) + rho/b); &#125; line( result, pt1, pt2, Scalar(0,0,255), 1, LINE_AA); &#125;&#125;int main() &#123; Mat img, edge, result; img = imread(\"road.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return -1; &#125; Canny(img, edge, 100, 400); // cannyå˜æ¢ vector&lt;Vec2f&gt; lines;// int numline = houghTrans_max(edge, lines); // Houghå˜æ¢(æ‰¾åˆ°æœ€é•¿çš„NUM_LINESæ¡ç›´çº¿)// HoughLines(edge, lines, 1, CV_PI/180, 150, 0, 0 ); // OpenCVçš„houghå˜æ¢ houghTrans(edge, lines, 400); drawLines(img, result, lines);// ç”»çº¿ // å›¾åƒæ˜¾ç¤º imshow(\"img\", img); imshow(\"canny\",edge);// å›¾åƒæ˜¾ç¤º imshow(\"hough\", result); waitKey(); imwrite(\"result.jpg\", result); return 0;&#125; ç»“æœåŸå›¾åƒï¼š houghå˜åŒ–åçš„å›¾åƒï¼ˆæ‰¾åˆ°ç›´çº¿ç”¨çº¢çº¿æ ‡å‡ºï¼‰ï¼š","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"hough","slug":"hough","permalink":"https://gy23333.github.io/tags/hough/"}]},{"title":"æ±‡ç¼–å­¦ä¹ ç¬”è®°","slug":"æ±‡ç¼–å­¦ä¹ ç¬”è®°","date":"2019-12-20T07:56:45.000Z","updated":"2024-11-11T03:57:58.116Z","comments":true,"path":"2019/12/20/æ±‡ç¼–å­¦ä¹ ç¬”è®°/","link":"","permalink":"https://gy23333.github.io/2019/12/20/%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"æ±‡ç¼–å­¦ä¹ ","text":"æ±‡ç¼–å­¦ä¹  å¦‚ä½•åœ¨Macä¸Šè¿è¡Œæ±‡ç¼–ç¨‹åºå®‰è£…nasmåœ¨å‘½ä»¤è¡Œä¸­å®‰è£…nasm 1brew install nasm Macä¸­è™½è‡ªå¸¦nasmï¼Œä½†ç‰ˆæœ¬å¤ªè€ï¼Œéœ€é‡æ–°å®‰è£…ã€‚ æ–°å»ºasmæ–‡ä»¶ä¸‹é¢åä¸º HelloWorld.asm æ–‡ä»¶è¿è¡Œå¯è¾“å‡ºhello world! 1234567891011121314151617181920msg: db &quot;hello world!&quot;, 0x0alen: equ $-msg SECTION .textglobal _main kernel: syscall ret _main: mov rax,0x2000004 mov rdi,1 mov rsi,msg mov rdx,len call kernel mov rax,0x2000001 mov rdi,0 call kernel åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ æ ¹æ®HelloWorld.asmç”Ÿæˆç›¸åº”çš„è¾“å‡ºæ–‡ä»¶HelloWorld.o -o outfile write output to an outfile -f format select an output formatï¼ˆæŒ‡å®šç¼–è¯‘ç¯å¢ƒï¼‰ 1nasm -f macho64 -o HelloWorld.o HelloWorld.asm ç”Ÿæˆè¾“å‡ºæ–‡ä»¶HelloWorldï¼ˆæ ¼å¼ï¼šUnixå¯æ‰§è¡Œæ–‡ä»¶ï¼‰ 1ld HelloWorld.o -o HelloWorld -macosx_version_min 10.13 -lSystem -no_pie è¿è¡ŒHelloWorldæ–‡ä»¶ 1.&#x2F;HelloWorld è¿è¡ŒæˆåŠŸ æ­¤æ—¶å¯çœ‹åˆ°æ–‡ä»¶å¤¹ä¸­æœ‰ä¸‰ç§æ–‡ä»¶ï¼ˆ.asmã€.oã€Unixå¯æ‰§è¡Œæ–‡ä»¶ï¼‰","categories":[{"name":"æ±‡ç¼–","slug":"æ±‡ç¼–","permalink":"https://gy23333.github.io/categories/%E6%B1%87%E7%BC%96/"}],"tags":[{"name":"Mac","slug":"Mac","permalink":"https://gy23333.github.io/tags/Mac/"},{"name":"æ±‡ç¼–","slug":"æ±‡ç¼–","permalink":"https://gy23333.github.io/tags/%E6%B1%87%E7%BC%96/"}]},{"title":"æŸä¸ç§‘å­¦çš„Cè¯¾è®¾å…¥é—¨ï¼ˆåç§‘è‡ªåŠ¨åŒ–Cè¯¾è®¾ï¼‰","slug":"æŸä¸ç§‘å­¦çš„Cè¯¾è®¾å…¥é—¨","date":"2019-12-17T04:10:28.000Z","updated":"2024-11-11T03:57:58.126Z","comments":true,"path":"2019/12/17/æŸä¸ç§‘å­¦çš„Cè¯¾è®¾å…¥é—¨/","link":"","permalink":"https://gy23333.github.io/2019/12/17/%E6%9F%90%E4%B8%8D%E7%A7%91%E5%AD%A6%E7%9A%84C%E8%AF%BE%E8%AE%BE%E5%85%A5%E9%97%A8/","excerpt":"ä¸€äº›å…³äºåç§‘è‡ªåŠ¨åŒ–Cè¯¾è®¾çš„ç»éªŒæ€»ç»“ï¼Œä¹‹å‰åœ¨è¯¾è®¾ç¾¤é‡Œå‘è¿‡pdfç‰ˆçš„ï¼Œç°æ•´ç†åˆ°åšå®¢ä¸Šï¼Œå¦‚æœ‰é—®é¢˜å¯åœ¨ä¸‹é¢è¿›è¡Œè¯„è®ºã€‚","text":"ä¸€äº›å…³äºåç§‘è‡ªåŠ¨åŒ–Cè¯¾è®¾çš„ç»éªŒæ€»ç»“ï¼Œä¹‹å‰åœ¨è¯¾è®¾ç¾¤é‡Œå‘è¿‡pdfç‰ˆçš„ï¼Œç°æ•´ç†åˆ°åšå®¢ä¸Šï¼Œå¦‚æœ‰é—®é¢˜å¯åœ¨ä¸‹é¢è¿›è¡Œè¯„è®ºã€‚ å…¥é—¨å»ºè®®é¢„å¤‡çŸ¥è¯†Cè¯¾è®¾çš„å¤§éƒ¨åˆ†éœ€è¦çš„çŸ¥è¯†éƒ½å·²ç»åœ¨è‡ªåŠ¨åŒ–å¤§ä¸€ä¸‹å­¦æœŸçš„Cè¯­è¨€è¯¾ç¨‹ä¸Šå­¦ä¹ è¿‡äº†ï¼Œè¿™é‡Œä¸»è¦å°±è°ˆä¸€äº›éœ€è¦è‡ªå­¦çš„çŸ¥è¯†ï¼Œå»ºè®®å¤§å®¶åœ¨æš‘å‡æœŸé—´å­¦ä¹ ä¸€ä¸‹ã€‚ å»ºç«‹æ‰“å¼€å·¥ç¨‹ è·‘ä¸€è·‘å­¦é•¿å­¦å§çš„ä»£ç ï¼Œçœ‹çœ‹å¤§è‡´æ˜¯ä¸€ä¸ªæ€æ ·çš„å†…å®¹ã€‚å­¦ä¼šå¦‚ä½•åœ¨bcä¸Šå»ºç«‹ä¸€ä¸ªå·¥ç¨‹ã€‚ï¼ˆè¯¦ç»†è¿‡ç¨‹è¯·å‚è€ƒã€ŠBorland C++å»ºç«‹å·¥ç¨‹èœé¸Ÿæ•™ç¨‹ã€‹ï¼‰ é€‰æ‹©ç”»å›¾çš„æ¨¡å¼ï¼Œå­¦ä¹ åŸºæœ¬çš„ç”»å›¾æ–¹æ³• ä¸¤ç§æ¨¡å¼å¯ä¾›é€‰æ‹©â€”â€”VGAå’ŒSVGA | | ä¼˜ç‚¹ | ç¼ºç‚¹ || â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” || VGA | å…·æœ‰ä¼—å¤šçš„ç”»å›¾å‡½æ•°ï¼ˆä¾‹å¦‚ç”»åœ†ã€ç”»æ–¹æ¡†ç­‰ï¼‰ï¼Œç”»å›¾æ˜¾ç¤ºé€Ÿåº¦å¿«ï¼ˆåŸºæœ¬ä¸€è·³è½¬ç”»å›¾å°±å®Œæˆï¼‰ | åˆ†è¾¨ç‡ä½ï¼Œå¯é€‰æ‹©çš„é¢œè‰²å°‘ï¼Œä¸èƒ½è´´å›¾ || SVGA | åˆ†è¾¨ç‡é«˜ï¼Œå¯é€‰é¢œè‰²å¤šï¼Œå¯è´´å›¾ | éœ€è¦åŸºäºç”»ç‚¹è‡ªå·±å†™ç”»å›¾å‡½æ•°ï¼Œç”»å›¾æ˜¾ç¤ºæ…¢ï¼ˆé¡µé¢æ˜¾ç¤ºæ—¶å¯ä»¥æ˜æ˜¾åœ°çœ‹å‡ºç”»å›¾çš„è¿‡ç¨‹ï¼‰ | å»ºè®®ï¼šä¸è¦æ±‚è¾ƒä¸ºå¤æ‚çš„é¡µé¢çš„è¯¾é¢˜é€‰æ‹©VGAæ¨¡å¼ï¼Œå› ä¸ºç”»å›¾æ¯”è¾ƒæ–¹ä¾¿è€Œä¸”æ˜¾ç¤ºæ•ˆæœæ¯”è¾ƒå¥½ï¼›å¦‚æœéœ€è¦ç”»è¾ƒä¸ºå¤æ‚çš„é¡µé¢å’Œå›¾å½¢ï¼Œæˆ–è€…å¿…é¡»å¾—è´´å›¾çš„è¯¾é¢˜é€‰æ‹©SVGAæ¨¡å¼ã€‚ æé†’ï¼šè´´å›¾é¡»è°¨æ…ï¼Œéå¿…è¦ä¸è´´å›¾ã€‚æ¯å¹´çš„æƒ…å†µå¯èƒ½ä¸åŒï¼Œæ‰“å¬ä¸€ä¸‹ä»Šå¹´çš„è´´å›¾çš„è¦æ±‚ã€‚ VGAç”»å›¾å‡½æ•°å¯ä»¥å‚è€ƒã€ŠCé«˜çº§å®ç”¨ç¨‹åºè®¾è®¡ï¼ˆç‹å£«å…ƒï¼‰ã€‹ä¸­çš„ç« èŠ‚ã€‚ é¼ æ ‡çš„ä½¿ç”¨ é‡ç‚¹æ˜¯æ‰¾åˆ°ä¸€ä¸ªå¥½ç”¨çš„é¼ æ ‡ï¼Œç„¶åå­¦ä¼šå¦‚ä½•ä½¿ç”¨ã€‚ï¼ˆå½“ç„¶å¦‚æœæ„¿æ„è‡ªå·±å†™ä¸€ä¸ªä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè¿™æ ·ä¼šç†è§£çš„æ›´é€å½»ä¸€äº›ï¼‰ æ³¨æ„ï¼šä¸è¦ç”¨ç³»ç»Ÿé¼ æ ‡ï¼ï¼ï¼ ç³»ç»Ÿé¼ æ ‡æ˜¯DOSä¸‹é¢è‡ªå¸¦çš„ä¸€ä¸ªé¼ æ ‡ï¼Œåœ¨æˆ‘ä»¬çš„ç”µè„‘çš„bcè·‘çš„æ—¶å€™å¯ä»¥å¾ˆå¥½åœ°æ˜¾ç¤ºï¼Œä½†æ˜¯åœ¨éªŒæ”¶ç”¨XPç³»ç»Ÿè·‘çš„æ—¶å€™ï¼Œç³»ç»Ÿé¼ æ ‡æ˜¯æ— æ³•æ˜¾ç¤ºå‡ºæ¥çš„ã€‚ å¦‚ä½•åŒºåˆ†æ˜¯å¦æ˜¯ç³»ç»Ÿé¼ æ ‡ï¼Ÿ çœ‹æœ‰æ²¡æœ‰ç”»é¼ æ ‡çš„å›¾å½¢ï¼Œå¦‚æœè¯¥é¼ æ ‡æ–‡ä»¶é‡Œé¢æ²¡æœ‰ä»»ä½•ç”»å›¾çš„è¿‡ç¨‹ç›´æ¥è°ƒå‡ºé¼ æ ‡çš„å½¢çŠ¶å³ä¸ºç³»ç»Ÿé¼ æ ‡ã€‚ æ±‰å­—æ˜¾ç¤º ä¸é¼ æ ‡ç›¸åŒï¼Œåªè¦æ‰¾ä¸€ä¸ªæ±‰å­—åº“åŠ å…¥å·¥ç¨‹ï¼Œç„¶åå­¦ä¼šä½¿ç”¨å°±è¡Œã€‚ æœ‰äº›ç”¨Notepad++ç¼–å†™çš„åŒå­¦ä¼šå‘ç°æ±‰å­—ä¹±ç çš„æƒ…å†µï¼Œè¿™æ˜¯å› ä¸ºåœ¨ç¼–å†™çš„æœ€åˆæ²¡æœ‰è®¾ç½®ä¸ºç®€ä½“æ±‰å­—ï¼ŒNotepad++é»˜è®¤ç¼–ç ä¸ºUTF-8ç¼–ç ï¼Œåœ¨æ¯æ¬¡ç¼–å†™cæ–‡ä»¶å‰éœ€è¦æ‰‹åŠ¨è®¾ä¸ºä¸­æ–‡ç®€ä½“ã€‚ æ–‡ä»¶æ“ä½œ éœ€è¦è‡ªå­¦æ–‡ä»¶çš„è¯»å–å’Œå†™å…¥çš„æ“ä½œã€‚ç”±äºä¸è¿ç½‘ï¼Œæ‰€ä»¥è¯¾è®¾ä¸­ä¿¡æ¯ä¸€èˆ¬éƒ½æ˜¯å‚¨å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œ è¿™æ—¶å€™çš„æ–‡ä»¶ç›¸å½“äºè¯¾è®¾ç³»ç»Ÿçš„æ•°æ®åº“ã€‚æ–‡ä»¶å»ºè®®ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨ï¼Œè¿™æ ·è¯»å†™çš„é€Ÿåº¦ä¼šæ›´å¿«ã€‚ å…¶ä»–å»ºè®® ç»„å†…é…åˆã€‚Cè¯¾è®¾æ¯•ç«Ÿæ˜¯ä¸ªåˆä½œé¡¹ç›®ï¼Œå¾ˆå¤šäººä¸€å¼€å§‹å¿½è§†äº†æ­æ¡£ä¹‹é—´é…åˆçš„é‡è¦æ€§ï¼Œæœ€åä¸€ä¸ªäººå®Œæˆäº†å¤§éƒ¨åˆ†çš„å·¥ä½œï¼Œå…¶å®è¿™æ ·ä¸ä»…ä¼šè®©ä½ èº«å¿ƒä¿±ç–²ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½æ— æ³•å–å¾—æ›´é«˜çš„åˆ†æ•°ï¼ˆè€å¸ˆå¹¶ä¸çŸ¥é“çœŸæ­£å·¥ä½œåˆ†é…é‡ï¼Œè€Œä¸”å°±ç®—çŸ¥é“ï¼Œä¸èƒ½å’Œæ­æ¡£è¾ƒå¥½çš„åˆä½œè¿™ä¸ªé—®é¢˜ä¹Ÿä¼šæˆä¸ºä½ çš„ä¸€ä¸ªæ‰£åˆ†é¡¹ï¼‰ã€‚ä¸å»ºè®®ç»„ä¸‰äººé˜Ÿï¼Œä¸‰äººé˜Ÿå¯¹äºè¯¾è®¾æ¥è¯´äººå¤ªå¤šäº†äº›ï¼Œä½†æ˜¯å·²ç»ç»„å¥½äº†ä¸‰äººé˜Ÿä¹Ÿæ²¡å…³ç³»ï¼ŒæŠŠåŠŸèƒ½å¤šåšä¸€äº›ï¼Œåˆ†æ‘Šåˆ°æ¯ä¸ªäººçš„å·¥ä½œé‡ä¸èƒ½å°äºäºŒäººé˜Ÿã€‚ å¤šæ‰¾è€å¸ˆã€‚æ‰¾è€å¸ˆä¸»è¦æ˜¯ä¸¤ä¸ªæ–¹é¢ï¼šä¸€æ˜¯å’Œè€å¸ˆè®¨è®ºä¸€ä¸‹é¡¹ç›®çš„æ€»ä½“è§„åˆ’ï¼ˆæœ€å¥½æ‰¾å‡ºè¿™é“é¢˜çš„è€å¸ˆï¼‰ï¼Œä¸è¦è®©ä½ çš„é¡¹ç›®åŠŸèƒ½å’Œè€å¸ˆæƒ³çš„åå·®å¤ªå¤§ï¼Œå¯èƒ½çš„è¯å¤šç»™å‡ ä¸ªè€å¸ˆçœ‹ä¸€ä¸‹ä½ çš„ç¨‹åºã€‚äºŒæ˜¯æ‰¾è€å¸ˆå¸®åŠ©debugï¼Œå¦‚æœæœ‰bugä¸€ç›´éƒ½è¯¥ä¸å¥½ï¼Œå°½æ—©æ‰¾è€å¸ˆæˆ–è€…å­¦é•¿å­¦å§é—®ï¼Œä¸è¦æ‹–ã€‚ ä»¿ç…§å¸‚é¢ä¸Šå·²æœ‰çš„ç”µè„‘ç‰ˆè½¯ä»¶è®¾è®¡ã€‚è¯¾è®¾æœ€å¥½çš„æ•ˆæœå°±æ˜¯è®©äººçœ‹èµ·æ¥åƒä¸€ä¸ªçœŸå®çš„è½¯ä»¶ã€‚ å°½æ—©å¼€å§‹åšã€‚Cè¯¾è®¾è‡³å°‘è¦ä¸€åˆ°ä¸¤ä¸ªæœˆçš„å·¥ä½œé‡ï¼Œä¸€èˆ¬ä¸­æœŸéªŒæ”¶åœ¨10æœˆä¸­æ—¬ï¼Œç»ˆæœŸéªŒæ”¶åœ¨11æœˆåˆæˆ–è€…ä¸­æ—¬ï¼Œæ‰€ä»¥å»ºè®®æœ€æ™šåœ¨9æœˆä¸­æ—¬è¦å¼€å§‹å·¥ä½œï¼Œå½“ç„¶è¶Šæ—©å¼€å§‹è‚¯å®šæ˜¯è¶Šå¥½çš„å•¦ã€‚ éªŒæ”¶å‰ä¸€å‘¨ä¸€å®šè¦å»ç§‘æŠ€æ¥¼çš„ç”µè„‘ä¸Šè·‘ä¸€ä¸‹ç¨‹åºï¼Œç§‘æŠ€æ¥¼æœ‰ä¸€ç§é“¶ç™½è‰²çš„ä¸»æœºæ˜¯æœ€åéªŒæ”¶æ—¶è·‘çš„ä¸»æœºï¼Œï¼ˆåˆ¤æ–­æ˜¯å¦æ˜¯æœ€åéªŒæ”¶æ—¶è·‘çš„æ–¹å¼çš„æ–¹æ³•ï¼šå·¥ç¨‹åœ¨XPç³»ç»Ÿä¸Šç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦æ‰“å¼€BCï¼‰ï¼Œè¿™ç§è·‘æ³•å¯èƒ½ä¼šå’Œä½ åœ¨è‡ªå·±ç”µè„‘ä¸Šæˆ–è€…ç§‘æŠ€æ¥¼éXPç³»ç»Ÿçš„ç”µè„‘ä¸Šè·‘å¾—æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œæ‰€ä»¥ä¸€å®šè¦æå‰è‡³å°‘ä¸€å‘¨çš„æ—¶é—´å»ç§‘æŠ€æ¥¼è·‘ä¸€ä¸‹ä½ çš„ç¨‹åºã€‚æœ€åæœ‰é—²ä½™çš„æ—¶é—´çš„è¯å¯ä»¥æŠŠç¨‹åºé‡Œçš„warningå…¨éƒ¨æ¶ˆæ‰ä¸€ä¸‹ã€‚ ä¸­æœŸå’Œç»ˆæœŸæŠ¥å‘Šå°½é‡å¤šå†™ä¸€äº›ã€‚ä¸­æœŸéªŒæ”¶ä¼šçœ‹æŠ¥å‘Šé¡µæ•°ï¼Œé¡µæ•°ä¸å¤Ÿçš„ä¼šè¢«æ‰“å›å»é‡å†™ã€‚ æ¯ä¸ªå‡½æ•°çš„è¡Œæ•°ä¸è¦è¿‡å¤šã€‚ä¸è¦æŠŠä¸€ä¸ªé¡µé¢æ‰€æœ‰çš„ä»£ç éƒ½å †åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œè¿™æ ·å¾ˆå¯èƒ½è®©ä½ å¸¦ä¸Šé‡å¤ä»£ç æ¥å‡‘ä»£ç é‡çš„å«Œç–‘ï¼ŒæŠŠå¸¦æœ‰åŠŸèƒ½çš„ä»£ç å—æå‡ºæˆå‡½æ•°ï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿é‡å¤è°ƒç”¨ã€‚ å¤šåŠŸèƒ½æ€§å’Œç¨³å®šæ€§ã€‚ä¸ä¸€å®šè¦è¿½æ±‚ååˆ†å¤æ‚çš„ç®—æ³•ï¼Œé‡è¦çš„æ˜¯æ‰©å±•åŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯è¾ƒä¸ºç®€å•çš„é¢˜å°±å¾—æ”¾å¼€æ€è·¯ï¼Œä½¿ä½ çš„ç³»ç»ŸåŠŸèƒ½æ›´åŠ çš„ä¸°å¯Œã€‚ è·‘å¾€å±Šä»£ç ã€ŠBorland C++å»ºç«‹å·¥ç¨‹èœé¸Ÿæ•™ç¨‹ã€‹ä¸­å¾ˆè¯¦ç»†åœ°è®²è¿°äº†å¦‚ä½•å»ºç«‹å·¥ç¨‹çš„é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œå°±åªæ˜¯ç®€è¿°ä¸€ä¸‹æ€ä¹ˆæ‰“å¼€å·²æœ‰çš„å·¥ç¨‹ï¼ˆè¿™é‡Œå°±ç”¨æˆ‘ä»¬ç»„çš„å·¥ç¨‹è¿›è¡Œæ¼”ç¤ºï¼Œæ–‡ä»¶å¤¹åä¸ºstockï¼‰ã€‚ ç¬¬ä¸€æ­¥ï¼šæŠŠä»£ç æ”¾åˆ°BCçš„DISK_Cæ–‡ä»¶å¤¹ä¸‹ã€‚ ç¬¬äºŒæ­¥ï¼šæ‰“å¼€BCï¼Œåœ¨ File &gt; Change Directory é‡Œæ‰¾åˆ°ç›¸åº”æ–‡ä»¶ã€‚ ç¬¬ä¸‰æ­¥ï¼šåœ¨ Project &gt; Open Project File ä¸­æ‰¾åˆ° .prj æ–‡ä»¶ï¼Œæ‰“å¼€ã€‚ ç¬¬å››æ­¥ï¼šè®¾ç½®Directories åœ¨Options &gt; Directoriesä¸­çš„ç¬¬ä¸€è¡Œæ˜¯å¤´æ–‡ä»¶çš„åœ°å€ï¼Œé™¤äº†BCè‡ªå¸¦çš„å¤´æ–‡ä»¶åº“å¤–ï¼Œè¿˜å¾—æ·»åŠ è‡ªå·±ç¨‹åºçš„å¤´æ–‡ä»¶æ‰€åœ¨åœ°å€ã€‚ ç¬¬äº”æ­¥ï¼šä¸Šè¿°å‡ æ­¥éƒ½è®¾ç½®å¥½äº†åå°±å¯ä»¥ç¼–è¯‘äº† â€‹ Compile &gt; Build all ç¼–è¯‘æ²¡æœ‰errorï¼Œå°±å¯ä»¥è·‘äº†ï¼ˆRun &gt; Runï¼‰ ä¹‹åå°±è‡ªå·±å»ç©å•¦ã€‚ã€‚ã€‚ã€‚ã€‚ å¦‚ä½•æ­å»ºé¡¹ç›®æ¡†æ¶æ¥ä¸‹æ¥æˆ‘ä¼šæ¼”ç¤ºæˆ‘ä»¬ç»„å½“æ—¶å»ºç«‹æ•´ä¸ªé¡¹ç›®çš„æ¡†æ¶ï¼Œå¦‚ä½•å»ºå·¥ç¨‹ã€ŠBorland C++å»ºç«‹å·¥ç¨‹èœé¸Ÿæ•™ç¨‹ã€‹ä¸­æœ‰è®²ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚ Notepad++çš„ä½¿ç”¨å»ºè®®ä½¿ç”¨ç¬¬ä¸‰æ–¹ç¼–è¯‘å™¨æ¥æ‰“ä»£ç ï¼ˆå¦‚Notepad++ï¼‰ Notepad++å¯åœ¨å®˜ç½‘ç›´æ¥å…è´¹ä¸‹è½½ ç”¨Notepad++æ–°å»ºä¸€ä¸ªæ–‡ä»¶åï¼Œä¸€å®šè¦è®°å¾—è¿›è¡Œä¸¤ä¸ªè®¾ç½®ï¼Œä¸€ä¸ªæ˜¯æ±‰å­—ï¼ˆå‰é¢æè¿‡ï¼‰ï¼Œä¸€ä¸ªæ˜¯Cè¯­è¨€ã€‚ é¡¹ç›®æ¡†æ¶çš„æ­å»ºäº‹ä¾‹é¡¹ç›®test å°†æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­ä¸€èµ·æä¾›ç»™å¤§å®¶ã€‚ æ–‡ä»¶å¤¹ä¸­éœ€è¦ç¼–å†™çš„åªæœ‰.c å’Œ .hæ–‡ä»¶ï¼Œå…¶ä½™ä¸ºè‡ªåŠ¨ç”Ÿæˆå’Œåº“ã€‚ ä¸»å‡½æ•°çš„ç¼–å†™ä¸»å‡½æ•° main.c ä¸»è¦ç”±åˆå§‹åŒ–éƒ¨åˆ†å’Œé¡µé¢è·³è½¬éƒ¨åˆ†ç»„æˆã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041#include \"common.h\"#include \"main.h\"void main(void)&#123; /***********å„ç§åˆå§‹åŒ–*****************/ /*è®¾å®šåˆå§‹é¡µé¢ è°ƒè¯•çš„æ—¶å€™å¯ä»¥æ”¹å˜pageçš„åˆå§‹è®¾å®šï¼Œç›´æ¥è·³è½¬åˆ°éœ€è¦è°ƒè¯•çš„é¡µé¢ */ int page = 0; //VGAç”»å›¾çš„åˆå§‹åŒ– int graphdriver = VGA; int graphmode = VGAHI; initgraph(&amp;graphdriver, &amp;graphmode, \"BGI\"); //é¼ æ ‡çš„åˆå§‹åŒ– mouseinit(); /* *********é¡µé¢è·³è½¬å¾ªç¯*********** æ¯ä¸€ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªpageå€¼ï¼Œ åœ¨å„ä¸ªé¡µé¢çš„ç¨‹åºä¸­ï¼Œæ¯ä¸€æ¬¡æœ‰éœ€è¦è·³è½¬é¡µé¢çš„æ—¶å€™ï¼Œå°±æ”¹å˜pageå€¼ï¼Œä¸”å›åˆ°ä¸»ç¨‹åº åœ¨ä¸»ç¨‹åºçš„å¾ªç¯ä¸­ï¼Œé€šè¿‡pageå€¼çš„æ”¹å˜ï¼Œè·³è½¬åˆ°ç›¸åº”é¡µé¢ */ while(1) &#123; switch(page) &#123; case 0://é¡µé¢1ï¼ˆåˆå§‹é¡µé¢ï¼‰ page = p1(); break; case 1://é¡µé¢2 page = p2(); break; case 2://é€€å‡ºç¨‹åº closegraph();//å…³é—­ç”»å›¾ exit(0);//é€€å‡ºç¨‹åº &#125; &#125;&#125; é¡µé¢è·³è½¬ä¾èµ–whileå¾ªç¯å’Œswitch caseçš„ç»“åˆï¼Œä¹‹åæ–°å¼€é¡µé¢ç›´æ¥å¢åŠ caseå°±å¯ä»¥ã€‚ é¡µé¢å‡½æ•°çš„ç¼–å†™é¡µé¢å‡½æ•°ä¸»è¦æ˜¯é¡µé¢ç»˜åˆ¶å’Œé¼ æ ‡æˆ–è€…å…¶ä»–æ§åˆ¶åŠŸèƒ½å’Œé¡µé¢è·³è½¬çš„ä¸¤ä¸ªéƒ¨åˆ†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include \"common.h\"#include \"page1.h\"//å› ä¸ºéœ€è¦è¿”å›pageå€¼ï¼Œæ‰€ä»¥é¡µé¢çš„å‡½æ•°éœ€æ˜¯intå‹int p1(void)&#123; int page = 0; //é˜²æ­¢é¼ æ ‡åœ¨è·³è½¬é¡µé¢æ—¶ç•™ç—• clrmous(MouseX,MouseY); delay(100); page1_screen(); /*å¾ªç¯ï¼Œä¸åœåœ°ç›‘æµ‹å¼‚åŠ¨ï¼Œå½“å¼‚åŠ¨å¯¼è‡´pageå€¼æ”¹å˜ï¼Œè·³è½¬é¡µé¢*/ while(page == 0) &#123; //è·å–é¼ æ ‡çš„ä½ç½®å’ŒçŠ¶æ€ mou_pos(&amp;MouseX,&amp;MouseY,&amp;press); //ç‚¹å‡»è·³è½¬é¡µé¢æ¡†ï¼Œè·³è½¬åˆ°é¡µé¢2ç•Œé¢ if(mouse_press(180, 170, 180+280, 170+60) == 1) &#123; page = 1;//è¿”å›1åˆ°ä¸»å‡½æ•°çš„é¡µé¢è·³è½¬å¾ªç¯ &#125; //ç‚¹å‡»é€€å‡ºç¨‹åºæ¡† else if(mouse_press(180, 170+60+40, 180+280, 170+60+40+60) == 1) &#123; page = 2;//è¿”å›2åˆ°ä¸»å‡½æ•°çš„é¡µé¢è·³è½¬å¾ªç¯ &#125; &#125; return page;&#125;//ç»˜åˆ¶é¡µé¢1ç•Œé¢void page1_screen(void)&#123; cleardevice();//æŠŠä»¥å‰çš„é¡µé¢æ¸…å± setbkcolor(BLACK);//èƒŒæ™¯è‰²è®¾ç½® setfillstyle(SOLID_FILL, BLUE);//è®¾å®šè“è‰²æ¡† bar(180, 170, 180+280, 170+60);//è·³è½¬é¡µé¢ setfillstyle(SOLID_FILL, RED);//è®¾å®šçº¢è‰²æ¡† bar(180, 170+60+40, 180+280, 170+60+40+60);//é€€å‡ºç¨‹åº&#125; é¡µé¢1æœ‰ä¸¤ä¸ªæ¡†ï¼Œç‚¹å‡»è“æ¡†è·³è½¬åˆ°é¡µé¢2ï¼Œç‚¹å‡»çº¢æ¡†é€€å‡ºç¨‹åºã€‚ é¡µé¢2ä¸é¡µé¢1ç¼–å†™ç»“æ„ç›¸åŒï¼Œåªæœ‰ä¸€ä¸ªçº¢è‰²çš„é€€å‡ºæ¡†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839#include \"common.h\"#include \"page2.h\"////å› ä¸ºéœ€è¦è¿”å›pageå€¼ï¼Œæ‰€ä»¥é¡µé¢çš„å‡½æ•°éœ€æ˜¯intå‹int p2(void)&#123; int page = 0; //é˜²æ­¢é¼ æ ‡åœ¨è·³è½¬é¡µé¢æ—¶ç•™ç—• clrmous(MouseX,MouseY); delay(100); page2_screen(); /*å¾ªç¯ï¼Œä¸åœåœ°ç›‘æµ‹å¼‚åŠ¨ï¼Œå½“å¼‚åŠ¨å¯¼è‡´pageå€¼æ”¹å˜ï¼Œè·³è½¬é¡µé¢*/ while(page == 0) &#123; //è·å–é¼ æ ‡çš„ä½ç½®å’ŒçŠ¶æ€ mou_pos(&amp;MouseX,&amp;MouseY,&amp;press); //ç‚¹å‡»é€€å‡ºç¨‹åºæ¡† if(mouse_press(180, 200, 180+280, 200+60) == 1) &#123; page = 2; &#125; &#125; return page;//è¿”å›2åˆ°ä¸»å‡½æ•°çš„é¡µé¢è·³è½¬å¾ªç¯&#125;//ç»˜åˆ¶é¡µé¢2ç•Œé¢void page2_screen(void)&#123; cleardevice();//æŠŠä»¥å‰çš„é¡µé¢æ¸…å± setbkcolor(BLACK);//èƒŒæ™¯è‰²è®¾ç½® setfillstyle(SOLID_FILL, RED);//è®¾å®šçº¢è‰²æ¡† bar(180, 200, 180+280, 200+60);//é€€å‡ºç¨‹åº&#125; å¤´æ–‡ä»¶çš„ç¼–å†™å¤´æ–‡ä»¶çš„ç¼–å†™æœ‰å¤šç§å½¢å¼ï¼Œè¿™é‡Œå†™çš„åªæ˜¯æˆ‘ä»¬å½“æ—¶ç”¨çš„é‚£ç§ï¼Œå…¶ä»–ç¼–å†™å½¢å¼ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ ä»ä¸Šé¢çš„.cæ–‡ä»¶ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„æ¯ä¸€ä¸ª.céƒ½è°ƒç”¨äº†ä¸¤ä¸ªå¤´æ–‡ä»¶ã€‚ ä¸€ä¸ªæ˜¯åŒæ ·çš„common.hï¼Œä¸€ä¸ªæ˜¯ä¸å…¶æ–‡ä»¶åç›¸åŒçš„ .hæ–‡ä»¶ã€‚ testçš„common.hå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1234567891011#ifndef _COMMON_H_#define _COMMON_H_#include&lt;graphics.h&gt;#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;#include&lt;bios.h&gt;#include&lt;dos.h&gt;#include\"mouse.h\"#endif æˆ‘ä»¬ç”¨common.hè£…äº†æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„åº“æ–‡ä»¶å’Œé¼ æ ‡å¤´æ–‡ä»¶ï¼Œæ¯æ¬¡æœ‰æ–°è°ƒç”¨çš„åº“æ–‡ä»¶å°±åŠ è¿›å»ï¼Œè¿™æ ·æ¯ä¸ª.cæ–‡ä»¶éƒ½åªè¦è°ƒç”¨common.hï¼Œä¸éœ€è¦å†é‡æ–°å†™è°ƒç”¨çš„åº“æ–‡ä»¶ã€‚ å¦ä¸€ç§æ˜¯ä¸æ–‡ä»¶åç›¸åŒçš„ .hæ–‡ä»¶ï¼Œä»¥main.hä¸ºä¾‹ã€‚ 123456789#ifndef _MAIN_H_#define _MAIN_H_#include \"page1.h\"#include \"page2.h\"void main(void);#endif ä¸æ–‡ä»¶åç›¸åŒçš„ .hæ–‡ä»¶åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯å…¶è°ƒç”¨çš„ä½äºå…¶ä»–æ–‡ä»¶çš„å‡½æ•°çš„å¤´æ–‡ä»¶ï¼Œå¦‚mainä¸­è°ƒç”¨äº†p1()å’Œp2()åˆ†åˆ«ä½äºpage1.hå’Œpage2.hï¼›ç¬¬äºŒéƒ¨åˆ†æ˜¯è¯¥.cæ–‡ä»¶ä¸­æ‰€æœ‰çš„å‡½æ•°ã€‚ è¿™æ ·æˆ‘ä»¬å°±æ­å»ºäº†ä¸€ä¸ªæœ‰ä¸¤ä¸ªé¡µé¢çš„ç®€å•å·¥ç¨‹ã€‚ æœ€åç¥å­¦å¼Ÿå­¦å¦¹ä»¬â€œ0 warning, 0 error.â€ï¼Œä¹‹åçš„è·¯å°±è¦é å­¦å¼Ÿå­¦å¦¹ä»¬è‡ªå·±å»æ¢ç´¢ï¼Œè€å¦ˆå­å­¦å§å°±ä¸å†åºŸè¯å•¦ã€‚","categories":[{"name":"C","slug":"C","permalink":"https://gy23333.github.io/categories/C/"}],"tags":[{"name":"å…¥é—¨","slug":"å…¥é—¨","permalink":"https://gy23333.github.io/tags/%E5%85%A5%E9%97%A8/"},{"name":"åç§‘è‡ªåŠ¨åŒ–","slug":"åç§‘è‡ªåŠ¨åŒ–","permalink":"https://gy23333.github.io/tags/%E5%8D%8E%E7%A7%91%E8%87%AA%E5%8A%A8%E5%8C%96/"},{"name":"Cè¯­è¨€è¯¾ç¨‹è®¾è®¡","slug":"Cè¯­è¨€è¯¾ç¨‹è®¾è®¡","permalink":"https://gy23333.github.io/tags/C%E8%AF%AD%E8%A8%80%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/"},{"name":"BorlandC","slug":"BorlandC","permalink":"https://gy23333.github.io/tags/BorlandC/"}]},{"title":"Macä½¿ç”¨Matlabå¡é¡¿ä¸¥é‡ä¸”é—ªé€€çš„è§£å†³åŠæ³•","slug":"Macä½¿ç”¨Matlabå¡é¡¿ä¸¥é‡ä¸”é—ªé€€çš„è§£å†³åŠæ³•","date":"2019-12-16T13:39:02.000Z","updated":"2024-11-11T03:57:58.127Z","comments":true,"path":"2019/12/16/Macä½¿ç”¨Matlabå¡é¡¿ä¸¥é‡ä¸”é—ªé€€çš„è§£å†³åŠæ³•/","link":"","permalink":"https://gy23333.github.io/2019/12/16/Mac%E4%BD%BF%E7%94%A8Matlab%E5%8D%A1%E9%A1%BF%E4%B8%A5%E9%87%8D%E4%B8%94%E9%97%AA%E9%80%80%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","excerpt":"é—®é¢˜å®‰è£…Matlabåå‘ç°ä½¿ç”¨æ—¶ååˆ†å¡é¡¿ä¸”æ˜“é—ªé€€ã€‚","text":"é—®é¢˜å®‰è£…Matlabåå‘ç°ä½¿ç”¨æ—¶ååˆ†å¡é¡¿ä¸”æ˜“é—ªé€€ã€‚ è§£å†³æ–¹æ³•å…³é—­ â€œMathWorksæºä»£ç ç®¡ç†é›†æˆâ€ã€‚ 1ã€æ‰“å¼€ â€œä¸»é¡µ &gt; ç¯å¢ƒ &gt; é¢„è®¾â€ï¼› 2ã€æ‰“å¼€ â€œå¸¸è§„ &gt; åŸä»£ç ç®¡ç†â€ï¼Œé€‰æ‹© â€œæ— â€ã€‚ é—®é¢˜è§£å†³ã€‚","categories":[{"name":"è¸©å‘è®°å½•","slug":"è¸©å‘è®°å½•","permalink":"https://gy23333.github.io/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Mac","slug":"Mac","permalink":"https://gy23333.github.io/tags/Mac/"},{"name":"MATLAB","slug":"MATLAB","permalink":"https://gy23333.github.io/tags/MATLAB/"}]},{"title":"Cannyè¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼ˆC++å®ç°ï¼‰","slug":"Cannyè¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼ˆC++å®ç°ï¼‰","date":"2019-12-16T12:50:50.000Z","updated":"2024-11-11T03:57:58.122Z","comments":true,"path":"2019/12/16/Cannyè¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼ˆC++å®ç°ï¼‰/","link":"","permalink":"https://gy23333.github.io/2019/12/16/Canny%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B%E7%AE%97%E6%B3%95%EF%BC%88C++%E5%AE%9E%E7%8E%B0%EF%BC%89/","excerpt":"æ­¥éª¤ ç”¨é«˜æ–¯æ»¤æ³¢å™¨å¹³æ»‘å›¾åƒï¼› ç”¨ä¸€é˜¶åå¯¼æœ‰é™å·®åˆ†è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ï¼› å¯¹æ¢¯åº¦å¹…å€¼åº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼› ç”¨åŒé˜ˆå€¼ç®—æ³•æ£€æµ‹å’Œè¿æ¥è¾¹ç¼˜ã€‚","text":"æ­¥éª¤ ç”¨é«˜æ–¯æ»¤æ³¢å™¨å¹³æ»‘å›¾åƒï¼› ç”¨ä¸€é˜¶åå¯¼æœ‰é™å·®åˆ†è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ï¼› å¯¹æ¢¯åº¦å¹…å€¼åº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼› ç”¨åŒé˜ˆå€¼ç®—æ³•æ£€æµ‹å’Œè¿æ¥è¾¹ç¼˜ã€‚ openCVåœ¨C++ä¸­çš„åº”ç”¨é¦–å…ˆï¼Œåœ¨macçš„Xcodeä¸Šå®‰è£…é…ç½®openCVåº“ï¼Œå‚è€ƒä¸€ä¸‹é“¾æ¥ï¼ˆç§‘å­¦ä¸Šç½‘è®¿é—®ï¼‰https://medium.com/@jaskaranvirdi/setting-up-opencv-and-c-development-environment-in-xcode-b6027728003 1using namespace cv; // ä½¿ç”¨å‘½åç©ºé—´cv å¦‚æ­¤å¯ä»¥å‡å°‘è¾“å…¥ï¼Œä¾‹å¦‚ cv :: Mat å°±å¯çœç•¥ä¸º Mat MatMatçš„ä¼˜ç‚¹æ˜¯ä¸å†éœ€è¦æ‰‹åŠ¨åˆ†é…å…¶å†…å­˜ï¼Œå¹¶åœ¨ä¸éœ€è¦å®ƒæ—¶ç«‹å³å‘å¸ƒå®ƒã€‚åœ¨æ‰§è¡Œæ­¤æ“ä½œä»ç„¶æ˜¯å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°OpenCVåŠŸèƒ½å°†è‡ªåŠ¨åˆ†é…å…¶è¾“å‡ºæ•°æ®ã€‚ Matä½œä¸ºä¸€ä¸ªç±»ï¼ŒåŒ…å« çŸ©é˜µå¤´ï¼ˆåŒ…å«çŸ©é˜µçš„å¤§å°ï¼Œç”¨äºå­˜å‚¨çš„æ–¹æ³•ï¼Œå­˜å‚¨åœ¨å“ªä¸ªåœ°å€çš„ä¿¡æ¯ç­‰ç­‰ï¼‰ æŒ‡å‘åŒ…å«åƒç´ å€¼ï¼ˆå–å†³äºæ‰€é€‰å­˜å‚¨æ–¹æ³•çš„ä»»ä½•ç»´åº¦ï¼‰ ä»æ–‡ä»¶ä¸­åŠ è½½å›¾åƒï¼š 1Mat img = imread(filename); å¦‚æœéœ€è¦åŠ è½½ç°åº¦å›¾ï¼š 1Mat img = imread(filename, IMREAD_GRAYSCALE); æ˜¾ç¤ºå›¾åƒï¼š 12namedWindow(\"å›¾ç‰‡\"); //æ‰“å¼€åä¸ºâ€œå›¾ç‰‡â€çš„çª—å£imshow(\"å›¾ç‰‡\", img); //æ˜¾ç¤ºå›¾åƒ openCVåŠ è½½å›¾åƒæ˜¾ç¤º 123456789101112using namespace cv; // ä½¿ç”¨å‘½åç©ºé—´cvint main()&#123; Mat img = imread(\"building.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ //æ˜¾ç¤ºå›¾åƒ namedWindow(\"åŸå›¾\"); imshow(\"åŸå›¾\", img); waitKey(); //ç­‰å¾…é”®å€¼è¾“å…¥ return 0;&#125; å¦‚ä½•è®¿é—®å›¾åƒæ¯ä¸€ä¸ªåƒç´ ç‚¹åˆ©ç”¨æŒ‡é’ˆè®¿é—®ï¼Œè°ƒç”¨ Mat::ptr(i) æ¥è·å–ç¬¬iè¡Œçš„é¦–åœ°å€ï¼Œé€šè¿‡å¾ªç¯è¿›è¡Œè®¿é—®ã€‚ 123456// æŒ‰è¡Œéå†æ‰€æœ‰ç‚¹(å•é€šé“)for (int j = 0; j &lt; nr; j++) &#123; for (int i = 0; i &lt; nc; i++) &#123; //æ¯ä¸ªç‚¹ä¸º img.ptr&lt;uchar&gt;(j)[i] &#125;&#125; ç”¨é«˜æ–¯æ»¤æ³¢å™¨å¹³æ»‘å›¾åƒé«˜æ–¯æ»¤æ³¢å™¨ï¼ˆopenCVï¼‰openCVè‡ªå¸¦çš„é«˜æ–¯æ»¤æ³¢å™¨ï¼šcv :: GaussianBlur void cv::GaussianBlur ( InputArray src, OutputArray dst, Size ksize, double sigmaX, double sigmaY = 0, int borderType = BORDER_DEFAULT ) include ä½¿ç”¨é«˜æ–¯æ»¤é•œæ¨¡ç³Šå›¾åƒã€‚ è¯¥å‡½æ•°å°†æºå›¾åƒä¸æŒ‡å®šçš„é«˜æ–¯å†…æ ¸è¿›è¡Œå·ç§¯ã€‚æ”¯æŒå°±åœ°è¿‡æ»¤ã€‚ å‚é‡ src è¾“å…¥å›¾åƒï¼›å›¾åƒå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„é€šé“ï¼Œè¿™äº›é€šé“å¯ä»¥ç‹¬ç«‹å¤„ç†ï¼Œä½†æ·±åº¦åº”ä¸ºCV_8Uï¼ŒCV_16Uï¼ŒCV_16Sï¼ŒCV_32Fæˆ–CV_64Fã€‚ dst è¾“å‡ºä¸srcå¤§å°å’Œç±»å‹ç›¸åŒçš„å›¾åƒã€‚ size é«˜æ–¯æ ¸å¤§å°ã€‚ksize.widthå’Œksize.heightå¯ä»¥ä¸åŒï¼Œä½†å®ƒä»¬éƒ½å¿…é¡»ä¸ºæ­£æ•°å’Œå¥‡æ•°ã€‚æˆ–è€…ï¼Œå®ƒä»¬å¯ä»¥ä¸ºé›¶ï¼Œç„¶åæ ¹æ®sigmaè®¡ç®—å¾—å‡ºã€‚ sigmaX Xæ–¹å‘ä¸Šçš„é«˜æ–¯æ ¸æ ‡å‡†åå·®ã€‚ sigmaY Yæ–¹å‘çš„é«˜æ–¯æ ¸æ ‡å‡†å·®ï¼›å¦‚æœsigmaYä¸ºé›¶ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸ºç­‰äºsigmaXï¼›å¦‚æœä¸¤ä¸ªsigmasä¸ºé›¶ï¼Œåˆ™åˆ†åˆ«ä»ksize.widthå’Œksize.heightè®¡ç®—å¾—å‡ºï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§getGaussianKernelï¼‰ï¼›ä¸ºäº†å®Œå…¨æ§åˆ¶ç»“æœï¼Œè€Œä¸ç®¡å°†æ¥å¯èƒ½å¯¹æ‰€æœ‰è¿™äº›è¯­ä¹‰è¿›è¡Œçš„ä¿®æ”¹ï¼Œå»ºè®®æŒ‡å®šæ‰€æœ‰ksizeï¼ŒsigmaXå’ŒsigmaYã€‚ borderType åƒç´ å¤–æ¨æ–¹æ³•ï¼Œè¯·å‚è§BorderTypes é«˜æ–¯æ»¤æ³¢å™¨çš„C++å®ç° å¯¹å›¾åƒä½¿ç”¨ä¸€ç»´é«˜æ–¯å·ç§¯æ¨¡ç‰ˆï¼Œåœ¨ä¸€ä¸ªæ–¹å‘ä¸Šè¿›è¡Œæ»¤æ³¢ï¼ˆä¾‹å¦‚æ°´å¹³æ–¹å‘ï¼‰ï¼› è½¬ç½®å›¾åƒï¼› å¯¹è½¬ç½®åçš„å›¾åƒä½¿ç”¨åŒä¸€ä¸ªé«˜æ–¯å·ç§¯æ¨¡ç‰ˆï¼Œåœ¨åŒæ ·çš„æ–¹å‘ä¸Šè¿›è¡Œæ»¤æ³¢ï¼› å°†å›¾åƒè½¬ç½®å›åŸæ¥çš„ä½ç½®ï¼Œå¾—åˆ°äºŒç»´é«˜æ–¯æ»¤æ³¢çš„å›¾åƒã€‚ ä¸€ç»´é«˜æ–¯å·ç§¯æ¨¡ç‰ˆå¯ä»¥ç”±äºŒé¡¹å¼å±•å¼€çš„ç³»æ•°æ¥æ¨¡æ‹Ÿï¼Œå¦‚3*3æ¨¡ç‰ˆ: 1/4 * [1 2 1] 123456789101112131415161718192021222324252627282930313233343536373839404142/** é«˜æ–¯æ»¤æ³¢å™¨ï¼Œåˆ©ç”¨3*3çš„é«˜æ–¯æ¨¡ç‰ˆè¿›è¡Œé«˜æ–¯å·ç§¯ img è¾“å…¥åŸå›¾åƒ dst é«˜æ–¯æ»¤æ³¢åçš„è¾“å‡ºå›¾åƒ*/void gaussianFilter(Mat &amp;img, Mat &amp;dst) &#123; // å¯¹æ°´å¹³æ–¹å‘è¿›è¡Œæ»¤æ³¢ Mat dst1 = img.clone(); gaussianConvolution(img, dst1); //å›¾åƒçŸ©é˜µè½¬ç½® Mat dst2; transpose(dst1, dst2); // å¯¹å‚ç›´æ–¹å‘è¿›è¡Œæ»¤æ³¢ Mat dst3 = dst2.clone(); gaussianConvolution(dst2, dst3); // å†æ¬¡è½¬ç½® transpose(dst3, dst);&#125;/** ä¸€ç»´é«˜æ–¯å·ç§¯ï¼Œå¯¹æ¯è¡Œè¿›è¡Œé«˜æ–¯å·ç§¯ img è¾“å…¥åŸå›¾åƒ dst ä¸€ç»´é«˜æ–¯å·ç§¯åçš„è¾“å‡ºå›¾åƒ */void gaussianConvolution(Mat &amp;img, Mat &amp;dst) &#123; int nr = img.rows; int nc = img.cols; int templates[3] = &#123;1, 2, 1&#125;; // æŒ‰è¡Œéå†é™¤æ¯è¡Œè¾¹ç¼˜ç‚¹çš„æ‰€æœ‰ç‚¹ for (int j = 0; j &lt; nr; j++) &#123; uchar* data= img.ptr&lt;uchar&gt;(j); //æå–è¯¥è¡Œåœ°å€ for (int i = 1; i &lt; nc-1; i++) &#123; int sum = 0; for (int n = 0; n &lt; 3; n++) &#123; sum += data[i-1+n] * templates[n]; //ç›¸ç§°ç´¯åŠ  &#125; sum /= 4; dst.ptr&lt;uchar&gt;(j)[i] = sum; &#125; &#125;&#125; é«˜æ–¯æ»¤æ³¢å‰åçš„å›¾åƒï¼š é«˜æ–¯æ»¤æ³¢ ç”¨ä¸€é˜¶åå¯¼æœ‰é™å·®åˆ†è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ç”¨ä¸€é˜¶åå¯¼æœ‰é™å·®åˆ†è®¡ç®—åå¯¼æ•°çš„ä¸¤ä¸ªé˜µåˆ—Pä¸Q å†ç”±På’ŒQç®—å‡ºæ¢¯åº¦å¹…å€¼å’Œæ–¹å‘è§’ 12345678910111213141516171819/** ç”¨ä¸€é˜¶åå¯¼æœ‰é™å·®åˆ†è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ img è¾“å…¥åŸå›¾åƒ gradXY è¾“å‡ºçš„æ¢¯åº¦å¹…å€¼ theta è¾“å‡ºçš„æ¢¯åº¦æ–¹å‘ */void getGrandient (Mat &amp;img, Mat &amp;gradXY, Mat &amp;theta) &#123; gradXY = Mat::zeros(img.size(), CV_8U); theta = Mat::zeros(img.size(), CV_8U); for (int i = 0; i &lt; img.rows-1; i++) &#123; for (int j = 0; j &lt; img.cols-1; j++) &#123; double p = (img.ptr&lt;uchar&gt;(j)[i+1] - img.ptr&lt;uchar&gt;(j)[i] + img.ptr&lt;uchar&gt;(j+1)[i+1] - img.ptr&lt;uchar&gt;(j+1)[i])/2; double q = (img.ptr&lt;uchar&gt;(j+1)[i] - img.ptr&lt;uchar&gt;(j)[i] + img.ptr&lt;uchar&gt;(j+1)[i+1] - img.ptr&lt;uchar&gt;(j)[i+1])/2; gradXY.ptr&lt;uchar&gt;(j)[i] = sqrt(p*p + q*q); //è®¡ç®—æ¢¯åº¦ theta.ptr&lt;uchar&gt;(j)[i] = atan(q/p); &#125; &#125;&#125; æ­¤æ—¶è¾“å…¥è¾“å‡ºå›¾åƒä¸ºï¼š äºŒç»´æ¢¯åº¦ç®—æ³• å¯ä»¥çœ‹å‡ºï¼ŒäºŒç»´è®¡ç®—æ¢¯åº¦åªåŒºåˆ†å‡ºäº†éƒ¨åˆ†è¾¹ç•Œï¼Œè¾¹ç•ŒæŸå¤±è¿‡å¤§ï¼Œäºæ˜¯é‡‡ç”¨ä¸‰ç»´ç®—æ³•è®¡ç®—æ¢¯åº¦((y,x)ä¸ºa11)ã€‚ a00 a01 a02 a10 a11 a12 a20 a21 a22 1234567891011121314151617181920212223double gradX = double(a02 + 2 * a12 + a22 - a00 - 2 * a10 - a20);double gradY = double(a00 + 2 * a01 + a02 - a20 - 2 * a21 - a22);/** ç”¨ä¸€é˜¶åå¯¼æœ‰é™å·®åˆ†è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ img è¾“å…¥åŸå›¾åƒ gradXY è¾“å‡ºçš„æ¢¯åº¦å¹…å€¼ theta è¾“å‡ºçš„æ¢¯åº¦æ–¹å‘ */void getGrandient (Mat &amp;img, Mat &amp;gradXY, Mat &amp;theta) &#123; gradXY = Mat::zeros(img.size(), CV_8U); theta = Mat::zeros(img.size(), CV_8U); for (int j = 1; j &lt; img.rows-1; j++) &#123; for (int i = 1; i &lt; img.cols-1; i++) &#123; double gradY = double(img.ptr&lt;uchar&gt;(j-1)[i-1] + 2 * img.ptr&lt;uchar&gt;(j-1)[i] + img.ptr&lt;uchar&gt;(j-1)[i+1] - img.ptr&lt;uchar&gt;(j+1)[i-1] - 2 * img.ptr&lt;uchar&gt;(j+1)[i] - img.ptr&lt;uchar&gt;(j+1)[i+1]); double gradX = double(img.ptr&lt;uchar&gt;(j-1)[i+1] + 2 * img.ptr&lt;uchar&gt;(j)[i+1] + img.ptr&lt;uchar&gt;(j+1)[i+1] - img.ptr&lt;uchar&gt;(j-1)[i-1] - 2 * img.ptr&lt;uchar&gt;(j)[i-1] - img.ptr&lt;uchar&gt;(j+1)[i-1]); gradXY.ptr&lt;uchar&gt;(j)[i] = sqrt(gradX*gradX + gradY*gradY); //è®¡ç®—æ¢¯åº¦ theta.ptr&lt;uchar&gt;(j)[i] = atan(gradY/gradX); //è®¡ç®—æ¢¯åº¦æ–¹å‘ &#125; &#125;&#125; ä¸‰ç»´æ¢¯åº¦ç®—æ³•çš„è¾“å…¥è¾“å‡ºå›¾åƒï¼š ä¸‰ç»´æ¢¯åº¦ç®—æ³• å¯¹æ¢¯åº¦å¹…å€¼åº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ä»…ä»…å¾—åˆ°å…¨å±€æ¢¯åº¦å¹¶ä¸è¶³ä»¥ç¡®å®šè¾¹ç¼˜ï¼Œä¿ç•™å±€éƒ¨æ¢¯åº¦æœ€å¤§çš„ç‚¹ï¼Œè€ŒæŠ‘åˆ¶éæå¤§ç‚¹ã€‚å°†æ¢¯åº¦è§’çš„å˜åŒ–èŒƒå›´å‡å°åˆ°åœ†å‘¨çš„å››ä¸ªæ‰‡åŒºä¹‹ä¸€ï¼› å››ä¸ªæ‰‡åŒºçš„æ ‡å·ä¸º0åˆ°3ï¼Œå¯¹åº”3*3é¢†åŸŸçš„å››ç§å¯èƒ½ç»„åˆæ–¹å‘ï¼› æ¯ä¸€ä¸ªç‚¹ä¸Šé¢†åŸŸçš„ä¸­å¿ƒåƒç´ Mä¸æ²¿ç€æ¢¯åº¦çº¿çš„ä¸¤ä¸ªåƒç´ æ¯”è¾ƒï¼› å¦‚æœMæ¢¯åº¦å€¼ä¸æ¯”æ²¿æ¢¯åº¦çº¿çš„ä¸¤ä¸ªç›¸é‚»åƒç´ æ¢¯åº¦å€¼å¤§ï¼Œåˆ™ä»¤M=0ã€‚ ç”± atan() å¾—åˆ°çš„è§’åº¦åœ¨ èŒƒå›´å†…ï¼Œå°†æ­¤èŒƒå›´å‡åˆ†ä¸ºå››ä¸ªç­‰ä»½ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839/** å±€éƒ¨éæå¤§å€¼æŠ‘åˆ¶ gradXY è¾“å…¥çš„æ¢¯åº¦å¹…å€¼ theta è¾“å…¥çš„æ¢¯åº¦æ–¹å‘ dst è¾“å‡ºçš„ç»å±€éƒ¨éæå¤§å€¼æŠ‘åˆ¶åçš„å›¾åƒ */void nonLocalMaxValue (Mat &amp;gradXY, Mat &amp;theta, Mat &amp;dst) &#123; dst = gradXY.clone(); for (int j = 1; j &lt; gradXY.rows-1; j++) &#123; for (int i = 1; i &lt; gradXY.cols-1; i++) &#123; double t = double(theta.ptr&lt;uchar&gt;(j)[i]); double g = double(dst.ptr&lt;uchar&gt;(j)[i]); if (g == 0.0) &#123; continue; &#125; double g0, g1; if ((t &gt;= -(3*M_PI/8)) &amp;&amp; (t &lt; -(M_PI/8))) &#123; g0 = double(dst.ptr&lt;uchar&gt;(j-1)[i-1]); g1 = double(dst.ptr&lt;uchar&gt;(j+1)[i+1]); &#125; else if ((t &gt;= -(M_PI/8)) &amp;&amp; (t &lt; M_PI/8)) &#123; g0 = double(dst.ptr&lt;uchar&gt;(j)[i-1]); g1 = double(dst.ptr&lt;uchar&gt;(j)[i+1]); &#125; else if ((t &gt;= M_PI/8) &amp;&amp; (t &lt; 3*M_PI/8)) &#123; g0 = double(dst.ptr&lt;uchar&gt;(j-1)[i+1]); g1 = double(dst.ptr&lt;uchar&gt;(j+1)[i-1]); &#125; else &#123; g0 = double(dst.ptr&lt;uchar&gt;(j-1)[i]); g1 = double(dst.ptr&lt;uchar&gt;(j+1)[i]); &#125; if (g &lt;= g0 || g &lt;= g1) &#123; dst.ptr&lt;uchar&gt;(j)[i] = 0.0; &#125; &#125; &#125;&#125; è¾“å…¥çš„ç»æ¢¯åº¦è®¡ç®—åçš„å›¾åƒå’Œè¾“å‡ºçš„å±€éƒ¨éæå¤§å€¼æŠ‘åˆ¶åçš„å›¾åƒï¼š å±€éƒ¨éæå¤§å€¼æŠ‘åˆ¶ ç”¨åŒé˜ˆå€¼ç®—æ³•æ£€æµ‹å’Œè¿æ¥è¾¹ç¼˜1ã€Cannyç®—æ³•é‡‡ç”¨åŒé˜ˆå€¼ï¼Œé«˜é˜ˆå€¼ä¸€èˆ¬æ˜¯ä½é˜ˆå€¼çš„ä¸¤å€ï¼Œéå†æ‰€æœ‰åƒç´ ç‚¹ï¼š X &lt; ä½é˜ˆå€¼ ï¼Œåƒç´ ç‚¹ç½®0ï¼Œè¢«æŠ‘åˆ¶æ‰ï¼› ä½é˜ˆå€¼ &lt; X &lt;é«˜é˜ˆå€¼ï¼Œåƒç´ ç‚¹ä¸ºå¼±è¾¹ç¼˜ç‚¹ï¼Œåƒç´ ç‚¹å€¼å…ˆä¸å˜ï¼› X &gt; é«˜é˜ˆå€¼ï¼Œåƒç´ ç‚¹ä¸ºå¼ºè¾¹ç¼˜ç‚¹ï¼Œç½®255ã€‚ 2ã€å¼±è¾¹ç¼˜ç‚¹è¡¥å……è¿æ¥å¼ºè¾¹ç¼˜ç‚¹ï¼š å¦‚æœå¼±è¾¹ç¼˜ç‚¹çš„8é‚»ç‚¹åŸŸå­˜åœ¨å¼ºè¾¹ç¼˜ç‚¹ï¼Œåˆ™å°†æ­¤ç‚¹ç½®255ï¼Œç”¨ä»¥è¿æ¥å¼ºè¾¹ç¼˜ç‚¹ï¼›å¦‚æœä¸å­˜åœ¨å¼ºè¾¹ç¼˜ç‚¹ï¼Œåˆ™è¿™æ˜¯ä¸€ä¸ªå­¤ç«‹çš„å¼±è¾¹ç¼˜ç‚¹ï¼Œæ­¤ç‚¹ç½®0ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/** ç”¨åŒé˜ˆå€¼ç®—æ³•æ£€æµ‹å’Œè¿æ¥è¾¹ç¼˜ low è¾“å…¥çš„ä½é˜ˆå€¼ high è¾“å…¥çš„é«˜é˜ˆå€¼ img è¾“å…¥çš„åŸå›¾åƒ dst è¾“å‡ºçš„ç”¨åŒé˜ˆå€¼ç®—æ³•æ£€æµ‹å’Œè¿æ¥è¾¹ç¼˜åçš„å›¾åƒ */void doubleThreshold (double low, double high, Mat &amp;img, Mat &amp;dst) &#123; dst = img.clone(); // åŒºåˆ†å‡ºå¼±è¾¹ç¼˜ç‚¹å’Œå¼ºè¾¹ç¼˜ç‚¹ for (int j = 0; j &lt; img.rows-1; j++) &#123; for (int i = 0; i &lt; img.cols-1; i++) &#123; double x = double(dst.ptr&lt;uchar&gt;(j)[i]); // åƒç´ ç‚¹ä¸ºå¼ºè¾¹ç¼˜ç‚¹ï¼Œç½®255 if (x &gt; high) &#123; dst.ptr&lt;uchar&gt;(j)[i] = 255; &#125; // åƒç´ ç‚¹ç½®0ï¼Œè¢«æŠ‘åˆ¶æ‰ else if (x &lt; low) &#123; dst.ptr&lt;uchar&gt;(j)[i] = 0; &#125; &#125; &#125; // å¼±è¾¹ç¼˜ç‚¹è¡¥å……è¿æ¥å¼ºè¾¹ç¼˜ç‚¹ doubleThresholdLink(dst);&#125;/** å¼±è¾¹ç¼˜ç‚¹è¡¥å……è¿æ¥å¼ºè¾¹ç¼˜ç‚¹ img å¼±è¾¹ç¼˜ç‚¹è¡¥å……è¿æ¥å¼ºè¾¹ç¼˜ç‚¹çš„è¾“å…¥å’Œè¾“å‡ºå›¾åƒ */void doubleThresholdLink (Mat &amp;img) &#123; // å¾ªç¯æ‰¾åˆ°å¼ºè¾¹ç¼˜ç‚¹ï¼ŒæŠŠå…¶é¢†åŸŸå†…çš„å¼±è¾¹ç¼˜ç‚¹å˜ä¸ºå¼ºè¾¹ç¼˜ç‚¹ for (int j = 1; j &lt; img.rows-2; j++) &#123; for (int i = 1; i &lt; img.cols-2; i++) &#123; // å¦‚æœè¯¥ç‚¹æ˜¯å¼ºè¾¹ç¼˜ç‚¹ if (img.ptr&lt;uchar&gt;(j)[i] == 255) &#123; // éå†è¯¥å¼ºè¾¹ç¼˜ç‚¹é¢†åŸŸ for (int m = -1; m &lt; 1; m++) &#123; for (int n = -1; n &lt; 1; n++) &#123; // è¯¥ç‚¹ä¸ºå¼±è¾¹ç¼˜ç‚¹ï¼ˆä¸æ˜¯å¼ºè¾¹ç¼˜ç‚¹ï¼Œä¹Ÿä¸æ˜¯è¢«æŠ‘åˆ¶çš„0ç‚¹ï¼‰ if (img.ptr&lt;uchar&gt;(j+m)[i+n] != 0 &amp;&amp; img.ptr&lt;uchar&gt;(j+m)[i+n] != 255) &#123; img.ptr&lt;uchar&gt;(j+m)[i+n] = 255; //è¯¥å¼±è¾¹ç¼˜ç‚¹è¡¥å……ä¸ºå¼ºè¾¹ç¼˜ç‚¹ &#125; &#125; &#125; &#125; &#125; &#125; for (int j = 0; j &lt; img.rows-1; j++) &#123; for (int i = 0; i &lt; img.cols-1; i++) &#123; // å¦‚æœè¯¥ç‚¹ä¾æ—§æ˜¯å¼±è¾¹ç¼˜ç‚¹ï¼ŒåŠæ­¤ç‚¹æ˜¯å­¤ç«‹è¾¹ç¼˜ç‚¹ if (img.ptr&lt;uchar&gt;(j)[i] != 255 &amp;&amp; img.ptr&lt;uchar&gt;(j)[i] != 255) &#123; img.ptr&lt;uchar&gt;(j)[i] = 0; //è¯¥å­¤ç«‹å¼±è¾¹ç¼˜ç‚¹æŠ‘åˆ¶ &#125; &#125; &#125;&#125; åŒé˜ˆå€¼ç®—æ³•å‰åçš„è¾“å…¥è¾“å‡ºå›¾åƒ ï¼š åŒé˜ˆå€¼ç®—æ³• Cannyè¾¹ç¼˜æ£€æµ‹ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232#include &lt;opencv2/opencv.hpp&gt;#include &lt;math.h&gt; #define _USE_MATH_DEFINES using namespace cv;// ä½¿ç”¨å‘½åç©ºé—´cv /** å°†ä¸¤ä¸ªå›¾åƒæ‹¼æ¥ï¼Œä»¥ä¾¿åœ¨åŒä¸€ä¸ªçª—å£æ˜¾ç¤º dst è¾“å‡ºçš„æ‹¼æ¥åçš„å›¾åƒ src1 æ‹¼æ¥çš„ç¬¬ä¸€å¹…å›¾ src2 æ‹¼æ¥çš„ç¬¬äºŒå¹…å›¾ */void mergeImg(Mat &amp; dst,Mat &amp;src1,Mat &amp;src2) &#123; int rows = src1.rows; int cols = src1.cols+5+src2.cols; CV_Assert(src1.type () == src2.type ()); dst.create (rows,cols,src1.type ()); src1.copyTo (dst(Rect(0,0,src1.cols,src1.rows))); src2.copyTo (dst(Rect(src1.cols+5,0,src2.cols,src2.rows)));&#125; /** ä¸€ç»´é«˜æ–¯å·ç§¯ï¼Œå¯¹æ¯è¡Œè¿›è¡Œé«˜æ–¯å·ç§¯ img è¾“å…¥åŸå›¾åƒ dst ä¸€ç»´é«˜æ–¯å·ç§¯åçš„è¾“å‡ºå›¾åƒ */void gaussianConvolution(Mat &amp;img, Mat &amp;dst) &#123; int nr = img.rows; int nc = img.cols; int templates[3] = &#123;1, 2, 1&#125;; // æŒ‰è¡Œéå†é™¤æ¯è¡Œè¾¹ç¼˜ç‚¹çš„æ‰€æœ‰ç‚¹ for (int j = 0; j &lt; nr; j++) &#123; uchar* data= img.ptr&lt;uchar&gt;(j); //æå–è¯¥è¡Œåœ°å€ for (int i = 1; i &lt; nc-1; i++) &#123; int sum = 0; for (int n = 0; n &lt; 3; n++) &#123; sum += data[i-1+n] * templates[n]; //ç›¸ç§°ç´¯åŠ  &#125; sum /= 4; dst.ptr&lt;uchar&gt;(j)[i] = sum; &#125; &#125;&#125; /** é«˜æ–¯æ»¤æ³¢å™¨ï¼Œåˆ©ç”¨3*3çš„é«˜æ–¯æ¨¡ç‰ˆè¿›è¡Œé«˜æ–¯å·ç§¯ img è¾“å…¥åŸå›¾åƒ dst é«˜æ–¯æ»¤æ³¢åçš„è¾“å‡ºå›¾åƒ*/void gaussianFilter(Mat &amp;img, Mat &amp;dst) &#123; // å¯¹æ°´å¹³æ–¹å‘è¿›è¡Œæ»¤æ³¢ Mat dst1 = img.clone(); gaussianConvolution(img, dst1); //å›¾åƒçŸ©é˜µè½¬ç½® Mat dst2; transpose(dst1, dst2); // å¯¹å‚ç›´æ–¹å‘è¿›è¡Œæ»¤æ³¢ Mat dst3 = dst2.clone(); gaussianConvolution(dst2, dst3); // å†æ¬¡è½¬ç½® transpose(dst3, dst);&#125; /** ç”¨ä¸€é˜¶åå¯¼æœ‰é™å·®åˆ†è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ img è¾“å…¥åŸå›¾åƒ gradXY è¾“å‡ºçš„æ¢¯åº¦å¹…å€¼ theta è¾“å‡ºçš„æ¢¯åº¦æ–¹å‘ */void getGrandient (Mat &amp;img, Mat &amp;gradXY, Mat &amp;theta) &#123; gradXY = Mat::zeros(img.size(), CV_8U); theta = Mat::zeros(img.size(), CV_8U); for (int j = 1; j &lt; img.rows-1; j++) &#123; for (int i = 1; i &lt; img.cols-1; i++) &#123; double gradY = double(img.ptr&lt;uchar&gt;(j-1)[i-1] + 2 * img.ptr&lt;uchar&gt;(j-1)[i] + img.ptr&lt;uchar&gt;(j-1)[i+1] - img.ptr&lt;uchar&gt;(j+1)[i-1] - 2 * img.ptr&lt;uchar&gt;(j+1)[i] - img.ptr&lt;uchar&gt;(j+1)[i+1]); double gradX = double(img.ptr&lt;uchar&gt;(j-1)[i+1] + 2 * img.ptr&lt;uchar&gt;(j)[i+1] + img.ptr&lt;uchar&gt;(j+1)[i+1] - img.ptr&lt;uchar&gt;(j-1)[i-1] - 2 * img.ptr&lt;uchar&gt;(j)[i-1] - img.ptr&lt;uchar&gt;(j+1)[i-1]); gradXY.ptr&lt;uchar&gt;(j)[i] = sqrt(gradX*gradX + gradY*gradY); //è®¡ç®—æ¢¯åº¦ theta.ptr&lt;uchar&gt;(j)[i] = atan(gradY/gradX); //è®¡ç®—æ¢¯åº¦æ–¹å‘ &#125; &#125;&#125; /** å±€éƒ¨éæå¤§å€¼æŠ‘åˆ¶ gradXY è¾“å…¥çš„æ¢¯åº¦å¹…å€¼ theta è¾“å…¥çš„æ¢¯åº¦æ–¹å‘ dst è¾“å‡ºçš„ç»å±€éƒ¨éæå¤§å€¼æŠ‘åˆ¶åçš„å›¾åƒ */void nonLocalMaxValue (Mat &amp;gradXY, Mat &amp;theta, Mat &amp;dst) &#123; dst = gradXY.clone(); for (int j = 1; j &lt; gradXY.rows-1; j++) &#123; for (int i = 1; i &lt; gradXY.cols-1; i++) &#123; double t = double(theta.ptr&lt;uchar&gt;(j)[i]); double g = double(dst.ptr&lt;uchar&gt;(j)[i]); if (g == 0.0) &#123; continue; &#125; double g0, g1; if ((t &gt;= -(3*M_PI/8)) &amp;&amp; (t &lt; -(M_PI/8))) &#123; g0 = double(dst.ptr&lt;uchar&gt;(j-1)[i-1]); g1 = double(dst.ptr&lt;uchar&gt;(j+1)[i+1]); &#125; else if ((t &gt;= -(M_PI/8)) &amp;&amp; (t &lt; M_PI/8)) &#123; g0 = double(dst.ptr&lt;uchar&gt;(j)[i-1]); g1 = double(dst.ptr&lt;uchar&gt;(j)[i+1]); &#125; else if ((t &gt;= M_PI/8) &amp;&amp; (t &lt; 3*M_PI/8)) &#123; g0 = double(dst.ptr&lt;uchar&gt;(j-1)[i+1]); g1 = double(dst.ptr&lt;uchar&gt;(j+1)[i-1]); &#125; else &#123; g0 = double(dst.ptr&lt;uchar&gt;(j-1)[i]); g1 = double(dst.ptr&lt;uchar&gt;(j+1)[i]); &#125; if (g &lt;= g0 || g &lt;= g1) &#123; dst.ptr&lt;uchar&gt;(j)[i] = 0.0; &#125; &#125; &#125;&#125; /** å¼±è¾¹ç¼˜ç‚¹è¡¥å……è¿æ¥å¼ºè¾¹ç¼˜ç‚¹ img å¼±è¾¹ç¼˜ç‚¹è¡¥å……è¿æ¥å¼ºè¾¹ç¼˜ç‚¹çš„è¾“å…¥å’Œè¾“å‡ºå›¾åƒ */void doubleThresholdLink (Mat &amp;img) &#123; // å¾ªç¯æ‰¾åˆ°å¼ºè¾¹ç¼˜ç‚¹ï¼ŒæŠŠå…¶é¢†åŸŸå†…çš„å¼±è¾¹ç¼˜ç‚¹å˜ä¸ºå¼ºè¾¹ç¼˜ç‚¹ for (int j = 1; j &lt; img.rows-2; j++) &#123; for (int i = 1; i &lt; img.cols-2; i++) &#123; // å¦‚æœè¯¥ç‚¹æ˜¯å¼ºè¾¹ç¼˜ç‚¹ if (img.ptr&lt;uchar&gt;(j)[i] == 255) &#123; // éå†è¯¥å¼ºè¾¹ç¼˜ç‚¹é¢†åŸŸ for (int m = -1; m &lt; 1; m++) &#123; for (int n = -1; n &lt; 1; n++) &#123; // è¯¥ç‚¹ä¸ºå¼±è¾¹ç¼˜ç‚¹ï¼ˆä¸æ˜¯å¼ºè¾¹ç¼˜ç‚¹ï¼Œä¹Ÿä¸æ˜¯è¢«æŠ‘åˆ¶çš„0ç‚¹ï¼‰ if (img.ptr&lt;uchar&gt;(j+m)[i+n] != 0 &amp;&amp; img.ptr&lt;uchar&gt;(j+m)[i+n] != 255) &#123; img.ptr&lt;uchar&gt;(j+m)[i+n] = 255; //è¯¥å¼±è¾¹ç¼˜ç‚¹è¡¥å……ä¸ºå¼ºè¾¹ç¼˜ç‚¹ &#125; &#125; &#125; &#125; &#125; &#125; for (int j = 0; j &lt; img.rows-1; j++) &#123; for (int i = 0; i &lt; img.cols-1; i++) &#123; // å¦‚æœè¯¥ç‚¹ä¾æ—§æ˜¯å¼±è¾¹ç¼˜ç‚¹ï¼ŒåŠæ­¤ç‚¹æ˜¯å­¤ç«‹è¾¹ç¼˜ç‚¹ if (img.ptr&lt;uchar&gt;(j)[i] != 255 &amp;&amp; img.ptr&lt;uchar&gt;(j)[i] != 255) &#123; img.ptr&lt;uchar&gt;(j)[i] = 0; //è¯¥å­¤ç«‹å¼±è¾¹ç¼˜ç‚¹æŠ‘åˆ¶ &#125; &#125; &#125;&#125; /** ç”¨åŒé˜ˆå€¼ç®—æ³•æ£€æµ‹å’Œè¿æ¥è¾¹ç¼˜ low è¾“å…¥çš„ä½é˜ˆå€¼ high è¾“å…¥çš„é«˜é˜ˆå€¼ img è¾“å…¥çš„åŸå›¾åƒ dst è¾“å‡ºçš„ç”¨åŒé˜ˆå€¼ç®—æ³•æ£€æµ‹å’Œè¿æ¥è¾¹ç¼˜åçš„å›¾åƒ */void doubleThreshold (double low, double high, Mat &amp;img, Mat &amp;dst) &#123; dst = img.clone(); // åŒºåˆ†å‡ºå¼±è¾¹ç¼˜ç‚¹å’Œå¼ºè¾¹ç¼˜ç‚¹ for (int j = 0; j &lt; img.rows-1; j++) &#123; for (int i = 0; i &lt; img.cols-1; i++) &#123; double x = double(dst.ptr&lt;uchar&gt;(j)[i]); // åƒç´ ç‚¹ä¸ºå¼ºè¾¹ç¼˜ç‚¹ï¼Œç½®255 if (x &gt; high) &#123; dst.ptr&lt;uchar&gt;(j)[i] = 255; &#125; // åƒç´ ç‚¹ç½®0ï¼Œè¢«æŠ‘åˆ¶æ‰ else if (x &lt; low) &#123; dst.ptr&lt;uchar&gt;(j)[i] = 0; &#125; &#125; &#125; // å¼±è¾¹ç¼˜ç‚¹è¡¥å……è¿æ¥å¼ºè¾¹ç¼˜ç‚¹ doubleThresholdLink(dst);&#125; int main () &#123; Mat img = imread(\"woman.jpg\", IMREAD_GRAYSCALE); //ä»æ–‡ä»¶ä¸­åŠ è½½ç°åº¦å›¾åƒ // è¯»å–å›¾ç‰‡å¤±è´¥ï¼Œåˆ™åœæ­¢ if (img.empty()) &#123; printf(\"è¯»å–å›¾åƒæ–‡ä»¶å¤±è´¥\"); system(\"pause\"); return 0; &#125; // é«˜æ–¯æ»¤æ³¢ Mat gauss_img; gaussianFilter(img, gauss_img); //é«˜æ–¯æ»¤æ³¢å™¨ // ç”¨ä¸€é˜¶åå¯¼æœ‰é™å·®åˆ†è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ Mat gradXY, theta; getGrandient(gauss_img, gradXY, theta); // å±€éƒ¨éæå¤§å€¼æŠ‘åˆ¶ Mat local_img; nonLocalMaxValue(gradXY, theta, local_img); // ç”¨åŒé˜ˆå€¼ç®—æ³•æ£€æµ‹å’Œè¿æ¥è¾¹ç¼˜ Mat dst; doubleThreshold(40, 80, local_img, dst); // å›¾åƒæ˜¾ç¤º Mat outImg; mergeImg (outImg,img,dst); //å›¾åƒæ‹¼æ¥ namedWindow(\"img\"); imshow(\"img\",outImg);// å›¾åƒæ˜¾ç¤º imwrite(\"cannyç®—æ³•.jpg\", outImg); waitKey(); //ç­‰å¾…é”®å€¼è¾“å…¥ return 0;&#125; Cannyè¾¹ç¼˜æ£€æµ‹çš„å‰åå›¾åƒ Cannyè¾¹ç¼˜æ£€æµ‹ç®—æ³• å‚è€ƒèµ„æºï¼š ã€1ã€‘Setting up OpenCV and C++ development environment in Xcode for Computer Vision projects ã€2ã€‘OpenCV Tutorials ã€3ã€‘OpenCVæ•™ç¨‹","categories":[{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"Canny","slug":"Canny","permalink":"https://gy23333.github.io/tags/Canny/"},{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}]},{"title":"å‘½ä»¤è¡Œæ‰§è¡Œhexo dåï¼Œå‡ºç°é”™è¯¯ERROR Deployer not found: git","slug":"å‘½ä»¤è¡Œæ‰§è¡Œhexo-dåï¼Œå‡ºç°é”™è¯¯ERROR-Deployer-not-found-git","date":"2019-12-16T11:50:26.000Z","updated":"2024-11-11T03:57:58.109Z","comments":true,"path":"2019/12/16/å‘½ä»¤è¡Œæ‰§è¡Œhexo-dåï¼Œå‡ºç°é”™è¯¯ERROR-Deployer-not-found-git/","link":"","permalink":"https://gy23333.github.io/2019/12/16/%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%A7%E8%A1%8Chexo-d%E5%90%8E%EF%BC%8C%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AFERROR-Deployer-not-found-git/","excerpt":"é—®é¢˜å‘½ä»¤è¡Œæ‰§è¡Œhexo dåï¼Œå‡ºç°é”™è¯¯ERROR Deployer not found: git","text":"é—®é¢˜å‘½ä»¤è¡Œæ‰§è¡Œhexo dåï¼Œå‡ºç°é”™è¯¯ERROR Deployer not found: git è§£å†³åŠæ³•å‘½ä»¤è¡Œåœ¨hexoçš„æ ¹ç›®å½•ä½ç½®æ‰§è¡Œ npm install --save hexo-deployer-git","categories":[{"name":"è¸©å‘è®°å½•","slug":"è¸©å‘è®°å½•","permalink":"https://gy23333.github.io/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://gy23333.github.io/tags/hexo/"},{"name":"error","slug":"error","permalink":"https://gy23333.github.io/tags/error/"}]},{"title":"Macæƒé™æ— æ³•ä¿®æ”¹é—®é¢˜è§£å†³åŠæ³•","slug":"Macæƒé™æ— æ³•ä¿®æ”¹é—®é¢˜è§£å†³åŠæ³•","date":"2019-12-16T08:33:33.000Z","updated":"2024-11-11T03:57:58.108Z","comments":true,"path":"2019/12/16/Macæƒé™æ— æ³•ä¿®æ”¹é—®é¢˜è§£å†³åŠæ³•/","link":"","permalink":"https://gy23333.github.io/2019/12/16/Mac%E6%9D%83%E9%99%90%E6%97%A0%E6%B3%95%E4%BF%AE%E6%94%B9%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","excerpt":"Macé‡Œæ–‡ä»¶å¤¹å¿…é¡»ä»¥ç®¡ç†å‘˜èº«ä»½æ‰å¯å†™å…¥ï¼Œstaffåªæœ‰è¯»çš„æƒé™ï¼Œä¸”åœ¨æ–‡ä»¶å¤¹ç®€ä»‹ä¸­ä¿®æ”¹æ˜¾ç¤ºå¼¹çª—â€œæ— æƒé™ä¿®æ”¹â€ã€‚ è‹¹æœå®˜æ–¹è§£å†³åŠæ³•","text":"Macé‡Œæ–‡ä»¶å¤¹å¿…é¡»ä»¥ç®¡ç†å‘˜èº«ä»½æ‰å¯å†™å…¥ï¼Œstaffåªæœ‰è¯»çš„æƒé™ï¼Œä¸”åœ¨æ–‡ä»¶å¤¹ç®€ä»‹ä¸­ä¿®æ”¹æ˜¾ç¤ºå¼¹çª—â€œæ— æƒé™ä¿®æ”¹â€ã€‚ è‹¹æœå®˜æ–¹è§£å†³åŠæ³• è§£å†³åŠæ³•ä¸‹é¢ä»¥æ–‡ä»¶å¤¹postä¸ºä¾‹ï¼Œ æ­¤æ—¶staffä¸ºåªè¯»æƒé™ï¼Œéœ€ä¿®æ”¹ä¸ºè¯»å’Œå†™æƒé™ åœ¨å…±äº«ä¸æƒé™è®¾ç½®ä¸­ç‚¹å‡»â€œåº”ç”¨åˆ°åŒ…å«çš„é¡¹ç›®â€å…ˆåœ¨â€œå…±äº«ä¸æƒé™â€å³ä¸‹è§’çš„åœ°æ–¹è§£é”ï¼Œå†åœ¨è®¾ç½®ä¸­é€‰ä¸­â€œåº”ç”¨åˆ°åŒ…å«çš„é¡¹ç›®â€ï¼Œç­‰å¾…è¿›åº¦æ¡ç»“æŸå³å¯ã€‚ å‘½ä»¤è¡Œæ“ä½œæ‰“å¼€å‘½ä»¤è¡Œï¼Œåœ¨æ ¹ç›®å½•ä¸‹è¾“å…¥ 1diskutil resetUserPermissions &#x2F; &#96;id -u&#96; é‡å¯å‘½ä»¤è¡Œè¿è¡Œç»“æŸåé‡å¯ç”µè„‘ã€‚ ä¿®æ”¹æƒé™é‡å¯åå†æ¬¡æ‰“å¼€è¯¥æ–‡ä»¶å¤¹çš„â€œç®€ä»‹â€ï¼Œå‘ç°æƒé™å¯ä¿®æ”¹äº†ï¼Œæƒé™ä¿®æ”¹å®Œæˆã€‚","categories":[{"name":"è¸©å‘è®°å½•","slug":"è¸©å‘è®°å½•","permalink":"https://gy23333.github.io/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Mac","slug":"Mac","permalink":"https://gy23333.github.io/tags/Mac/"},{"name":"æƒé™","slug":"æƒé™","permalink":"https://gy23333.github.io/tags/%E6%9D%83%E9%99%90/"}]}],"categories":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/categories/DPDK/"},{"name":"C/C++","slug":"C-C","permalink":"https://gy23333.github.io/categories/C-C/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/categories/%E7%AE%97%E6%B3%95/"},{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/categories/Golang/"},{"name":"Linux","slug":"Linux","permalink":"https://gy23333.github.io/categories/Linux/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"Docker","slug":"Docker","permalink":"https://gy23333.github.io/categories/Docker/"},{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://gy23333.github.io/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"},{"name":"è‹±è¯­","slug":"è‹±è¯­","permalink":"https://gy23333.github.io/categories/%E8%8B%B1%E8%AF%AD/"},{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://gy23333.github.io/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"Computer Vision","slug":"Computer-Vision","permalink":"https://gy23333.github.io/categories/Computer-Vision/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"MATLAB","slug":"MATLAB","permalink":"https://gy23333.github.io/categories/MATLAB/"},{"name":"Hexo","slug":"Hexo","permalink":"https://gy23333.github.io/categories/Hexo/"},{"name":"Latex","slug":"Latex","permalink":"https://gy23333.github.io/categories/Latex/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://gy23333.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/categories/C/"},{"name":"è¸©å‘è®°å½•","slug":"è¸©å‘è®°å½•","permalink":"https://gy23333.github.io/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"},{"name":"æ±‡ç¼–","slug":"æ±‡ç¼–","permalink":"https://gy23333.github.io/categories/%E6%B1%87%E7%BC%96/"},{"name":"C","slug":"C","permalink":"https://gy23333.github.io/categories/C/"}],"tags":[{"name":"DPDK","slug":"DPDK","permalink":"https://gy23333.github.io/tags/DPDK/"},{"name":"Linux","slug":"Linux","permalink":"https://gy23333.github.io/tags/Linux/"},{"name":"C/C++","slug":"C-C","permalink":"https://gy23333.github.io/tags/C-C/"},{"name":"Meson","slug":"Meson","permalink":"https://gy23333.github.io/tags/Meson/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://gy23333.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"å †","slug":"å †","permalink":"https://gy23333.github.io/tags/%E5%A0%86/"},{"name":"Golang","slug":"Golang","permalink":"https://gy23333.github.io/tags/Golang/"},{"name":"logrotate","slug":"logrotate","permalink":"https://gy23333.github.io/tags/logrotate/"},{"name":"FRRouting","slug":"FRRouting","permalink":"https://gy23333.github.io/tags/FRRouting/"},{"name":"BIRD","slug":"BIRD","permalink":"https://gy23333.github.io/tags/BIRD/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://gy23333.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"Load Balancing","slug":"Load-Balancing","permalink":"https://gy23333.github.io/tags/Load-Balancing/"},{"name":"è·¯ç”±åè®®","slug":"è·¯ç”±åè®®","permalink":"https://gy23333.github.io/tags/%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/"},{"name":"BGP","slug":"BGP","permalink":"https://gy23333.github.io/tags/BGP/"},{"name":"systemd","slug":"systemd","permalink":"https://gy23333.github.io/tags/systemd/"},{"name":"Docker","slug":"Docker","permalink":"https://gy23333.github.io/tags/Docker/"},{"name":"OSPF","slug":"OSPF","permalink":"https://gy23333.github.io/tags/OSPF/"},{"name":"å­¦ä¹ è·¯çº¿","slug":"å­¦ä¹ è·¯çº¿","permalink":"https://gy23333.github.io/tags/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"},{"name":"TRex","slug":"TRex","permalink":"https://gy23333.github.io/tags/TRex/"},{"name":"gRPC","slug":"gRPC","permalink":"https://gy23333.github.io/tags/gRPC/"},{"name":"git","slug":"git","permalink":"https://gy23333.github.io/tags/git/"},{"name":"python","slug":"python","permalink":"https://gy23333.github.io/tags/python/"},{"name":"GDB","slug":"GDB","permalink":"https://gy23333.github.io/tags/GDB/"},{"name":"DNS","slug":"DNS","permalink":"https://gy23333.github.io/tags/DNS/"},{"name":"BIND","slug":"BIND","permalink":"https://gy23333.github.io/tags/BIND/"},{"name":"è¯­è¨€åŸºæœ¬è¯­æ³•","slug":"è¯­è¨€åŸºæœ¬è¯­æ³•","permalink":"https://gy23333.github.io/tags/%E8%AF%AD%E8%A8%80%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"},{"name":"æ’åº","slug":"æ’åº","permalink":"https://gy23333.github.io/tags/%E6%8E%92%E5%BA%8F/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"https://gy23333.github.io/tags/%E6%A0%88/"},{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://gy23333.github.io/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"},{"name":"VSCode","slug":"VSCode","permalink":"https://gy23333.github.io/tags/VSCode/"},{"name":"è¡¨è¾¾å¼æ±‚å€¼","slug":"è¡¨è¾¾å¼æ±‚å€¼","permalink":"https://gy23333.github.io/tags/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC/"},{"name":"æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰","slug":"æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰","permalink":"https://gy23333.github.io/tags/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%EF%BC%88DFS%EF%BC%89/"},{"name":"å›¾","slug":"å›¾","permalink":"https://gy23333.github.io/tags/%E5%9B%BE/"},{"name":"åŠ¨æ€è§„åˆ’","slug":"åŠ¨æ€è§„åˆ’","permalink":"https://gy23333.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"},{"name":"Makefile","slug":"Makefile","permalink":"https://gy23333.github.io/tags/Makefile/"},{"name":"Coach-Shane","slug":"Coach-Shane","permalink":"https://gy23333.github.io/tags/Coach-Shane/"},{"name":"HTML","slug":"HTML","permalink":"https://gy23333.github.io/tags/HTML/"},{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://gy23333.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"æœ‰åºæœç´¢","slug":"æœ‰åºæœç´¢","permalink":"https://gy23333.github.io/tags/%E6%9C%89%E5%BA%8F%E6%90%9C%E7%B4%A2/"},{"name":"å…«æ•°ç é—®é¢˜","slug":"å…«æ•°ç é—®é¢˜","permalink":"https://gy23333.github.io/tags/%E5%85%AB%E6%95%B0%E7%A0%81%E9%97%AE%E9%A2%98/"},{"name":"é—®é¢˜å½’çº¦","slug":"é—®é¢˜å½’çº¦","permalink":"https://gy23333.github.io/tags/%E9%97%AE%E9%A2%98%E5%BD%92%E7%BA%A6/"},{"name":"æ¢µå¡”é—®é¢˜","slug":"æ¢µå¡”é—®é¢˜","permalink":"https://gy23333.github.io/tags/%E6%A2%B5%E5%A1%94%E9%97%AE%E9%A2%98/"},{"name":"ç‰¹å¾æè¿°","slug":"ç‰¹å¾æè¿°","permalink":"https://gy23333.github.io/tags/%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0/"},{"name":"SURFç®—å­","slug":"SURFç®—å­","permalink":"https://gy23333.github.io/tags/SURF%E7%AE%97%E5%AD%90/"},{"name":"SIFTç®—å­","slug":"SIFTç®—å­","permalink":"https://gy23333.github.io/tags/SIFT%E7%AE%97%E5%AD%90/"},{"name":"å‚…ç«‹å¶å˜æ¢","slug":"å‚…ç«‹å¶å˜æ¢","permalink":"https://gy23333.github.io/tags/%E5%82%85%E7%AB%8B%E5%8F%B6%E5%8F%98%E6%8D%A2/"},{"name":"é«˜æ–¯é‡‘å­—å¡”","slug":"é«˜æ–¯é‡‘å­—å¡”","permalink":"https://gy23333.github.io/tags/%E9%AB%98%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94/"},{"name":"æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”","slug":"æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”","permalink":"https://gy23333.github.io/tags/%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94/"},{"name":"å°æ³¢é‡‘å­—å¡”","slug":"å°æ³¢é‡‘å­—å¡”","permalink":"https://gy23333.github.io/tags/%E5%B0%8F%E6%B3%A2%E9%87%91%E5%AD%97%E5%A1%94/"},{"name":"C++","slug":"C","permalink":"https://gy23333.github.io/tags/C/"},{"name":"OpenCV","slug":"OpenCV","permalink":"https://gy23333.github.io/tags/OpenCV/"},{"name":"Xcode","slug":"Xcode","permalink":"https://gy23333.github.io/tags/Xcode/"},{"name":"Mac","slug":"Mac","permalink":"https://gy23333.github.io/tags/Mac/"},{"name":"æ‘„åƒå¤´æƒé™","slug":"æ‘„åƒå¤´æƒé™","permalink":"https://gy23333.github.io/tags/%E6%91%84%E5%83%8F%E5%A4%B4%E6%9D%83%E9%99%90/"},{"name":"MATLAB","slug":"MATLAB","permalink":"https://gy23333.github.io/tags/MATLAB/"},{"name":"é«˜æ–¯æ»¤æ³¢","slug":"é«˜æ–¯æ»¤æ³¢","permalink":"https://gy23333.github.io/tags/%E9%AB%98%E6%96%AF%E6%BB%A4%E6%B3%A2/"},{"name":"å‡å€¼æ»¤æ³¢","slug":"å‡å€¼æ»¤æ³¢","permalink":"https://gy23333.github.io/tags/%E5%9D%87%E5%80%BC%E6%BB%A4%E6%B3%A2/"},{"name":"ä¸­å€¼æ»¤æ³¢","slug":"ä¸­å€¼æ»¤æ³¢","permalink":"https://gy23333.github.io/tags/%E4%B8%AD%E5%80%BC%E6%BB%A4%E6%B3%A2/"},{"name":"Hexo","slug":"Hexo","permalink":"https://gy23333.github.io/tags/Hexo/"},{"name":"blog","slug":"blog","permalink":"https://gy23333.github.io/tags/blog/"},{"name":"å…¥é—¨","slug":"å…¥é—¨","permalink":"https://gy23333.github.io/tags/%E5%85%A5%E9%97%A8/"},{"name":"Latex","slug":"Latex","permalink":"https://gy23333.github.io/tags/Latex/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://gy23333.github.io/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"äº‘å¼€å‘","slug":"äº‘å¼€å‘","permalink":"https://gy23333.github.io/tags/%E4%BA%91%E5%BC%80%E5%8F%91/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"https://gy23333.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"æ•°å­¦å½¢æ€å­¦","slug":"æ•°å­¦å½¢æ€å­¦","permalink":"https://gy23333.github.io/tags/%E6%95%B0%E5%AD%A6%E5%BD%A2%E6%80%81%E5%AD%A6/"},{"name":"åŒºåŸŸåˆ†å‰²","slug":"åŒºåŸŸåˆ†å‰²","permalink":"https://gy23333.github.io/tags/%E5%8C%BA%E5%9F%9F%E5%88%86%E5%89%B2/"},{"name":"åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶","slug":"åŒºåŸŸåˆ†è£‚ä¸åˆå¹¶","permalink":"https://gy23333.github.io/tags/%E5%8C%BA%E5%9F%9F%E5%88%86%E8%A3%82%E4%B8%8E%E5%90%88%E5%B9%B6/"},{"name":"åŒºåŸŸç”Ÿé•¿","slug":"åŒºåŸŸç”Ÿé•¿","permalink":"https://gy23333.github.io/tags/%E5%8C%BA%E5%9F%9F%E7%94%9F%E9%95%BF/"},{"name":"å¤§æ´¥æ³•","slug":"å¤§æ´¥æ³•","permalink":"https://gy23333.github.io/tags/%E5%A4%A7%E6%B4%A5%E6%B3%95/"},{"name":"ç›´æ–¹å›¾å‡è¡¡åŒ–","slug":"ç›´æ–¹å›¾å‡è¡¡åŒ–","permalink":"https://gy23333.github.io/tags/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96/"},{"name":"GUI","slug":"GUI","permalink":"https://gy23333.github.io/tags/GUI/"},{"name":"Wi-Fiè¿æ¥","slug":"Wi-Fiè¿æ¥","permalink":"https://gy23333.github.io/tags/Wi-Fi%E8%BF%9E%E6%8E%A5/"},{"name":"hough","slug":"hough","permalink":"https://gy23333.github.io/tags/hough/"},{"name":"æ±‡ç¼–","slug":"æ±‡ç¼–","permalink":"https://gy23333.github.io/tags/%E6%B1%87%E7%BC%96/"},{"name":"åç§‘è‡ªåŠ¨åŒ–","slug":"åç§‘è‡ªåŠ¨åŒ–","permalink":"https://gy23333.github.io/tags/%E5%8D%8E%E7%A7%91%E8%87%AA%E5%8A%A8%E5%8C%96/"},{"name":"Cè¯­è¨€è¯¾ç¨‹è®¾è®¡","slug":"Cè¯­è¨€è¯¾ç¨‹è®¾è®¡","permalink":"https://gy23333.github.io/tags/C%E8%AF%AD%E8%A8%80%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/"},{"name":"BorlandC","slug":"BorlandC","permalink":"https://gy23333.github.io/tags/BorlandC/"},{"name":"Canny","slug":"Canny","permalink":"https://gy23333.github.io/tags/Canny/"},{"name":"hexo","slug":"hexo","permalink":"https://gy23333.github.io/tags/hexo/"},{"name":"error","slug":"error","permalink":"https://gy23333.github.io/tags/error/"},{"name":"æƒé™","slug":"æƒé™","permalink":"https://gy23333.github.io/tags/%E6%9D%83%E9%99%90/"}]}